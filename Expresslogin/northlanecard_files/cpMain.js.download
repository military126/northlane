function nativeHook(){}define("cp.common.cpConstants",[],function(){return function(e){e.constants={APP_NAME:"cpMobile",LANGUAGE_EN:"en_US",LANGUAGE_SP:"sp_US",LANGUAGE_FR:"fr_CA",DEVICE_IPHONE:"ApplePay",DEVICE_ANDROID:"AndroidPay",DEVICE_SAMSUNG:"SamsungPay",MFA_CHALLENGE_COLLECT:"CC",MFA_CHALLENGE_QUESTION:"CQ",MFA_ONETIMEPASSWORD:"OTP",MFA_NONE:"NONE",MFA_VALIDATEACCESSCODE:"validateAccessCode",MFA_RETRIEVECHALLENGEQUESTIONS:"retrieveChallengeQuestions",MFA_CHALLENGECOLLECT:"challengeCollect",MFA_CHALLENGEQUESTION:"challengeQuestion",MFA_UPDATEDELIVARYMETHOD:"updateDelivaryMethod",PRE_LOGIN:"prelogin",POST_LOGIN:"postlogin",NONE:"NONE",LOGIN:"Login",PAYMENTCLAIM:"paymentclaim",PAYMENTCLAIM_REGISTER:"CCRegister",PAYMENTLOGIN:"paymentlogin",CLAIMCODE_LOGIN:"CCLogin",PINRESET:"pinreset",EXPRESSLOGIN:"expresslogin",REGISTER:"RegisterCard",DASHBOARD:"dashboard",EDITBANK:"editBank",ADDBANK:"addBank",DELETEBANK:"deleteBank",RECURRING_WITHDRAWALSETTINGS:"recurringWithdrawalSettings",TAMPERED_RESPONSE_CODE:"5",CHOICE_VIRTUAL:"Virtual",CHOICE_ACH:"ACH",CHOICE_CARD:"Card",CHOICE_CHEQUE:"Check",CHOICE_INTERNATIONAL_BANKTRANSFER:"internationalBankTransfer",INTERNATIONAL_BANKTRANSFER_CHOICEID:"5",INT_BANKTRANSFER_RETURNINGUSER:"intBankTransferRetUser",REGISTER_FXTRANSFER:"registerFXTransfer",PAYMENT_SELECTED_DELIVARY_CHOICE:"selectedDeliveryChoice",PAYMENT_DELIVARY_CHOICE:"delivaryChoice",SELECT_PC:"selectPC",PAYMENT_CHOICE_USER_CREATION:"CreateUser",MOBILE_AUTHENTICATION:"mobileLoginAuthentication",EXPLOGIN_VALIDATESECURITYCODE:"expressLoginValidateSecurityCode",EXPLOGIN_VALIDATEPOSTALCODE:"expressLoginValidatePostalCode",VIRTUALEXPRESS_MOBILE_LOGIN:"virtualExpressMobileLogin",VIRTUAL_EXPRESS_SUCCESS:"VIRTUAL_EXPRESS_SUCCESS",RETRIEVE_PROFILE:"retrieveProfile",UPDATE_PROFILE:"updateProfile",VALIDATE_PASSWORD:"validatePassword",RETRIEVE_BT_SETTINGS:"retrieveBTSettings",EDIT_BANK_DETAILS:"editBankDetails",EDIT_BANKINFO_MFA:"editBankDetailsMFAStatus",CONFIRM_OT:"confirmOT",CHANGE_RECURRING_WITHDRAWAL:"changeRecurringWithdrawal",SCHEDULE:"s",CANCEL:"c",VALIDATE_AMOUNT_OT:"validateAmountOT",ADD:"Add",UPDATE:"Update",DELETE:"Delete",CHECKING:"C",SAVINGS:"S",EDIT:"Edit",CHECKING_TEXT:"Checking",SAVING_TEXT:"Savings",RETRIEVE_TRANSACTION:"retrieveTransactionDetails",ACCOUNT_DETAILS:"cpAccountDetailsView",RETRIEVE_ATMLOCATOR:"retreiveATMLocator",RETRIEVE_CONTACTINFO:"retreiveContactInfo",RETRIEVE_FEES:"retreiveFees",RETRIEVE_FAQS:"retreiveFAQ",VALIDATE_CAPTCHA_USERDETAILS:"validateCaptchaAndUserDetails",RETRIEVE_CAPTCHA:"getCaptcha",RETRIEVE_CAPTCHA_LOGIN:"getCaptchaLogin",RETRIEVE_CAPTCHA_PC_LOGIN:"getCaptchaPCLogin",VALIDATE_CAPTCHA_PASSWORDDETAILS:"validateCaptchaAndPasswordDetails",SUBMIT_PIN:"submitNewPIN",RETRIEVE_PINSETTINGS:"retrievePINSettings",VALIDATE_CARDNUMBER_PINRESET:"validateCardNumberPINReset",RETRIEVE_MOBILECARRIERS:"retrieveMobileCarriers",ACTIVATE_ALERTS:"activateAlerts",CONFIRM_PROFILE:"confirmProfile",VALIDATE_CARD_REGISTRATION:"validateRegistrationCardDetails",SAVE_PROFILE:"saveProfile",ACKNOWLEDGE_TERMS:"acknowledgeTermsAndConditions",RETRIEVE_TERMS:"retreiveTermsAndConditions",LOGOUT_MOBILEUSER:"logoutMobileUser",RETRIEVE_LANGUAGE_MAPPING:"retrieveLanguageMapping",VALIDATE_CLAIM_CODE:"validateClaimCode",AUTHENTICATE_PAYMENTCLAIM:"authenticatePaymentClaim",REDEEM_CLAIM:"redeemClaim",PAYMENTCLAIM_ACTIVATION:"claimActivation",PAYMENTCLAIM_CONFIRMATION:"claimConfirmation",REQUEST_PLASTIC_SETTINGS:"requestPlasticSettings",REQUEST_CHECK_ELIGIBILITY:"requestChequeEligibility",ORDER_CARD:"orderCard",CHECK_REQUEST:"sendCheque",RETRIEVE_DASHBOARD_DETAILS:"retrieveDashboardSettings",RETRIEVE_SHOPDETAILS:"retrieveShopDetails",RETRIEVE_ADD_FUND_DETAILS:"retrieveAddFundsDetails",SAVE_ADD_FUND:"addFunds",CONFIRM_FUND:"confirmFunds",RETRIVE_TIPS:"retrieveTips",REGISTER_TIPS:"tipsPage",SSO_LOGIN:"ssoLogin",PC_LOGIN:"PCLogin",PC_FIRST_TIME_USER:"firstTimeUser",PC_RETURNING_USER:"returningUser",PC_LANDING:"PCLandingPage",VE_LANDING:"VELandingPage",VE_LOUGOUT:"VElogout",PC_AUTHENTICATEUSER:"PCAuthenticateUser",RETRIEVE_SETTINGS:"retrieveSettings",PC_RETERIVE_CHOICE:"PCRetrieveChoice",UPDATE_PC:"UpdatePC",ADD_PC:"AddPC",PC_REQUEST_CHECK_ADD:"PCRequestChequeAdd",PC_REQUEST_CHECK_UPDATE:"PCRequestChequeUpdate",PC_REQUEST_PLASTIC_ADD:"PCRequestPlasticAdd",PC_REQUEST_PLASTIC:"PCRequestPlastic",PC_REQUEST_PLASTIC_UPDATE:"PCRequestPlasticUpdate",ACH:"ACCESSFUND_ACH",PC_BANK:"PCBank",PAYMENT_CHOICE_REGESTER_VC:"PCRegisterVC",PC_ADD_BANK:"PCAddBank",PC_UPDATE_BANK:"PCUpdateBank",REQUEST_PLASTIC:"PCRequestPlastic",REQUEST_PLASTIC_NEW_PIN:"requestPlasticNewPIN",PC_RETREIVE_SETTINGS:"retreiveSettings",PC_REGISTER_ACH:"PCRegisterACH",PC_REGISTER_CHEQUE:"PCRegisterCheque",PC_UPDATE_PROFILE:"PCUpdateProfile",VE_UPDATE_PROFILE:"VEUpdateProfile",MOBILE_WALLET_SETUP:"mobileWalletSetup",PARTIALLY_REGISTERED_RESPONSE:"6",MENU:"menu",NO_PHONE_RESPONSE:"4",CREATE_USER:"CreateUser",MOBILE_WALLET_AUDIT:"mobileWalletAudit",LOGIN_MFA:"loginMFA",CLAIM_AUTHENTICATION:"claimAuthentication",CLAIM_LOGIN:"claimLogin",TERMS_CONDITONS:"termsAndCondition",EDIT_ACH:"editACH",EDIT_ACH_RETURNING:"editACHReturning",BANK_NOTINITIAL_CHOICE:"bankTransferNotInitialChoice",MB_BANK:"MB",SUNRISE_BANK:"Sunrise",CITI_BANK:"Citi",GLOBAL_DEPOSITS_HOME:"getGDHomePage",GLOBAL_RECURRING:"getRecurringSettings",GLOBAL_RECURRING_EDIT:"editRecurringSettings",GLOBAL_RETRIEVE_BANK:"getGDBanks",GLOBAL_DELETE_BANK:"deleteGDBank",CURRENT_FX_RATE:"currentFXRates",FXRATE_SOURCE_CURRENCY_CODE:"USD",FXRATE_DEFAULT_COUNTRY_VALUE:"Country",FXRATE_DEFAULT_CURRENCY_VALUE:"Currency",GLOBAL_OTT_USER_BANKS:"getOTTHomePage",GLOBAL_OTT_CONFIRM:"reviewOTTTransfer",GLOBAL_OTT_SUCCESS:"confirmOTTTransfer",GLOBAL_OTT_SEND_NOTIFICATION:"sendOTTNotification",GLOBAL_PREPAID:"Prepaid Account",GLOBAL_HOME_RECURRING:"transferHistory",GLOBAL_BANK_RECURRING:"bankDetails",GLOBAL_OTT_HOME:"oneTimetransferHome",GLOBAL_FX_RECURRING:"fxRate",GLOBAL_ADD_BANK:"addGDBank",GLOBAL_ADD_BANK_COUNTRIES:"getCountries",GLOBAL_ADD_BANK_CURRENCIES:"getCurrencies",GLOBAL_COUNTRY_FIELDS:"getCountryFields",GLOBAL_ADD_BANK_CONFIRM:"confirm",GLOBAL_ADD_BANK_RECURRING:"recurring",GLOBAL_OTT_CANCEL:"reviewCancelTransfer",GLOBAL_OTT_CANCEL_CONFIRM:"confirmCancelTransfer",GLOBAL_DEFAULT_PAYMENT_VALUE:"Payment Methods",GLOBAL_DEFAULT_CURRENCY_VALUE:"Payment Currency",GLOBAL_TRANSFERS_HOME_DEFAULT_TYPE:"default",GLOBAL_TRANSFERS_HOME_VIEW_MORE:"viewMore",GLOBAL_SELECTED_BANK_DETAILS_TYPE:"getSelectedBankDetails",GLOBAL_RECURRING_DELETE_BANK:"deleteBank",GLOBAL_EDIT_LOAD_DETAILS:"loadBankDetails",GLOBAL_EDIT_BANK:"editGDBank",GLOBAL_PAYMENT_METHOD:"getPaymentMethods",CURRENT_FX_RATE_GET_FXRATE:"getRates",GLOBAL_MFA:"getMFA",GLOBAL_SAVE_ADD_BANK:"saveAddBank",GLOBAL_SAVE_EDIT_BANK:"saveEditBank",GLOBAL_INITIATE_DELETE:"initiateDelete",GLOBAL_CANCEL_DELETE:"cancelDelete",CHECK_CARD_ACTIVATION_STATUS:"checkCardActivationStatus",CARD_ACTIVATION:"cardActivation",CARD_AUTHENTICATION:"cardAuthentication",RETRIEVE_CARD_AUTH_SETTINGS:"retrieveCardAuthSettings",CARD_ACTIVATION_SUCCESS:"cardActivationSuccess",SUCCESS:"success",VALIDATE_CARD_AUTH_INFO:"validateCardAuthInfo",CARD_ACTIVATED:"cardActivated",CARD_PIN_SETUP_SUCCESS:"cardPinSetupSuccess",SUBMIT_ACTIVATION_PIN:"submitActivationPin",CHECK_CARD_REGISTRATION_STATUS:"checkCardRegistrationStatus",REGISTER_ACTIVATED_CARD:"registerActivatedCard",CHECK_ACTIVATION_USER_PIN_STATUS:"checkActivationUserPinStatus",CARD_ACTIVATION_ORIGIN:"cardActivationOrigin",PREMIUM_FX:"premiumFX",FORGOT_PASSWORD_DIRECT:"forgotPasswordDirect",STANDARD_ACH:"Standard",SAME_DAY_ACH:"Express ACH"}}}),define("cp.models.cpSSOLogin",[],function(){return function(e){e.models.cpSSOLogin=CT.Model.extend({initialize:function(){this.triggerSSO()},defaults:{},setDefaults:function(){this.clear().set(this.defaults)},triggerSSO:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ssoSuccessHandler,this.ssoErrorHandler,e.localURLs.SSO_LOGIN,{},this);else{callDevice();var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.SSO_LOGIN,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.rsaToken=$("#RSADeviceFso").val(),n.data.devicePrint=$("#devicePrintId").val(),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.ssoSuccessHandler,this.ssoErrorHandler,e.localURLs.SSO_LOGIN,{},this)}},ssoSuccessHandler:function(t){if(t.successResponse)if(t.successResponse.registrationFlags){e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),e.data.cpRegistrationInfo||(e.data.cpRegistrationInfo=new e.models.cpRegistrationInfo),e.data.cpRegistrationConfiguration.setResponse(t.successResponse);var n={};n.username=t.successResponse.userName?t.successResponse.userName:"",n.address=t.successResponse.address?t.successResponse.address:{},n.emailID=t.successResponse.emailAddress?t.successResponse.emailAddress:"",n.phoneDetails=t.successResponse.phoneDetails?t.successResponse.phoneDetails:{},e.data.cpRegistrationInfo.setUserDetails(n),e.data.cpSettings.set("editContact",t.successResponse.registrationFlags.editContact?t.successResponse.registrationFlags.editContact:"N");var r=t.successResponse.customBranding;this.trigger("cpSSOSuccess",r,e.constants.REGISTER)}else{e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var i=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(i,t)}else this.ssoErrorHandler(t)},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:e.data.cpUserInfo.setLastlogin(n.successResponse),e.data.cpSettings.setTermsAndConditions(n.successResponse),e.data.cpSettings.setEditContact(n.successResponse),e.data.cpSettings.setErrorURL(n.successResponse);var r=n.successResponse.customBranding;PAYMENT_CHOICE=="Y"&&n.successResponse.returning==="Y"?this.trigger("cpSSOSuccess",r,e.constants.MFA_NONE,e.constants.PC_LOGIN):PAYMENT_CHOICE=="Y"&&n.successResponse.returning==="N"?this.trigger("cpSSOSuccess",r,e.constants.MFA_NONE,e.constants.ADD_PC):this.trigger("cpSSOSuccess",r,e.constants.MFA_NONE);break;case e.constants.MFA_ONETIMEPASSWORD:PAYMENT_CHOICE=="Y"&&n.successResponse.returning==="Y"?this.trigger("cpSSOSuccess",r,e.constants.MFA_ONETIMEPASSWORD,e.constants.PC_LOGIN):PAYMENT_CHOICE=="Y"&&n.successResponse.returning==="N"?this.trigger("cpSSOSuccess",r,e.constants.MFA_ONETIMEPASSWORD,e.constants.ADD_PC):this.trigger("cpSSOSuccess",r,e.constants.MFA_ONETIMEPASSWORD);break;case e.constants.MFA_CHALLENGE_COLLECT:this.trigger("cpSSOSuccess",r,e.constants.MFA_CHALLENGE_COLLECT);break;case e.constants.MFA_CHALLENGE_QUESTION:this.trigger("cpSSOSuccess",r,e.constants.MFA_CHALLENGE_QUESTION);break;default:}},ssoErrorHandler:function(t){if(t.errorResponse.errorURL)window.location.href=t.errorResponse.errorURL?t.errorResponse.errorURL:"";else if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpBaseView",[],function(){return function(e){e.views.cpBaseView=CT.View.extend({initialize:function(){this.setURLs(),e.root.utils.getMultilanguageMapping(e,this);var t=this;isIEBrowser()?window.onbeforeunload=function(t){var t=t||window.event,n=e.data.cpLanguageMapping.getLabelForKey("cp.common.backButtonPress");return t&&(t.returnValue=n),n}:e.root.utils.getMobileOperatingSystem()==="iOS"?window.history&&window.history.pushState&&(window.history.pushState(null,"","#st1"),window.history.pushState(null,"","#st2"),$(window).on("popstate",function(){var t=location.hash;if(t=="#st1"){var n=e.data.cpLanguageMapping.getLabelForKey("cp.common.backButtonPress");confirm(n)==1?window.history.go(-2):window.history.forward()}})):window.onbeforeunload=function(t){var t=t||window.event,n=e.data.cpLanguageMapping.getLabelForKey("cp.common.backButtonPress");return t&&(t.returnValue=n),""},$(window).on("resize",function(){setTimeout(function(){$("body").addClass("webkitForceHardwareAcceleration").removeClass("webkitForceHardwareAcceleration")},10)}),this.getGeoLocation(),navigator.cookieEnabled||e.root.common.Alertservice.showAlert("Cookies are not enabled.Please enable cookies in browser settings"),this.listenTODOMEvents()},listenTODOMEvents:function(){var e=new MutationObserver(function(e){$("input").attr("autocomplete","off")}),t={attributes:!1,childList:!0,characterData:!1,subtree:!0},n=document.body;e.observe(n,t)},getGeoLocation:function(){e.data.cpGeoLocationHandler||(e.data.cpGeoLocationHandler=new e.models.cpGeoLocationServices),e.data.cpGeoLocationHandler.getGeoLocation()},render:function(){this.$el.append("<div id='main-container'></div>");if(SSO==="Y"&&PAYMENT_CHOICE==="Y")e.data.cpSSOLogin||(e.data.cpSSOLogin=new e.models.cpSSOLogin,this.stopListening(e.data.cpSSOLogin,"cpSSOSuccess"),this.listenTo(e.data.cpSSOLogin,"cpSSOSuccess",this.loadMenu));else if(SSO==="Y")e.data.cpSSOLogin||(e.data.cpSSOLogin=new e.models.cpSSOLogin,this.stopListening(e.data.cpSSOLogin,"cpSSOSuccess"),this.listenTo(e.data.cpSSOLogin,"cpSSOSuccess",this.loadMenu));else if(PAYMENT_CHOICE==="Y")var t=new e.views.cpPaymentHubBaseView({el:"#main-container"});else if(CARD_ACTIVATION==="Y"){var t=new e.views.cpLoginView({el:"#main-container"});t.$el.hide(),setTimeout(function(){t.presentModalView(e.views.cpCardActivationLandingPageView,{},!1,t.modalDismissed)},300)}else if(FORGOT_PASSWORD_DIRECT==="Y"){var t=new e.views.cpLoginView({el:"#main-container"});t.$el.hide(),setTimeout(function(){t.presentModalView(e.views.cpForgotPasswordView,{},!1,t.modalDismissed)},300)}else if(CLAIMCODE&&CLAIMCODE!==""){e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),e.data.cpPaymentClaim.set("code",CLAIMCODE);var t=new e.views.cpLoginView({el:"#main-container",type:"claimcode"});t.$el.hide(),setTimeout(function(){t.presentModalView(e.views.cpPaymentClaimView,{},!1,t.modalDismissed)},300)}else new e.views.cpLoginView({el:"#main-container"});e.root.utils.getMobileOperatingSystem()!=="Android"?$("#cp-container").addClass("cp-overflow-x-hidden"):$("body").addClass("cp-overflow-x-hidden"),e.root.utils.updateLanguageLabels(e,this)},languageMappingSuccessHandler:function(t){t.successResponse?(e.data.cpLanguageMapping.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&(this.render(),this.languageErrorhandler(t))},languageErrorhandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},setURLs:function(){e.redirectURLs={ATM_LOCATOR:"http://citiprepaid.geoserve.com/scripts/esrimap.dll?Name=L&Com=fo&Db=DLRCiti1m&Ds=&Dsource=380",NEW_REGISTER_EN:$(location).attr("origin")+"/register/card/display.do?oprequestid=&bzoffset=300",NEW_REGISTER_SP:$(location).attr("origin")+"/register/card/display.do?oprequestid=&bzoffset=300&locale=sp_US",NEW_REGISTER_FR:$(location).attr("origin")+"/register/card/display.do?oprequestid=&bzoffset=300&locale=fr_CA",FULL_DESKTOP_EN:$(location).attr("origin")+"/defaultlogin.do?locale=en_US",FULL_DESKTOP_SP:$(location).attr("origin")+"/defaultlogin.do?locale=sp_US",FULL_DESKTOP_FR:$(location).attr("origin")+"/defaultlogin.do?locale=fr_CA",TC_LOGIN_EN:CP_CONTENT_BOX+"/op/program/prelogin_terms_en_US.html",TC_LOGIN_SP:CP_CONTENT_BOX+"/op/program/prelogin_terms_sp_US.html",TC_LOGIN_FR:CP_CONTENT_BOX+"/op/program/prelogin_terms_fr_CA.html",PRIVACY_EN_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_cookies_en_US.html",PRIVACY_SP_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_cookies_sp_US.html",PRIVACY_FR_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_cookies_fr_CA.html",PRIVACY_EN_POSTLOGIN:CP_CONTENT_BOX+"/op/program/privacy_en_US.html",PRIVACY_SP_POSTLOGIN:CP_CONTENT_BOX+"/op/program/privacy_sp_US.html",PRIVACY_FR_POSTLOGIN:CP_CONTENT_BOX+"/op/program/privacy_fr_CA.html",PRIVACY_SUNRISE_EN_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_sunrise_en_US.html",PRIVACY_SUNRISE_SP_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_sunrise_sp_US.html",PRIVACY_SUNRISE_FR_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_sunrise_fr_CA.html",PRIVACY_MB_EN_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_mb_en_US.html",PRIVACY_MB_SP_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_mb_sp_US.html",PRIVACY_MB_FR_LOGIN:CP_CONTENT_BOX+"/op/program/privacy_mb_fr_CA.html",PRIVACY_PEOPLES_EN_LOGIN:"http://www.peoplestrust.com/en/legal/privacy-security/privacy/",PRIVACY_PEOPLES_SP_LOGIN:"http://www.peoplestrust.com/en/legal/privacy-security/privacy/",PRIVACY_PEOPLES_FR_LOGIN:"http://www.peoplestrust.com/en/legal/privacy-security/privacy/",SECURITY_CENTER:"http://www.corp.prepaid.citi.com/security/"},CUSTOM_URL&&CUSTOM_URL!==""&&(e.redirectURLs.FULL_DESKTOP_EN=$(location).attr("origin")+"/defaultlogin.do?locale=en_US&maffiliate="+CUSTOM_URL,e.redirectURLs.FULL_DESKTOP_SP=$(location).attr("origin")+"/defaultlogin.do?locale=sp_US&maffiliate="+CUSTOM_URL,e.redirectURLs.FULL_DESKTOP_FR=$(location).attr("origin")+"/defaultlogin.do?locale=fr_CA&maffiliate="+CUSTOM_URL);var t=".";cpEnv_Web.contentBox==="."?t="./client":t=cpEnv_Web.contentBox,e.localURLs={ATMLOCATOR_JSON:t+"/data/mockJSON/cpATMLocator.json",DISCLOSUREFEE_JSON:t+"//data/mockJSON/cpDisclosuresFees.json",FAQ_JSON:t+"/data/mockJSON/cpFAQ.json",CONTACT_US_JSON:t+"/data/mockJSON/cpContactUs.json",FORGOTUSERNAME_JSON:t+"/data/mockJSON/cpForgotUsername.json",FORGOTPASSWORD_JSON:t+"/data/mockJSON/cpForgotPassword.json",CAPTCHAIMAGE_JSON:t+"/data/mockJSON/cpCaptchaImage.json",HUBLANGUAGE_JSON:t+"/data/mockJSON/cpHubLanguage.json",LANGUAGE_EN_JSON:t+"/data/mockJSON/cpLanguageMapping.json",LANGUAGE_FR_JSON:t+"/data/mockJSON/cpLanguageMapping_fr.json",LANGUAGE_SP_JSON:t+"/data/mockJSON/cpLanguageMapping_sp.json",LOGIN_RESPONSE_JSON:t+"/data/mockJSON/cpLoginResponse.json",TERMSCONDITIONS_JSON:t+"/data/mockJSON/cpTermsAndConditions.json",TRANSACTIONDETAILS_JSON:t+"/data/mockJSON/cpTransactionDetails.json",UPDATETRANSACTIONDETAILS_JSON:t+"/data/mockJSON/updateTransactionDetails.json",VALIDATEPOSTALCODE_JSON:t+"/data/mockJSON/cpValidatePostalCode.json",VALIDATESECURITYCODE_JSON:t+"/data/mockJSON/cpValidateSecurityCode.json",POST_TC_JSON:t+"/data/mockJSON/cpPostTC.json",LOGOUT_JSON:t+"/data/mockJSON/cpLogoutResponse.json",VALIDATE_CARDNUMBER:t+"/data/mockJSON/cpRegistrationValidateCardDetails.json",RETRIEVEPINSETTINGS_JSON:t+"/data/mockJSON/cpRetrievePinSettings.json",VALIDATECARDNUMBERPINRESET_JSON:t+"/data/mockJSON/cpValidateCardNumberPINReset.json",SUBMITNEWPIN_JSON:t+"/data/mockJSON/cpSubmitNewPin.json",SAVE_USER_PROFILE_JSON:t+"/data/mockJSON/cpUserRegistrationResponse.json",MFA_QUESTION_JSON:t+"/data/mockJSON/cpMFAcollectquestion.json",VALIDATEOTPPINRESET_JSON:t+"/data/mockJSON/cpOTPpinReset.json",VALIDATEACCESSCODEPINRESET_JSON:t+"/data/mockJSON/cpAccesscodeResponse.json",MFA_ANSWERS_JSON:t+"/data/mockJSON/cpMFAcollectanswers.json",ALERT_SETUP_JSON:t+"/data/mockJSON/cpAlertSetUp.json",MOBILE_CARRIER_JSON:t+"/data/mockJSON/cpMobileCarrier.json",PROFILE_CONFIRMATION:t+"/data/mockJSON/cpProfileConfirmation.json",PROFILE_UPDATE_RESPONSE:t+"/data/mockJSON/cpProfileUpdateResponse.json",REWARD_CODE:t+"/data/mockJSON/cpRewardCode.json",REQUEST_CHECK_RESPONSE:t+"/data/mockJSON/cpRequestCheckResponse.json",DASHBOARD_JSON:t+"/data/mockJSON/cpDashboard.json",REDEEMCLAIM_JSON:t+"/data/mockJSON/cpRedeemClaim.json",SHOP_JSON:t+"/data/mockJSON/cpShopNow.json",RETRIEVEBANKTRANSFERTC_JSON:t+"/data/mockJSON/cpRetrieveBankDetails.json",ONETIMEWITHDRAWAL_JSON:t+"/data/mockJSON/cpOneTimeWithdrawal.json",RECURRINGWITHDRAWAL_JSON:t+"/data/mockJSON/cpRecurringWithdrawal.json",SSO_LOGIN:t+"/data/mockJSON/cpSSO.json",VALIDATE_PASSWORD_RESPONSE:t+"/data/mockJSON/cpValidatePasswordResponse.json",RETRIEVE_ADD_FUNDS:t+"/data/mockJSON/cpRetrieveAddFunds.json",SAVE_ADD_FUNDS:t+"/data/mockJSON/cpSaveAddfund.json",ADD_FUND_CONFIRMATION_JSON:t+"/data/mockJSON/cpAddfundConfirmation.json",ADDBANKTRANSFER_JSON:t+"/data/mockJSON/cpaddBankTransfer.json",EDITBANKINFO_JSON:t+"/data/mockJSON/cpEditBankInfoResponse.json",DELETE_BANK_INFO:t+"/data/mockJSON/cpDeleteBankInfoResponse.json",EDIT_MFA_RESPONSE:t+"/data/mockJSON/cpEditMFAResponse.json",CONFIRM_ONETIME_WITHDRAWAL:t+"/data/mockJSON/cpOneTimeWithdrawalConfirm.json",REQUEST_CHECK_ELIGIBILITY:t+"/data/mockJSON/cpRequestCheckEligibility.json",REQUEST_PLASTIC_ELIGIBILITY:t+"/data/mockJSON/cpPlasticEligibility.json",CONFIRM_RECURING_WITHDRAWAL:t+"/data/mockJSON/cpRecurringWithdrawalResponse.json",TIPS_PAGE_JSON:t+"/data/mockJSON/cpTipsPageResponse.json",CONFIRM_RECURING_WITHDRAWAL:t+"/data/mockJSON/cpRecurringWithdrawalResponse.json",RETERIVE_PROFILE_RESPONSE:t+"/data/mockJSON/cpReteriveProfileResponse.json",RETRIEVE_BANKSETTINGS:t+"/data/mockJSON/cpRetrieveBankSettings.json",PAYMENT_CHOICE_LANDING_JSON:t+"/data/mockJSON/cpPaymentChoiceLanding.json",PAYMENT_EXPRESS_LANDING_JSON:t+"/data/mockJSON/cpPaymentExpressLanding.json",PAYMENT_EXPRESS_INVALID_LOGOUT_JSON:t+"/data/mockJSON/cpPaymentVirtualExpressLogout.json",MENU_FLAG_JSON:t+"/data/mockJSON/cpMenuFlagResponse.json",PAYMENT_RETERIVE_CHOICE_JSON:t+"/data/mockJSON/cpPaymentDeliveryChoice.json",REGISTRATION_FLAG_JSON:t+"/data/mockJSON/cpRegistrationFlagsResponse.json",RETRIEVE_PAYMENT_CHOICE_BANK_TRANSFER_RESPONSE:t+"/data/mockJSON/cpRequestBankTransfer.json",FISRT_TIME_PAYMENT_CHOICE_RESPONSE:t+"/data/mockJSON/cpFirstTimePaymentchoiceResponse.json",REQUEST_PLASTIC_RESPONSE:t+"/data/mockJSON/cpRequestPlasticResponse.json",RETERIVE_PROFILE_CHOICE_RESPONSE:t+"/data/mockJSON/cpReteriveChoiceProfileResponse.json",PAYMENT_RETERIVE_BANK_DETAILS_RESPONSE:t+"/data/mockJSON/cpPaymentRetrieveBankDetails.json",UPDATE_PAYMENT_CHOICE_RESPONSE:t+"/data/mockJSON/cpUpdatePaymentChoiceResponse.json",MOBILE_WALLET_SETUP_SAMSUNG:t+"/data/mockJSON/cpMobileWalletSamsungPayResponse.json",MOBILE_WALLET_SETUP_ANDROID:t+"/data/mockJSON/cpMobileWalletAndroidPayResponse.json",MOBILE_WALLET_SETUP_APPLE:t+"/data/mockJSON/cpMobileWalletApplePayResponse.json",MOBILE_WALLET_AUDIT:t+"/data/mockJSON/cpLogWalletType.json",GLOBAL_HOME_JSON:t+"/data/mockJSON/cpGlobalDepositsHome.json",CURRENT_FX_RATE_COUNTRY_DETAILS:t+"/data/mockJSON/cpCurrentFxRateCountryDetails.json",GLOBAL_RECURRING_JSON:t+"/data/mockJSON/cpGlobalRecurring.json",CURRENT_FX_RATE_CURRENCY_DETAILS:t+"/data/mockJSON/cpCurrentFxRateCurrencyDetails.json",GLOBAL_RECURRING_EDIT_JSON:t+"/data/mockJSON/cpGlobalRecurringEdit.json",CURRENT_FX_RATE:t+"/data/mockJSON/cpCurrentFxRate.json",GLOBAL_RETRIEVE_BANK_JSON:t+"/data/mockJSON/cpGlobalRetrieveBank.json",GLOBAL_RETRIEVE_DELETE_JSON:t+"/data/mockJSON/cpGlobalRetrieveDelete.json",GLOBAL_ADD_BANK_COUNTRIES_JSON:t+"/data/mockJSON/cpGlobalAddBankCountries.json",GLOBAL_ADD_BANK_COUNTRY_FIELDS_JSON:t+"/data/mockJSON/cpGlobalAddBankCountryFields.json",GLOBAL_ADD_BANK_PAYMENT_METHODS_JSON:t+"/data/mockJSON/cpGlobalPaymentMethod.json",GLOBAL_OTT_USER_BANKS:t+"/data/mockJSON/cpGlobalOTTUserBanks.json",GLOBAL_OTT_GET_FXRATE:t+"/data/mockJSON/cpGlobalOTTGetFxRate.json",GLOBAL_OTT_CONFIRM:t+"/data/mockJSON/cpGlobalOTTConfirm.json",GLOBAL_OTT_SUCCESS:t+"/data/mockJSON/cpGlobalOTTSuccess.json",GLOBAL_OTT_CANCEL:t+"/data/mockJSON/cpGlobalOTTCancel.json",GLOBAl_SELECTED_BANK_INFO:t+"/data/mockJSON/cpGlobalSelectedBankInfo.json",GLOBAL_EDIT_RETRIEVE_JSON:t+"/data/mockJSON/cpGlobalRetrieveEditDetails.json",CHECK_CARD_ACTIVATION_STATUS:t+"/data/mockJSON/cpCheckCardActivationStatus.json",CARD_AUTH_INFO_SETTINGS:t+"/data/mockJSON/cpCardAuthInfoSettings.json",CHECK_ACTIVATION_USER_PIN_STATUS:t+"/data/mockJSON/cpCheckActivationUserPinStatus.json"}},loadMenu:function(t,n,r){t&&(CUSTOM_BRANDING=t,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t+"/m/client/common/css/cpBranding.css","cpBranding")),n===e.constants.REGISTER?this.triggerRegistrationFlow():this.triggerMFAFlow(n,r)},triggerMFAFlow:function(t,n){switch(t){case e.constants.MFA_NONE:if(n===e.constants.ADD_PC)e.data.cpPaymentChoiceLandingModel||(e.data.cpPaymentChoiceLandingModel=new e.models.cpPaymentChoiceLandingModel),this.stopListening(e.data.cpPaymentChoiceLandingModel,"cp:paymentChoiceSettingsLoaded"),this.listenTo(e.data.cpPaymentChoiceLandingModel,"cp:paymentChoiceSettingsLoaded",function(){var t=e.data.cpPaymentChoiceLandingModel,n=t.get("choiceMapping");new e.views.cpMenuView({el:"#main-container",type:e.constants.PAYMENT_DELIVARY_CHOICE,context:e.constants.ADD_PC})}),e.data.cpPaymentChoiceLandingModel.retrievePaymentChoiceSettings();else if(n===e.constants.PC_LOGIN){var r=e.constants.SSO_LOGIN;new e.views.cpMenuView({el:"#main-container",type:e.constants.SSO_LOGIN,context:n})}else e.data.cpSettings.get("termsAndConditionsAcknowledged")==="N"?new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.TERMS_CONDITONS,origin:e.constants.SSO_LOGIN,disableMenu:!0}):new e.views.cpMenuView({el:"#main-container",type:e.constants.SSO_LOGIN});break;case e.constants.MFA_ONETIMEPASSWORD:n===e.constants.ADD_PC?(e.data.cpPaymentChoiceLandingModel||(e.data.cpPaymentChoiceLandingModel=new e.models.cpPaymentChoiceLandingModel),this.stopListening(e.data.cpPaymentChoiceLandingModel,"cp:paymentChoiceSettingsLoaded"),this.listenTo(e.data.cpPaymentChoiceLandingModel,"cp:paymentChoiceSettingsLoaded",function(){new e.views.cpMenuView({el:"#main-container",type:e.constants.MFA_ONETIMEPASSWORD,context:n,disableMenu:!0})}),e.data.cpPaymentChoiceLandingModel.retrievePaymentChoiceSettings()):n===e.constants.PC_LOGIN?new e.views.cpMenuView({el:"#main-container",type:e.constants.MFA_ONETIMEPASSWORD,context:n,disableMenu:!0}):new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.MFA_ONETIMEPASSWORD,origin:e.constants.SSO_LOGIN,disableMenu:!0});break;case e.constants.MFA_CHALLENGE_COLLECT:new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.MFA_CHALLENGE_COLLECT,origin:e.constants.SSO_LOGIN,disableMenu:!0});break;case e.constants.MFA_CHALLENGE_QUESTION:new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.MFA_CHALLENGE_QUESTION,origin:e.constants.SSO_LOGIN,disableMenu:!0});break;default:}},triggerRegistrationFlow:function(){var t=new e.views.cpRegistrationBaseView({el:"#main-container",context:e.constants.SSO_LOGIN})}})}}),define("cp.common.alertWarningMessage",[],function(){return function(e){e.root.common.Alertservice={showAlert:function(t,n,r,i,s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.common.error"),u=e.data.cpLanguageMapping.getLabelForKey("cp.common.ok");$("#cpAlert").remove();var a=e.templates.ErrorAlertWarning({type:"Alert",message:t});$("#totalviewContainer").prepend(a),$(".errorAlertButton").show(),$(".errorAlertHeader").html(o),$("#errorAlertButtonOK").html(u),$(".errorAlertContent").append(t),$("#cpAlert").fadeIn("slow");if(r){$("#errorAlertButtonOK").hide();var f="<a href="+i+" class ='errorAlertButton' style='text-decoration:none' target=_blank>"+u+"</a>",l=$(f);$(".errorAlertFooter").append(l)}$(".errorAlertFooter").on("click",function(){$("#cpAlert").fadeOut("fast",function(){$("#cpAlert").remove(),n&&n.call(s)})})},showWarning:function(t,n,r,i,s,o,u,a){$("#cpAlert").remove();var f=e.data.cpLanguageMapping.getLabelForKey("cp.common.cancel"),l=e.data.cpLanguageMapping.getLabelForKey("cp.common.ok");$("#totalviewContainer").prepend(e.templates.ErrorAlertWarning({type:"Warning",message:n,buttonTitle:r})),$("#cpAlert").fadeIn("slow"),$(".errorAlertButton").show(),$(".errorAlertButton").addClass("cp-half-width"),$("#errorAlertButtonCancel").html(f),$("#errorAlertButtonOK").html(l),$(".errorAlertContent").append(n);if(u){$("#errorAlertButtonOK").hide();if(o.url===""||o.url===undefined)o.url="#";var c="<div id='errorAlertButtonOKHyperlink'  class ='errorAlertButton'><a href="+o.url+" class ='errorAlertButton' style='text-decoration:none' target=_blank>"+l+"</a></div>",h=$(c);$(".errorAlertFooter").append(h),$("#errorAlertButtonOKHyperlink").addClass("cp-half-width"),$("#errorAlertButtonOKHyperlink").on("click",function(){$("#cpAlert").fadeOut("fast",function(){$("#cpAlert").remove(),i&&i.call(t,o)})})}$("#errorAlertButtonCancel").on("click",function(){$("#cpAlert").fadeOut("fast",function(){$("#cpAlert").remove(),s&&s.call(t,o)})}),$("#errorAlertButtonOK").on("click",function(){$("#cpAlert").fadeOut("fast",function(){$("#cpAlert").remove(),i&&i.call(t,o)})})},showDeleteWarning:function(e,t,n,r,i,s,o,u,a){this.showWarning(e,t,r,i,s,o,u,a),$("#totalviewContainer").find(".errorAlertHeader").html(n)},showDisclaimerWarning:function(e,t,n,r,i,s,o,u){this.showWarning(e,t,n,r,i,s,o,u),$("#totalviewContainer").find(".errorAlertHeader").html("Disclaimer")},showSuccessAlert:function(e,t,n,r,i){this.showAlert(e,t,n,r,i),$("#totalviewContainer").find(".errorAlertHeader").html("")},showAutoFadeAlert:function(t,n){$("#cpAlert").remove();var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.error"),i=e.templates.ErrorAlertWarning({type:"Alert",message:t});$("#totalviewContainer").prepend(i),$(".errorAlertButton").hide(),$(".errorAlertHeader").html(r),$(".errorAlertContent").append(t),$("#cpAlert").fadeIn("slow"),setTimeout(function(){$("#cpAlert").fadeOut("slow",function(){$("#cpAlert").remove(),n&&n()})},1e3)}}}}),define("cp.common.exceptionhandlingservice",[],function(){return function(e){exceptionhandlingservice=CT.Model.extend({errorServerCodeMapping:{},errorClientCodeMapping:{},genericMessage:"",handleCode:function(e){var t=this.getMessageForCode(e);return t},handleClientCode:function(e){var t=this.errorClientCodeMapping(e);return t},handleWarningCode:function(e,t){var n=this.getMessageForCode(e);return n},handleClientWarningCode:function(e,t){var n=this.errorClientCodeMapping(e);return n},handleMessage:function(e){return errorMessage},getMessageForClientError:function(e){var t=this.errorClientCodeMapping[e];return t||(t=this.genericMessage),t},getMessageForCode:function(e){var t=this.errorServerCodeMapping[e];return t||(t=this.genericMessage),e&&e.length>0?t=t+" ("+e+").":t+=".",t}}),e.root.common.exceptionhandlingservice=new exceptionhandlingservice}}),define("cp.common.networkingservice",[],function(){return function(e){var t=CT.Model.extend({totalRequest:0,requestURL:function(e,t){var n=t.datasource||cpEnv_Web.datasource,r,i,s;t&&t.serverContext?i="/"+t.serverContext:i="./m",this.serverUrl=i;var o,u="";if(t&&t.params){u="?",o=Object.keys(t.params);for(s=0;s<o.length;s++){var a=o[s];u=u+a+"="+t.params[a],s!=o.length-1&&(u+="&")}}return t&&t.params&&(t.params.timestamp=(new Date).getTime()),n==="JSON"?r=this.serverUrl:n==="MOCKJSON"&&(r=e),r+=u,r},postRequest:function(t,n,r,i,s,o){sourceName=this.requestURL(i,s);var u=s.customIndicator||!1,a=s.customErrorHandling||!1;u||(this.totalRequest++,$(".loaderOverlay").css("display","block"));var f=this,l,c=s.header?s.header:{"X-Requested-With":"XMLHttpRequest"},h="application/json; charset=utf-8",p=s.contentType?s.contentType:h;!s.parsingNotRequired&&p==h;var d=e.csrfToken?e.csrfToken:"",v=e.root.utils.encryptRequest(t,d);v=JSON.stringify(v),v=v?v:"{}",cpEnv_Web.webIntegration&&p=="multipart/form-data"&&(v=this.multipartData(s,c,v),p="multipart/form-data; boundary="+this.multiPartboundary),l={type:"POST",url:sourceName,data:v,dataType:"json",contentType:p,headers:c},s.processDataNotReq&&(l.processData=!1),$.ajax(l).done(function(i,s,a){if(a.status===200){u||(f.totalRequest--,f.totalRequest==0&&$(".loaderOverlay").css("display","none"));var l=i,c=!1,h=e.data.cpLanguageMapping.getLabelForKey("cp.general.error");if(i&&i.response){var p="",d="",v="";if(t&&t.inputRequest.action.criterion!=="retrieveLanguageMapping"){p=e.root.utils.decodeBase64(l.response);try{l=JSON.parse(p)}catch(m){var g={};g.errorResponse={},g.errorResponse.errorMessage="Request Failed",r.call(o,g);return}e.csrfToken=l.keyvalue.mkey?l.keyvalue.mkey:"";if(l&&l.keyvalue&&l.keyvalue.key){d=l.keyvalue.key,delete l.keyvalue,v=p.substring(0,p.indexOf("keyvalue")-2)+"}";var y=e.root.utils.toSHA256(v);if(d!=y){var g={};g.errorResponse={},g.errorResponse.errorMessage="Request Failed",r.call(o,g);return}}}}if(typeof l=="object")c=!0;else try{l=JSON.parse(l),c=!0}catch(m){c=!1}if(c&&l&&(l.successResponse||l.errorResponse))l.successResponse&&l.keyvalue?e.csrfToken=l.keyvalue.mkey?l.keyvalue.mkey:"":l.errorResponse&&l.keyvalue&&(e.csrfToken=l.keyvalue.mkey?l.keyvalue.mkey:""),n.call(o,l);else if(r){var g={};g.errorResponse={},g.errorResponse.errorMessage=h,r.call(o,g)}}else if(r){var g={};g.errorResponse={},g.errorResponse.errorMessage=h,r.call(o,g)}}).fail(function(t,n,i){u||(f.totalRequest--,f.totalRequest==0&&$(".loaderOverlay").css("display","none"));if(t.status===0)message="No network found, please verify.";else if(t.status==404)message="Requested page not found. [404].";else if(t.status==500)message="Internal Server Error [500].";else if(n==="parsererror"){if(t.responseText.indexOf("LOGGED OUT")>-1||t.responseText.indexOf("logged out")>-1){e.root.utils.forceLogout(e);return}message="Requested JSON parse failed."}else n==="timeout"?message="Time out error.":n==="abort"?message="Ajax request aborted.":message=t.status+" "+i;var s={};s.errorResponse={},s.errorResponse.errorMessage=message,r&&r.call(o,s)})},multiPartboundary:"---------------------------28936726879823572572356793256",multipartData:function(e,t,n){var r=this.multiPartboundary,i,s=[];t.fileName&&(s["Content-Disposition"]='form-data; name="file"; filename="'+t.fileName+'"'),t.mimeType&&(s["Content-Type"]=t.mimeType);var o="\r\n--"+r+"\r\n";if(e&&e.params){allKeys=Object.keys(e.params);for(i=0;i<allKeys.length;i++){var u=allKeys[i],a=e.params[u];o=o+'Content-Disposition: form-data; name="'+u+'"\r\n\r\n',o+=a,o=o+"\r\n--"+r+"\r\n"}}if(s){allKeys=Object.keys(s);for(i=0;i<allKeys.length;i++){var u=allKeys[i],a=s[u];o=o+u+": "+a+"\r\n"}}o=o+"Content-Length: "+n.byteLength+"\r\n",o+="Content-Transfer-Encoding: application/octet-stream\r\n\r\n",o=this.str2ab(o),o=this.appendBuffer(o,n);var f="\r\n--"+r+"--\r\n";return f=this.str2ab(f),o=this.appendBuffer(o,f),o},str2ab:function(e){var t=new ArrayBuffer(e.length),n=new Uint8Array(t);for(var r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return t},appendBuffer:function(e,t){var n=new Uint8Array(e.byteLength+t.byteLength);return n.set(new Uint8Array(e),0),n.set(new Uint8Array(t),e.byteLength),n.buffer},getRequest:function(t,n,r,i,s){var o=i.datasource||cpEnv_Web.datasource,u;i.serverContext?u="/"+i.serverContext:u="./m";var a;o==="JSON"?(this.serverUrl=u,a=this.serverUrl):o==="MOCKJSON"&&(a=r);var f=i.customErrorHandling||!1,l=i.customIndicator||!1;l||(this.totalRequest++,$(".loaderOverlay").css("display","block")),i&&i.params&&(i.params.timestamp=(new Date).getTime());var c="application/json; charset=utf-8",h=this;this.xhrRequest=$.get(a,i.params,function(r,i,o){l||(h.totalRequest--,h.totalRequest==0&&$(".loaderOverlay").css("display","none"));var u=r,a=!1;if(typeof r=="object")u=r,a=!0;else try{u=JSON.parse(r),a=!0}catch(f){a=!1}if(a&&u&&(u.successResponse||u.errorResponse))t.call(s,u);else if(n){var c={};c.errorResponse={},c.errorResponse.errorMessage=e.data.cpLanguageMapping.getLabelForKey("cp.general.error"),n.call(s,c)}}).fail(function(t,r,i){l||(h.totalRequest--,h.totalRequest==0&&$(".loaderOverlay").css("display","none")),t.status===0?message="No network found, please verify.":t.status==404?message="Requested page not found. [404].":t.status==500?message="Internal Server Error [500].":r==="parsererror"?((t.responseText.indexOf("LOGGED OUT")>-1||t.responseText.indexOf("logged out")>-1)&&e.root.utils.forceLogout(e),message="Requested JSON parse failed."):r==="timeout"?message="Time out error.":r==="abort"?message="Ajax request aborted.":message=t.status+" "+i;var o={};o.errorResponse={},o.errorResponse.errorMessage=message,n&&n.call(s,o)})}});e.root.common.networkingservice=new t}}),define("cp.common.cpGeoLocationServices",[],function(){return function(e){e.models.cpGeoLocationServices=CT.Model.extend({initialize:function(){window.google!=null&&(this.geocoder=new google.maps.Geocoder)},defaults:{address:"",latitude:"",longitude:""},getGeoLocation:function(){var e=this;navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(t){e.reverseGeoCode(t)},this.errorCallback)},errorCallback:function(e){var t="";switch(e.code){case e.PERMISSION_DENIED:t="This website does not have permission to use the Geolocation API";break;case e.POSITION_UNAVAILABLE:t="The current position could not be determined.";break;case e.PERMISSION_DENIED_TIMEOUT:t="The current position could not be determined within the specified timeout period."}console.log(t)},reverseGeoCode:function(e){var t=this,n=e.coords.latitude,r=e.coords.longitude,i=navigator.cookieEnabled?localStorage.getItem("address"):"";this.set("latitude",n),this.set("longitude",r),this.set("address",i);var s=navigator.cookieEnabled?localStorage.getItem("latitude"):"",o=navigator.cookieEnabled?localStorage.getItem("longitude"):"";s&&(s=parseFloat(s)),o&&(o=parseFloat(o));if(window.google!=null)if(s!==n||o!==r){var u=new google.maps.LatLng(n,r);this.geocoder.geocode({latLng:u},function(e,i){if(i==google.maps.GeocoderStatus.OK)if(e[1]){t.set("address",e[0].formatted_address);if(navigator.cookieEnabled)try{localStorage.setItem("latitude",n),localStorage.setItem("longitude",r),localStorage.setItem("address",e[0].formatted_address)}catch(s){console.log(s),t.set("address","")}}else console.log("No results found"),t.set("address","");else console.log("Geocoder failed due to: "+i),t.set("address","")})}}})}}),define("cp.models.cpLanguageMapping",[],function(){return function(e){e.models.cpLanguageMapping=CT.Model.extend({initialize:function(){},defaults:{currentLanguage:HUB_LANGUAGE,en_US:{},sp_US:{},fr_CA:{},languages:[]},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_LANGUAGE_MAPPING,n.action.language=this.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(e){if(!e)return;this.set(this.get("currentLanguage"),e==undefined?"":e)},getLabelForKey:function(e){return this.get(this.get("currentLanguage"))[e]}}),e.data.cpLanguageMapping=new e.models.cpLanguageMapping}}),define("cp.models.cpSessionController",[],function(){return function(e){e.models.cpSessionController=CT.Model.extend({initialize:function(){this.set("timeoutInterval",3e5),this.startTimeout()},startTimeout:function(){var t=this;timer=setTimeout(function(){var n=e.data.cpLanguageMapping.getLabelForKey("cp.sessionLogout.error");e.root.common.Alertservice.showAutoFadeAlert(n),t.callLogout()},this.get("timeoutInterval"))},resetTimeout:function(){this.stopTimeout(),this.startTimeout()},stopTimeout:function(){clearTimeout(timer),timer=null},invalidateSession:function(e){this.callLogout(e)},callLogout:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onLogoutSucessHandler,this.onLogoutErrorHandler,e.localURLs.LOGOUT_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.LOGOUT_MOBILEUSER;if(t!=""&&t!=undefined||PAYMENT_CHOICE==="Y")r.action.type="PaymentHubLogout";r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.onLogoutSucessHandler,this.onLogoutErrorHandler,e.localURLs.LOGOUT_JSON,{},this)}},onLogoutSucessHandler:function(t){PUID!=""&&(PUID=""),t.successResponse?SSO&&SSO==="Y"?(SSO="N",t.successResponse.redirectURL?window.location.href=t.successResponse.redirectURL?t.successResponse.redirectURL:"":e.root.eventBus.trigger("cp:logoutEvent",this)):(SSO="N",e.root.eventBus.trigger("cp:logoutEvent",this)):t.errorResponse&&this.onLogoutErrorHandler(t)},onLogoutErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.models.cpPaymentChoice",[],function(){return function(e){e.models.cpPaymentChoice=CT.Model.extend({initialize:function(){},defaults:{choiceMapping:{1:e.constants.CHOICE_VIRTUAL,2:e.constants.CHOICE_CARD,3:e.constants.CHOICE_ACH,4:e.constants.CHOICE_CHEQUE,5:e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER},currentChoice:"",availableChoices:[],amount:"",paymentMessage:"",infoMessage:"",reloadable:"Y",ctype:"",confirmationMessage:"",registeredUser:"N",FXRegisteredUser:"N"},setDefaults:function(){this.clear().set(this.defaults)},createRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.PC_RETERIVE_CHOICE,r.action.type=t,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,n},setChoiceResponse:function(t){if(!t)return;this.set("currentChoice",t.choice.selected!==undefined?t.choice.selected:""),this.set("availableChoices",t.choice.paymentDeliveryChoices!==undefined?t.choice.paymentDeliveryChoices:[]),this.set("amount",t.amount!==undefined?t.amount:""),this.set("paymentMessage",t.paymentMessage!==undefined?t.paymentMessage:""),this.set("infoMessage",t.infoMessage!==undefined?t.infoMessage:""),this.set("reloadable",t.reloadable!==undefined?t.reloadable:"Y"),this.set("ctype",t.ctype!==undefined?t.ctype:""),t.choice.selected!=undefined&&t.choice.selected!="3"&&(e.constants.BANK_NOTINITIAL_CHOICE="Y")},selectPC:function(t,n,r){var i=e.constants.ADD_PC;n===e.constants.PC_LOGIN&&(i=e.constants.UPDATE_PC);if(n===e.constants.EDIT_ACH||n===e.constants.EDIT_ACH_RETURNING)i=e.constants.UPDATE_PC;var s=this.onChoiceLoadSuccessHandler,o=this.onChoiceLoadErrorHandler,u=e.data.cpPaymentChoiceBankDetailsModel,a={},f={};f.action={},f.action.appName=e.constants.APP_NAME,f.action.criterion=e.constants.SELECT_PC,f.action.type=i,f.action.language=e.data.cpLanguageMapping.get("currentLanguage"),f.data={};var l=_.invert(this.get("choiceMapping"))[t];f.data.choiceID=l?l:"",(t===e.constants.CHOICE_CHEQUE||t===e.constants.CHOICE_ACH)&&i===e.constants.ADD_PC&&this.get("registeredUser")=="N"&&SSO!=="Y"&&(f.data.username=r.userName,f.data.password=r.password),t===e.constants.CHOICE_ACH&&(f.data.bankInfo=r.bankInfo,f.data.withdrawalType=r.withdrawalType),t!==e.constants.CHOICE_VIRTUAL&&(f.data.termsAndConditionsAcknowledged="Y"),i===e.constants.ADD_PC&&(f.data.registered=this.get("registeredUser")),a.inputRequest=f;var c=e.localURLs.UPDATE_PAYMENT_CHOICE_RESPONSE;this.updateSelectedPaymentChoice(s,o,a,c)},updateSelectedPaymentChoice:function(t,n,r,i){var s=this;cpEnv_Web.datasource==="MOCKJSON"?e.root.common.networkingservice.getRequest(function(e){s.updateChoiceLoadSuccessHandler(r,e)},this.updateChoiceLoadErrorHandler,i,{},this):e.root.common.networkingservice.postRequest(r,function(e){s.updateChoiceLoadSuccessHandler(r,e)},this.updateChoiceLoadErrorHandler,i,{},this)},updateChoiceLoadSuccessHandler:function(t,n){if(n.successResponse){this.setConfirmationMessage(n.successResponse);var r=t.inputRequest.data.choiceID;r=this.get("choiceMapping")[r];switch(r){case e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER:this.set("currentChoice","5"),this.set("FXRegisteredUser",n.successResponse.FXRegisteredUser),this.trigger("cp:paymentChoiceSelected",n.successResponse);break;case e.constants.CHOICE_CHEQUE:this.set("currentChoice","4"),this.trigger("cp:paymentChoiceSelected",n.successResponse);break;case e.constants.CHOICE_CARD:this.set("currentChoice","2"),this.trigger("cp:paymentChoiceSelected",n.successResponse);break;case e.constants.CHOICE_ACH:this.set("currentChoice","3"),this.trigger("cp:paymentChoiceSelected",n.successResponse);break;case e.constants.CHOICE_VIRTUAL:this.set("currentChoice","1"),this.trigger("cp:paymentChoiceSelected",n.successResponse);break;default:}}else this.updateChoiceLoadErrorHandler(n)},updateChoiceLoadErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){t.errorResponse.errorCode===e.constants.PARTIALLY_REGISTERED_RESPONSE&&(this.set("registeredUser","Y"),this.trigger("disableUserInfo")),this.trigger("choiceSelectionFailed");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},setConfirmationMessage:function(e){if(!e)return;this.set("confirmationMessage",e.confirmationMessage!==undefined?e.confirmationMessage:""),this.set("withdrawalType",e.withdrawalType!==undefined?e.withdrawalType:"")}})}}),define("cp.models.cpUserInfo",[],function(){return function(e){e.models.cpUserInfo=CT.Model.extend({initialize:function(){},defaults:{lastLogin:"",userName:"",firstName:"",lastName:"",attention:"",company:"",address:{},emailID:"",phoneDetails:{},assumeCountryUS:"N",prepopulateAddress:"N",universalAddress:"Y",countryList:{},statesList:{},authenticationRequired:"",pushAlert:"",displayContactInfo:"",mask_phone_number:"N"},setDefaults:function(){this.clear().set(this.defaults)},createRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.MOBILE_AUTHENTICATION,r.action.type=t,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,n},retreiveProfileRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_PROFILE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},retreiveProfileResponse:function(e){if(!e)return;this.set("userName",e.profileDetails.userName?e.profileDetails.userName:""),this.set("firstName",e.profileDetails.firstName?e.profileDetails.firstName:""),this.set("lastName",e.profileDetails.lastName?e.profileDetails.lastName:""),this.set("attention",e.profileDetails.attention?e.profileDetails.attention:""),this.set("company",e.profileDetails.company?e.profileDetails.company:""),this.set("address",e.profileDetails.address?e.profileDetails.address:{}),this.set("emailID",e.profileDetails.emailAddress?e.profileDetails.emailAddress:""),this.set("phoneDetails",e.profileDetails.phoneDetails?e.profileDetails.phoneDetails:{}),this.set("countryList",e.profileDetails.countryList!==undefined?e.profileDetails.countryList:{}),this.set("statesList",e.profileDetails.statesList!==undefined?e.profileDetails.statesList:{}),this.set("assumeCountryUS",e.profileDetails.assumeCountryUS!==undefined?e.profileDetails.assumeCountryUS:"N"),this.set("prepopulateAddress",e.profileDetails.prepopulateAddress!==undefined?e.profileDetails.prepopulateAddress:"N"),this.set("universalAddress",e.profileDetails.universalAddress!==undefined?e.profileDetails.universalAddress:"Y"),this.set("pushAlert",e.profileDetails.pushAlert!==undefined?e.profileDetails.pushAlert:""),this.set("displayContactInfo",e.profileDetails.displayContactInfo!==undefined?e.profileDetails.displayContactInfo:""),this.set("mask_phone_number",e.profileDetails.mask_phone_number!==undefined?e.profileDetails.mask_phone_number:"N")},retreiveCheckEligibility:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.REQUEST_CHECK_ELIGIBILITY,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},retrievePlasticEligibility:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.REQUEST_PLASTIC_SETTINGS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},retreiveCheckEligibilityResponse:function(e){if(!e)return;this.set("address",e.billingAddress?e.billingAddress:{}),this.set("firstName",e.name?e.name:""),this.set("attention",e.attention?e.attention:""),this.set("company",e.company?e.company:"")},updateProfileRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.UPDATE_PROFILE,typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS==="V"?n.action.type=e.constants.VE_UPDATE_PROFILE:n.action.type="",n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},this.get("universalAddress")==="Y"&&(n.data.attention=this.get("attention"),n.data.company=this.get("company")),this.get("prepopulateAddress")==="N"&&(n.data.firstName=this.get("firstName"),n.data.lastName=this.get("lastName")),n.data.address={},n.data.address.streetAddress1=this.get("address").streetAddress1,n.data.address.streetAddress2=this.get("address").streetAddress2,n.data.address.city=this.get("address").city,n.data.address.state=this.get("address").state,n.data.address.zipcode=this.get("address").zipcode,n.data.address.country=this.get("address").country,n.data.emailAddress=this.get("emailID"),n.data.phoneDetails={},n.data.phoneDetails.home={},n.data.phoneDetails.home.areaCode=this.get("phoneDetails").home.areaCode,n.data.phoneDetails.home.number=this.get("phoneDetails").home.number,n.data.phoneDetails.mobile={},n.data.phoneDetails.mobile.areaCode=this.get("phoneDetails").mobile.areaCode,n.data.phoneDetails.mobile.number=this.get("phoneDetails").mobile.number,t.inputRequest=n,t},updateAddressRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.UPDATE_PROFILE,n.action.type=e.constants.PC_UPDATE_PROFILE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.address={},n.data.address.streetAddress1=this.get("address").streetAddress1,n.data.address.streetAddress2=this.get("address").streetAddress2,n.data.address.city=this.get("address").city,n.data.address.state=this.get("address").state,n.data.address.zipcode=this.get("address").zipcode,n.data.address.country=this.get("address").country,t.inputRequest=n,t},setUserDetails:function(e){if(!e)return;this.set("attention",e.attention?e.attention:""),this.set("company",e.company?e.company:""),this.set("firstName",e.firstName?e.firstName:""),this.set("lastName",e.lastName?e.lastName:""),this.set("address",e.address?e.address:{}),this.set("emailID",e.emailAddress?e.emailAddress:""),this.set("phoneDetails",e.phoneDetails?e.phoneDetails:{})},updateAddress:function(e){if(!e)return;this.set("address",e.address?e.address:{})},setUpdateResponse:function(e){if(!e)return;this.set("authenticationRequired",e.authRequired?e.authRequired:""),this.set("pushAlert",e.pushAlert?e.pushAlert:"")},setLastlogin:function(e){this.set("lastLogin",e.lastLogin!==undefined?e.lastLogin:"")},setResponse:function(e){},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}}),e.data.cpUserInfo=new e.models.cpUserInfo}}),define("cp.models.cpChoiceUserInfo",[],function(){return function(e){e.models.cpChoiceUserInfo=CT.Model.extend({initialize:function(){},defaults:{name:"",feeMessage:"",attention:"",company:"",address:{},termsAndConditionContent:"",canadianProgram:"",mfaAuthenticationCode:"",termsMessage:"",registered:""},setDefaults:function(){this.clear().set(this.defaults)},retreiveCardEligibilityResponse:function(e){if(!e)return;this.set("address",e.billingAddress?e.billingAddress:{}),this.set("name",e.name?e.name:""),this.set("feeMessage",e.feeMessage?e.feeMessage:""),e.termsAndConditions?this.set("termsAndConditionContent",e.termsAndConditions.content?e.termsAndConditions.content:""):this.set("termsAndConditionContent",""),this.set("termsMessage",e.termsMessage?e.termsMessage:"")},retreiveBankInfoResponse:function(e){this.set("termsAndConditionContent",e.termsAndConditions.content?e.termsAndConditions.content:""),this.set("canadianProgram",e.canadianProgram?e.canadianProgram:""),this.set("mfaAuthenticationCode",e.mfaAuthenticationCode?e.mfaAuthenticationCode:"")},retreiveCheckEligibilityResponse:function(e){if(!e)return;this.set("address",e.billingAddress?e.billingAddress:{}),this.set("name",e.name?e.name:""),this.set("attention",e.attention?e.attention:""),this.set("company",e.company?e.company:"")}})}}),define("cp.models.cpSettings",[],function(){return function(e){e.models.cpSettings=CT.Model.extend({initialize:function(){},defaults:{termsAndConditionsAcknowledged:"Y",termsAndConditionContent:"",dashboard:"Y",accountDetails:"Y",FAQ:"Y",contact:"Y",disclosure:"Y",termsAndConditions:"Y",privacy:"Y",atmLocator:"Y",pinReset:"Y",shopNow:"N",redirectShop:"N",editContact:"N",bankTransfer:"N",requestPlastic:"N",requestCheck:"N",paymentChoice:"N",express:"N",displayCardInfo:"",programType:"",customBranding:"",paymentType:"",errorURL:"",disableMenu:"N",binBank:"",globalTransfers:"N",phDisplayContactInfo:"Y"},setDefaults:function(){this.clear().set(this.defaults)},setFlags:function(e){if(!e)return;this.set("atmLocator",e.atmLocator?e.atmLocator:"N"),this.set("pinReset",e.pinReset?e.pinReset:"N"),this.set("editContact",e.editContact?e.editContact:"N"),this.set("FAQ",e.FAQ?e.FAQ:"N"),this.set("shopNow",e.shopNow?e.shopNow:"N"),this.set("redirectShop",e.redirectShop?e.redirectShop:"N"),this.set("bankTransfer",e.bankTransfer?e.bankTransfer:"N"),this.set("requestPlastic",e.requestPlastic?e.requestPlastic:"N"),this.set("requestCheck",e.requestCheck?e.requestCheck:"N"),this.set("paymentChoice",e.paymentChoice?e.paymentChoice:"N"),this.set("paymentType",e.paymentType?e.paymentType:""),this.set("disableMenu","N"),this.set("binBank",e.binBank?e.binBank:""),this.set("globalTransfers",e.globalTransfers?e.globalTransfers:"N"),this.set("phDisplayContactInfo",e.phDisplayContactInfo?e.phDisplayContactInfo:"Y")},setRequestPlastic:function(e){this.set("requestPlastic",e.requestPlastic?e.requestPlastic:"N")},setEditContact:function(e){this.set("editContact",e.editContact?e.editContact:"N")},setTermsAndConditions:function(e){this.set("termsAndConditionsAcknowledged",e.termsAndConditionsAcknowledged!==undefined?e.termsAndConditionsAcknowledged:""),e.termsAndConditions&&this.set("termsAndConditionContent",e.termsAndConditions.content!==undefined?e.termsAndConditions.content:"")},disableMenu:function(){this.set("dashboard","N"),this.set("accountDetails","N"),this.set("FAQ","N"),this.set("contact","N"),this.set("disclosure","N"),this.set("disableMenu","Y"),this.set("termsAndConditions","N"),this.set("privacy","N"),this.set("atmLocator","N"),this.set("pinReset","N"),this.set("shopNow","N"),this.set("redirectShop","N"),this.set("bankTransfer","N"),this.set("requestPlastic","N"),this.set("requestCheck","N"),this.set("paymentChoice","N"),this.set("globalTransfers","N"),this.trigger("cp:reloadMenu")},enableExpressMenus:function(){this.set("dashboard","N"),this.set("accountDetails","Y"),this.set("FAQ","Y"),this.set("contact","Y"),this.set("disclosure","Y"),this.set("termsAndConditions","Y"),this.set("privacy","Y"),this.set("atmLocator","Y"),this.set("pinReset","N"),this.set("shopNow","N"),this.set("redirectShop","N"),this.set("bankTransfer","N"),this.set("requestPlastic","N"),this.set("requestCheck","N"),this.set("paymentChoice","N"),this.set("editContact","N"),this.set("globalTransfers","N"),this.trigger("cp:reloadMenu")},setDisplayCardInfo:function(e){if(!e)return;this.set("displayCardInfo",e.displayCardInfo!==undefined?e.displayCardInfo:"N")},setProgramType:function(e){if(!e)return;this.set("programType",e.programType!==undefined?e.programType:"")},setCustomBranding:function(e){if(!e)return;this.set("customBranding",e.customBranding!==undefined?e.customBranding:"")},setBankTransfer:function(e){if(!e)return;this.set("bankTransfer",e.bankTransfer!==undefined?e.bankTransfer:"N")},setErrorURL:function(e){if(!e)return;this.set("errorURL",e.errorURL!==undefined?e.errorURL:"")},retreiveMenuFlagsAndLoadMenu:function(t){if(cpEnv_Web.datasource==="MOCKJSON"){var n=this;e.root.common.networkingservice.getRequest(function(e){n.menuFlagsSuccessHandler(e,t)},this.menuFlagsErrorHandler,e.localURLs.MENU_FLAG_JSON,{},this)}else{var n=this,r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.RETRIEVE_SETTINGS,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),i.action.type=e.constants.MENU,r.inputRequest=i,e.root.common.networkingservice.postRequest(r,function(e){n.menuFlagsSuccessHandler(e,t)},this.menuFlagsErrorHandler,e.localURLs.MENU_FLAG_JSON,{},this)}},menuFlagsSuccessHandler:function(e,t){e.successResponse?(this.setFlags(e.successResponse),this.enableDefaultMenus(),t==="reload-left-panel-only"?this.trigger("cp:reloadLeftPanelOnly"):this.trigger("cp:reloadMenu",t)):this.menuFlagsErrorHandler(e)},menuFlagsErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},enableDefaultMenus:function(){this.set("dashboard","Y"),this.set("accountDetails","Y"),this.set("contact","Y"),this.set("disclosure","Y"),this.set("termsAndConditions","Y"),this.set("privacy","Y")},reloadMenu:function(e){this.retreiveMenuFlagsAndLoadMenu(e)}}),e.data.cpSettings=new e.models.cpSettings}}),define("cp.models.cpPaymentClaim",[],function(){return function(e){e.models.cpPaymentClaim=CT.Model.extend({initialize:function(){},defaults:{code:"",claimCodes:[],message:"",activationMessage:"",date:"",amount:"",redeemed:"",paymentVerification:"",puidValue:"",registered:"",imgDetail:"",isClaimable:"N"},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){if(!e)return;this.set("date",e.paymentEligibility!==undefined?e.paymentEligibility:""),this.set("code",e.code!==undefined?e.code:""),this.set("amount",e.amount!==undefined?e.amount:""),this.set("registered",e.registered!==undefined?e.registered:""),this.set("paymentVerification",e.paymentVerification!==undefined?e.paymentVerification:""),this.set("message",e.redeemMemo!==undefined?e.redeemMemo:"")},setClaimable:function(e){this.set("isClaimable",e?e:"N")},setPaymentClaimResponse:function(e){if(!e)return;this.set("registered",e.registered!==undefined?e.registered:""),this.set("paymentVerification",e.paymentVerification!==undefined?e.paymentVerification:""),this.set("puidValue",e.puidValue!==undefined?e.puidValue:""),this.setImgDetail(e)},setPaymentDetailsResponse:function(e){if(!e)return;this.set("redeemed",e.redeemed?e.redeemed:""),this.set("claimCodes",e.claimCode?e.claimCode:[]),this.set("activationMessage",e.activationMessage?e.activationMessage:""),this.setImgDetail(e),this.setMessage(e),this.set("date",e.date!==undefined?e.date:""),this.setAmount(e)},setPaymentConfirmationResponse:function(e){if(!e)return;this.setMessage(e),this.set("date",e.date!==undefined?e.date:""),this.setAmount(e)},setMessage:function(e){if(!e)return;this.set("message",e.message!==undefined?e.message:"")},setAmount:function(e){if(!e)return;this.set("amount",e.amount!==undefined?e.amount:"")},setImgDetail:function(e){if(!e)return;if(CP_CONTENT_BOX===undefined||CP_CONTENT_BOX===".")this.set("imgDetail",e.imageDetail?e.imageDetail:"");else{var t=e.imageDetail,n=e.skin;window.devicePixelRatio>2?t=CP_CONTENT_BOX+"/"+n+"/certificate_thumbnails/m/"+t+"@3x.png":t=CP_CONTENT_BOX+"/"+n+"/certificate_thumbnails/m/"+t+"@2x.png",this.set("imgDetail",t?t:CP_CONTENT_BOX+"/op/certificate_thumbnails/m/genericcard_thumb@2x.png")}},redeemed:function(e){if(!e)return;this.set("redeemed",e.redeemed?e.redeemed:"")}})}}),define("cp.models.cpAccountTransaction",[],function(){return function(e){e.models.cpAccountTransaction=CT.Model.extend({initialize:function(){},defaults:{transactionDate:"",transactionMemo:"",transactionAmount:"",rollingBalance:"",transactionType:"",transactionFee:"",transactionDescription:"",paymentDetailsAvailable:"N",wallet:"N",transactionStatus:"1",paymentDetails:{}},setResponse:function(e){if(!e)return;this.set("transactionDate",e.transactionDate===undefined?"":e.transactionDate),this.set("transactionMemo",e.transactionMemo===undefined?"":e.transactionMemo),this.set("transactionAmount",e.transactionAmount===undefined?"":e.transactionAmount),this.set("rollingBalance",e.rollingBalance===undefined?"":e.rollingBalance),this.set("transactionType",e.transactionType===undefined?"":e.transactionType),this.set("transactionDescription",e.transactionDescription===undefined?"":e.transactionDescription),this.set("transactionFee",e.transactionFee===undefined?"":e.transactionFee),this.set("paymentDetailsAvailable",e.paymentDetailsAvailable===undefined?"":e.paymentDetailsAvailable),this.set("wallet",e.wallet===undefined?"N":e.wallet),this.set("transactionStatus",e.transactionStatus===undefined?"":e.transactionStatus),this.set("paymentDetails",e.paymentDetails===undefined?{}:e.paymentDetails)}})}}),define("cp.models.cpFAQDetails",[],function(){return function(e){e.models.cpFAQDetails=CT.Model.extend({initialize:function(){},defaults:{faqs:[],"post-faqs":[],"faq-category":""},setResponse:function(e,t){if(!e)return;var n=[];if(e.faqs){for(var r=0;r<e.faqs.length;r++){var i={};i.question=e.faqs[r].question,i.answer=e.faqs[r].answer,n.push(i)}this.set("faqs",n),this.set("faq-category",e.title?e.title:"")}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpDisclosureFeesDetails",[],function(){return function(e){e.models.cpDisclosureFeesDetails=CT.Model.extend({initialize:function(){},defaults:{"fee-category":"","disclosure-fees":[]},setResponse:function(e){if(!e)return;var t=[];if(e.fees){for(var n=0;n<e.fees.length;n++){var r={};r.description=e.fees[n].description,r.amount=e.fees[n].amount,t.push(r)}this.set("disclosure-fees",t),this.set("fee-category",e.feeCategory?e.feeCategory:"")}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpContactUsDetails",[],function(){return function(e){e.models.cpContactUsDetails=CT.Model.extend({initialize:function(){},defaults:{"contact-info":[]},createRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.RETRIEVE_CONTACTINFO,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,n},setResponse:function(e){if(!e)return;var t=[];if(e.contactInfo){var n={};n.phoneNumber=e.contactInfo.phoneNumber,n.emailAddress=e.contactInfo.emailAddress,t.push(n),this.set("contact-info",t)}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpImageCaptcha",[],function(){return function(e){e.models.cpImageCaptcha=CT.Model.extend({initialize:function(){},defaults:{"image-detail":{}},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_CAPTCHA,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},captchaLoginRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_CAPTCHA_LOGIN,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},captchaPCLogin:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_CAPTCHA_PC_LOGIN,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(e){if(!e)return;if(e.image){var t={};t.image=e.image,this.set("image-detail",t)}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpAtmLocatorDetails",[],function(){return function(e){e.models.cpAtmLocatorDetails=CT.Model.extend({initialize:function(){},defaults:{"atm-info":""},createRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.RETRIEVE_ATMLOCATOR,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,n},setResponse:function(e){if(!e)return;if(e){var t=e.atmURL;this.set("atm-info",t)}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)},retrieveAtmInfo:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.AtmLocatorSuccessHandler,this.AtmLocatorErrorHandler,e.localURLs.ATMLOCATOR_JSON,{},this);else{var t=e.data.cpAtmLocatorDetails.createRequest();e.root.common.networkingservice.postRequest(t,this.AtmLocatorSuccessHandler,this.AtmLocatorErrorHandler,e.localURLs.ATMLOCATOR_JSON,{},this)}},AtmLocatorSuccessHandler:function(t){t.successResponse?(e.data.cpAtmLocatorDetails.setResponse(t.successResponse),e.root.eventBus.trigger("cp:loadATMURL",this)):t.errorResponse&&this.AtmLocatorErrorHandler(t)},AtmLocatorErrorHandler:function(e){}})}}),define("cp.models.cpRegistrationConfiguration",[],function(){return function(e){e.models.cpRegistrationConfiguration=CT.Model.extend({initialize:function(){},defaults:{totalSteps:"",pushAlert:"Y",mfaAuthenticationCode:e.constants.MFA_CHALLENGE_COLLECT,displayDOB:"N",displaySSN:"N",requireSSN:"N",requireDOB:"N",ascentProgram:"N",universalAddress:"N",jcaptcha:"N",assumeCountryUS:"N",prepopulateAddress:"N",currentContext:"",countryList:{},statesList:{},type:"",cardActivationOrigin:"",phDisplayContactInfo:"Y",mask_phone_number:"N"},context:{REGISTER_NEW_USER:"cpRegistrationNewUserView",PROFILE_CONFIRMATION:"cpProfileConfirmationView",ALERT_SETUP:"cpAlertSetUpView",CHALLENGE_COLLECT:"cpMFAChallengeCollectView",PIN_RESET:"cpPinResetView",REGISTRATION_TIPS:"cpRegistrationTipsView",MENU:"cpMenuView"},setResponse:function(t){if(!t)return;this.set("pushAlert",t.registrationFlags.pushAlert!==undefined?t.registrationFlags.pushAlert:"N"),this.set("mfaAuthenticationCode",t.registrationFlags.mfaAuthenticationCode!==undefined?t.registrationFlags.mfaAuthenticationCode:e.constants.MFA_NONE),this.set("displayDOB",t.registrationFlags.displayDOB!==undefined?t.registrationFlags.displayDOB:"N"),this.set("displaySSN",t.registrationFlags.displaySSN!==undefined?t.registrationFlags.displaySSN:"N"),this.set("requireSSN",t.registrationFlags.requireSSN!==undefined?t.registrationFlags.requireSSN:"N"),this.set("requireDOB",t.registrationFlags.requireDOB!==undefined?t.registrationFlags.requireDOB:"N"),this.set("ascentProgram",t.registrationFlags.ascentProgram!==undefined?t.registrationFlags.ascentProgram:"N"),this.set("universalAddress",t.registrationFlags.universalAddress!==undefined?t.registrationFlags.universalAddress:"N"),this.set("jcaptcha",t.registrationFlags.jcaptcha!==undefined?t.registrationFlags.jcaptcha:"N"),this.set("assumeCountryUS",t.registrationFlags.assumeCountryUS!==undefined?t.registrationFlags.assumeCountryUS:"N"),this.set("prepopulateAddress",t.registrationFlags.prepopulateAddress!==undefined?t.registrationFlags.prepopulateAddress:"N")},setCountryAndStateList:function(e){if(!e)return;this.set("countryList",e.countryList!==undefined?e.countryList:{}),this.set("statesList",e.statesList!==undefined?e.statesList:{})},retrieveRegistrationFlagForContext:function(t){var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.RETRIEVE_SETTINGS,r.action.type=t,e.data.cpRegistrationConfiguration.get("cardActivationOrigin")!==""&&e.data.cpRegistrationConfiguration.get("cardActivationOrigin")===e.constants.CARD_ACTIVATION_ORIGIN&&(r.action.origin=e.constants.CARD_ACTIVATION),r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},n.inputRequest=r;var i=e.localURLs.REGISTRATION_FLAG_JSON;cpEnv_Web.datasource==="MOCKJSON"?e.root.common.networkingservice.getRequest(this.onLoadSuccessHandler,this.onLoadErrorHandler,i,{},this):e.root.common.networkingservice.postRequest(n,this.onLoadSuccessHandler,this.onLoadErrorHandler,i,{},this)},onLoadSuccessHandler:function(t){if(t.successResponse){this.setResponse(t.successResponse),e.data.cpSettings.set("pinReset",t.successResponse.registrationFlags.pinReset?t.successResponse.registrationFlags.pinReset:"N"),e.data.cpSettings.set("editContact",t.successResponse.registrationFlags.editContact?t.successResponse.registrationFlags.editContact:"N"),e.data.cpSettings.set("phDisplayContactInfo",t.successResponse.registrationFlags.phDisplayContactInfo?t.successResponse.registrationFlags.phDisplayContactInfo:"Y"),e.data.cpSettings.set("mask_phone_number",t.successResponse.registrationFlags.mask_phone_number?t.successResponse.registrationFlags.mask_phone_number:"Y"),this.set("countryList",t.successResponse.profileDetails.countryList!==undefined?t.successResponse.profileDetails.countryList:{}),this.set("statesList",t.successResponse.profileDetails.statesList!==undefined?t.successResponse.profileDetails.statesList:{});var n={};n.username=t.successResponse.profileDetails.userName?t.successResponse.profileDetails.userName:"",n.address=t.successResponse.profileDetails.address?t.successResponse.profileDetails.address:{},n.emailID=t.successResponse.profileDetails.emailAddress?t.successResponse.profileDetails.emailAddress:"",n.phoneDetails=t.successResponse.profileDetails.phoneDetails?t.successResponse.profileDetails.phoneDetails:{},e.data.cpRegistrationInfo||(e.data.cpRegistrationInfo=new e.models.cpRegistrationInfo),e.data.cpRegistrationInfo.setUserDetails(n),this.trigger("cp:registrationSettingsLoaded",t)}else this.onLoadErrorHandler(t)},onLoadErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)},retreiveStatesForCountry:function(e){var t={};return e&&e!==""&&(t=this.get("statesList")[e]),t},navigationForCurrentContext:function(t){var n=this.get("pushAlert")==="Y"?1:0,r=this.get("mfaAuthenticationCode")===e.constants.MFA_CHALLENGE_COLLECT?1:0,i=e.data.cpSettings.get("pinReset")==="Y"?1:0,s=n.toString()+r.toString()+i.toString(),o=this.get("currentContext"),u="";switch(s){case"000":u=this.context.MENU;break;case"001":u=o===this.context.PIN_RESET?this.context.MENU:this.context.PIN_RESET;break;case"010":u=o===this.context.CHALLENGE_COLLECT?this.context.MENU:this.context.CHALLENGE_COLLECT;break;case"011":o===this.context.PROFILE_CONFIRMATION&&(u=this.context.CHALLENGE_COLLECT),o===this.context.CHALLENGE_COLLECT&&(u=this.context.PIN_RESET),o===this.context.PIN_RESET&&(u=this.context.MENU);break;case"100":u=o===this.context.ALERT_SETUP?this.context.MENU:this.context.ALERT_SETUP;break;case"101":o===this.context.PROFILE_CONFIRMATION&&(u=this.context.ALERT_SETUP),o===this.context.ALERT_SETUP&&(u=this.context.PIN_RESET),o===this.context.PIN_RESET&&(u=this.context.MENU);break;case"110":o===this.context.PROFILE_CONFIRMATION&&(u=this.context.ALERT_SETUP),o===this.context.ALERT_SETUP&&(u=this.context.CHALLENGE_COLLECT),o===this.context.CHALLENGE_COLLECT&&(u=this.context.MENU);break;case"111":o===this.context.PROFILE_CONFIRMATION&&(u=this.context.ALERT_SETUP),o===this.context.ALERT_SETUP&&(u=this.context.CHALLENGE_COLLECT),o===this.context.CHALLENGE_COLLECT&&(u=this.context.PIN_RESET),o===this.context.PIN_RESET&&(u=this.context.MENU);break;default:}return u===this.context.MENU&&this.get("type")===e.constants.PAYMENTCLAIM_REGISTER&&(u=this.context.REGISTRATION_TIPS),this.get("type")===e.constants.PAYMENTCLAIM_REGISTER&&u===this.context.PIN_RESET&&(u=this.context.REGISTRATION_TIPS),u}})}}),define("cp.models.cpRegistrationInfo",[],function(){return function(e){e.models.cpRegistrationInfo=CT.Model.extend({initialize:function(){this.configuration=e.data.cpRegistrationConfiguration,this.settings=e.data.cpSettings},defaults:{username:"",password:"",ssn:"",dateofbirth:"",firstName:"",lastName:"",attention:"",company:"",address:{},emailID:"",phoneDetails:{},captcha:""},setUserDetails:function(e){this.set("username",e.username?e.username:""),this.set("password",e.password?e.password:""),this.set("ssn",e.ssn?e.ssn:""),this.set("dateofbirth",e.dob?e.dob:""),this.set("firstName",e.firstName?e.firstName:""),this.set("lastName",e.lastName?e.lastName:""),this.set("attention",e.attention?e.attention:""),this.set("company",e.company?e.company:""),this.set("address",e.address?e.address:{}),this.set("emailID",e.emailID?e.emailID:""),this.set("phoneDetails",e.phoneDetails?e.phoneDetails:{}),this.set("captcha",e.captcha?e.captcha:"")},createRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.SAVE_PROFILE,r.action.type=t?t:"",r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.userName=this.get("username"),r.data.password=this.get("password"),this.configuration.get("displaySSN")!=="N"&&(r.data.ssn={},r.data.ssn.ssnArea=this.get("ssn").ssnArea?this.get("ssn").ssnArea:"",r.data.ssn.ssnGroup=this.get("ssn").ssnGroup?this.get("ssn").ssnGroup:"",r.data.ssn.ssnSerial=this.get("ssn").ssnSerial?this.get("ssn").ssnSerial:""),this.configuration.get("displayDOB")!=="N"&&(r.data.dob={},r.data.dob.day=this.get("dateofbirth").day?this.get("dateofbirth").day:"",r.data.dob.month=this.get("dateofbirth").month?this.get("dateofbirth").month:"",r.data.dob.year=this.get("dateofbirth").year?this.get("dateofbirth").year:""),this.settings.get("editContact")!=="N"&&(this.configuration.get("prepopulateAddress")==="N"&&(r.data.firstName=this.get("firstName")?this.get("firstName"):"",r.data.lastName=this.get("lastName")?this.get("lastName"):""),this.configuration.get("universalAddress")!=="N"&&(r.data.attention=this.get("attention")?this.get("attention"):"",r.data.company=this.get("company")?this.get("company"):""),r.data.address={},r.data.address.streetAddress1=this.get("address").streetAddress1,r.data.address.streetAddress2=this.get("address").streetAddress2,r.data.address.city=this.get("address").city,r.data.address.state=this.get("address").state,r.data.address.zipcode=this.get("address").zipcode,r.data.address.country=this.get("address").country,r.data.emailAddress=this.get("emailID"),r.data.phoneDetails={},r.data.phoneDetails.home={},r.data.phoneDetails.home.areaCode=this.get("phoneDetails").home.areaCode,r.data.phoneDetails.home.number=this.get("phoneDetails").home.number,r.data.phoneDetails.mobile={},r.data.phoneDetails.mobile.areaCode=this.get("phoneDetails").mobile.areaCode,r.data.phoneDetails.mobile.number=this.get("phoneDetails").mobile.number),r.data.captcha=this.get("captcha"),n.inputRequest=r,n},setResponse:function(e){if(!e)return;this.set("Name",e.userName!==undefined?e.userName:"")},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpMFAChallengeQuestion",[],function(){return function(e){e.models.cpMFAChallengeQuestion=CT.Model.extend({initialize:function(){},defaults:{questionId:"",question:""},setResponse:function(e,t){if(!e)return;this.set("questionId",e.questionId?e.questionId:""),this.set("question",e.question?e.question:"")},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpCardDetails",[],function(){return function(e){e.models.cpCardDetails=CT.Model.extend({initialize:function(){},defaults:{name:"",cardNumber:"",securityCode:"",expDate:{},cardType:""},setResponse:function(e){if(!e)return;this.set("name",e.name!==undefined?e.name:""),this.set("cardNumber",e.cardNumber!==undefined?e.cardNumber:""),this.set("securityCode",e.securityCode!==undefined?e.securityCode:""),this.set("expDate",e.expDate!==undefined?e.expDate:{})},setCardType:function(e){if(!e)return;this.set("cardType",e.ctype!==undefined?e.ctype:"")}})}}),define("cp.models.cpAddFunds",[],function(){return function(e){e.models.cpAddFunds=CT.Model.extend({initialize:function(){},defaults:{address:{},fee:"",cardNumber:"",userName:"",amount:{},cardType:"",cardNumber:"",expDate:{},securityCode:""},setDefaults:function(){this.clear().set(this.defaults)},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_ADD_FUND_DETAILS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(e){if(!e)return;this.set("address",e.billingAddress!==undefined?e.billingAddress:{}),this.set("fee",e.fee!==undefined?e.fee:""),this.set("cardNumber",e.cardNumber!==undefined?e.cardNumber:""),this.set("userName",e.userName!==undefined?e.userName:"")},setUserDetails:function(e){this.set("amount",e.amount?e.amount:{}),this.set("cardType",e.cardType?e.cardType:""),this.set("cardNumber",e.cardNumber?e.cardNumber:""),this.set("expDate",e.expDate?e.expDate:{}),this.set("securityCode",e.securityCode?e.securityCode:"")},saveAddfundRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.SAVE_ADD_FUND,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.amount={},n.data.amount.dollars=this.get("amount").dollars,n.data.amount.cents=this.get("amount").cents,n.data.cardType=this.get("cardType"),n.data.cardNumber=this.get("cardNumber"),n.data.expDate={},n.data.expDate.month=this.get("expDate").month,n.data.expDate.year=this.get("expDate").year,n.data.securityCode=this.get("securityCode"),t.inputRequest=n,t}})}}),define("cp.models.cpPaymentChoiceLandingModel",[],function(){return function(e){e.models.cpPaymentChoiceLandingModel=CT.Model.extend({initialize:function(){},defaults:{ssn:"",dob:"",jcaptcha:"",puid:"",puidValue:"",firstName:"",lastName:"",postalCode:"",mobileNumber:"",emailAddress:"",message:"",choiceMapping:{1:e.constants.CHOICE_VIRTUAL,2:e.constants.CHOICE_CARD,3:e.constants.CHOICE_ACH,4:e.constants.CHOICE_CHEQUE,5:e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER},currentChoice:"",availableChoices:[],systemDefaultedChoice:""},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){this.set("message",e.message===undefined?"":e.message)},setDefaultChoice:function(e){if(!e)return;this.set("systemDefaultedChoice",e.defaultChoice?e.defaultChoice:"")},setVerificationFlag:function(e){this.set("ssn",e.ssn===undefined?"":e.ssn),this.set("dob",e.dob===undefined?"":e.dob),this.set("jcaptcha",e.jcaptcha===undefined?"":e.jcaptcha),this.set("puid",e.puid===undefined?"":e.puid),this.set("puidValue",e.puidValue===undefined?"":e.puidValue),this.set("firstName",e.firstName===undefined?"":e.firstName),this.set("lastName",e.lastName===undefined?"":e.lastName),this.set("postalCode",e.postalCode===undefined?"":e.postalCode),this.set("mobileNumber",e.mobileNumber===undefined?"":e.mobileNumber),this.set("emailAddress",e.emailAddress===undefined?"":e.emailAddress)},retrievePaymentChoiceSettings:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.choicesSuccessHandler,this.choicesErrorHandler,e.localURLs.PAYMENT_CHOICE_LANDING_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_SETTINGS,n.action.type=e.constants.PC_LANDING,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.choicesSuccessHandler,this.choicesErrorHandler,e.localURLs.PAYMENT_CHOICE_LANDING_JSON,{},this)}},choicesSuccessHandler:function(e){e.successResponse?(this.setVerificationFlag(e.successResponse.verificationDisplay),this.setResponse(e.successResponse),this.trigger("cp:paymentChoiceSettingsLoaded")):e.errorResponse&&this.choicesErrorHandler(e)},choicesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.models.cpPaymentExpressLandingModel",[],function(){return function(e){e.models.cpPaymentExpressLandingModel=CT.Model.extend({initialize:function(){},defaults:{appreciateMessage:"",message:"",termsAndConditionsAcknowledged:"N",termsAndConditionContent:"",emailAddress:"",mobileNumber:"",puid:"",puidValue:"",puidCustomMessage:""},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){this.set("message",e.message===undefined?"":e.message),this.set("termsAndConditionsAcknowledged",e.termsAndConditionsAcknowledged===undefined?"":e.termsAndConditionsAcknowledged),this.set("emailAddress",e.emailAddress===undefined?"":e.emailAddress),this.set("mobileNumber",e.mobileNumber===undefined?"":e.mobileNumber),this.set("puid",e.puid===undefined?"":e.puid),this.set("puidValue",e.puidValue===undefined?"":e.puidValue),this.set("puidCustomMessage",e.puidCustomMessage===undefined?"":e.puidCustomMessage),e.termsAndConditions&&this.set("termsAndConditionContent",e.termsAndConditions.content!==undefined?e.termsAndConditions.content:"")},retrievePaymentExpressSettings:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.expressSuccessHandler,this.expressErrorHandler,e.localURLs.PAYMENT_EXPRESS_LANDING_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_SETTINGS,n.action.type=e.constants.VE_LANDING,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.expressSuccessHandler,this.expressErrorHandler,e.localURLs.PAYMENT_EXPRESS_LANDING_JSON,{},this)}},expressSuccessHandler:function(e){e.successResponse?(this.setResponse(e.successResponse),"Y"===e.successResponse.termsAndConditionsAcknowledged?this.trigger("cp:paymentVirtualExpressLoginLoaded"):this.trigger("cp:paymentExpressSettingsLoaded")):e.errorResponse&&this.expressErrorHandler(e)},expressErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.models.cpPaymentExpressInvalidLogoutModel",[],function(){return function(e){e.models.cpPaymentExpressInvalidLogoutModel=CT.Model.extend({initialize:function(){},defaults:{header:"",thankyouMessage:"",logoutMessage:"",language:"",message:""},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){this.set("message",e.message===undefined?"":e.message),this.set("header",e.header!==undefined?e.header:""),this.set("thankyouMessage",e.thankyouMessage!==undefined?e.thankyouMessage:""),typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS==="I"?this.set("logoutMessage",""):this.set("logoutMessage",e.logoutMessage!==undefined?e.logoutMessage:""),this.set("language",e.language!==undefined?e.language:""),this.set("message",e.message!==undefined?e.message:"")},retrievePaymentExpressInvalidLogoutSettings:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.expressSuccessHandler,this.expressErrorHandler,e.localURLs.PAYMENT_EXPRESS_INVALID_LOGOUT_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_SETTINGS,n.action.type=e.constants.VE_LOUGOUT,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.expressSuccessHandler,this.expressErrorHandler,e.localURLs.PAYMENT_EXPRESS_INVALID_LOGOUT_JSON,{},this)}},expressSuccessHandler:function(e){e.successResponse?(this.setResponse(e.successResponse),this.trigger("cp:paymentExpressLogoutLoaded")):e.errorResponse&&this.choicesErrorHandler(e)},expressErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.collections.cpMFAChallengeCollect",[],function(){return function(e){e.collections.cpMFAChallengeCollect=CT.Collection.extend({model:e.models.cpMFAquestion,initialize:function(){},defaults:{},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.MFA_RETRIEVECHALLENGEQUESTIONS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(t,n){if(!t)return;this.reset();if(t.questions&&_.isArray(t.questions))for(var r=0;r<t.questions.length;r++){var i=new e.models.cpMFAChallengeQuestion;i.setResponse(t.questions[r]),this.add(i)}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.collections.cpAccountTransactions",[],function(){return function(e){e.collections.cpAccountTransactions=CT.Collection.extend({model:e.models.cpAccountTransaction,initialize:function(){},defaults:{},setResponse:function(t){if(!t)return;this.reset();if(t.transactionList)for(var n=0;n<t.transactionList.length;n++){var r=new e.models.cpAccountTransaction;r.setResponse(t.transactionList[n]),this.add(r)}}})}}),define("cp.models.cpAccountDetails",[],function(){return function(e){e.models.cpAccountDetails=CT.Model.extend({initialize:function(){},defaults:{currentBalance:"",beginningBalance:"",endingBalance:"",currentMonthFee:"",previousMonthFee:"",ytdFee:"",pendingTransactions:"",transRecordsSize:"",transactionList:new e.collections.cpAccountTransactions,onlineErrorResolutionContent:"",directInquiryPhone:"",directInquiryEmail:"",directInquiryWebsite:"",progType:"",feeSummary:"",isInvalidPeriod:"",curDate:""},createRequest:function(t,n,r){var i={},s={};return s.action={},s.action.appName=e.constants.APP_NAME,s.action.criterion=e.constants.RETRIEVE_TRANSACTION,s.action.language=e.data.cpLanguageMapping.get("currentLanguage"),s.data={},s.data.type=t,s.data.month=n,s.data.year=r,i.inputRequest=s,i},createLastTwelveMonthsTransactionsRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.RETRIEVE_TRANSACTION,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.type=t,n.inputRequest=r,n},setCurrentBalance:function(e){if(!e)return;this.set("currentBalance",e.currentBalance===undefined?"":e.currentBalance)},setTransactionList:function(t){this.get("transactionList")?this.get("transactionList").reset():this.set("transactionList",new e.collections.cpAccountTransactions),this.get("transactionList").setResponse(t)},setResponse:function(t){if(!t)return;this.get("transactionList")?this.get("transactionList").reset():this.set("transactionList",new e.collections.cpAccountTransactions),this.get("transactionList").setResponse(t),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("beginningBalance",t.beginningBalance===undefined?"":t.beginningBalance),this.set("endingBalance",t.endingBalance===undefined?"":t.endingBalance),this.set("currentMonthFee",t.currentMonthFee===undefined?"":t.currentMonthFee),this.set("previousMonthFee",t.previousMonthFee===undefined?"":t.previousMonthFee),this.set("ytdFee",t.ytdFee===undefined?"":t.ytdFee),this.set("pendingTransactions",t.pendingTransactions===undefined?"":t.pendingTransactions),this.set("transRecordsSize",t.transRecordsSize===undefined?"":t.transRecordsSize),this.set("onlineErrorResolutionContent",t.onlineErrorResolutionContent.content===undefined?"":t.onlineErrorResolutionContent.content),this.set("directInquiryPhone",t.directInquiryContacts.directInquiryPhone===undefined?"":t.directInquiryContacts.directInquiryPhone),this.set("directInquiryEmail",t.directInquiryContacts.directInquiryEmail===undefined?"":t.directInquiryContacts.directInquiryEmail),this.set("directInquiryWebsite",t.directInquiryContacts.directInquiryWebsite===undefined?"":t.directInquiryContacts.directInquiryWebsite),this.set("progType",t.progType===undefined?"":t.progType),this.set("feeSummary",t.feeSummary===undefined?"":t.feeSummary),this.set("curDate",t.curDate===undefined?"":t.curDate),this.set("isInvalidPeriod",t.isInvalidPeriod===undefined?"":t.isInvalidPeriod)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpOfferDetails",[],function(){return function(e){e.models.cpOfferDetails=CT.Model.extend({initialize:function(){},defaults:{offers:[],category:""},setResponse:function(e,t){if(!e)return;this.set("offers",e.offers?e.offers:[]),this.set("category",e.categoryName?e.categoryName:"")},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.collections.cpVendorCollection",[],function(){return function(e){e.collections.cpVendorCollection=CT.Collection.extend({model:e.models.cpOfferDetails,initialize:function(){},defaults:{},setResponse:function(t){if(!t)return;this.reset();if(t.categories)for(var n=0;n<t.categories.length;n++){var r=new e.models.cpOfferDetails;r.setResponse(t.categories[n]),this.add(r)}}})}}),define("cp.models.cpShop",[],function(){return function(e){e.models.cpShop=CT.Model.extend({initialize:function(){},defaults:{shopMessage:"",message:"",addFund:"N",vendorCollection:new e.collections.cpVendorCollection,wallet:"N",pin_change:"N",paymentVE:"N"},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){if(!e)return;this.set("pin_change",e.pin_change!==undefined?e.pin_change:"N"),this.set("paymentVE",e.paymentVE!==undefined?e.paymentVE:"N"),this.set("shopMessage",e.shopMessage!==undefined?e.shopMessage:""),this.set("message",e.message!==undefined?e.message:""),this.set("addFund",e.addFund!==undefined?e.addFund:"N"),this.get("vendorCollection").setResponse(e),this.set("wallet",e.wallet!==undefined?e.wallet:"N")},setMessage:function(e){if(!e)return;this.set("message",e.message!==undefined?e.message:"")}})}}),define("cp.models.cpMFAAuthentication",[],function(){return function(e){e.models.cpMFAAuthentication=CT.Model.extend({initialize:function(){},defaults:{id:null,mfaAuthCode:"",challengeQuestion:new e.models.cpMFAChallengeQuestion,challengeCollect:[],otpDetails:{},phoneNumbers:{},deliveryMethod:{}},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(t){if(!t)return;this.clear().set(this.defaults),this.set("mfaAuthCode",t.mfaAuthenticationCode!==undefined?t.mfaAuthenticationCode:e.constants.MFA_NONE);var n=this.get("mfaAuthCode");switch(n){case e.constants.MFA_NONE:break;case e.constants.MFA_CHALLENGE_COLLECT:this.get("challengeCollect").length=0;if(t.mfaQuestions&&_.isArray(t.mfaQuestions))for(var r=0;r<t.mfaQuestions.length;r++){var i=new e.collections.cpMFAChallengeCollect;i.setResponse(t.mfaQuestions[r]),this.get("challengeCollect").push(i)}break;case e.constants.MFA_CHALLENGE_QUESTION:this.get("challengeQuestion").setResponse(t);break;case e.constants.MFA_ONETIMEPASSWORD:this.set("otpDetails",t.otpDetails!==undefined?t.otpDetails:{});break;default:}}})}}),define("cp.models.cpAlertSetUp",[],function(){return function(e){e.models.cpAlertSetUp=CT.Model.extend({initialize:function(){},defaults:{mobileCarriers:{},phoneNumber:{},mobilePhoneAlert:"",alertFrequency:"",emailAlert:"",mobileCarrier:""},setResponse:function(e){if(!e)return;this.set("mobileCarriers",e.mobileCarriers!==undefined?e.mobileCarriers:{}),this.set("phoneNumber",e.phoneNumber!==undefined?e.phoneNumber:{})},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)},setAlertDetails:function(e){if(!e)return;this.set("mobileCarriers",e.alertDetails.mobileCarriers!==undefined?e.alertDetails.mobileCarriers:{}),this.set("phoneNumber",e.alertDetails.phoneNumber!==undefined?e.alertDetails.phoneNumber:{}),this.set("mobileCarrier",e.alertDetails.mobileCarrier!==undefined?e.alertDetails.mobileCarrier:{}),this.set("emailAlert",e.alertDetails.emailAlert!==undefined?e.alertDetails.emailAlert:{}),this.set("mobilePhoneAlert",e.alertDetails.mobilePhoneAlert!==undefined?e.alertDetails.mobilePhoneAlert:{}),this.set("alertFrequency",e.alertDetails.alertFrequency!==undefined?e.alertDetails.alertFrequency:{})}})}}),define("cp.models.cpretrievePINsettings",[],function(){return function(e){e.models.cpPinResetSettings=CT.Model.extend({initialize:function(){},defaults:{PUID:"N",DOB:"N",veCheck:"N"},setResponse:function(e){if(!e)return;this.set("PUID",e.puid!==undefined?e.puid:"N"),this.set("DOB",e.dob!==undefined?e.dob:"N"),this.set("veCheck",e.veCheck!==undefined?e.veCheck:"N")},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpBankDetails",[],function(){return function(e){e.models.cpBankDetails=CT.Model.extend({initialize:function(){},defaults:{bankName:"",routingNumber:"",accountNumber:"",accountType:"",canadianProgram:"",institutionNumber:"",transitNumber:"",termsAndConditionContent:"",type:""},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){if(!e)return;this.set("canadianProgram",e.canadianProgram!==undefined?e.canadianProgram:""),e.termsAndConditions?this.set("termsAndConditionContent",e.termsAndConditions.content!==undefined?e.termsAndConditions.content:""):e.bankInfo&&(this.set("bankName",e.bankInfo.bankName!==undefined?e.bankInfo.bankName:""),this.set("accountNumber",e.bankInfo.accountNumber!==undefined?e.bankInfo.accountNumber:""),this.set("accountType",e.bankInfo.accountType!==undefined?e.bankInfo.accountType:""),e.canadianProgram&&e.canadianProgram==="Y"?(this.set("institutionNumber",e.bankInfo.institutionNumber!==undefined?e.bankInfo.institutionNumber:""),this.set("transitNumber",e.bankInfo.transitNumber!==undefined?e.bankInfo.transitNumber:"")):this.set("routingNumber",e.bankInfo.routingNumber!==undefined?e.bankInfo.routingNumber:""))},setBankDetails:function(e){this.set("accountType",e.accountType?e.accountType:"c"),this.set("termsAcknowledged",e.termsAcknowledged?e.termsAcknowledged:""),this.set("bankName",e.bankName?e.bankName:""),this.set("routingNumber",e.routingNumber?e.routingNumber:""),this.set("institutionNumber",e.institutionNumber!==undefined?e.institutionNumber:""),this.set("transitNumber",e.transitNumber!==undefined?e.transitNumber:""),this.set("accountNumber",e.accountNumber?e.accountNumber:"")},getBankDetails:function(){var t=e.constants.ADD,n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.EDIT_BANK_DETAILS,r.action.type=t,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.accountType=this.get("accountType"),r.data.termsAcknowledged=this.get("termsAcknowledged"),r.data.bankName=this.get("bankName"),this.get("canadianProgram")&&this.get("canadianProgram")==="Y"?(r.data.institutionNumber=this.get("institutionNumber"),r.data.transitNumber=this.get("transitNumber")):r.data.routingNumber=this.get("routingNumber"),r.data.accountNumber=this.get("accountNumber"),n.inputRequest=r,n},UpdateBankDetails:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.EDIT_BANK_DETAILS,r.action.type=t?t:e.constants.UPDATE,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},n.inputRequest=r,n},deleteBankDetails:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.EDIT_BANK_DETAILS,n.action.type="Delete",n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.accountType=this.get("accountType"),n.data.bankName=this.get("bankName"),n.data.routingNumber=this.get("routingNumber"),n.data.accountNumber=this.get("accountNumber"),t.inputRequest=n,t},retrieveBankTransferSettings:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.RETRIEVE_BT_SETTINGS,r.action.type=t?t:"",r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,n}})}}),define("cp.models.cpWithdrawalDetails",[],function(){return function(e){e.models.cpWithdrawalDetails=CT.Model.extend({initialize:function(){},defaults:{type:"",amount:{},fee:"",recurringPercent:"",recurringWithdrawalEnabled:"Y",oneTimeWithdrawal:"Y",maxAutoPercent:"",fullAmount:{},isSameDayACHOn:"",withdrawType:"",stdFixedFee:"",stdPercentFee:"",sameDayFixedFee:"",sameDayPercentFee:""},setDefaults:function(){this.clear().set(this.defaults)},setWithdrawalDetails:function(e,t){if(!e)return;this.set("type",t?t:""),this.set("amount",e.amount?e.amount:{}),this.set("withdrawType",e.withdrawType?e.withdrawType:"")},setOneTimeWithdrawalEnabled:function(e){if(!e)return;this.set("oneTimeWithdrawal",e.oneTimeWithdrawal?e.oneTimeWithdrawal:"Y")},setRecurringWithdrawalEnabled:function(e){if(!e)return;this.set("recurringWithdrawalEnabled",e.recurringWithdrawal?e.recurringWithdrawal:"Y"),this.set("fullAmount",e.fullAmount?e.fullAmount:{}),this.set("oneTimeWithdrawal",e.oneTimeWithdrawal?e.oneTimeWithdrawal:"Y")},setACHFee:function(e){this.set("isSameDayACHOn",e.isSameDayACHOn?e.isSameDayACHOn:"N"),e.stdFixedFee&&this.set("stdFixedFee",e.stdFixedFee!==undefined?e.stdFixedFee:"0.00"),e.stdPercentFee&&this.set("stdPercentFee",e.stdPercentFee!==undefined?e.stdPercentFee:"0.00"),e.sameDayFixedFee&&this.set("sameDayFixedFee",e.sameDayFixedFee!==undefined?e.sameDayFixedFee:"0.00"),e.sameDayPercentFee&&this.set("sameDayPercentFee",e.sameDayPercentFee!==undefined?e.sameDayPercentFee:"0.00")},setRecurringPercent:function(e){if(!e)return;this.set("recurringPercent",e.recurringPercent?e.recurringPercent:"")},setResponse:function(e,t){e.fee&&this.set("fee",e.fee!==undefined?e.fee:"0.00"),this.set("type",t?t:"")},setRecurringResponse:function(e){if(!e)return;e.maxAutoPercent&&this.set("maxAutoPercent",e.maxAutoPercent!==undefined?e.maxAutoPercent:"")},setCurrentWithdrawal:function(e){if(!e)return;this.set("frequency",e.frequency?e.frequency:""),this.set("recurringPercent",e.amount?e.amount:""),this.set("fee",e.fee?e.fee:"")},confirmWithdrawalDetails:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CONFIRM_OT,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.amount=this.get("amount"),n.data.fee=this.get("fee"),t.inputRequest=n,t},cancelExistingWithdrawal:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CHANGE_RECURRING_WITHDRAWAL,n.action.type=e.constants.CANCEL,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.amount=this.get("recurringPercent"),t.inputRequest=n,t},confirmRecuringWithdrawalDetails:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CHANGE_RECURRING_WITHDRAWAL,n.action.type=e.constants.SCHEDULE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.amount=this.get("recurringPercent"),t.inputRequest=n,t}})}}),define("cp.models.cpPaymentChoiceBankDetailsModel",[],function(){return function(e){e.models.cpPaymentChoiceBankDetailsModel=CT.Model.extend({initialize:function(){},defaults:{bankName:"",termsAndConditionContent:"",termsMessage:"",bankInfo:{},userName:"",password:"",termsAndConditionsAcknowledged:"N",canadianProgram:"N",isSameDayACHOn:"",withdrawalType:"",stdFee:"",sameDayFee:"",isEditBankReturning:"N",bankTransferNotInitialChoice:"N"},setDefaults:function(){this.clear().set(this.defaults)},setResponse:function(e){if(!e)return;this.set("canadianProgram",e.canadianProgram!==undefined?e.canadianProgram:"N"),this.set("termsMessage",e.termsMessage?e.termsMessage:""),this.set("bankInfo",e.bankInfo?e.bankInfo:{}),e.termsAndConditions&&this.set("termsAndConditionContent",e.termsAndConditions.content!==undefined?e.termsAndConditions.content:"")},retrieveBankTransferSettings:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_BT_SETTINGS,n.action.type=e.constants.PC_BANK,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setACHFee:function(t,n){this.set("isSameDayACHOn",t.isSameDayACHOn?t.isSameDayACHOn:"N"),n&&n===e.constants.EDIT_ACH_RETURNING?this.set("isEditBankReturning","Y"):this.set("isEditBankReturning","N"),e.constants.BANK_NOTINITIAL_CHOICE==="Y"&&this.set("bankTransferNotInitialChoice","Y"),t.stdFee&&this.set("stdFee",t.stdFee!==undefined?t.stdFee:"$0.00"),t.sameDayFee&&this.set("sameDayFee",t.sameDayFee!==undefined?t.sameDayFee:"$0.00")},setUserDetails:function(e){if(!e)return;this.set("userName",e.userName!==undefined?e.userName:""),this.set("password",e.password!==undefined?e.password:""),this.set("termsAndConditionsAcknowledged",e.termsAndConditionsAcknowledged!==undefined?e.termsAndConditionsAcknowledged:"N"),this.set("bankInfo",e.bankInfo!==undefined?e.bankInfo:{})}})}}),define("cp.collections.cpGlobalTransferHistory",[],function(){return function(e){e.collections.cpGlobalTransferHistory=CT.Collection.extend({model:e.models.cpGlobalTransferHistoryModel,initialize:function(){},defaults:{},setResponse:function(t){if(!t)return;this.reset();if(t.transferList)for(var n=0;n<t.transferList.length;n++){var r=new e.models.cpGlobalTransfer;r.setResponse(t.transferList[n]),this.add(r)}}})}}),define("cp.models.cpGlobalTransferHistoryModel",[],function(){return function(e){e.models.cpGlobalTransferHistoryModel=CT.Model.extend({initialize:function(){},defaults:{oneTimeTransfer:" ",recurringTransfer:" ",transHistorySize:" ",moreTransactionsAvailable:"",suspended:"",pendingCorrection:"",transferList:new e.collections.cpGlobalTransferHistory,currentBalance:"",origin:"",edit:"False",cancelOrigin:"",deleteOrigin:""},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_DEPOSITS_HOME,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(t){if(!t)return;this.get("transferList")?this.get("transferList").reset():this.set("transferList",new e.collections.cpGlobalTransferHistory),this.get("transferList").setResponse(t),this.set("oneTimeTransfer",t.oneTimeTransfer===undefined?"":t.oneTimeTransfer),this.set("recurringTransfer",t.recurringTransfer===undefined?"":t.recurringTransfer),this.set("transHistorySize",t.transHistorySize===undefined?"":t.transHistorySize),this.set("moreTransactionsAvailable",t.moreTransactionsAvailable===undefined?"":t.moreTransactionsAvailable),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("suspended",t.suspended===undefined?"":t.suspended),this.set("pendingCorrection",t.pendingCorrection===undefined?"":t.pendingCorrection)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalTransferModel",[],function(){return function(e){e.models.cpGlobalTransfer=CT.Model.extend({initialize:function(){},defaults:{transferDate:"",bankName:"",transferAmount:"",transferType:"",fees:"",referenceID:"",amountRec:"",enableCancel:"",cancelled:""},setResponse:function(e){if(!e)return;this.set("transferDate",e.transferDate===undefined?"":e.transferDate),this.set("bankName",e.bankName===undefined?"":e.bankName),this.set("transferAmount",e.transferAmount===undefined?"":e.transferAmount),this.set("transferType",e.transferType===undefined?"":e.transferType),this.set("fees",e.fees===undefined?"":e.fees),this.set("referenceID",e.referenceID===undefined?"":e.referenceID),this.set("enableCancel",e.enableCancel===undefined?"":e.enableCancel),this.set("amountRec",e.amountRec===undefined?"":e.amountRec),this.set("cancelled",e.cancelled===undefined?"":e.cancelled)}})}}),define("cp.models.cpGlobalRecurringTransfersModel",[],function(){return function(e){e.models.cpGlobalRecurringTransfersModel=CT.Model.extend({initialize:function(){},defaults:{banksListSize:"",banksList:[],currentBalance:"",edit:"False",screen:"",origin:"",deleteBank:"",enableEdit:"N",enableAdd:"N",isCardlessFxON:"N",bankTobeDeleted:{}},setDefaults:function(){this.clear().set(this.defaults)},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_RECURRING,n.action.type=e.constants.GLOBAL_TRANSFERS_HOME_DEFAULT_TYPE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(t){if(!t)return;var n=[];if(t.banksList){for(var r=0;r<t.banksList.length;r++){var i={};i.bankName=t.banksList[r].bankName,i.payeeName=t.banksList[r].payeeName,i.percAllotment=t.banksList[r].percAllotment,i.fee=t.banksList[r].fee,i.deviceID=e.root.utils.formatDeviceId(t.banksList[r].deviceID),i.transactionFailed=t.banksList[r].transactionFailed,n.push(i)}this.set("banksList",n)}this.set("banksListSize",t.banksListSize===undefined?"":t.banksListSize),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("deleteBank",t.deleteBank===undefined?"":t.deleteBank),this.set("enableEdit",t.enableEdit===undefined?"":t.enableEdit),this.set("enableAdd",t.enableAdd===undefined?"":t.enableAdd),this.set("isCardlessFxON",t.isCardlessFxON===undefined?"":t.isCardlessFxON),this.set("bankTobeDeleted",t.bankTobeDeleted===undefined?"":t.bankTobeDeleted)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalRetrieveBankDetailsModel",[],function(){return function(e){e.models.cpGlobalRetrieveBankDetailsModel=CT.Model.extend({initialize:function(){},defaults:{banksListSize:"",banksList:[],currentBalance:"",origin:"",screen:"",editRecurring:"",enableAdd:"N",oneTimeTransferOrigin:"",recurringOrigin:"",sourceOrigin:""},setDefaults:function(){this.clear().set(this.defaults)},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_RETRIEVE_BANK,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(t){if(!t)return;var n=[];if(t.banksList){for(var r=0;r<t.banksList.length;r++){var i={};i.bankName=t.banksList[r].bankName,i.address=t.banksList[r].address,t.banksList[r].accountNumber===undefined?i.accountNumber="":i.accountNumber=t.banksList[r].accountNumber,i.deviceID=e.root.utils.formatDeviceId(t.banksList[r].deviceID),i.suspended=t.banksList[r].suspended,t.banksList[r].suspended==="Y"&&(i.suspendedAlert=t.banksList[r].suspendedAlert===undefined?"":t.banksList[r].suspendedAlert),i.pendingCorrection=t.banksList[r].pendingCorrection,i.oneTimeTransfer=t.banksList[r].oneTimeTransfer,i.recurringTransfer=t.banksList[r].recurringTransfer,i.enableDelete=t.banksList[r].enableDelete,n.push(i)}this.set("banksList",n)}this.set("banksListSize",t.banksListSize===undefined?"":t.banksListSize),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("enableAdd",t.enableAdd===undefined?"":t.enableAdd)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpCurrentFxRateCountryDetailsModel",[],function(){return function(e){e.models.cpCurrentFxRateCountryDetailsModel=CT.Model.extend({initialize:function(){},defaults:{countryListSize:" ",countryList:[],currentBalance:"",origin:"",termsAndConditionContent:"",termsAndConditionsAcknowledged:"N",beneAndBankFields:[],origin:"",screen:"",oneTimeTransfer:"",recurringTransfer:"",GDFeeApplicableMessage:""},setResponse:function(e){if(!e)return;var t=[];if(e.countryList){for(var n=0;n<e.countryList.length;n++){var r={};r.countryCode=e.countryList[n].countryCode,r.countryName=e.countryList[n].countryName,t.push(r)}this.set("countryListDetails",t)}this.set("currentBalance",e.currentBalance===undefined?"":e.currentBalance),this.set("countryListSize",e.countryListSize===undefined?"":e.countryListSize),this.set("oneTimeTransfer",e.oneTimeTransfer===undefined?"":e.oneTimeTransfer),this.set("recurringTransfer",e.recurringTransfer===undefined?"":e.recurringTransfer)},setAddBankDetails:function(e){if(!e)return;e.termsAndConditions&&this.set("termsAndConditionContent",e.termsAndConditions.content!==undefined?e.termsAndConditions.content:""),this.set("termsAndConditionsAcknowledged",e.termsAndConditionsAcknowledged!==undefined?e.termsAndConditionsAcknowledged:"N")},setCountryFields:function(e){if(!e)return;var t=[];if(e.beneAndBankFields){for(var n=0;n<e.beneAndBankFields.length;n++){var r={};r.displayName=e.beneAndBankFields[n].displayName,r.name=e.beneAndBankFields[n].name,r.domainProperty=e.beneAndBankFields[n].domainProperty,r.mandatory=e.beneAndBankFields[n].mandatory,r.secure=e.beneAndBankFields[n].secure,r.maxLength=e.beneAndBankFields[n].maxLength,r.hint=e.beneAndBankFields[n].hint,t.push(r)}this.set("beneAndBankFields",t)}this.set("GDFeeApplicableMessage",e.GDFeeApplicableMessage===undefined?"":e.GDFeeApplicableMessage)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpCurrentFxRateCurrencyDetailsModel",[],function(){return function(e){e.models.cpCurrentFxRateCurrencyDetailsModel=CT.Model.extend({initialize:function(){},defaults:{currencyListSize:" ",currencyList:[]},setResponse:function(e){if(!e)return;var t=[];if(e.currencyList){for(var n=0;n<e.currencyList.length;n++){var r={};r.currencyCode=e.currencyList[n].currencyCode,t.push(r)}this.set("currencyListDetails",t)}this.set("currencyListSize",e.currencyListSize===undefined?"":e.currencyListSize)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpCurrentFxRateModel",[],function(){return function(e){e.models.cpCurrentFxRateModel=CT.Model.extend({initialize:function(){},defaults:{fxRate:""},setResponse:function(e){if(!e)return;this.set("fxRate",e.fxRate===undefined?"":e.fxRate)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalPaymentMethodsModel",[],function(){return function(e){e.models.cpGlobalPaymentMethodsModel=CT.Model.extend({initialize:function(){},defaults:{paymentMethodsListSize:" ",paymentMethodsList:[]},setResponse:function(e){if(!e)return;var t=[];if(e.paymentMethodsList){for(var n=0;n<e.paymentMethodsList.length;n++){var r={};r.paymentMethod=e.paymentMethodsList[n].paymentMethod,t.push(r)}this.set("paymentListDetails",t)}},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalOTTUserBanksDetailsModel",[],function(){return function(e){e.models.cpGlobalOTTUserBanksDetailsModel=CT.Model.extend({initialize:function(){},defaults:{banksListSize:" ",banksList:[],currentBalance:"",screen:"",origin:"",enableAdd:"N"},setResponse:function(t){if(!t)return;var n=[];if(t.banksList){for(var r=0;r<t.banksList.length;r++){var i={};i.bankName=t.banksList[r].bankName,i.address=t.banksList[r].address,t.banksList[r].accountNo===undefined?i.accountNo="":i.accountNo=t.banksList[r].accountNo,i.enableOneTimeTransfer=t.banksList[r].enableOneTimeTransfer,i.deviceID=e.root.utils.formatDeviceId(t.banksList[r].deviceID),n.push(i)}this.set("banksListDetails",n)}this.set("currentBalance",t.banksListSize===undefined?"":t.currentBalance),this.set("enableAdd",t.enableAdd===undefined?"":t.enableAdd)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalOTTGetFxRateModel",[],function(){return function(e){e.models.cpGlobalOTTGetFxRateModel=CT.Model.extend({initialize:function(){},defaults:{banksDetails:{},fxRate:"",bankName:"",payeeName:"",deviceID:""},setResponse:function(t){if(!t)return;var n={};n.bankName=t.banksDetails.bankName,n.payeeName=t.banksDetails.payeeName,n.deviceID=e.root.utils.formatDeviceId(t.banksDetails.deviceID),this.set("banksDetails",n),this.set("fxRate",t.fxRate===undefined?"":t.fxRate)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalOTTConfirmModel",[],function(){return function(e){e.models.cpGlobalOTTConfirmModel=CT.Model.extend({initialize:function(){},defaults:{transferDetails:{},currentBalance:"",bankName:"",employeeName:"",payeeName:"",bankCountry:"",totalAmountSent:"",transferFees:"",transferTaxes:"",transferAmount:"",fxRate:"",totalAmountRec:"",otherFees:"",otherTaxes:"",estimatedAmountRec:"",deviceID:"",currentDate:"",negativeAmountMessage:""},setResponse:function(t){if(!t)return;var n={};n.employeeName=t.transferDetails.employeeName,n.payeeName=t.transferDetails.payeeName,n.bankName=t.transferDetails.bankName,n.bankCountry=t.transferDetails.bankCountry,n.totalAmountSent=t.transferDetails.totalAmountSent,n.transferFees=t.transferDetails.transferFees,n.transferTaxes=t.transferDetails.transferTaxes,n.transferAmount=t.transferDetails.transferAmount,n.fxRate=t.transferDetails.fxRate,n.totalAmountRec=t.transferDetails.totalAmountRec,n.otherFees=t.transferDetails.otherFees,n.otherTaxes=t.transferDetails.otherTaxes,n.estimatedAmountRec=t.transferDetails.estimatedAmountRec,n.deviceID=e.root.utils.formatDeviceId(t.transferDetails.deviceID),this.set("transferDetails",n),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("currentDate",t.currentDate===undefined?"":t.currentDate),this.set("negativeAmountMessage",t.negativeAmountMessage===undefined?"":t.negativeAmountMessage)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalOTTSuccessModel",[],function(){return function(e){e.models.cpGlobalOTTSuccessModel=CT.Model.extend({initialize:function(){},defaults:{transferDetails:{},currentBalance:"",bankName:"",employeeName:"",payeeName:"",bankCountry:"",confirmationCode:"",availableDate:"",totalAmountSent:"",transferFees:"",transferTaxes:"",transferAmount:"",fxRate:"",totalAmountRec:"",otherFees:"",otherTaxes:"",estimatedAmountRec:"",deviceID:"",currentDate:""},setResponse:function(t){if(!t)return;var n={};n.employeeName=t.transferDetails.employeeName,n.payeeName=t.transferDetails.payeeName,n.bankName=t.transferDetails.bankName,n.bankCountry=t.transferDetails.bankCountry,n.confirmationCode=t.transferDetails.confirmationCode,n.availableDate=t.transferDetails.availableDate,n.totalAmountSent=t.transferDetails.totalAmountSent,n.transferFees=t.transferDetails.transferFees,n.transferTaxes=t.transferDetails.transferTaxes,n.transferAmount=t.transferDetails.transferAmount,n.fxRate=t.transferDetails.fxRate,n.totalAmountRec=t.transferDetails.totalAmountRec,n.otherFees=t.transferDetails.otherFees,n.otherTaxes=t.transferDetails.otherTaxes,n.estimatedAmountRec=t.transferDetails.estimatedAmountRec,n.deviceID=e.root.utils.formatDeviceId(t.transferDetails.deviceID),this.set("transferDetails",n),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("currentDate",t.currentDate===undefined?"":t.currentDate)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalOTTCancelModel",[],function(){return function(e){e.models.cpGlobalOTTCancelModel=CT.Model.extend({initialize:function(){},defaults:{transferDetails:{},currentBalance:"",bankName:"",employeeName:"",payeeName:"",bankCountry:"",confirmationCode:"",availableDate:"",totalAmountSent:"",transferFees:"",transferTaxes:"",transferAmount:"",fxRate:"",totalAmountRec:"",otherFees:"",otherTaxes:"",estimatedAmountRec:"",currentDate:"",enableCancel:""},setResponse:function(e){if(!e)return;var t={};t.employeeName=e.transferDetails.employeeName,t.payeeName=e.transferDetails.payeeName,t.bankName=e.transferDetails.bankName,t.bankCountry=e.transferDetails.bankCountry,t.confirmationCode=e.transferDetails.confirmationCode,t.availableDate=e.transferDetails.availableDate,t.totalAmountSent=e.transferDetails.totalAmountSent,t.transferFees=e.transferDetails.transferFees,t.transferTaxes=e.transferDetails.transferTaxes,t.transferAmount=e.transferDetails.transferAmount,t.fxRate=e.transferDetails.fxRate,t.totalAmountRec=e.transferDetails.totalAmountRec,t.otherFees=e.transferDetails.otherFees,t.otherTaxes=e.transferDetails.otherTaxes,t.estimatedAmountRec=e.transferDetails.estimatedAmountRec,this.set("transferDetails",t),this.set("enableCancel",e.enableCancel===undefined?"":e.enableCancel),this.set("currentBalance",e.currentBalance===undefined?"":e.currentBalance),this.set("currentDate",e.currentDate===undefined?"":e.currentDate)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalSelectedBankInfoModel",[],function(){return function(e){e.models.cpGlobalSelectedBankInfoModel=CT.Model.extend({initialize:function(){},defaults:{country:"",currency:"",paymentMethod:"",enableDelete:"",enableEdit:"",currentBalance:"",screen:"",origin:"",editRecurring:"",deviceID:"",enableAdd:"N",oneTimeTransferOrigin:"",recurringOrigin:"",sourceOrigin:"",suspended:""},setResponse:function(t){if(!t)return;var n=[];if(t.beneAndBankFields){for(var r=0;r<t.beneAndBankFields.length;r++){var i={};i.displayName=t.beneAndBankFields[r].displayName,i.name=t.beneAndBankFields[r].name,i.domainProperty=t.beneAndBankFields[r].domainProperty,i.secure=t.beneAndBankFields[r].secure,i.value=t.beneAndBankFields[r].value,n.push(i)}this.set("beneAndBankFields",n)}this.set("country",t.country===undefined?"":t.country),this.set("currency",t.currency===undefined?"":t.currency),this.set("paymentMethod",t.paymentMethod===undefined?"":t.paymentMethod),this.set("enableDelete",t.enableDelete===undefined?"":t.enableDelete),this.set("enableEdit",t.enableEdit===undefined?"":t.enableEdit),this.set("oneTimeTransfer",t.oneTimeTransfer===undefined?"":t.oneTimeTransfer),this.set("recurringTransfer",t.recurringTransfer===undefined?"":t.recurringTransfer),this.set("currentBalance",t.currentBalance===undefined?"":t.currentBalance),this.set("deviceID",t.deviceID===undefined?"":e.root.utils.formatDeviceId(t.deviceID)),this.set("enableAdd",t.enableAdd===undefined?"":t.enableAdd),this.set("suspended",t.suspended===undefined?"":t.suspended)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpGlobalEditRetrieveModel",[],function(){return function(e){e.models.cpGlobalEditRetrieveModel=CT.Model.extend({initialize:function(){},defaults:{countryList:{},currentBalance:"",currencyList:{},paymentMethodsList:{},beneAndBankFields:{},termsAndConditionContent:"",termsAndConditionsAcknowledged:"N"},setDefaults:function(){this.clear().set(this.defaults)},setbeneAndBankFieldsDetails:function(e){var t=[];if(e.beneAndBankFields){for(var n=0;n<e.beneAndBankFields.length;n++){var r={};r.displayName=e.beneAndBankFields[n].displayName,r.name=e.beneAndBankFields[n].name,r.domainProperty=e.beneAndBankFields[n].domainProperty,r.value=e.beneAndBankFields[n].value,r.mandatory=e.beneAndBankFields[n].mandatory,r.secure=e.beneAndBankFields[n].secure,r.maxLength=e.beneAndBankFields[n].maxLength,r.hint=e.beneAndBankFields[n].hint,t.push(r)}this.set("beneAndBankFields",t)}},setResponse:function(e){if(!e)return;var t=[];if(e.countryList){for(var n=0;n<e.countryList.length;n++){var r={};r.name=e.countryList[n].name,r.displayName=e.countryList[n].displayName,r.selected=e.countryList[n].selected,t.push(r)}this.set("countryListDetails",t)}var i=[];if(e.currencyList){for(var n=0;n<e.currencyList.length;n++){var s={};s.currency=e.currencyList[n].currency,s.selected=e.currencyList[n].selected,i.push(s)}this.set("currencyListDetails",i)}var o=[];if(e.paymentMethodsList){for(var n=0;n<e.paymentMethodsList.length;n++){var u={};u.paymentMethod=e.paymentMethodsList[n].paymentMethod,u.selected=e.paymentMethodsList[n].selected,o.push(u)}this.set("paymentMethodsListDetails",o)}e.termsAndConditions&&this.set("termsAndConditionContent",e.termsAndConditions.content!==undefined?e.termsAndConditions.content:""),this.set("currentBalance",e.currentBalance===undefined?"":e.currentBalance)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.models.cpCardAuthenticationModel",[],function(){return function(e){e.models.cpCardAuthenticationModel=CT.Model.extend({initialize:function(){},defaults:{authSettingsDisplay:{},postalCode:"",dob:"",mobilePhone:"",ssn:"",puid:"",puidDisplayValue:"",noAddtionalAuth:"",userCountry:{},userUS:"",userCanada:""},setResponse:function(e){if(!e)return;var t={};t.postalCode=e.authSettingsDisplay.postalCode===undefined?"":e.authSettingsDisplay.postalCode,t.dob=e.authSettingsDisplay.dob===undefined?"":e.authSettingsDisplay.dob,t.mobilePhone=e.authSettingsDisplay.mobilePhone===undefined?"":e.authSettingsDisplay.mobilePhone,t.ssn=e.authSettingsDisplay.ssn===undefined?"":e.authSettingsDisplay.ssn,t.noAddtionalAuth=e.authSettingsDisplay.noAddtionalAuth===undefined?"":e.authSettingsDisplay.noAddtionalAuth,t.puid=e.authSettingsDisplay.puid===undefined?"":e.authSettingsDisplay.puid,t.puidDisplayValue=e.authSettingsDisplay.puidDisplayValue===undefined?"":e.authSettingsDisplay.puidDisplayValue;var n={};n.userUS=e.userCountry.userUS===undefined?"":e.userCountry.userUS,n.userCanada=e.userCountry.userCanada===undefined?"":e.userCountry.userCanada,this.set("authSettingsDisplay",t),this.set("userCountry",n)},setErrorResponse:function(e){this.set("errorCode",e.errorCode===undefined?"":e.errorCode),this.set("errorMessage",e.errorMessage===undefined?"":e.errorMessage)}})}}),define("cp.collections.cpDisclosuresAndFees",[],function(){return function(e){e.collections.cpDisclosuresAndFees=CT.Collection.extend({model:e.models.cpDisclosureFeesDetails,initialize:function(){},defaults:{messages:[]},createRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_FEES,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},setResponse:function(t){if(!t)return;this.reset();if(t.disclosuresAndFees)for(var n=0;n<t.disclosuresAndFees.length;n++){var r=new e.models.cpDisclosureFeesDetails;r.setResponse(t.disclosuresAndFees[n]),this.add(r)}if(t.messages){var i=[];for(var n=0;n<t.messages.length;n++)i.push(t.messages[n]);e.data.cpDisclosureAndFeesMessages=i}else e.data.cpDisclosureAndFeesMessages=[]}})}}),define("cp.collections.cpFAQCollection",[],function(){return function(e){e.collections.cpFAQCollection=CT.Collection.extend({model:e.models.cpFAQDetails,initialize:function(){},defaults:{},createRequest:function(t){var n={},r={};return r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.RETRIEVE_FAQS,r.action.type=t,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,n},setResponse:function(t,n){if(!t)return;this.reset();if(t.FAQs)for(var r=0;r<t.FAQs.length;r++){var i=new e.models.cpFAQDetails;i.setResponse(t.FAQs[r],n),this.add(i)}}})}}),define("cp.collections.cpPaymentClaim",[],function(){return function(e){e.collections.cpPaymentClaim=CT.Collection.extend({model:e.models.cpPaymentClaim,initialize:function(){},defaults:{},setResponse:function(t){if(!t)return;this.reset();if(t.redeemPayments)for(var n=0;n<t.redeemPayments.length;n++){var r=new e.models.cpPaymentClaim;r.setResponse(t.redeemPayments[n]),this.add(r)}}})}}),define("cp.views.cpLoginView",[],function(){return function(e){e.views.cpLoginView=CT.View.extend({initialize:function(){navigator.cookieEnabled?this.userName=localStorage.getItem("userName")?localStorage.getItem("userName"):"":this.userName="",this.currentLanguage=e.data.cpLanguageMapping.get("currentLanguage")?e.data.cpLanguageMapping.get("currentLanguage"):e.constants.LANGUAGE_EN,this.render(),e.root.utils.updateLanguageLabels(e,this),e.root.utils.dismissInfoPopup()},events:{"click .cp-signon":"navigateNext","click .cp-refresh-image":"getRandomCaptcha","click .cp-forgotUserId":"navigateForgotId","click .cp-forgot-password":"navigateForgotPassword","click .cp-expresslogin-conatiner":"navigateExpressLogin","click .cp-FAQ-conatiner":"navigateFaqScreen","change select":"languageSelected","click .cp-checkbox":"rememberUserID","click .cp-atmlocator-conatiner":"redirectATMLocator","click .cp-info":"showInfoPopup","click .cp-register":"startRegistrationFlow","click .cp-reward-conatiner":"navigateRewardCode","click .cp-card-activation-container":"navigateCardActivationLogin"},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.captchaLoginRequest(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),$(".cp-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),this.$el.find(".cp-captcha-Login-container").removeClass("hidden"),$("#cpImg").load(function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").error(function(){$(".loaderOverlay").css("display","none")})}else this.$el.find(".cp-captcha-Login-container").addClass("hidden"),$(".loaderOverlay").css("display","none");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},render:function(){var t={},n=this;t.userName=this.userName,t.currentLanguage=this.currentLanguage,t.redirectURLs=e.redirectURLs,this.$el.empty().append(e.templates.cpLoginView({model:t})),this.$el.find("select").children().attr("selected",!1),this.$el.find("select").children("option[value="+this.currentLanguage+"]").attr("selected",!0),this.userName!==undefined&&this.userName!==""&&this.$el.find(".cp-username").val(this.userName),this.$el.find(".cp-password").val(""),this.$el.find(".cp-privacy-link").attr("href",this.getPrivacyURL()),this.$el.find(".cp-register").attr("href",this.redirectTORegistrationPage()),this.$el.find(".cp-fullsite-link").attr("href",this.redirectToFullDesktopSite()),this.$el.find(".cp-termsandconditions-link").attr("href",this.redirectToTermsConditions());var r=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),i=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),s=new Date,o=s.getFullYear();this.$el.find(".cp-footer-row2").html(r+" "+o+" "+i),ATM_LOCATOR!=="Y"&&this.$el.find(".cp-atmlocator-conatiner").addClass("hidden");var u=document.documentElement.clientHeight,a=document.documentElement.clientWidth;$(window).resize(function(){document.documentElement.clientHeight==a&&document.documentElement.clientWidth==u&&(u=document.documentElement.clientHeight,a=document.documentElement.clientWidth),document.documentElement.clientHeight<u&&e.root.utils.getMobileOperatingSystem()==="Android"?$(".cp-footer-container").hide():$(".cp-footer-container").show()}),e.root.utils.getMobileOperatingSystem()==="iOS"&&$("#LoginContainer section").scroll(function(e){$(document.activeElement).blur()}),this.handleMFA(),this.options.type!=="claimcode"&&this.getRandomCaptcha()},rememberUserID:function(e){var t=$(e.currentTarget);t.hasClass("cp-checkbox-off")?t.removeClass("cp-checkbox-off").addClass("cp-checkbox-on"):t.hasClass("cp-checkbox-on")&&t.removeClass("cp-checkbox-on").addClass("cp-checkbox-off")},navigateNext:function(e){e.preventDefault(),e.stopPropagation(),$(document.activeElement).blur(),$(e.target).addClass("cp-button-selected"),this.validateAndNavigate()},showInfoPopup:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.get(this.currentLanguage)["cp.login.registerText"];e.root.utils.showInfoPopup(t,n,"left")},navigateForgotId:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(t.target.hasAttribute("clicked"))return;t.target.setAttribute("clicked",!0),setTimeout(function(){t.target.removeAttribute("clicked"),e.root.utils.destroyView(n),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpForgotUsernameView({el:"#main-container"})},1e3)},navigateForgotPassword:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(t.target.hasAttribute("clicked"))return;t.target.setAttribute("clicked",!0),setTimeout(function(){t.target.removeAttribute("clicked"),n.presentModalView(e.views.cpForgotPasswordView,{},!0,n.modalDismissed)},1e3)},startRegistrationFlow:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(t.target.hasAttribute("clicked"))return;t.target.setAttribute("clicked",!0),setTimeout(function(){t.target.removeAttribute("clicked"),e.root.utils.destroyView(n),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.REGISTER,disableMenu:!0})},1e3)},navigateFaqScreen:function(t){var n=this;$(t.currentTarget).addClass("cp-button-selected"),$(t.currentTarget).addClass("cp-button-selected-animated"),e.data.cpPreFAQCollection||(e.data.cpPreFAQCollection=new e.collections.cpFAQCollection),setTimeout(function(){$(t.currentTarget).removeClass("cp-button-selected-animated"),n.presentModalView(e.views.cpFAQ,{type:"prelogin"},!0,n.modalDismissed)},200)},modalDismissed:function(){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-password").val(""),this.getRandomCaptcha()},navigateExpressLogin:function(t){$(t.currentTarget).addClass("cp-button-selected");var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected-animated"),setTimeout(function(){$(t.currentTarget).removeClass("cp-button-selected-animated"),n.presentModalView(e.views.cpExpressLoginView,{},!0,n.modalDismissed)},300)},redirectATMLocator:function(e){$(e.currentTarget).addClass("cp-button-selected"),$(e.currentTarget).addClass("cp-button-selected-animated"),setTimeout(function(){$(e.currentTarget).removeClass("cp-button-selected-animated"),$(e.currentTarget).removeClass("cp-button-selected")},3e3)},navigateRewardCode:function(t){e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),$(t.currentTarget).addClass("cp-button-selected");var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected-animated"),setTimeout(function(){$(t.currentTarget).removeClass("cp-button-selected-animated"),n.presentModalView(e.views.cpPaymentClaimView,{},!0,n.modalDismissed)},300)},navigateCardActivationLogin:function(t){$(t.currentTarget).addClass("cp-button-selected");var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected-animated"),setTimeout(function(){$(t.currentTarget).removeClass("cp-button-selected-animated"),n.presentModalView(e.views.cpCardActivationLandingPageView,{},!0,n.modalDismissed)},300)},redirectForgotPassword:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.FORGOT_PASSWORD_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.FORGOT_PASSWORD_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.FORGOT_PASSWORD_FR:e.redirectURLs.FORGOT_PASSWORD_EN},redirectTORegistrationPage:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.NEW_REGISTER_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.NEW_REGISTER_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.NEW_REGISTER_FR:e.redirectURLs.NEW_REGISTER_EN},redirectToFullDesktopSite:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.FULL_DESKTOP_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.FULL_DESKTOP_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.FULL_DESKTOP_FR:e.redirectURLs.FULL_DESKTOP_EN},redirectToTermsConditions:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.TC_LOGIN_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.TC_LOGIN_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.TC_LOGIN_FR:e.redirectURLs.TC_LOGIN_EN},getPrivacyURL:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.PRIVACY_EN_LOGIN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.PRIVACY_SP_LOGIN:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.PRIVACY_FR_LOGIN:e.redirectURLs.PRIVACY_EN_LOGIN},languageSelected:function(t){var n=$(t.target).val();n&&n!==this.currentLanguage&&(this.currentLanguage=n,e.data.cpLanguageMapping.set("currentLanguage",n),_.size(e.data.cpLanguageMapping.get(n))===0?e.root.utils.getMultilanguageMapping(e,this):e.root.utils.updateLanguageLabels(e,this),this.$el.find(".cp-privacy-link").attr("href",this.getPrivacyURL()),this.$el.find(".cp-register").attr("href",this.redirectTORegistrationPage()),this.$el.find(".cp-fullsite-link").attr("href",this.redirectToFullDesktopSite()),this.$el.find(".cp-termsandconditions-link").attr("href",this.redirectToTermsConditions()))},languageMappingSuccessHandler:function(t){t.successResponse?(e.data.cpLanguageMapping.setResponse(t.successResponse),e.root.utils.updateLanguageLabels(e,this),this.getRandomCaptcha()):t.errorResponse&&(this.languageErrorhandler(t),this.getRandomCaptcha())},languageErrorhandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},validateAndNavigate:function(){var t=e.root.utils.trimText(this.$el.find(".cp-username").val());this.userName=t;var n=e.root.utils.isEmptyString(t);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-username").val(""),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(t.length<3){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-username").val(""),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(t.match(/[^a-zA-Z0-9\\@\\._ ]/)){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-username").val(""),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}var i=e.root.utils.trimText(this.$el.find(".cp-password").val());n=e.root.utils.isEmptyString(i);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(i.length<8&&i.length<50){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(this.checkCaptcha==="Y"){var s=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val());n=e.root.utils.isEmptyString(s);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.image.letters.text.info");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.getRandomCaptcha();return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onLoginSuccessHandler,this.onLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this);else{var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.MOBILE_AUTHENTICATION,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.action.type=e.constants.LOGIN,u.data={},u.data.username=this.$el.find(".cp-username").val(),u.data.password=this.$el.find(".cp-password").val(),this.checkCaptcha!=="N"&&(u.data.jcaptcha=this.$el.find(".cp-captchatext-input").val()),u.data.rsaToken=$("#RSADeviceFso").val(),u.data.devicePrint=$("#devicePrintId").val(),u.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.onLoginSuccessHandler,this.onLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this)}},onLoginSuccessHandler:function(t){if(t.successResponse){var n=this.$el.find(".cp-checkbox").hasClass("cp-checkbox-on");try{n?navigator.cookieEnabled&&localStorage.setItem("userName",this.userName):navigator.cookieEnabled&&localStorage.setItem("userName","")}catch(r){console.log(r)}e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),e.data.cpMFAAuthentication.setResponse(t.successResponse);var i=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(i,t)}else t.errorResponse&&this.onLoginErrorHandler(t)},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:e.data.cpMFAAuthentication.get("mfaAuthCode")===e.constants.MFA_NONE&&(e.data.cpUserInfo.setLastlogin(n.successResponse),e.data.cpSettings.setTermsAndConditions(n.successResponse),e.data.cpSettings.setEditContact(n.successResponse),n.successResponse.claimDetails!==undefined?(e.data.cpPaymentClaim.setClaimable("Y"),e.data.cpPaymentClaim.setPaymentDetailsResponse(n.successResponse.claimDetails)):e.data.cpPaymentClaim.setClaimable("N"),e.data.cpSettings.get("termsAndConditionsAcknowledged")==="N"?(e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",origin:e.constants.LOGIN,context:e.constants.TERMS_CONDITONS,type:"cp-Menu-Loader",disableMenu:!0})):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="Y"?(e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",origin:e.constants.LOGIN,context:e.constants.PAYMENTCLAIM_CONFIRMATION,type:"cp-Menu-Loader",disableMenu:!0})):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="N"?(e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",origin:e.constants.LOGIN,context:e.constants.PAYMENTCLAIM_ACTIVATION,type:"cp-Menu-Loader",disableMenu:!0})):(e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.LOGIN})));break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",origin:e.constants.LOGIN,context:e.constants.MFA_ONETIMEPASSWORD,type:"cp-Menu-Loader",disableMenu:!0});break;case e.constants.MFA_CHALLENGE_COLLECT:e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",origin:e.constants.LOGIN,context:e.constants.MFA_CHALLENGE_COLLECT,type:"cp-Menu-Loader",disableMenu:!0});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",origin:e.constants.LOGIN,context:e.constants.MFA_CHALLENGE_QUESTION,type:"cp-Menu-Loader",disableMenu:!0});break;default:}},onLoginErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;if(t.errorResponse.errorCode==="2"){var r=this.redirectToFullDesktopSite();e.root.common.Alertservice.showAlert(n,null,!0,r,this)}else e.root.common.Alertservice.showAlert(n)}this.userName!==undefined&&this.userName!==""&&this.$el.find(".cp-username").val(this.userName),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha()},redirectToDesktop:function(){$(".cp-fullsite-link")[0].click()},handleMFA:function(){callDevice();var e="./rsa_fso.swf";if(null!=e&&""!=e&&"null"!=e){e=e.substr(0,e.indexOf(".swf"));var t="field_name=RSADeviceFso&ip_address="+IP_ADDRESS;if(DetectFlashVer(6,0,0)){var n=AC_FL_RunContent("id","flash_id","width","1","height","1","movie",e,"quality","high","bgcolor","#FFFFFF","flashVars",t);this.$el.find(".cp-gradient").append(n)}}setTimeout(this.refreshData(),1e3)},refreshData:function(){fso=document.getElementById("RSADeviceFso").value,fso!=""&&fso!=undefined&&fso!=null&&(document.getElementById("RSADeviceFso").value=fso)}})}}),define("cp.views.cpMenuLoader",[],function(){return function(e){e.views.cpMenuLoader=CT.View.extend({initialize:function(){this.loadView(this.options.context,this.options.origin),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.destroyView),this.listenTo(e.root.eventBus,"cp:loadView",this.loadView)},render:function(){},loadView:function(t,n){switch(t){case e.constants.REGISTER:case e.constants.PAYMENTCLAIM_REGISTER:case e.constants.REGISTER_ACTIVATED_CARD:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpRegistrationBaseView({el:"#cp-menu-loader-container",context:{type:t}});break;case e.constants.REGISTER_TIPS:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpRegistrationTipsView({el:"#cp-menu-loader-container",type:e.constants.PAYMENTCLAIM_REGISTER});break;case e.constants.PAYMENTCLAIM_ACTIVATION:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpPaymentActivationView({el:"#cp-menu-loader-container",type:n});break;case e.constants.PAYMENTCLAIM_CONFIRMATION:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpPaymentConfirmationView({el:"#cp-menu-loader-container",type:n});break;case"POSTAL_CODE":this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpPostalcodeView({el:"#cp-menu-loader-container"});break;case e.constants.MFA_ONETIMEPASSWORD:case e.constants.MFA_CHALLENGE_COLLECT:case e.constants.MFA_CHALLENGE_QUESTION:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpLoginMFAView({el:"#cp-menu-loader-container",type:t,context:this.options.origin});break;case e.constants.CLAIM_AUTHENTICATION:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpPaymentClaimAuthenticationView({el:"#cp-menu-loader-container"});break;case e.constants.CLAIM_LOGIN:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpPaymentClaimLoginView({el:"#cp-menu-loader-container",type:t,context:this.options.origin});break;case e.constants.TERMS_CONDITONS:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpTermsAndConditionsView({el:"#cp-menu-loader-container",type:this.options.origin});break;case e.constants.CARD_AUTHENTICATION:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpCardAuthenticationView({el:"#cp-menu-loader-container"});break;case e.constants.CARD_ACTIVATED:this.$el.empty().append("<div id='cp-menu-loader-container'></div>"),new e.views.cpCardActivationSuccessView({el:"#cp-menu-loader-container",type:e.constants.CARD_ACTIVATED});break;default:}},destroyView:function(){this.destroy()}})}}),define("cp.views.cpLoginMFAView",[],function(){return function(e){e.views.cpLoginMFAView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),this.listenTo(e.root.eventBus,"cp:exitMFAEvent",this.dismissMFAScreen),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),e.data.cpSessionController.resetTimeout(),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:function(){},dismissMFAScreen:function(t){e.data.cpMFAAuthentication.clear(),t==="success"?(e.root.utils.destroyView(this),e.data.cpSettings.get("termsAndConditionsAcknowledged")==="N"?e.root.eventBus.trigger("cp:loadView",e.constants.TERMS_CONDITONS,SSO==="Y"?e.constants.SSO_LOGIN:e.constants.LOGIN):e.data.cpSettings.get("express")!=="Y"&&e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="Y"?e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_CONFIRMATION,this.options.context):e.data.cpSettings.get("express")!=="Y"&&e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="N"?e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_ACTIVATION,this.options.context):e.data.cpSettings.get("express")=="Y"?e.data.cpSettings.reloadMenu("cp-AccountDetails-Menu"):e.data.cpSettings.reloadMenu("cp-shopnow-Menu")):t==="fail"?e.data.cpSessionController.invalidateSession():e.data.cpSessionController.invalidateSession()},clearData:function(){e.root.utils.destroyView(this)},render:function(){this.$el.empty().append(e.templates.cpLoginMFAView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n),this.$el.find(".cp-login-mfa-section").append('<div id="cp-login-mfa-content"></div>');var s=this.options.type;switch(s){case e.constants.MFA_CHALLENGE_COLLECT:new e.views.cpMFAChallengeCollectView({el:"#cp-login-mfa-content",context:{type:this.options.context}});break;case e.constants.MFA_CHALLENGE_QUESTION:new e.views.cpMFAChallengeQuestionView({el:"#cp-login-mfa-content",context:{type:this.options.context}});break;case e.constants.MFA_ONETIMEPASSWORD:new e.views.cpMFAOTPView({el:"#cp-login-mfa-content",context:{type:this.options.context}});break;default:}}})}}),define("cp.views.cpPaymentHubBaseView",[],function(){return function(e){e.views.cpPaymentHubBaseView=CT.View.extend({initialize:function(){this.render();var t=this;callDevice(),this.listenTo(e.root.eventBus,"cp:loadPaymentChoiceLandingPage",this.loadPaymentChoiceLandingPage),this.listenTo(e.root.eventBus,"cp:exitPaymentHubBaseView",this.destroyView);var n="onorientationchange"in window,r=n?"orientationchange":"resize";isIEBrowser()?$(window).on("orientationchange",function(){setTimeout(function(){t.setSectionHeight()},100)}):$(window).on(r,function(){setTimeout(function(){t.setSectionHeight()},100)}),e.root.utils.updateLanguageLabels(e,this)},events:{"focus input,select":"hideFooter","blur input,select":"showFooter","change .paymentLanguageSelection":"languageSelected"},languageSelected:function(t){var n=$(t.target).val();n&&n!==this.currentLanguage&&(this.currentLanguage=n,e.data.cpLanguageMapping.set("currentLanguage",n),_.size(e.data.cpLanguageMapping.get(n))===0?e.root.utils.getMultilanguageMapping(e,this):(e.root.utils.updateLanguageLabels(e,this),typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS!==""&&VIRTUAL_EXPRESS!=="N"&&e.data.cpPaymentExpressLandingModel.retrievePaymentExpressSettings()))},languageMappingSuccessHandler:function(t){if(t.successResponse){e.data.cpLanguageMapping.setResponse(t.successResponse),e.root.utils.updateLanguageLabels(e,this);var n="";typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS!==""&&VIRTUAL_EXPRESS!=="N"?(n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentExpress.AccessVirtual"),e.data.cpPaymentExpressLandingModel.retrievePaymentExpressSettings()):n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.loginRegister"),$("#cpPaymentHubHeader").html(n)}else t.errorResponse&&this.languageErrorhandler(t)},languageErrorhandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},hideFooter:function(){this.$el.find(".cp-Menu-footer").hide()},showFooter:function(){this.$el.find(".cp-Menu-footer").show()},render:function(){this.$el.empty().append(e.templates.cpPaymentHubBaseView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n),this.setSectionHeight(),this.$el.find("#cpPaymentHubContainer>section").append('<div id="cp-paymentchoice-section"></div>'),this.loadPaymentChoiceLandingPage();var s="";typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS!==""&&VIRTUAL_EXPRESS!=="N"?s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentExpress.AccessVirtual"):s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.loginRegister"),$("#cpPaymentHubHeader").html(s)},loadPaymentChoiceLandingPage:function(){typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS!==""&&VIRTUAL_EXPRESS!=="N"?VIRTUAL_EXPRESS==="V"?new e.views.cpPaymentExpressLandingView({el:"#cp-paymentchoice-section"}):(VIRTUAL_EXPRESS==="I"||VIRTUAL_EXPRESS==="L")&&new e.views.cpPaymentExpressInvalidLogoutView({el:"#cp-paymentchoice-section"}):new e.views.cpChoicesLandingView({el:"#cp-paymentchoice-section"})},setSectionHeight:function(){var e=$(window).height(),t=this.$el.find("#cpPaymentHubContainer>header").innerHeight()+this.$el.find(".cp-Menu-footer").innerHeight(),n=e-t,r=this;setTimeout(function(){r.$el.find("#cpPaymentHubContainer>section").height(n)},500)},destroyView:function(){this.destroy()}})}}),define("cp.views.cpPaymentHubLoaderView",[],function(){return function(e){e.views.cpPaymentHubLoaderView=CT.View.extend({initialize:function(){this.choiceId="",this.loadPaymentChoice(this.options.choice?this.options.choice:"",this.options.context?this.options.context:""),this.listenTo(e.root.eventBus,"cp:loadPaymentChoice",this.loadPaymentChoice),this.listenTo(e.root.eventBus,"cp:loadPaymentChoiceACH",this.loadPaymentChoiceACH),this.listenTo(e.root.eventBus,"cp:loadPaymentChoiceConfirmation",this.loadPaymentChoiceConfirmation)},render:function(){},loadPaymentChoice:function(t,n){var r=this.onChoiceLoadSuccessHandler,i=this.onChoiceLoadErrorHandler;this.triggeredChoiceRequestId=t?t:"",n&&(this.options.context=n);switch(t){case e.constants.CHOICE_VIRTUAL:this.$el.empty().append("<div id='cp-paymenthubchoice-container'></div>"),new e.views.cpPaymentChoiceRegistrationBaseView({el:"#cp-paymenthubchoice-container",context:e.constants.PAYMENT_CHOICE_REGESTER_VC});break;case e.constants.CHOICE_CARD:var s=e.constants.PC_REQUEST_PLASTIC,o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.REQUEST_PLASTIC_SETTINGS,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.action.type=s,o.inputRequest=u;var a=e.localURLs.REQUEST_PLASTIC_ELIGIBILITY;this.loadPaymentChoiceDetails(r,i,o,a);break;case e.constants.CHOICE_ACH:var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.RETRIEVE_BT_SETTINGS,u.action.type=e.constants.PC_BANK,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),o.inputRequest=u;var a=e.localURLs.PAYMENT_RETERIVE_BANK_DETAILS_RESPONSE;this.loadPaymentChoiceDetails(r,i,o,a);break;case e.constants.CHOICE_CHEQUE:var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.REQUEST_CHECK_ELIGIBILITY,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),o.inputRequest=u;var a=e.localURLs.REQUEST_CHECK_ELIGIBILITY;this.loadPaymentChoiceDetails(r,i,o,a);break;case e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER:this.$el.empty().append("<div id='cp-paymenthubchoice-container'></div>"),new e.views.cpPaymentChoiceRegistrationBaseView({el:"#cp-paymenthubchoice-container",context:e.constants.REGISTER_FXTRANSFER,origin:e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER});break;case e.constants.PAYMENT_DELIVARY_CHOICE:var f=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.paymentDeliveryChoice");$(".cp-menu-title").html(f),this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var l=new e.views.cpPaymentDelivaryChoiceView({el:"#cp-paymenthubchoice-container",context:n});break;case e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE:var f=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.paymentDeliveryChoice");$(".cp-menu-title").html(f),this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var l=new e.views.cpPaymentSelectedDelivaryChoiceView({el:"#cp-paymenthubchoice-container",context:n});break;case e.constants.PAYMENT_CHOICE_USER_CREATION:var f=e.data.cpLanguageMapping.getLabelForKey("common.register");$(".cp-menu-title").html(f),this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var l=new e.views.cpChoicesUserCreationView({el:"#cp-paymenthubchoice-container",context:n});break;default:}},loadPaymentChoiceConfirmation:function(t,n){this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var r=new e.views.cpChoicesConfirmationView({el:"#cp-paymenthubchoice-container",choiceId:t,context:n})},loadPaymentChoiceDetails:function(t,n,r,i){cpEnv_Web.datasource==="MOCKJSON"?e.root.common.networkingservice.getRequest(this.onChoiceLoadSuccessHandler,this.onChoiceLoadErrorHandler,i,{},this):e.root.common.networkingservice.postRequest(r,this.onChoiceLoadSuccessHandler,this.onChoiceLoadErrorHandler,i,{},this)},onChoiceLoadSuccessHandler:function(t){if(t.successResponse){var n=this.triggeredChoiceRequestId;switch(n){case e.constants.CHOICE_VIRTUAL:break;case e.constants.CHOICE_CARD:var r=t.successResponse.feeMessage?t.successResponse.feeMessage:"",i=t.successResponse.requestPlasticMessage?t.successResponse.requestPlasticMessage:"",s=t.successResponse.ctype?t.successResponse.ctype:"";e.data.cpChoiceUserInfo||(e.data.cpChoiceUserInfo=new e.models.cpChoiceUserInfo),e.data.cpChoiceUserInfo.retreiveCardEligibilityResponse(t.successResponse);var o=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.requestCard");$(".cp-menu-title").html(o),this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var u=new e.views.cpChoicesRequestCardView({el:"#cp-paymenthubchoice-container",message:r,requestPlasticMessage:i,cardType:s,context:this.options.context});break;case e.constants.CHOICE_ACH:e.data.cpPaymentChoiceBankDetailsModel||(e.data.cpPaymentChoiceBankDetailsModel=new e.models.cpPaymentChoiceBankDetailsModel),e.data.cpPaymentChoiceBankDetailsModel.setResponse(t.successResponse),t.successResponse.canadianProgram!=="Y"&&e.data.cpPaymentChoiceBankDetailsModel.setACHFee(t.successResponse,this.options.context),e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var a=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(a,t);break;case e.constants.CHOICE_CHEQUE:e.data.cpChoiceUserInfo||(e.data.cpChoiceUserInfo=new e.models.cpChoiceUserInfo),e.data.cpChoiceUserInfo.retreiveCheckEligibilityResponse(t.successResponse),this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var u=new e.views.cpChoicesRequestCheckView({el:"#cp-paymenthubchoice-container",context:this.options.context}),o=e.data.cpLanguageMapping.getLabelForKey("device.heading.check.text");$(".cp-menu-title").html(o);break;case e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER:break;default:}}else this.onChoiceLoadErrorHandler(t)},onChoiceLoadErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.NO_PHONE_RESPONSE){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showSuccessAlert(n,this.triggerNavigate,!1,!1,this);return}if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},triggerNavigate:function(){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")},destroyView:function(){this.destroy()},loadPaymentChoiceACH:function(t){e.data.cpPaymentChoiceBankDetailsModel||(e.data.cpPaymentChoiceBankDetailsModel=new e.models.cpPaymentChoiceBankDetailsModel),e.data.cpPaymentChoiceBankDetailsModel.setResponse(t.successResponse),t.successResponse.canadianProgram!=="Y"&&e.data.cpPaymentChoiceBankDetailsModel.setACHFee(t.successResponse,this.options.context);var n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.requestTransferToBank");$(".cp-menu-title").html(n),this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>");var r=new e.views.cpChoicesTransfertoBankView({el:"#cp-paymenthubchoice-container",context:this.options.context})},mfaauthenticationType:function(t,n){var r=this;switch(t){case e.constants.MFA_NONE:e.data.cpMFAAuthentication.get("mfaAuthCode")===e.constants.MFA_NONE&&n.successResponse&&this.loadPaymentChoiceACH(n);break;case e.constants.MFA_ONETIMEPASSWORD:this.$el.empty().append("<div id='cp-paymenthubchoice-container' class='cp-panel-scroll'></div>"),new e.views.cpMFAOTPView({el:"#cp-paymenthubchoice-container",type:e.constants.MFA_ONETIMEPASSWORD,context:{type:this.options.context,origin:e.constants.CHOICE_ACH}});break;default:}}})}}),define("cp.views.cpChoicesLandingView",[],function(){return function(e){e.views.cpChoicesLandingView=CT.View.extend({initialize:function(){this.isfirstUserExpanded=!1,this.isReturningUserExpanded=!1,e.root.utils.updateLanguageLabels(e,this),e.data.cpPaymentChoiceLandingModel||(e.data.cpPaymentChoiceLandingModel=new e.models.cpPaymentChoiceLandingModel),this.listenTo(e.data.cpPaymentChoiceLandingModel,"cp:paymentChoiceSettingsLoaded",this.onSettingsLoaded),this.listenTo(e.root.eventBus,"cp:exitPaymentHubBaseView",this.destroyView),e.data.cpPaymentChoiceLandingModel.retrievePaymentChoiceSettings()},events:{"click .cp-btn-returningUser":"navigateReturningUserView","click .cp-btn-firstUser":"navigateFirstTimeUserView","touchmove #cp-Payment-choice-landing-section":e.root.utils.dismissKeyboard},render:function(){this.$el.empty().append(e.templates.cpChoicesLandingView()),e.root.utils.updateLanguageLabels(e,this),this.returningUserView=new e.views.cpChoicesReturningUserLoginView({el:"#cp-returningUser-container",type:"cp-returningUser"}),this.firstTimeUserView=new e.views.cpChoicesFirstTimeLoginView({el:"#cp-firsttimeUser-container",type:"cp-firsttimeUser"}),PUID&&PUID!==""?(this.returningUserView.$el.hide(),this.$el.find("#cp-returningUser-container").slideUp()):(this.returningUserView.$el.hide(),this.firstTimeUserView.$el.hide(),this.$el.find("#cp-firsttimeUser-container").slideUp(),this.$el.find("#cp-returningUser-container").slideUp(),this.$el.find(".cp-btn-returningUser").addClass("cp-button-transition"),this.$el.find(".cp-btn-firstUser").addClass("cp-button-transition")),this.$el.find(".cp-welcome-text").text(e.data.cpPaymentChoiceLandingModel.get("message")),this.currentLanguage=e.data.cpLanguageMapping.get("currentLanguage")?e.data.cpLanguageMapping.get("currentLanguage"):e.constants.LANGUAGE_EN,this.$el.find("select").children().attr("selected",!1),this.$el.find("select").children("option[value="+this.currentLanguage+"]").attr("selected",!0)},onSettingsLoaded:function(){var t=this;isIEBrowser()?setTimeout(function(){t.render(),e.root.utils.updateLanguageLabels(e,t)},500):(this.render(),e.root.utils.updateLanguageLabels(e,this));var n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.loginRegister");$("#cpPaymentHubHeader").html(n)},destroyView:function(){this.destroy()},navigateReturningUserView:function(t){var n=e.data.cpPaymentChoiceLandingModel,r=this;this.$el.find(".cp-btn-returningUser").addClass("cp-button-selected-animated"),setTimeout(function(){r.$el.find(".cp-btn-returningUser").removeClass("cp-button-selected-animated"),r.$el.find("#cp-firsttimeUser-container").slideUp("slow"),r.isReturningUserExpanded=r.$el.find("#cp-returningUser-container").is(":visible"),r.isReturningUserExpanded?r.$el.find("#cp-returningUser-container").slideUp("slow"):r.$el.find("#cp-returningUser-container").slideDown("slow"),r.isReturningUserExpanded=!r.isReturningUserExpanded,r.isfirstUserExpanded=!1,n.get("jcaptcha")==="Y"&&r.isReturningUserExpanded==1&&r.returningUserView.getRandomCaptcha(),r.firstTimeUserView.resetFields(),r.returningUserView.resetFields()},200)},navigateFirstTimeUserView:function(t){var n=e.data.cpPaymentChoiceLandingModel,r=this;this.$el.find(".cp-btn-firstUser ").addClass("cp-button-selected-animated"),setTimeout(function(){r.$el.find(".cp-btn-firstUser ").removeClass("cp-button-selected-animated"),r.isfirstUserExpanded=r.$el.find("#cp-firsttimeUser-container").is(":visible"),r.isfirstUserExpanded?r.$el.find("#cp-firsttimeUser-container").slideUp("slow"):r.$el.find("#cp-firsttimeUser-container").slideDown("slow"),r.$el.find("#cp-returningUser-container").slideUp("slow"),r.isReturningUserExpanded=!1,r.isfirstUserExpanded=!r.isfirstUserExpanded,n.get("jcaptcha")==="Y"&&r.isfirstUserExpanded==1&&r.firstTimeUserView.getRandomCaptcha(),r.firstTimeUserView.resetFields(),r.returningUserView.resetFields(),PUID&&PUID!==""&&r.isfirstUserExpanded&&(r.firstTimeUserView.$el.find(".cp-first-user-puid").val(PUID),r.firstTimeUserView.$el.find(".cp-first-user-puid").attr("data-val",PUID))},200)}})}}),define("cp.views.cpChoicesFirstTimeLoginView",[],function(){return function(e){e.views.cpChoicesFirstTimeLoginView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpPaymentChoiceLandingModel||(e.data.cpPaymentChoiceLandingModel=new e.models.cpPaymentChoiceLandingModel)},events:{"click .cp-first-user-login":"validateAndNavigate","click .cp-first-user-cancel":"navigateToChoicesLandingView","click .cp-refresh-image":"getRandomCaptcha","blur #yearUpdate":"maskBirthYear","focus #yearUpdate":"unMaskBirthYear","blur #dayUpdate":"maskBirthDay","focus #dayUpdate":"unMaskBirthDay","blur #monthUpdate":"maskBirthMonth","focus #monthUpdate":"unMaskBirthMonth","focus .cp-mobile-phonePrefix, .cp-mobile-phoneNumber, .cp-first-user-puid, .cp-email,.cp-firstname,.cp-lastname,.cp-ssn":"focusRegTxtFieldMask","blur .cp-mobile-phoneNumber, .cp-mobile-phonePrefix, .cp-first-user-puid,.cp-firstname,.cp-lastname,.cp-ssn":"blurRegTxtFieldMask","blur .cp-email":"maskEmailAddress"},render:function(){var t=e.data.cpPaymentChoiceLandingModel,n=t.get("message");this.$el.find(".cp-welcome-text").empty().append(n),this.$el.empty().append(e.templates.cpChoicesFirstTimeLoginView({model:t}));for(var r=1;r<=31;r++)this.$el.find("#dayUpdate").append($("<option />").val(r).html(r));this.$el.find(".cp-first-user-puid").attr("placeholder",t.get("puidValue")?t.get("puidValue"):""),PUID&&PUID!==""&&(this.$el.find(".cp-first-user-puid").val(PUID),this.$el.find(".cp-first-user-puid").attr("data-val",PUID))},blurRegTxtFieldMask:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskAuthenticationText(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},maskEmailAddress:function(e){var t=$(e.currentTarget),n=t.val();if(n!=""){var r=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([A-Za-z]{2,3}))+$/;if(n&&!r.test(n))t.attr("data-val",n);else{var i=n.split("@")[0]?n.split("@")[0]:"";t.attr("data-val",n),t.val("xxxxxxx@"+(n.split("@")[1]?n.split("@")[1]:""))}}},focusRegTxtFieldMask:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},unMaskBirthMonth:function(){this.$el.find("#monthUpdate option[value="+this.originalbirthmonth+"]").text(this.originalbirthvalue)},maskBirthMonth:function(){if(this.$el.find("#monthUpdate option:selected").index()!=0){this.originalbirthmonth=this.$el.find("#monthUpdate option:selected").val(),this.originalbirthvalue=this.$el.find("#monthUpdate option:selected").text();var t=e.root.utils.maskDobField(this.originalbirthvalue);t!==undefined&&t!==""&&this.$el.find("#monthUpdate option[value="+this.originalbirthmonth+"]").text(t)}},unMaskBirthDay:function(){this.$el.find("#dayUpdate option[value="+this.originalbirthday+"]").text(this.originalbirthday)},maskBirthDay:function(){if(this.$el.find("#dayUpdate option:selected").index()!=0){this.originalbirthday=this.$el.find("#dayUpdate option:selected").val();var t=e.root.utils.maskDobField(this.originalbirthday);t!==undefined&&t!==""&&this.$el.find("#dayUpdate option[value="+this.originalbirthday+"]").text(t)}},unMaskBirthYear:function(){this.$el.find("#yearUpdate option[value="+this.originalbirthyear+"]").text(this.originalbirthyear)},maskBirthYear:function(){if(this.$el.find("#yearUpdate option:selected").index()!=0){this.originalbirthyear=this.$el.find("#yearUpdate option:selected").val();var t=e.root.utils.maskDobField(this.originalbirthyear);t!==undefined&&t!==""&&this.$el.find("#yearUpdate option[value="+this.originalbirthyear+"]").text(t)}},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.captchaPCLogin(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),$(".cp-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),$("#cpImg").one("load",function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").one("error",function(){$(".loaderOverlay").css("display","none")})}else this.$el.find(".cp-captcha-Login-container").addClass("hidden"),$(".loaderOverlay").css("display","none");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateToChoicesLandingView:function(e){var t=this;$(document.activeElement).blur(),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.$el.slideUp("slow"),t.resetFields()},250)},validateAndNavigate:function(t){var n=e.data.cpPaymentChoiceLandingModel;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();var r=e.data.cpPaymentChoiceLandingModel;if(r.get("puid")!="N"){var i=e.root.utils.trimText(this.$el.find(".cp-puid").attr("data-val"));this.puid=i;var s=e.root.utils.isEmptyString(i);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.pleaseEnterPersonalUserID");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-puid").val(""),this.$el.find(".cp-puid").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("ssn")!="N"){var u=e.root.utils.trimText(this.$el.find(".cp-ssn").attr("data-val"));this.ssn=u;var s=e.root.utils.isEmptyString(u);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnRequired");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-ssn").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(!s&&(!$.isNumeric(u)||u.length!==4)){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnInvalid");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-ssn").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("dob")!="N"){var a=this.$el.find("#dayUpdate option:selected").val(),f=this.$el.find("#monthUpdate option:selected").val(),l=this.$el.find("#yearUpdate option:selected").val(),c=e.root.utils.validateDate(f,l,a);if(c!=1||a==""||f==""||l==""){var h=e.data.cpLanguageMapping.getLabelForKey("cp.registration.dobRequired");e.root.common.Alertservice.showAlert(h),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("postalCode")!="N"){var p=e.root.utils.trimText(this.$el.find(".cp-zipcode").val());this.zipcode=p;var s=e.root.utils.isEmptyString(p);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.zipcodeRequired");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-zipcode").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(!s&&p.length<5){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidZipCode");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-zipcode").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("firstName")!="N"){var d=e.root.utils.trimText(this.$el.find(".cp-firstname").attr("data-val"));this.firstname=d;var s=e.root.utils.isEmptyString(d);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.firstNameMissing");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-firstname").val(""),this.$el.find(".cp-firstname").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(s||d.match(/[^[a-zA-Za-zA-Z\\-\\ \\'\\.*$]/)||d.indexOf("<")!=-1&&d.indexOf("<")!=-1){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.firstNameInvalid");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-firstname").val(""),this.$el.find(".cp-firstname").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("lastName")!="N"){var v=e.root.utils.trimText(this.$el.find(".cp-lastname").attr("data-val"));this.lastname=v;var s=e.root.utils.isEmptyString(v);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.lastNameMissing");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-lastname").val(""),this.$el.find(".cp-lastname").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(s||v.match(/[^[a-zA-Za-zA-Z\\-\\ \\'\\.*$]/)||v.indexOf("<")!=-1&&v.indexOf("<")!=-1){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.lastNameInvalid");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-lastname").val(""),this.$el.find(".cp-lastname").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("mobileNumber")!="N"){var m=e.root.utils.trimText(this.$el.find(".cp-mobile-phonePrefix").attr("data-val")),g=e.root.utils.trimText(this.$el.find(".cp-mobile-phoneNumber").attr("data-val")),s=e.root.utils.isEmptyString(m);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(!s&&!$.isNumeric(m)||m.length!==3){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidMobilePhone");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}s=e.root.utils.isEmptyString(g);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(!s&&!$.isNumeric(g)||g.length!==7){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidMobilePhone");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("emailAddress")!="N"){var y=e.root.utils.trimText(this.$el.find(".cp-email").attr("data-val")),s=e.root.utils.isEmptyString(y),b=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([A-Za-z]{2,3}))+$/;if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.provideEmailAddress");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-email").val(""),this.$el.find(".cp-email").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}if(!s&&!b.test(y)){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidEmailAddress");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-email").val(""),this.$el.find(".cp-email").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(r.get("jcaptcha")!="N"){var w=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()),s=e.root.utils.isEmptyString(w);if(s){var o=e.data.cpLanguageMapping.getLabelForKey("cp.registration.imageRequired");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha==="Y"&&this.getRandomCaptcha();return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.firstTimeUserSuccessHandler,this.firstTimeUserErrorHandler,e.localURLs.FISRT_TIME_PAYMENT_CHOICE_RESPONSE,{},this);else{var E={},S={};S.action={},S.action.appName=e.constants.APP_NAME,S.action.criterion=e.constants.PC_AUTHENTICATEUSER,S.action.language=e.data.cpLanguageMapping.get("currentLanguage"),S.action.type=e.constants.ADD_PC,S.data={},r.get("puid")!="N"&&(S.data.puid=this.$el.find(".cp-first-user-puid").attr("data-val")?this.$el.find(".cp-first-user-puid").attr("data-val"):""),r.get("ssn")!="N"&&(S.data.ssn=this.$el.find(".cp-ssn").attr("data-val")?this.$el.find(".cp-ssn").attr("data-val"):""),r.get("dob")!="N"&&(S.data.dob={},S.data.dob.month=this.$el.find("#monthUpdate option:selected").val(),S.data.dob.day=this.$el.find("#dayUpdate option:selected").val(),S.data.dob.year=this.$el.find("#yearUpdate option:selected").val()),S.data.jcaptcha=this.$el.find(".cp-captchatext-input").val()?this.$el.find(".cp-captchatext-input").val():"",r.get("firstName")!="N"&&(S.data.firstName=this.$el.find(".cp-firstname").attr("data-val")?this.$el.find(".cp-firstname").attr("data-val"):""),r.get("lastName")!="N"&&(S.data.lastName=this.$el.find(".cp-lastname").attr("data-val")?this.$el.find(".cp-lastname").attr("data-val"):""),r.get("postalCode")!="N"&&(S.data.postalCode=this.$el.find(".cp-zipcode").val()?this.$el.find(".cp-zipcode").val():""),r.get("emailAddress")!="N"&&(S.data.email=this.$el.find(".cp-email").attr("data-val")?this.$el.find(".cp-email").attr("data-val"):""),r.get("mobileNumber")!="N"&&(S.data.phoneNumber={},S.data.phoneNumber.areaCode=this.$el.find(".cp-mobile-phonePrefix").attr("data-val")?this.$el.find(".cp-mobile-phonePrefix").attr("data-val"):"",S.data.phoneNumber.number=this.$el.find(".cp-mobile-phoneNumber").attr("data-val")?this.$el.find(".cp-mobile-phoneNumber").attr("data-val"):""),S.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),S.data.rsaToken=$("#RSADeviceFso").val(),S.data.devicePrint=$("#devicePrintId").val(),E.inputRequest=S,e.root.common.networkingservice.postRequest(E,this.firstTimeUserSuccessHandler,this.firstTimeUserErrorHandler,e.localURLs.FISRT_TIME_PAYMENT_CHOICE_RESPONSE,{},this)}},firstTimeUserSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");e.data.cpPaymentChoiceLandingModel.setDefaultChoice(t.successResponse),this.mfaauthenticationType(n,t)}else t&&this.firstTimeUserErrorHandler(t)},firstTimeUserErrorHandler:function(t){this.resetFields();if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n),this.$el.find(".cp-captchatext-input").val("");return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.checkCaptcha==="Y"&&(this.$el.find(".cp-captchatext-input").val(""),this.getRandomCaptcha())},mfaauthenticationType:function(t,n){var r=this,i=e.data.cpPaymentChoiceLandingModel,s=i.get("systemDefaultedChoice");switch(t){case e.constants.MFA_NONE:e.data.cpMFAAuthentication.get("mfaAuthCode")===e.constants.MFA_NONE&&(e.root.utils.destroyView(this),n.successResponse.customBranding&&CUSTOM_BRANDING!==n.successResponse.customBranding&&(CUSTOM_BRANDING=n.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(n.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+n.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),s=="4"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitPaymentHubBaseView"),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.PAYMENT_CHOICE_USER_CREATION,context:e.constants.PC_LOGIN,disableMenu:!0})):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitPaymentHubBaseView"),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.PAYMENT_DELIVARY_CHOICE,context:e.constants.ADD_PC})));break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitPaymentHubBaseView"),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.MFA_ONETIMEPASSWORD,context:e.constants.ADD_PC});break;default:}},resetFields:function(){this.$el.find("input").val(""),this.$el.find("input").attr("data-val",""),this.$el.find("select").val("")}})}}),define("cp.views.cpChoicesUserCreationView",[],function(){return function(e){e.views.cpChoicesUserCreationView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button-registerUser":"exitUserCreation","click .cp-paymentChoice-registerUser-button":"validateUserDetail"},render:function(){this.$el.empty().append(e.templates.cpChoicesUserCreationView())},validateUserDetail:function(t){t.preventDefault(),t.stopPropagation(),$(document.activeElement).blur(),$(t.target).addClass("cp-button-selected");var n=e.root.utils.trimText(this.$el.find(".cp-payment-username").val()),r=e.root.utils.isEmptyString(n);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length<3){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.match(/[^a-zA-Z0-9\\@\\._ ]/)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.usernameInvalid");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.trimText(this.$el.find(".cp-payment-password").val());r=e.root.utils.isEmptyString(s);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s.length<8&&s.length<50){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var o=e.root.utils.trimText(this.$el.find(".cp-payment-confirmpassword").val());r=e.root.utils.isEmptyString(o);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(o.length<8&&o.length<50){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s!=o){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.mismatchConfirmPassword");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}this.createUser()},registerUser:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CREATE_USER,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.username=e.root.utils.trimText(this.$el.find(".cp-payment-username").val()),n.data.password=e.root.utils.trimText(this.$el.find(".cp-payment-password").val()),t.inputRequest=n,t},createUserSuccessHandler:function(t){t.successResponse?(e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),e.data.cpUserInfo.setLastlogin(t.successResponse),e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-AccountDetails-Menu")):t.errorResponse&&this.createUserErrorHandler(t)},createUserErrorHandler:function(t){this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n);return}},createUser:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.createUserSuccessHandler,this.createUserErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this);else{var t=this.registerUser();e.root.common.networkingservice.postRequest(t,this.createUserSuccessHandler,this.createUserErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this)}},exitUserCreation:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.data.cpSessionController.invalidateSession(this.options.context)},destroyView:function(){this.destroy()}})}}),define("cp.views.cpPaymentDelivaryChoiceView",[],function(){return function(e){e.views.cpPaymentDelivaryChoiceView=CT.View.extend({initialize:function(){this.click=1,this.settings="",this.selectedElem="",this.defaultSelected="",e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),this.reteriveChoice(),this.listenTo(e.data.cpPaymentChoice,"cp:paymentChoiceSelected",this.onChoiceLoadSuccessHandler),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.destroyView),this.listenTo(e.root.eventBus,"cp:destroyPaymentHub",this.destroyView)},events:{"click .cp-info_w":"showToolTip","click .payment-unselect,.payment-selection-content":"divClick","click .cp-confirm-button":"navigateNext","click .cp-grayCircle-img":"imageClick","click .editbankImg":"editBankDetails"},editBankDetails:function(){e.root.utils.destroyView(this);var t=$(".paymentChoice-options").find(".expanded").attr("id");if(t==""||t==undefined)t=e.constants.CHOICE_ACH;e.root.eventBus.trigger("cp:loadPaymentChoice",t,e.constants.EDIT_ACH)},reteriveChoice:function(){if(this.options.context==e.constants.PC_LOGIN)this.render(),e.root.utils.updateLanguageLabels(e,this);else if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.reterivePCSuccessHandler,this.reterivePCErrorHandler,e.localURLs.PAYMENT_RETERIVE_CHOICE_JSON,{},this);else{var t=e.constants.ADD_PC;this.options.context==e.constants.PC_LOGIN&&(t=e.constants.UPDATE_PC);var n=e.data.cpPaymentChoice.createRequest(t);e.root.common.networkingservice.postRequest(n,this.reterivePCSuccessHandler,this.reterivePCErrorHandler,e.localURLs.PAYMENT_RETERIVE_CHOICE_JSON,{},this)}},reterivePCSuccessHandler:function(t){var n=this,r=e.data.cpPaymentChoiceLandingModel;if(t.successResponse){e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),e.data.cpPaymentChoice.setChoiceResponse(t.successResponse);var i="";if(this.options.context==e.constants.ADD_PC&&e.data.cpPaymentChoice.get("availableChoices").length==1){var s=e.data.cpPaymentChoice.get("availableChoices")[0].choices.id,o=r.get("choiceMapping");jQuery.each(o,function(e,t){if(e==s)return i=t,!1}),i==e.constants.CHOICE_VIRTUAL&&SSO=="Y"?e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_VIRTUAL,this.options.context):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",i,this.options.context))}else this.render();e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.reterivePCErrorHandler(t)},reterivePCErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.paymentDeliveryChoice");$(".cp-menu-title").html(t),this.settings=e.data.cpPaymentChoice,this.$el.empty().append(e.templates.cpPaymentDelivaryChoiceView({settings:this.settings})),this.expandSelected();if(this.options.context===e.constants.PC_LOGIN){var n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentDeliveryChoice.instructionText");this.$el.find(".cp-paymentChoice-sub-message").html(n)}},expandSelected:function(){var t=this.settings.get("currentChoice"),n=this.settings.get("availableChoices");(t===""||t===undefined)&&n!=""&&(t=n[0].choices.id);var r=this.settings.get("choiceMapping"),i=this;jQuery.each(r,function(e,n){e==t&&(i.selectedElem=n)}),$(".paymentChoice-options").find(".collapsed").hide(),this.expandSlider(this.selectedElem),$("#"+this.selectedElem).addClass("disableSelected"),$("#"+this.selectedElem).attr("disabled","disabled"),this.defaultSelected=this.selectedElem;if(this.options.context!=e.constants.ADD_PC&&this.settings.get("currentChoice")!=""||this.settings.get("availableChoices").length==0)$(".cp-confirm-button").removeClass("cp-backgroundcolor2"),$(".cp-confirm-button").addClass("uiDisabled");this.click=0},showToolTip:function(t){t.preventDefault(),t.stopPropagation();var n=this.settings.get("infoMessage");e.root.utils.showInfoPopup(t,n,"right","small")},imageClick:function(e){e.stopPropagation();var t=$("#cp-paymentDeliveryChoice-container").find(".expanded").attr("id"),n=$(e.currentTarget).parent().parent().attr("id");this.slider(t,n)},divClick:function(e){var t=$("#cp-paymentDeliveryChoice-container").find(".expanded").attr("id"),n=$(e.target).parent().attr("id");this.slider(t,n)},slider:function(t,n){t==n||t===undefined?this.click?(this.expandSlider(n),this.click=0):(this.collapseSlider(n),this.click=1):(this.collapseSlider(t),this.expandSlider(n),this.click=0),this.options.context!=e.constants.ADD_PC&&(this.defaultSelected==n?($(".cp-confirm-button").removeClass("cp-backgroundcolor2"),$(".cp-confirm-button").addClass("uiDisabled")):($(".cp-confirm-button").addClass("cp-backgroundcolor2"),$(".cp-confirm-button").removeClass("uiDisabled")))},expandSlider:function(e){$("#"+e).find(".payment-unselect").hide(),$("#"+e).find("#payment-choice").show(),$("#"+e).find("#payment-choice").animate({width:"+=80%"},500,function(){$("#"+e).find("#payment-choice").addClass("wrap")}),$("#"+e).find(".selection-header").addClass("selection-header-expanded"),$("#"+e).find(".payment-selection-content").addClass("cp-hide"),$("#"+e).addClass("expanded")},collapseSlider:function(e){$("#"+e).find(".payment-unselect").show(),$("#"+e).find("#payment-choice").removeClass("wrap"),$("#"+e).find("#payment-choice").hide(),$("#"+e).find("#payment-choice").animate({width:"-=80%"}),$("#"+e).find(".selection-header").removeClass("selection-header-expanded"),$("#"+e).find(".payment-selection-content").removeClass("cp-hide"),$("#"+e).removeClass("expanded")},navigateNext:function(){var t=$(".paymentChoice-options").find(".expanded").attr("id");t!==undefined&&(this.options.context===e.constants.PC_LOGIN&&t===e.constants.CHOICE_VIRTUAL?e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_VIRTUAL,this.options.context):t===e.constants.CHOICE_VIRTUAL&&this.options.context===e.constants.ADD_PC&&e.data.cpPaymentChoice.get("registeredUser")==="Y"?e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_VIRTUAL,this.options.context):t===e.constants.CHOICE_VIRTUAL&&this.options.context===e.constants.ADD_PC&&SSO==="Y"?e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_VIRTUAL,this.options.context):this.options.context===e.constants.PC_LOGIN&&t===e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER?e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER,this.options.context):(this.destroyView(),e.root.eventBus.trigger("cp:loadPaymentChoice",t,this.options.context)))},onChoiceLoadSuccessHandler:function(){this.destroy(),e.data.cpPaymentChoice.get("FXRegisteredUser")!==undefined&&e.data.cpPaymentChoice.get("FXRegisteredUser")!==""&&e.data.cpPaymentChoice.get("FXRegisteredUser")==="Y"&&e.data.cpPaymentChoice.get("currentChoice")!==""&&e.data.cpPaymentChoice.get("currentChoice")===e.constants.INTERNATIONAL_BANKTRANSFER_CHOICEID?e.data.cpSettings.retreiveMenuFlagsAndLoadMenu("cp-globalDeposits-Menu"):e.data.cpSettings.reloadMenu("cp-shopnow-Menu")},destroyView:function(){this.destroy()}})}}),define("cp.views.cpPaymentSelectedDelivaryChoiceView",[],function(){return function(e){e.views.cpPaymentSelectedDelivaryChoiceView=CT.View.extend({initialize:function(){this.click=1,this.settings="",this.selectedElemement="",e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),this.reteriveChoice(),this.listenTo(e.root.eventBus,"cp:destroyPaymentHub",this.destroyView),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-info_w":"showToolTip","click .payment-unselect":"slider","click .editSelectionImg":"UpdateChoice","click .editbankImg":"editBankDetails"},editBankDetails:function(){e.root.utils.destroyView(this);var t=$(".paymentChoice-options").find(".expanded").attr("id");if(t==""||t==undefined)t=e.constants.CHOICE_ACH;e.root.eventBus.trigger("cp:loadPaymentChoice",t,e.constants.EDIT_ACH_RETURNING)},reteriveChoice:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.reterivePCSuccessHandler,this.reterivePCErrorHandler,e.localURLs.PAYMENT_RETERIVE_CHOICE_JSON,{},this);else{var t=e.data.cpPaymentChoice.createRequest(e.constants.UPDATE_PC);e.root.common.networkingservice.postRequest(t,this.reterivePCSuccessHandler,this.reterivePCErrorHandler,e.localURLs.PAYMENT_RETERIVE_CHOICE_JSON,{},this)}},reterivePCSuccessHandler:function(t){t.successResponse?(e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),e.data.cpPaymentChoice.setChoiceResponse(t.successResponse),SSO=="Y"&&e.data.cpSettings.get("paymentType")=="1"&&(e.data.cpPaymentChoice.get("currentChoice")=="1"&&e.data.cpSettings.get("shopNow")=="Y"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-Dashboard-Menu"))),e.data.cpPaymentChoice.get("currentChoice")===""?this.UpdateChoice():this.render()):t.errorResponse&&this.reterivePCErrorHandler(t)},rediretShopPage:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu"),alert("rediretShopPage")},reterivePCErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.paymentDeliveryChoice");$(".cp-menu-title").html(t),this.settings=e.data.cpPaymentChoice,this.$el.empty().append(e.templates.cpPaymentSelectedDelivaryChoiceView({settings:this.settings})),this.expandSelected(),e.root.utils.updateLanguageLabels(e,this)},expandSelected:function(){var e=this.settings.get("currentChoice"),t=this.settings.get("choiceMapping"),n=this;jQuery.each(t,function(t,r){t==e&&(n.selectedElemement=r)}),$(".paymentChoice-options").find(".collapsed").hide(),$("#"+this.selectedElemement).removeClass("hidden"),this.expandSlider(this.selectedElemement),this.click=0},showToolTip:function(t){t.preventDefault(),t.stopPropagation();var n=this.settings.get("infoMessage");e.root.utils.showInfoPopup(t,n,"right","small")},slider:function(e){var t=$("#cp-paymentDeliveryChoice-container").find(".expanded").attr("id"),n=$(e.target).parent().attr("id");t==n||t===undefined?this.click?(this.expandSlider(n),this.click=0):(this.collapseSlider(n),this.click=1):(this.collapseSlider(t),this.expandSlider(n),this.click=0)},expandSlider:function(e){$("#"+e).find(".payment-unselect").hide(),$("#"+e).find("#payment-choice").show(),$("#"+e).find("#payment-choice").animate({width:"+=82%"},500,function(){$("#"+e).find("#payment-choice").addClass("wrap")}),$("#"+e).find(".selection-header").addClass("selection-header-expanded"),$("#"+e).find(".payment-selection-content").addClass("cp-hide"),$("#"+e).addClass("expanded")},collapseSlider:function(e){$("#"+e).find(".payment-unselect").show(),$("#"+e).find("#payment-choice").removeClass("wrap"),$("#"+e).find("#payment-choice").hide(),$("#"+e).find("#payment-choice").animate({width:"-=82%"}),$("#"+e).find(".selection-header").removeClass("selection-header-expanded"),$("#"+e).find(".payment-selection-content").removeClass("cp-hide"),$("#"+e).removeClass("expanded")},UpdateChoice:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,e.constants.PC_LOGIN)},destroyView:function(){this.destroy()}})}}),define("cp.views.cpChoicesReturningUserLoginView",[],function(){return function(e){e.views.cpChoicesReturningUserLoginView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-paymentChoice-login-button":"navigateNext","click .cp-refresh-image":"getRandomCaptcha","click .cp-paymentChoice-cancel-button":"navigateToChoicesLandingView"},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.captchaPCLogin(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),$(".cp-ret-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),$("#cpImg").one("load",function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").one("error",function(){$(".loaderOverlay").css("display","none")}),this.$el.find(".cp-captcha-Login-container").removeClass("hidden"),$("#cpImg").attr("src",n)}else this.$el.find(".cp-captcha-Login-container").addClass("hidden"),$(".loaderOverlay").css("display","none");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},render:function(){var t={},n=this;t.currentLanguage=this.currentLanguage,t.redirectURLs=e.redirectURLs,this.$el.empty().append(e.templates.cpChoicesReturningUserLoginView({model:t})),$(".cp-forgot-password").attr("href",this.redirectForgotPassword()),e.root.utils.updateLanguageLabels(e,this)},destroyView:function(){this.destroy()},navigateNext:function(e){e.preventDefault(),e.stopPropagation(),$(document.activeElement).blur(),$(e.target).addClass("cp-button-selected"),this.validateAndNavigate()},navigateToChoicesLandingView:function(e){var t=this;$(document.activeElement).blur(),e.preventDefault(),e.stopPropagation(),setTimeout(function(){t.$el.slideUp("slow"),t.resetFields()},250)},redirectForgotPassword:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.FORGOT_PASSWORD_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.FORGOT_PASSWORD_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.FORGOT_PASSWORD_FR:e.redirectURLs.FORGOT_PASSWORD_EN},validateAndNavigate:function(){var t=e.root.utils.trimText(this.$el.find(".cp-username").val());this.userName=t;var n=e.root.utils.isEmptyString(t);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-username").val(""),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(t.length<3){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-username").val(""),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(t.match(/[^a-zA-Z0-9\\@\\._ ]/)){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-username").val(""),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}var i=e.root.utils.trimText(this.$el.find(".cp-password").val());n=e.root.utils.isEmptyString(i);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(i.length<8&&i.length<50){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(this.checkCaptcha==="Y"){var s=e.root.utils.trimText(this.$el.find(".cp-captcha-input").val());n=e.root.utils.isEmptyString(s);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.image.letters.text.info");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.getRandomCaptcha();return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPCLoginSuccessHandler,this.onPCLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this);else{var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.MOBILE_AUTHENTICATION,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.action.type=e.constants.PC_LOGIN,u.data={},u.data.username=this.$el.find(".cp-username").val(),u.data.password=this.$el.find(".cp-password").val(),this.checkCaptcha!=="N"&&(u.data.jcaptcha=this.$el.find(".cp-captcha-input").val()),u.data.rsaToken=$("#RSADeviceFso").val(),u.data.devicePrint=$("#devicePrintId").val(),u.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.onPCLoginSuccessHandler,this.onPCLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this)}},onPCLoginSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t)}else t.errorResponse&&this.onPCLoginErrorHandler(t)},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:e.data.cpMFAAuthentication.get("mfaAuthCode")===e.constants.MFA_NONE&&(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitPaymentHubBaseView"),$("#cp-container").append("<div id='main-container'></div>"),n.successResponse.FXTransfer!==undefined&&n.successResponse.FXTransfer!==""&&n.successResponse.FXTransfer!=="N"?new e.views.cpMenuView({el:"#main-container",type:e.constants.INT_BANKTRANSFER_RETURNINGUSER,context:e.constants.PC_LOGIN}):new e.views.cpMenuView({el:"#main-container",type:e.constants.PC_LOGIN,context:e.constants.PC_LOGIN}));break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitPaymentHubBaseView"),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.MFA_ONETIMEPASSWORD,context:e.constants.PC_LOGIN,disableMenu:!0});break;default:}},onPCLoginErrorHandler:function(t){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){this.$el.find(".cp-password").val(""),this.$el.find(".cp-username").val(""),this.$el.find(".cp-captcha-input").val(""),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;if(t.errorResponse.errorCode==="2"){var r=this.redirectToFullDesktopSite();e.root.common.Alertservice.showAlert(n,null,!0,r,this)}else e.root.common.Alertservice.showAlert(n)}this.userName!==undefined&&this.userName!==""&&this.$el.find(".cp-username").val(this.userName),this.$el.find(".cp-password").val(""),this.$el.find(".cp-captcha-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha()},resetFields:function(){this.$el.find("input").val(""),this.$el.find("input").attr("data-val",""),this.$el.find("select").val("")}})}}),define("cp.views.cpPaymentExpressLandingView",[],function(){return function(e){e.views.cpPaymentExpressLandingView=CT.View.extend({initialize:function(){e.root.utils.updateLanguageLabels(e,this),e.data.cpPaymentExpressLandingModel||(e.data.cpPaymentExpressLandingModel=new e.models.cpPaymentExpressLandingModel),this.listenTo(e.data.cpPaymentExpressLandingModel,"cp:paymentExpressSettingsLoaded",this.onSettingsLoaded),this.listenTo(e.data.cpPaymentExpressLandingModel,"cp:paymentVirtualExpressLoginLoaded",this.onVirtualExpressLoginLoaded),this.listenTo(e.root.eventBus,"cp:exitPaymentHubExpressView",this.destroyView),e.data.cpPaymentExpressLandingModel.retrievePaymentExpressSettings()},events:{"click .cp-tc-checkbox":"checktickimage","click .cp-continue-button-access-my-card":"navigateNext","touchmove #cp-Payment-express-landing-section":e.root.utils.dismissKeyboard,"click .cp-pre-tc-content":"performDisclaimerCheck","focus .cp-mobile-phonePrefix, .cp-mobile-phoneNumber, .cp-first-user-puid, .cp-email":"focusRegTxtFieldMask","blur .cp-mobile-phoneNumber, .cp-mobile-phonePrefix, .cp-first-user-puid":"blurRegTxtFieldMask"},checktickimage:function(){$(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button-access-my-card").toggleClass("cp-backgroundcolor2"),this.$el.find(".cp-continue-button-access-my-card").toggleClass("uiDisabled")},render:function(){var t=e.data.cpPaymentExpressLandingModel;this.$el.empty().append(e.templates.cpPaymentExpressLandingView({model:t})),e.root.utils.updateLanguageLabels(e,this),this.$el.find(".cp-edit-puid").attr("placeholder",t.get("puidValue")?t.get("puidValue"):""),this.$el.find(".cp-puid-custom").html(e.data.cpPaymentExpressLandingModel.get("puidCustomMessage"));if("N"===e.data.cpPaymentExpressLandingModel.get("termsAndConditionsAcknowledged")){var n=e.data.cpPaymentExpressLandingModel.get("termsAndConditionContent");this.$el.find(".cp-pre-tc-content").empty().append(n),this.$el.find(".cp-virtual-express-welcome-text").text(e.data.cpPaymentExpressLandingModel.get("message")),this.currentLanguage=e.data.cpLanguageMapping.get("currentLanguage")?e.data.cpLanguageMapping.get("currentLanguage"):e.constants.LANGUAGE_EN,this.$el.find("select").children().attr("selected",!1),this.$el.find("select").children("option[value="+this.currentLanguage+"]").attr("selected",!0)}else if("vetcna"===e.data.cpPaymentExpressLandingModel.get("termsAndConditionsAcknowledged")){var n=e.data.cpPaymentExpressLandingModel.get("termsAndConditionContent");this.$el.find(".cp-pre-tc-content").empty().append(n)}},navigateNext:function(e){e.preventDefault(),e.stopPropagation(),$(document.activeElement).blur(),this.validateAndNavigate()},performDisclaimerCheck:function(t){t.preventDefault();if($(t.target).is("a")){var n=$(t.target).attr("href");if(typeof n!=typeof undefined&&n!==!1)if(e.root.utils.isWhiteListedURL(n))$(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",n)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden");else{var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,r,"",null,null,{url:n,element:$(t.target)},!0)}}},focusRegTxtFieldMask:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},blurRegTxtFieldMask:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskAuthenticationText(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},onSettingsLoaded:function(){var t=this;isIEBrowser()?setTimeout(function(){t.render(),e.root.utils.updateLanguageLabels(e,t)},500):(this.render(),e.root.utils.updateLanguageLabels(e,this));var n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentExpress.AccessVirtual");$("#cpPaymentHubHeader").html(n)},destroyView:function(){this.destroy()},validateAndNavigate:function(){var t=e.data.cpPaymentExpressLandingModel;if(t.get("puid")!="N"){var n=e.root.utils.trimText(this.$el.find(".cp-edit-puid").val());this.puid=n;var r=e.root.utils.isEmptyString(n);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.pleaseEnterPersonalUserID");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-edit-puid").val(""),this.$el.find(".cp-edit-puid").attr("data-val","");return}}if(t.get("emailAddress")!="N"){var s=e.root.utils.trimText(this.$el.find(".cp-edit-email").val()),r=e.root.utils.isEmptyString(s),o=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([A-Za-z]{2,3}))+$/;if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.provideEmailAddress");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-edit-email").val(""),this.$el.find(".cp-edit-email").attr("data-val","");return}}if(t.get("mobileNumber")!="N"){var u=e.root.utils.trimText(this.$el.find(".cp-mobile-phonePrefix").attr("data-val")),a=e.root.utils.trimText(this.$el.find(".cp-mobile-phoneNumber").attr("data-val")),r=e.root.utils.isEmptyString(u);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!r&&!$.isNumeric(u)||u.length!==3){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidMobilePhone");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}r=e.root.utils.isEmptyString(a);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!r&&!$.isNumeric(a)||a.length!==7){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidMobilePhone");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPCLoginSuccessHandler,this.onPCLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this);else{var f={},l={};l.action={},l.action.appName=e.constants.APP_NAME,l.action.criterion=e.constants.VIRTUALEXPRESS_MOBILE_LOGIN,l.action.language=e.data.cpLanguageMapping.get("currentLanguage"),l.data={},l.data.isVirtualExpress=!0,"vetcna"===t.get("termsAndConditionsAcknowledged")?l.action.type=e.constants.VIRTUAL_EXPRESS_SUCCESS:(t.get("puid")!="N"&&(l.data.puid=this.$el.find(".cp-edit-puid").val()?this.$el.find(".cp-edit-puid").val():""),t.get("emailAddress")!="N"&&(l.data.emailAddress=this.$el.find(".cp-edit-email").val()),t.get("mobileNumber")!="N"&&(l.data.phoneNumber={},l.data.phoneNumber.areaCode=this.$el.find(".cp-mobile-phonePrefix").attr("data-val")?this.$el.find(".cp-mobile-phonePrefix").attr("data-val"):"",l.data.phoneNumber.number=this.$el.find(".cp-mobile-phoneNumber").attr("data-val")?this.$el.find(".cp-mobile-phoneNumber").attr("data-val"):"")),l.data.termsAndConditionsAcknowledged=this.$el.find(".cp-tc-checkbox").hasClass("cp-Checkmark-logo-tc")?"Y":"N",l.data.rsaToken=$("#RSADeviceFso").val(),l.data.devicePrint=$("#devicePrintId").val(),l.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),l.data.termsAndConditionsAcknowledged==="Y"&&("vetcna"===t.get("termsAndConditionsAcknowledged")&&(l.data.termsAndConditionsAcknowledged=t.get("termsAndConditionsAcknowledged")),f.inputRequest=l,e.root.common.networkingservice.postRequest(f,this.onPCLoginSuccessHandler,this.onPCLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this))}},onVirtualExpressLoginLoaded:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPCLoginSuccessHandler,this.onPCLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.VIRTUALEXPRESS_MOBILE_LOGIN,n.action.type=e.constants.VIRTUAL_EXPRESS_SUCCESS,n.data={},n.data.rsaToken=$("#RSADeviceFso").val(),n.data.devicePrint=$("#devicePrintId").val(),n.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.onPCLoginSuccessHandler,this.onPCLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this)}},onPCLoginSuccessHandler:function(t){t.successResponse?(e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),e.data.cpUserInfo.setLastlogin(t.successResponse),e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitPaymentHubBaseView"),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.VIRTUALEXPRESS_MOBILE_LOGIN,context:e.constants.PC_LOGIN})):t.errorResponse&&this.onPCLoginErrorHandler(t)},onPCLoginErrorHandler:function(t){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpPaymentExpressInvalidLogoutView",[],function(){return function(e){e.views.cpPaymentExpressInvalidLogoutView=CT.View.extend({initialize:function(){e.root.utils.updateLanguageLabels(e,this),e.data.cpPaymentExpressInvalidLogoutModel||(e.data.cpPaymentExpressInvalidLogoutModel=new e.models.cpPaymentExpressInvalidLogoutModel),this.listenTo(e.data.cpPaymentExpressInvalidLogoutModel,"cp:paymentExpressLogoutLoaded",this.onPageLoaded),this.listenTo(e.root.eventBus,"cp:cpPaymentExpressInvalidLogoutView",this.destroyView),e.data.cpPaymentExpressInvalidLogoutModel.retrievePaymentExpressInvalidLogoutSettings()},render:function(){var t={};t=e.data.cpPaymentExpressInvalidLogoutModel,this.$el.empty().append(e.templates.cpPaymentExpressInvalidLogoutView({model:t})),e.root.utils.updateLanguageLabels(e,this)},performDisclaimerCheck:function(t){t.preventDefault();if($(t.target).is("a")){var n=$(t.target).attr("href");if(typeof n!=typeof undefined&&n!==!1)if(e.root.utils.isWhiteListedURL(n))$(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",n)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden");else{var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,r,"",null,null,{url:n,element:$(t.target)},!0)}}},onPageLoaded:function(){var t=this;isIEBrowser()?setTimeout(function(){t.render(),e.root.utils.updateLanguageLabels(e,t)},500):(this.render(),e.root.utils.updateLanguageLabels(e,this));var n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentExpress.AccessVirtual");$("#cpPaymentHubHeader").html(n)},destroyView:function(){this.destroy()}})}}),define("cp.views.cpChoicesRequestCardView",[],function(){return function(e){e.views.cpChoicesRequestCardView=CT.View.extend({initialize:function(){e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),this.render(),e.root.utils.updateLanguageLabels(e,this),this.listenTo(e.data.cpPaymentChoice,"cp:paymentChoiceSelected",this.navigateNext),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.destroyView),this.listenTo(e.root.eventBus,"cp:destroyPaymentHub",this.destroyView),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-tc-checkbox":"checktickimage","click .editIconPC":"loadEditAddress","click .cp-continue-button-bankTransfer":"selectPC","click .cp-cancel-button-bankTransfer":"RequestCancel"},checktickimage:function(){$(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("cp-backgroundcolor1"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("uiDisabled")},render:function(){this.$el.empty().append(e.templates.cpChoicesRequestCardView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.requestCard");$("#cpPaymentHubHeader").html(t),this.setUserInfo()},loadEditAddress:function(t){t.preventDefault(),t.stopPropagation(),e.root.utils.destroyView(this),$("#cp-menu-container").empty().append("<div id='cp-paymenthubchoice-container' class='cp-paymenthub-editprofile'></div>");var n=new e.views.cpEditProfileView({el:"#cp-paymenthubchoice-container",type:e.constants.CHOICE_CARD})},setUserInfo:function(){var t=e.data.cpChoiceUserInfo;this.$el.find(".cp-request-name").text(t.get("name")),this.$el.find(".cp-request-streetAddress1").text(t.get("address").streetAddress1),this.$el.find(".cp-request-streetAddress2").text(t.get("address").streetAddress2);var n=t.get("address").city,r=t.get("address").state,i=t.get("address").zipcode;this.$el.find(".cp-request-city").text(n+" ,"+r+" ,"+i),this.$el.find(".cp-request-country").text(t.get("address").country),this.$el.find(".cp-pre-tc-content").empty().append(t.get("termsAndConditionContent")),this.$el.find(".cp-agree-me").append(t.get("termsMessage"))},selectPC:function(){e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_CARD,this.options.context)},triggerNavigate:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoiceConfirmation",e.constants.CHOICE_CARD,this.options.context)},navigateNext:function(){var t=e.data.cpChoiceUserInfo.get("feeMessage");t!=""?e.root.common.Alertservice.showSuccessAlert(t,this.triggerNavigate,!1,!1,this):this.triggerNavigate()},RequestCancel:function(){e.root.utils.destroyView(this),this.options.context===e.constants.ADD_PC&&e.data.cpPaymentChoice.get("availableChoices").length==1?e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"):e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context)},destroyView:function(){this.destroy()}})}}),define("cp.views.cpChoicesRequestCheckView",[],function(){return function(e){e.views.cpChoicesRequestCheckView=CT.View.extend({initialize:function(){e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),this.render(),e.root.utils.updateLanguageLabels(e,this),this.listenTo(e.data.cpPaymentChoice,"cp:paymentChoiceSelected",this.navigateNext),this.listenTo(e.data.cpPaymentChoice,"choiceSelectionFailed",this.clearFields),this.listenTo(e.data.cpPaymentChoice,"disableUserInfo",this.disableUserInfo),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.destroyView),this.listenTo(e.root.eventBus,"cp:destroyPaymentHub",this.destroyView),e.root.utils.updateLanguageLabels(e,this)},events:{"click .editIconPC":"loadEditAddress","click .cp-continue-button-bankTransfer":"selectPC","click .cp-cancel-button-bankTransfer":"RequestCancel","click .here_class1":"navigateToPaymentDeliveryChoice"},render:function(){this.choicesFlag=this.options.context,this.$el.empty().append(e.templates.cpChoicesRequestCheckView({choicesFlag:this.choicesFlag}));var t=e.data.cpLanguageMapping.getLabelForKey("cp.requestCheck.sendCheck");$("#cpPaymentHubHeader").html(t),this.setUserInfo();var n=e.data.cpPaymentChoice;this.choicesFlag===e.constants.ADD_PC&&n.get("registeredUser")=="Y"&&this.disableUserInfo(),SSO==="Y"&&this.$el.find(".cp-firsttime-user-section").hide(),this.choicesFlag===e.constants.ADD_PC&&e.data.cpPaymentChoice.get("availableChoices").length==1&&(this.$el.find(".payment-otp-check-message4").hide(),this.$el.find(".payment-otp-message5").hide())},selectPC:function(){var t=e.data.cpPaymentChoice;this.choicesFlag===e.constants.ADD_PC&&t.get("registeredUser")=="N"&&SSO!=="Y"?this.validateUserDetail():e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_CHEQUE,this.options.context)},validateUserDetail:function(){var t=e.root.utils.trimText(this.$el.find(".cp-payment-username").val()),n=e.root.utils.isEmptyString(t);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(t.length<3){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(t.match(/[^a-zA-Z0-9\\@\\._ ]/)){var r=e.data.cpLanguageMapping.getLabelForKey("cp.registration.usernameInvalid");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var i=e.root.utils.trimText(this.$el.find(".cp-payment-password").val());n=e.root.utils.isEmptyString(i);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(i.length<8&&i.length<50){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.trimText(this.$el.find(".cp-payment-confirmpassword").val());n=e.root.utils.isEmptyString(s);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s.length<8&&s.length<50){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(i!=s){var r=e.data.cpLanguageMapping.getLabelForKey("cp.registration.mismatchConfirmPassword");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var o={};o.userName=e.root.utils.trimText(this.$el.find(".cp-payment-username").val()),o.password=e.root.utils.trimText(this.$el.find(".cp-payment-password").val()),e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_CHEQUE,this.options.context,o)},loadEditAddress:function(t){t.preventDefault(),t.stopPropagation(),e.root.utils.destroyView(this),$("#cp-menu-container").empty().append("<div id='cp-paymenthubchoice-container' class='cp-paymenthub-editprofile'></div>");var n=new e.views.cpEditProfileView({el:"#cp-paymenthubchoice-container",type:e.constants.CHOICE_CHEQUE})},setUserInfo:function(){var t=e.data.cpChoiceUserInfo;this.$el.find(".cp-request-name").text(t.get("name")),this.$el.find(".cp-request-streetAddress1").text(t.get("address").streetAddress1),this.$el.find(".cp-request-streetAddress2").text(t.get("address").streetAddress2);var n=t.get("address").city,r=t.get("address").state,i=t.get("address").zipcode;this.$el.find(".cp-request-city").text(n+" ,"+r+" ,"+i),this.$el.find(".cp-request-country").text(t.get("address").country)},navigateToPaymentDeliveryChoice:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context)},navigateNext:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoiceConfirmation",e.constants.CHOICE_CHEQUE,this.options.context)},RequestCancel:function(){e.root.utils.destroyView(this),this.choicesFlag===e.constants.ADD_PC&&e.data.cpPaymentChoice.get("availableChoices").length==1?e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"):e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context)},disableUserInfo:function(){this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find(".cp-payment-username").prop("disabled",!0),this.$el.find(".cp-payment-password").prop("disabled",!0),this.$el.find(".cp-payment-confirmpassword").prop("disabled",!0),SSO!="Y"&&this.options.context!=e.constants.PC_LOGIN&&this.$el.find(".user-registered-text").removeClass("hidden")},clearFields:function(){this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")},destroyView:function(){this.destroy()}})}}),define("cp.views.cpChoicesConfirmationView",[],function(){return function(e){e.views.cpChoicesConfirmationView=CT.View.extend({initialize:function(){this.render()},events:{"click .cp-close-button":"closeBrowser","click .cp-continue-button":"continueBrowser"},render:function(){this.options.context&&(this.context=this.options.context),this.$el.empty().append(e.templates.cpChoicesConfirmationView({choiceflag:this.context})),e.data.cpSettings.reloadMenu("reload-left-panel-only"),this.loadPaymentChoiceConfirmationPage(),e.root.utils.updateLanguageLabels(e,this)},closeBrowser:function(){e.exit=!0,window.open("about:blank","_self",""),window.close()},continueBrowser:function(){e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-AccountDetails-Menu")},loadPaymentChoiceConfirmationPage:function(){var t=e.data.cpPaymentChoice,n=this.options.choiceId?this.options.choiceId:"",r="",i="",s="",o="";switch(n){case e.constants.CHOICE_VIRTUAL:break;case e.constants.CHOICE_CARD:this.options.context===e.constants.ADD_PC?(s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.requestCard.confirmation"),r=t.get("confirmationMessage"),i=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.confirmationMessage6")):(s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.requestCard.confirmation"),r=e.data.cpLanguageMapping.getLabelForKey("cp.rewardAuth.congratulations"),i=t.get("confirmationMessage"));break;case e.constants.CHOICE_ACH:this.options.context===e.constants.ADD_PC?(o=t.get("withdrawalType"),s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.transferBankConfirmation"),r=t.get("confirmationMessage"),o===e.constants.SAME_DAY_ACH?i=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.confirmationMessage.expressach"):o===e.constants.STANDARD_ACH?i=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.confirmationMessage.stdach"):i=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.confirmationMessage4")):(s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.bankTransfer.confirmation"),r=e.data.cpLanguageMapping.getLabelForKey("cp.rewardAuth.congratulations"),i=t.get("confirmationMessage"));break;case e.constants.CHOICE_CHEQUE:this.options.context===e.constants.ADD_PC?(s=e.data.cpLanguageMapping.getLabelForKey("cp.paymentHub.checkMailingConfirmation.header"),r=t.get("confirmationMessage"),i=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.confirmationMessage5")):(s=e.data.cpLanguageMapping.getLabelForKey("cp.returningCheck.headerMessage"),r=e.data.cpLanguageMapping.getLabelForKey("cp.rewardAuth.congratulations"),i=t.get("confirmationMessage"));break;case e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER:break;default:}this.$el.find(".cp-payment-confirmation-message1").html(r),this.$el.find(".cp-payment-confirmation-message2").html(i),$(".cp-menu-title").empty().append(s)},destroyView:function(){this.destroy()}})}}),define("cp.views.cpRegistrationBaseView",[],function(){return function(e){e.views.cpRegistrationBaseView=CT.View.extend({initialize:function(){this.render();var t=this;e.root.utils.updateLanguageLabels(e,this),this.listenTo(e.root.eventBus,"cp:exitRegistrationEvent",this.triggerLogout),isIEBrowser()?$(window).on("orientationchange",function(){setTimeout(function(){t.setSectionHeight()},100)}):$(window).on("resize",function(){setTimeout(function(){t.setSectionHeight()},100)}),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),e.data.cpSessionController.resetTimeout(),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData),this.listenTo(e.root.eventBus,"cp:loadLandingPage",this.loadLandingPage)},events:function(){var e={};return window.navigator.pointerEnabled?e.pointerdown="restartTimer":window.navigator.msPointerEnabled?(this.eventType="MSPointerDown",e.MSPointerDown="restartTimer"):(this.eventType="touchstart",e.touchstart="restartTimer"),e},restartTimer:function(){e.data.cpSessionController.resetTimeout()},render:function(){this.$el.empty().append(e.templates.cpRegistrationBaseView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n),this.setSectionHeight(),this.$el.find("#cpRegistrationContainer>section").append('<div id="cp-register-section"></div>'),e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),this.options.context.type&&this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER?(e.data.cpRegistrationConfiguration.set("type",this.options.context.type),new e.views.cpRegistrationNewUserView({el:"#cp-register-section",context:{type:this.options.context.type}})):this.options.context&&this.options.context===e.constants.SSO_LOGIN?new e.views.cpRegistrationNewUserView({el:"#cp-register-section",context:{type:this.options.context}}):this.options.context.type&&this.options.context.type===e.constants.REGISTER_ACTIVATED_CARD?(e.data.cpRegistrationConfiguration.set("type",e.constants.REGISTER),new e.views.cpRegistrationNewUserView({el:"#cp-register-section",context:{type:e.constants.REGISTER},origin:e.constants.REGISTER_ACTIVATED_CARD})):(e.data.cpRegistrationConfiguration.set("type",e.constants.REGISTER),new e.views.cpRegistrationCardValidationView({el:"#cp-register-section",context:{type:this.options.context.type}}))},setSectionHeight:function(){var e=this.$el.find("#cpRegistrationContainer").innerHeight()-this.$el.find("#cpRegistrationContainer>header").innerHeight();this.$el.find("#cpRegistrationContainer>section").height(e),this.$el.find("#cpRegistrationContainer>section").addClass("cp-panel-scroll")},triggerLogout:function(){$(document.activeElement).blur(),e.data.cpSessionController.invalidateSession(),this.clearData()},clearData:function(){isIEBrowser()?$(window).off("orientationchange"):$(window).off("resize"),e.data.cpRegistrationConfiguration&&e.data.cpRegistrationConfiguration.clear(),e.data.cpRegistrationInfo&&e.data.cpRegistrationInfo.clear(),e.data.cpAlertSetUp&&(e.data.cpAlertSetUp.clear(),e.data.cpAlertSetUp=null),e.data.cpMFAAuthentication&&e.data.cpMFAAuthentication.clear(),e.data.cpPinResetSettings&&e.data.cpPinResetSettings.clear(),e.root.utils.destroyView(this)},loadLandingPage:function(){isIEBrowser()?$(window).off("orientationchange"):$(window).off("resize"),e.root.utils.destroyView(this),e.data.cpMFAAuthentication&&e.data.cpMFAAuthentication.clear();var t=e.data.cpRegistrationConfiguration.get("type");this.clearData(),t&&t===e.constants.PAYMENTCLAIM_REGISTER?e.root.eventBus.trigger("cp:loadView",e.constants.REGISTER_TIPS,e.constants.PAYMENTCLAIM_REGISTER):e.data.cpSettings.reloadMenu("cp-shopnow-Menu")}})}}),define("cp.views.cpPaymentChoiceRegistrationBaseView",[],function(){return function(e){e.views.cpPaymentChoiceRegistrationBaseView=CT.View.extend({initialize:function(){var t=this;e.root.utils.updateLanguageLabels(e,this),e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),e.data.cpRegistrationInfo||(e.data.cpRegistrationInfo=new e.models.cpRegistrationInfo),this.listenTo(e.data.cpRegistrationConfiguration,"cp:registrationSettingsLoaded",this.onSettingsLoadSuccessHandler),this.listenTo(e.root.eventBus,"cp:exitRegistrationEvent",this.triggerLogout),this.listenTo(e.root.eventBus,"cp:loadLandingPage",this.loadLandingPage),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData),this.render()},events:function(){var e={};return e},render:function(){this.$el.empty().append('<div id="pc-register-vc-section"></div>'),this.options.context===e.constants.PAYMENT_CHOICE_REGESTER_VC&&e.data.cpRegistrationConfiguration.retrieveRegistrationFlagForContext(e.constants.PAYMENT_CHOICE_REGESTER_VC),this.options.context===e.constants.REGISTER_FXTRANSFER&&e.data.cpRegistrationConfiguration.retrieveRegistrationFlagForContext(e.constants.REGISTER_FXTRANSFER)},onSettingsLoadSuccessHandler:function(){this.options.context===e.constants.PAYMENT_CHOICE_REGESTER_VC?(e.data.cpRegistrationConfiguration.set("type",e.constants.PAYMENT_CHOICE_REGESTER_VC),new e.views.cpRegistrationNewUserView({el:"#pc-register-vc-section",context:{type:e.constants.PAYMENT_CHOICE_REGESTER_VC}})):this.options.context===e.constants.REGISTER_FXTRANSFER&&(e.data.cpRegistrationConfiguration.set("type",e.constants.REGISTER_FXTRANSFER),new e.views.cpRegistrationNewUserView({el:"#pc-register-vc-section",context:{type:e.constants.REGISTER_FXTRANSFER}}))},onProfileLoadSuccessHandler:function(){},triggerLogout:function(){$(document.activeElement).blur(),this.options.context===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context===e.constants.REGISTER_FXTRANSFER?e.data.cpSessionController.invalidateSession(e.constants.ADD_PC):e.data.cpSessionController.invalidateSession(),this.clearData()},clearData:function(){e.data.cpRegistrationConfiguration&&e.data.cpRegistrationConfiguration.clear(),e.data.cpRegistrationInfo&&e.data.cpRegistrationInfo.clear(),e.data.cpAlertSetUp&&(e.data.cpAlertSetUp.clear(),e.data.cpAlertSetUp=null),e.data.cpPinResetSettings&&e.data.cpPinResetSettings.clear(),this.destroy()},loadLandingPage:function(){e.data.cpMFAAuthentication&&e.data.cpMFAAuthentication.clear();var t=e.data.cpRegistrationConfiguration.get("type");this.clearData(),t&&t===e.constants.PAYMENT_CHOICE_REGESTER_VC?e.data.cpSettings.retreiveMenuFlagsAndLoadMenu("cp-shopnow-Menu"):t&&t===e.constants.REGISTER_FXTRANSFER&&e.data.cpSettings.retreiveMenuFlagsAndLoadMenu("cp-globalDeposits-Menu")}})}}),define("cp.views.cpRegistrationCardValidationView",[],function(){return function(e){e.views.cpRegistrationCardValidationView=CT.View.extend({initialize:function(){this.validateFlag=!0,this.render(),e.root.utils.updateLanguageLabels(e,this),this.listenTo(e.data.cpRegistrationConfiguration,"cp:registrationSettingsLoaded",this.onSettingsLoadSuccessHandler)},events:{"click .cp-continue-button":"validateFields","click .cp-cancel-button":"navigateToLogin","focus .cp-cardnumber":"focusCardDetails","blur .cp-cardnumber":"blurCardDetails","touchmove .cpRegistrationCardValidationContainer":e.root.utils.dismissKeyboard},render:function(){$(".cp-steps").addClass("cp-removeVisibility"),this.$el.empty().append(e.templates.cpRegistrationCardValidationView());var t=e.data.cpLanguageMapping.getLabelForKey("common.register");$(".cp-menu-title").html(t),e.root.eventBus.trigger("cp:toggleMenuIcon")},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},validateFields:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");var r=$(".cp-cardnumber").attr("data-val"),i=e.root.utils.trimText(this.$el.find(".cp-security").val()),s=e.root.utils.trimText(this.$el.find(".cp-postal-code").val());if(PROGRAM==="Y")var o=e.root.utils.trimText(this.$el.find(".cp-tmobile-areacode").val()),u=e.root.utils.trimText(this.$el.find(".cp-tmobile-phonenumber").val());var a=e.root.utils.isEmptyString(r);if(a||r.length<16||!$.isNumeric(r))this.validateFlag=!1;var a=e.root.utils.isEmptyString(i);if(a||i.length<3||!$.isNumeric(i))this.validateFlag=!1;var a=e.root.utils.isEmptyString(s);if(a||s.length<5||s.match(/[^a-zA-Z0-9]/))this.validateFlag=!1;if(PROGRAM==="Y"){var f=e.root.utils.trimText(this.$el.find(".cp-tmobile-areacode").val());a=e.root.utils.isEmptyString(f);if(a||!$.isNumeric(f)||f.length!==3)this.validateFlag=!1;var l=e.root.utils.trimText(this.$el.find(".cp-tmobile-phonenumber").val());a=e.root.utils.isEmptyString(l);if(a||!$.isNumeric(l)||l.length!==7)this.validateFlag=!1}if(this.validateFlag!==!0){var c=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(c),this.$el.find(".cp-postal-code").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.validateFlag=!0;return}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onCardValidationSuccessHandler,this.onCardValidationErrorHandler,e.localURLs.VALIDATE_CARDNUMBER,{},this);else{var h={},p={};p.action={},p.action.appName=e.constants.APP_NAME,p.action.criterion=e.constants.VALIDATE_CARD_REGISTRATION,p.action.language=e.data.cpLanguageMapping.get("currentLanguage"),p.data={},p.data.cardNumber=r,p.data.securityCode=i,p.data.postalCode=s,p.data.devicePrint=$("#devicePrintId").val(),p.data.rsaToken=$("#RSADeviceFso").val(),p.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),PROGRAM!=="N"&&(p.data.mobile={},p.data.mobile.areaCode=f,p.data.mobile.number=l),h.inputRequest=p,e.root.common.networkingservice.postRequest(h,this.onCardValidationSuccessHandler,this.onCardValidationErrorHandler,e.localURLs.VALIDATE_CARDNUMBER,{},this)}},onCardValidationSuccessHandler:function(t){t.successResponse?(e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),e.data.cpRegistrationInfo||(e.data.cpRegistrationInfo=new e.models.cpRegistrationInfo),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),e.data.cpRegistrationConfiguration.retrieveRegistrationFlagForContext(this.options.context.type)):t.errorResponse?this.onCardValidationErrorHandler(t):this.onCardValidationErrorHandler(t)},onSettingsLoadSuccessHandler:function(){e.root.utils.navigateView(this,"cpRegistrationNewUserView",e,{type:this.options.context.type?this.options.context.type:""})},onCardValidationErrorHandler:function(t){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n),this.$el.find(".cp-security").val(""),this.$el.find(".cp-postal-code").val(""),PROGRAM!=="N"&&this.$el.find(".cp-tmobile-text").val("")}else e.root.common.Alertservice.showAlert("")},navigateToLogin:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent")}})}}),define("cp.views.cpRegistrationNewUserView",[],function(){return function(e){e.views.cpRegistrationNewUserView=CT.View.extend({initialize:function(){this.render(),this.originalbirthyear="",this.originalbirthmonth="",this.originalbirthday="",e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-refresh-image":"getRandomCaptcha","click .cp-cancel-button":"onCancelClicked","click .cp-continue-button":"validateDetails","change #countryList":"countrySelected","touchmove .cpRegisterNewUserView":e.root.utils.dismissKeyboard,"focus .cp-reg-username,.cp-ssn-area,.cp-ssn-group,.cp-ssn-serial,.cp-home-phonePrefix,.cp-home-phoneNumber,.cp-mobile-phonePrefix,.cp-mobile-phoneNumber":"focusRegTxtFieldMask","blur .cp-reg-username,.cp-ssn-area,.cp-ssn-group,.cp-ssn-serial":"blurRegTxtFieldMask","blur #yearUpdate":"maskBirthYear","focus #yearUpdate":"unMaskBirthYear","blur #dayUpdate":"maskBirthDay","focus #dayUpdate":"unMaskBirthDay","blur #monthUpdate":"maskBirthMonth","focus #monthUpdate":"unMaskBirthMonth","blur .cp-home-phoneNumber,.cp-mobile-phoneNumber,.cp-home-phonePrefix,.cp-mobile-phonePrefix":"blurRegTxtFieldLastMask"},blurRegTxtFieldMask:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskAuthenticationText(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},blurRegTxtFieldLastMask:function(t){var n=t.currentTarget,r=$(t.currentTarget).val(),i=e.root.utils.trimText(r);$(t.currentTarget).attr("data-val",i);var s=e.data.cpSettings,o="";s.get("mask_phone_number")==="Y"&&(n.classList.contains("cp-home-phonePrefix")||n.classList.contains("cp-mobile-phonePrefix")?o=e.root.utils.maskAuthenticationText(i):o=e.root.utils.maskCardNumber(i)),o!==undefined&&o!==""&&$(t.currentTarget).val(o)},focusRegTxtFieldMask:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},unMaskBirthMonth:function(){this.$el.find("#monthUpdate option[value="+this.originalbirthmonth+"]").text(this.originalbirthvalue)},maskBirthMonth:function(){if(this.$el.find("#monthUpdate option:selected").index()!=0){this.originalbirthmonth=this.$el.find("#monthUpdate option:selected").val(),this.originalbirthvalue=this.$el.find("#monthUpdate option:selected").text();var t=e.root.utils.maskDobField(this.originalbirthvalue);t!==undefined&&t!==""&&this.$el.find("#monthUpdate option[value="+this.originalbirthmonth+"]").text(t)}},unMaskBirthDay:function(){this.$el.find("#dayUpdate option[value="+this.originalbirthday+"]").text(this.originalbirthday)},maskBirthDay:function(){if(this.$el.find("#dayUpdate option:selected").index()!=0){this.originalbirthday=this.$el.find("#dayUpdate option:selected").val();var t=e.root.utils.maskDobField(this.originalbirthday);t!==undefined&&t!==""&&this.$el.find("#dayUpdate option[value="+this.originalbirthday+"]").text(t)}},unMaskBirthYear:function(){this.$el.find("#yearUpdate option[value="+this.originalbirthyear+"]").text(this.originalbirthyear)},maskBirthYear:function(){if(this.$el.find("#yearUpdate option:selected").index()!=0){this.originalbirthyear=this.$el.find("#yearUpdate option:selected").val();var t=e.root.utils.maskDobField(this.originalbirthyear);t!==undefined&&t!==""&&this.$el.find("#yearUpdate option[value="+this.originalbirthyear+"]").text(t)}},render:function(){var t=e.data.cpRegistrationConfiguration,n=e.data.cpSettings,r=e.data.cpPaymentClaim;this.checkCaptcha="Y";if(this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER||this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)this.checkCaptcha="N";this.options.context.type!==e.constants.PAYMENTCLAIM_REGISTER&&(r=null),this.$el.empty().append(e.templates.cpRegistrationNewUserView({configuration:t,settings:n,jcaptchaON:this.checkCaptcha,rewardClaim:r}));if(this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER){var i=$("<div class='cp-steps cp-backgroundcolor1 cp-textcolor1'><span class='cp-stepName'></span><span class='headerSeparator'> - </span><span class='cp-language-mapping headerStep' data-translateIdentifier='enroll_common_step'>Step</span>&nbsp;&nbsp;<span class='cp-currentStep'></span>&nbsp;&nbsp;<span class='headerOf cp-language-mapping' data-translateIdentifier='cp.common.of'>of</span>&nbsp;&nbsp;<span class='cp-totalSteps'></span></div>");this.$el.prepend(i)}t.set("currentContext",t.context.REGISTER_NEW_USER),this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER?this.configureView(e.constants.PAYMENTCLAIM_REGISTER):this.configureView();for(var s=0;s<=31;s++)s==0?this.$el.find("#dayUpdate").append($("<option disabled selected />").val("").html("")):this.$el.find("#dayUpdate").append($("<option />").val(s).html(s));t.get("universalAddress")&&t.get("universalAddress")==="Y"?this.$el.find(".cp-register-input-section").find(".cp-address1").attr("maxLength","50"):this.$el.find(".cp-register-input-section").find(".cp-address1").attr("maxLength","26");var o=t.get("requireSSN");o==="N"&&this.$el.find(".cp-ssn-area").removeClass("cp-mandatory-input");var u=t.get("requireDOB");u==="N"&&(this.$el.find(".cp-dob-section .cp-red").addClass("hidden"),this.$el.find("#dayUpdate").removeClass("cp-mandotory-dob")),this.setUserInfo(),e.root.utils.populateCountries(this.$el,t),this.setContactInfo(),this.checkCaptcha==="Y"?this.getRandomCaptcha():this.$el.find(".cp-continue-cancel-btn").css("margin-top","6%"),setTimeout(function(){},300),e.root.utils.getMobileOperatingSystem()=="Android"&&$.browser.mozilla&&$("#cp-register-section").addClass("webkitForceHardwareAcceleration");if(this.options.context.type==e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type==e.constants.PAYMENTCLAIM_REGISTER||this.options.context.type===e.constants.REGISTER_FXTRANSFER){var a=e.data.cpLanguageMapping.getLabelForKey("common.register");$(".cp-menu-title").html(a)}this.options.context.type==e.constants.REGISTER&&this.options.context.fromEdit!=1&&this.options.origin&&this.options.origin!==e.constants.REGISTER_ACTIVATED_CARD&&e.root.eventBus.trigger("cp:toggleMenuIcon")},configureView:function(t){if(t===e.constants.PAYMENTCLAIM_REGISTER){var n=e.data.cpPaymentClaim,r=$(".cp-steps");r.addClass("hidden");var i=$(".cp-reg-steps");i.removeClass("cp-removeVisibility");var s=e.data.cpLanguageMapping.getLabelForKey("register.create_username_password");i.find(".cp-stepName").html(s),i.find(".cp-currentStep").html("1"),i.find(".cp-totalSteps").html("2");var o=e.data.cpLanguageMapping.getLabelForKey("cp.registerClaim.welcomeStartShopping");this.$el.find(".cp-payment-card-logo").css("background","url("+n.get("imgDetail")+") no-repeat"),this.$el.find(".cp-payment-card-logo").css("background-size","contain"),this.$el.find(".cp-payment-card-logo").css("background-position","center")}else{var r=$(".cp-steps");r.removeClass("cp-removeVisibility"),this.$el.find(".cp-payment-claim-section").hide();var s=e.data.cpLanguageMapping.getLabelForKey("register.create_username_password");r.find(".cp-stepName").html(s),r.find(".cp-currentStep").html("1"),r.find(".cp-totalSteps").html("2")}},setUserInfo:function(){var t=e.data.cpRegistrationConfiguration,n=e.data.cpRegistrationInfo;if(t.get("ascentProgram")&&t.get("ascentProgram")==="Y"){this.$el.find(".cp-reg-username").attr("data-val",n.get("username"));var r=$(".cp-reg-username").attr("data-val");r!=""?this.$el.find(".cp-reg-username").val(e.root.utils.maskAuthenticationText(r)):this.$el.find(".cp-reg-username").val("")}if(this.options.context.fromEdit){this.$el.find(".cp-reg-username").attr("data-val",n.get("username"));var r=$(".cp-reg-username").attr("data-val");r!=""?this.$el.find(".cp-reg-username").val(e.root.utils.maskAuthenticationText(r)):this.$el.find(".cp-reg-username").val("");if(t.get("displaySSN")&&t.get("displaySSN")!=="N"){this.$el.find(".cp-ssn-area").attr("data-val",n.get("ssn").ssnArea),this.$el.find(".cp-ssn-group").attr("data-val",n.get("ssn").ssnGroup),this.$el.find(".cp-ssn-serial").attr("data-val",n.get("ssn").ssnSerial);var i=$(".cp-ssn-area").attr("data-val"),s=$(".cp-ssn-group").attr("data-val"),o=$(".cp-ssn-serial").attr("data-val");i!=""&&i!==undefined?this.$el.find(".cp-ssn-area").val(e.root.utils.maskAuthenticationText(i)):this.$el.find(".cp-ssn-area").val(""),s!=""&&s!==undefined?this.$el.find(".cp-ssn-group").val(e.root.utils.maskAuthenticationText(s)):this.$el.find(".cp-ssn-group").val(""),o!=""&&o!==undefined?this.$el.find(".cp-ssn-serial").val(e.root.utils.maskAuthenticationText(o)):this.$el.find(".cp-ssn-serial").val("")}if(t.get("displayDOB")&&t.get("displayDOB")!=="N"){var u=n.get("dateofbirth"),a=this.$el.find("#dayUpdate option[value="+u.day+"]"),f=this.$el.find("#monthUpdate option[value="+u.month+"]"),l=this.$el.find("#yearUpdate option[value="+u.year+"]");a&&f&&l&&(a.attr("selected",!0),f.attr("selected",!0),l.attr("selected",!0))}}},setContactInfo:function(){var t=this.$el.find(".cp-register-input-section"),n=e.data.cpRegistrationConfiguration,r=e.data.cpSettings,i=e.data.cpRegistrationInfo;if(r.get("editContact")&&r.get("editContact")==="Y"){n.get("universalAddress")&&n.get("universalAddress")!=="N"&&(this.$el.find(".cp-register-attention").val(i.get("attention")),this.$el.find(".cp-register-company").val(i.get("company"))),n.get("prepopulateAddress")&&n.get("prepopulateAddress")==="N"&&(t.find(".cp-register-firstname").val(i.get("firstName")),t.find(".cp-register-lastname").val(i.get("lastName")));if(n.get("prepopulateAddress")&&n.get("prepopulateAddress")==="Y"||this.options.context.fromEdit){var s=i.get("address"),o=s.streetAddress1?s.streetAddress1:"",u=s.streetAddress2?s.streetAddress2:"",a=s.city?s.city:"",f=s.state?s.state:"",l=s.zipcode?s.zipcode:"",c=s.country?s.country:"";t.find(".cp-address1").val(o),t.find(".cp-address2").val(u),t.find(".cp-city").val(a);var h=this.$el.find("#countryList option[data-key="+c+"]");h&&(h.attr("selected",!0),e.root.utils.populateStatesForCountry(c,this.$el,n));var p=t.find("#stateList option[data-key="+f+"]");p&&(p.attr("selected",!0),n.get("prepopulateAddress")==="Y"),t.find(".cp-zipcode").val(l),n.get("prepopulateAddress")==="Y"}else e.root.utils.populateCountries(this.$el,n);this.$el.find(".cp-email").val(i.get("emailID")),this.$el.find(".cp-home-phonePrefix").attr("data-val",i.get("phoneDetails").home.areaCode),this.$el.find(".cp-home-phoneNumber").attr("data-val",i.get("phoneDetails").home.number),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",i.get("phoneDetails").mobile.areaCode),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",i.get("phoneDetails").mobile.number);var d=$(".cp-home-phonePrefix").attr("data-val"),v=$(".cp-home-phoneNumber").attr("data-val"),m=$(".cp-mobile-phonePrefix").attr("data-val"),g=$(".cp-mobile-phoneNumber").attr("data-val");r.get("mask_phone_number")==="Y"?(d!=""&&d!=undefined?this.$el.find(".cp-home-phonePrefix").val(e.root.utils.maskAuthenticationText(d)):this.$el.find(".cp-home-phonePrefix").val(""),v!=""&&v!=undefined?this.$el.find(".cp-home-phoneNumber").val(e.root.utils.maskCardNumber(v)):this.$el.find(".cp-home-phoneNumber").val(""),m!=""&&m!=undefined?this.$el.find(".cp-mobile-phonePrefix").val(e.root.utils.maskAuthenticationText(m)):this.$el.find(".cp-mobile-phonePrefix").val(""),g!=""&&g!=undefined?this.$el.find(".cp-mobile-phoneNumber").val(e.root.utils.maskCardNumber(g)):this.$el.find(".cp-mobile-phoneNumber").val("")):(d!=""&&d!=undefined?this.$el.find(".cp-home-phonePrefix").val(d):this.$el.find(".cp-home-phonePrefix").val(""),v!=""&&v!=undefined?this.$el.find(".cp-home-phoneNumber").val(v):this.$el.find(".cp-home-phoneNumber").val(""),m!=""&&m!=undefined?this.$el.find(".cp-mobile-phonePrefix").val(m):this.$el.find(".cp-mobile-phonePrefix").val(""),g!=""&&g!=undefined?this.$el.find(".cp-mobile-phoneNumber").val(g):this.$el.find(".cp-mobile-phoneNumber").val(""))}},countrySelected:function(t){var n=$(t.currentTarget),r=n.find("option:selected"),i=r.attr("data-key"),s=e.data.cpRegistrationConfiguration;i&&e.root.utils.populateStatesForCountry(i,this.$el,s)},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.createRequest(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),this.$el.find(".cp-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),$("#cpImg").load(function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").error(function(){$(".loaderOverlay").css("display","none")})}else this.$el.find(".cp-captchaimege-section").css("display","none"),this.$el.find(".cp-captcha-section").css("display","none"),$(".loaderOverlay").css("display","none"),this.$el.find(".cp-button-section").css("padding-top","4%");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},removeHiglightedborder:function(){this.validateFlag=!0,this.$el.find("input").removeClass("cp-red-border").addClass("cp-blue-border"),this.$el.find("select").removeClass("cp-red-border").addClass("cp-blue-border"),this.$el.find("*[data-errorId='cp-error']").removeClass("show").addClass("hidden")},validateDetails:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected"),this.$el.find(".cp-generic-error-registration").addClass("hidden");var n=e.data.cpRegistrationConfiguration,r=e.data.cpSettings,i=n.get("displaySSN"),s=n.get("requireSSN"),o=n.get("requireDOB"),u=n.get("displayDOB"),a=n.get("prepopulateAddress"),f=n.get("universalAddress"),l=r.get("editContact"),c=n.get("jcaptcha"),h=r.get("phDisplayContactInfo");this.removeHiglightedborder();var p=[],d=$(".cp-reg-username").attr("data-val");this.userName=d;var v=e.root.utils.isEmptyString(d);if(v){this.$el.find(".cp-reg-username").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-username").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.provideUsername");this.$el.find(".cp-error-label-username").html(m),p.push(this.$el.find(".cp-reg-username").attr("data-validateId")),this.validateFlag=!1}if(!v&&(d.length<3||d.match(/[^a-zA-Z0-9\\@\\._ ]/))){this.$el.find(".cp-reg-username").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-username").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.usernameInvalid");this.$el.find(".cp-error-label-username").html(m),p.push(this.$el.find(".cp-reg-username").attr("data-validateId")),this.validateFlag=!1}var g=e.root.utils.trimText(this.$el.find(".cp-reg-password").val());v=e.root.utils.isEmptyString(g);if(v){this.$el.find(".cp-reg-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-password").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.passwordRequired");this.$el.find(".cp-error-label-password").html(m),p.push(this.$el.find(".cp-reg-password").attr("data-validateId")),this.validateFlag=!1}var y=g.substring(0,8);if(y.toLowerCase()=="password"||y.toUpperCase()=="PASSWORD"){this.$el.find(".cp-reg-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-password").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.passwordInvalidChars");this.$el.find(".cp-error-label-password").html(m),p.push(this.$el.find(".cp-reg-password").attr("data-validateId")),this.validateFlag=!1}for(var b=0;b<g.length;b++)if(g[b]==" "){this.$el.find(".cp-reg-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-password").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.passwordInvalidChars");this.$el.find(".cp-error-label-password").html(m),p.push(this.$el.find(".cp-reg-password").attr("data-validateId")),this.validateFlag=!1}if(!v&&g.length<8&&g.length<50){this.$el.find(".cp-reg-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-password").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.passwordInvalid");this.$el.find(".cp-error-label-password").html(m),p.push(this.$el.find(".cp-reg-password").attr("data-validateId")),this.validateFlag=!1}var w=e.root.utils.trimText(this.$el.find(".cp-reg-confirm-password").val());v=e.root.utils.isEmptyString(w);if(v){this.$el.find(".cp-reg-confirm-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-confirmpassword").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.confirmPasswordRequired");this.$el.find(".cp-error-label-confirmpassword").html(m),p.push(this.$el.find(".cp-reg-confirm-password").attr("data-validateId")),this.validateFlag=!1}if(!v&&w.length<8&&w.length<50){this.$el.find(".cp-reg-confirm-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-confirmpassword").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.confirmPasswordRequired");this.$el.find(".cp-error-label-confirmpassword").html(m),p.push(this.$el.find(".cp-reg-confirm-password").attr("data-validateId")),this.validateFlag=!1}if(g!==w){this.$el.find(".cp-reg-confirm-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-reg-password").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-confirmpassword").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.mismatchConfirmPassword");this.$el.find(".cp-error-label-confirmpassword").html(m),p.push(this.$el.find(".cp-reg-password").attr("data-validateId")),p.push(this.$el.find(".cp-reg-confirm-password").attr("data-validateId")),this.validateFlag=!1}if(i!=="N")var E=$(".cp-ssn-area").attr("data-val"),S=$(".cp-ssn-group").attr("data-val"),x=$(".cp-ssn-serial").attr("data-val");if(i!=="N"&&s==="Y"){v=e.root.utils.isEmptyString(E);if(v){this.$el.find(".cp-ssn-area").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-group").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-serial").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-ssn").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnRequired");this.$el.find(".cp-error-label-ssn").html(m),p.indexOf(this.$el.find(".cp-ssn-area").attr("data-validateId"))==-1&&p.push(this.$el.find(".cp-ssn-area").attr("data-validateId")),this.validateFlag=!1}if(!v&&(!$.isNumeric(E)||E.length!==3)){this.$el.find(".cp-ssn-area").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-group").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-serial").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-ssn").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnInvalid");this.$el.find(".cp-error-label-ssn").html(m),p.indexOf(this.$el.find(".cp-ssn-area").attr("data-validateId"))==-1&&p.push(this.$el.find(".cp-ssn-area").attr("data-validateId")),this.validateFlag=!1}v=e.root.utils.isEmptyString(S);if(v){this.$el.find(".cp-ssn-area").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-group").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-serial").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-ssn").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnRequired");this.$el.find(".cp-error-label-ssn").html(m),p.indexOf(this.$el.find(".cp-ssn-group").attr("data-validateId"))==-1&&p.push(this.$el.find(".cp-ssn-group").attr("data-validateId")),this.validateFlag=!1}if(!v&&(!$.isNumeric(S)||S.length!==2)){this.$el.find(".cp-ssn-area").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-group").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-serial").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-ssn").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnInvalid");this.$el.find(".cp-error-label-ssn").html(m),p.indexOf(this.$el.find(".cp-ssn-group").attr("data-validateId"))==-1&&p.push(this.$el.find(".cp-ssn-group").attr("data-validateId")),this.validateFlag=!1}v=e.root.utils.isEmptyString(x);if(v){this.$el.find(".cp-ssn-area").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-group").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-serial").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-ssn").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnRequired");this.$el.find(".cp-error-label-ssn").html(m),p.indexOf(this.$el.find(".cp-ssn-serial").attr("data-validateId"))==-1&&p.push(this.$el.find(".cp-ssn-serial").attr("data-validateId")),this.validateFlag=!1}if(!v&&(!$.isNumeric(x)||x.length!==4)){this.$el.find(".cp-ssn-area").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-group").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-ssn-serial").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-ssn").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.ssnInvalid");this.$el.find(".cp-error-label-ssn").html(m),p.indexOf(this.$el.find(".cp-ssn-serial").attr("data-validateId"))==-1&&p.push(this.$el.find(".cp-ssn-serial").attr("data-validateId")),this.validateFlag=!1}}if(u!=="N"&&o!=="N"){var T=this.$el.find("#dayUpdate option:selected").val(),N=this.$el.find("#monthUpdate option:selected").val(),C=this.$el.find("#yearUpdate option:selected").val();if(this.validateDate()!=1||T==""||N==""||C==""){this.$el.find("#dayUpdate").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find("#monthUpdate").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find("#yearUpdate").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-dob").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.dobRequired");this.$el.find(".cp-error-label-dob").html(m),p.push(this.$el.find("#dayUpdate").attr("data-validateId")),this.validateFlag=!1}}if(l!=="N"&&h!=="N"){var k=this.$el.find(".cp-register-firstname").val()?this.$el.find(".cp-register-firstname").val():"",L=this.$el.find(".cp-register-lastname").val()?this.$el.find(".cp-register-lastname").val():"";if(a==="N"){var k=e.root.utils.trimText(this.$el.find(".cp-register-firstname").val());v=e.root.utils.isEmptyString(k);if(v){this.$el.find(".cp-register-firstname").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-firstname").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.firstNameMissing");this.$el.find(".cp-error-label-firstname").html(m),p.push(this.$el.find(".cp-register-firstname").attr("data-validateId")),this.validateFlag=!1}if(v||k.match(/[^[a-zA-Za-zA-Z\\-\\ \\'\\.*$]/)||k.indexOf("<")!=-1&&k.indexOf("<")!=-1){this.$el.find(".cp-register-firstname").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-firstname").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.firstNameInvalid");this.$el.find(".cp-error-label-firstname").html(m),p.push(this.$el.find(".cp-register-firstname").attr("data-validateId")),this.validateFlag=!1}var L=e.root.utils.trimText(this.$el.find(".cp-register-lastname").val());v=e.root.utils.isEmptyString(L);if(v){this.$el.find(".cp-register-lastname").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-lastname").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.lastNameMissing");this.$el.find(".cp-error-label-lastname").html(m),p.push(this.$el.find(".cp-register-lastname").attr("data-validateId")),this.validateFlag=!1}if(v||L.match(/[^[a-zA-Za-zA-Z\\-\\ \\'\\.*$]/)||L.indexOf("<")!=-1&&L.indexOf("<")!=-1){this.$el.find(".cp-register-lastname").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-lastname").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.lastNameInvalid");this.$el.find(".cp-error-label-lastname").html(m),p.push(this.$el.find(".cp-register-lastname").attr("data-validateId")),this.validateFlag=!1}}if(f!=="N"){var A=e.root.utils.trimText(this.$el.find(".cp-register-attention").val());A.indexOf("<")!=-1&&A.indexOf("<")!=-1&&(this.$el.find(".cp-register-attention").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-attention").removeClass("hidden").addClass("show"),p.push(this.$el.find(".cp-register-attention").attr("data-validateId")),this.validateFlag=!1);var O=e.root.utils.trimText(this.$el.find(".cp-register-company").val());O.indexOf("<")!=-1&&O.indexOf("<")!=-1&&(this.$el.find(".cp-register-company").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-company").removeClass("hidden").addClass("show"),p.push(this.$el.find(".cp-register-company").attr("data-validateId")),this.validateFlag=!1)}var M=e.root.utils.trimText(this.$el.find(".cp-address1").val());v=e.root.utils.isEmptyString(M);if(v){this.$el.find(".cp-address1").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-address1").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.streetAddress1Required");this.$el.find(".cp-error-label-address1").html(m),p.push(this.$el.find(".cp-address1").attr("data-validateId")),this.validateFlag=!1}if(!v&&M.length<3){this.$el.find(".cp-address1").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-address1").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidAddress");this.$el.find(".cp-error-label-address1").html(m),p.push(this.$el.find(".cp-address1").attr("data-validateId")),this.validateFlag=!1}var _=e.root.utils.trimText(this.$el.find(".cp-address2").val()),D=e.root.utils.trimText(this.$el.find(".cp-city").val());v=e.root.utils.isEmptyString(D);if(v){this.$el.find(".cp-city").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-city").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.cityRequired");this.$el.find(".cp-error-label-city").html(m),p.push(this.$el.find(".cp-city").attr("data-validateId")),this.validateFlag=!1}if(!v&&(D.match(/[^a-zA-Za-zA-Z\\#\\-\\ \\'\\.*$]/)||D.length<2)){this.$el.find(".cp-city").removeClass("cp-blue-border").addClass("cp-red-border");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidCity");this.$el.find(".cp-error-label-city").html(m),this.$el.find(".cp-error-label-city").removeClass("hidden").addClass("show"),p.push(this.$el.find(".cp-city").attr("data-validateId")),this.validateFlag=!1}var P=e.root.utils.trimText(this.$el.find(".cp-zipcode").val());v=e.root.utils.isEmptyString(P);if(v){this.$el.find(".cp-zipcode").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-zipcode").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.zipcodeRequired");this.$el.find(".cp-error-label-zipcode").html(m),p.push(this.$el.find(".cp-zipcode").attr("data-validateId")),this.validateFlag=!1}if(!v&&P.length<5){this.$el.find(".cp-zipcode").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-zipcode").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidZipCode");this.$el.find(".cp-error-label-zipcode").html(m),p.push(this.$el.find(".cp-zipcode").attr("data-validateId")),this.validateFlag=!1}var H=e.root.utils.trimText(this.$el.find(".cp-email").val());v=e.root.utils.isEmptyString(H);var B=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([a-z]{2,3}))+$/;if(v){this.$el.find(".cp-email").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-email").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.provideEmailAddress");this.$el.find(".cp-error-label-email").html(m),p.push(this.$el.find(".cp-email").attr("data-validateId")),this.validateFlag=!1}if(!v&&!B.test(H)){this.$el.find(".cp-email").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-email").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidEmailAddress");this.$el.find(".cp-error-label-email").html(m),p.push(this.$el.find(".cp-email").attr("data-validateId")),this.validateFlag=!1}var j=$(".cp-home-phonePrefix").attr("data-val"),F=$(".cp-home-phoneNumber").attr("data-val"),I=$(".cp-mobile-phonePrefix").attr("data-val"),q=$(".cp-mobile-phoneNumber").attr("data-val");if(I===""||q===""){v=e.root.utils.isEmptyString(j);if(v){this.$el.find(".cp-home-phonePrefix").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");this.$el.find(".cp-error-label-phone").html(m),p.push(this.$el.find(".cp-home-phonePrefix").attr("data-validateId")),this.validateFlag=!1}if(!v&&!$.isNumeric(j)||j.length!==3){this.$el.find(".cp-home-phonePrefix").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidMobilePhone");this.$el.find(".cp-error-label-phone").html(m),p.push(this.$el.find(".cp-home-phonePrefix").attr("data-validateId")),this.$el.find(".cp-home-phonePrefix").val(""),this.$el.find(".cp-home-phonePrefix").attr("data-val",""),this.validateFlag=!1}v=e.root.utils.isEmptyString(F);if(v){this.$el.find(".cp-home-phoneNumber").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");this.$el.find(".cp-error-label-phone").html(m),p.push(this.$el.find(".cp-home-phoneNumber").attr("data-validateId")),this.validateFlag=!1}if(!v&&!$.isNumeric(F)||F.length!==7){this.$el.find(".cp-home-phoneNumber").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidHomePhone");this.$el.find(".cp-error-label-phone").html(m),p.push(this.$el.find(".cp-home-phoneNumber").attr("data-validateId")),this.$el.find(".cp-home-phoneNumber").val(""),this.$el.find(".cp-home-phoneNumber").attr("data-val",""),this.validateFlag=!1}}if(j===""||F===""){v=e.root.utils.isEmptyString(I);if(v||!$.isNumeric(I)||I.length!==3){this.$el.find(".cp-mobile-phonePrefix").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");this.$el.find(".cp-error-label-phone").html(m),p.push(this.$el.find(".cp-mobile-phonePrefix").attr("data-validateId")),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.validateFlag=!1}v=e.root.utils.isEmptyString(q);if(v||!$.isNumeric(q)||q.length!==7){this.$el.find(".cp-mobile-phoneNumber").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.phoneRequired");this.$el.find(".cp-error-label-phone").html(m),p.push(this.$el.find(".cp-mobile-phoneNumber").attr("data-validateId")),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.validateFlag=!1}}}if(this.checkCaptcha!=="N"&&this.options.context.type!==e.constants.PAYMENTCLAIM_REGISTER&&this.options.context.type!==e.constants.PAYMENT_CHOICE_REGESTER_VC&&this.options.context.type!==e.constants.REGISTER_FXTRANSFER){var R=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()?this.$el.find(".cp-captchatext-input").val():"");v=e.root.utils.isEmptyString(R);if(v){this.$el.find(".cp-captchatext-input").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find(".cp-error-label-captcha").removeClass("hidden").addClass("show");var m=e.data.cpLanguageMapping.getLabelForKey("cp.registration.imageRequired");this.$el.find(".cp-error-label-captcha").html(m),p.push(this.$el.find(".cp-captchatext-input").attr("data-validateId")),this.validateFlag=!1}}if(this.validateFlag!==!0){var t=this.$el.find("*[data-validateId="+p[0]+"]");$(".cpRegisterNewUserView").animate({scrollTop:t.offset().top},500),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-captchatext-input").val(""),this.$el.find(".cp-reg-password").val(""),this.$el.find(".cp-reg-confirm-password").val(""),this.$el.find(".cp-generic-error-registration").removeClass("hidden");return}var U={};U.username=d,U.password=g,U.ssn={},U.ssn.ssnArea=E?E:"",U.ssn.ssnGroup=S?S:"",U.ssn.ssnSerial=x?x:"",U.dob={},U.dob.day=this.$el.find("#dayUpdate option:selected").val()?this.$el.find("#dayUpdate option:selected").val():"",U.dob.month=this.$el.find("#monthUpdate option:selected").val()?this.$el.find("#monthUpdate option:selected").val():"",U.dob.year=this.$el.find("#yearUpdate option:selected").val()?this.$el.find("#yearUpdate option:selected").val():"",U.firstName=k?k:"",U.lastName=L?L:"",U.attention=A?A:"",U.company=O?O:"",U.address={},U.address.streetAddress1=M?M:"",U.address.streetAddress2=_?_:"",U.address.city=D?D:"",U.address.state=this.$el.find("#stateList option:selected").attr("data-key")?this.$el.find("#stateList option:selected").attr("data-key"):"",n.get("assumeCountryUS")==="Y"?U.address.country="US":U.address.country=this.$el.find("#countryList option:selected").attr("data-key")?this.$el.find("#countryList option:selected").attr("data-key"):"",U.address.zipcode=P?P:"",U.emailID=H?H:"",U.phoneDetails={},U.phoneDetails.home={},U.phoneDetails.home.areaCode=j?j:"",U.phoneDetails.home.number=F?F:"",U.phoneDetails.mobile={},U.phoneDetails.mobile.areaCode=I?I:"",U.phoneDetails.mobile.number=q?q:"",U.captcha=R,e.data.cpRegistrationInfo||(e.data.cpRegistrationInfo=new e.models.cpRegistrationInfo),e.data.cpRegistrationInfo.setUserDetails(U);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onSaveProfileSuccessHandler,this.onSaveProfileErrorHandler,e.localURLs.SAVE_USER_PROFILE_JSON,{},this);else{var z=e.data.cpRegistrationInfo.createRequest(this.options.context.type);(this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER||this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)&&delete z.inputRequest.data.captcha,e.root.common.networkingservice.postRequest(z,this.onSaveProfileSuccessHandler,this.onSaveProfileErrorHandler,e.localURLs.SAVE_USER_PROFILE_JSON,{},this)}},getDOB:function(){var e=this.$el.find("#dayUpdate option:selected").val(),t=this.$el.find("#monthUpdate option:selected").val(),n=this.$el.find("#yearUpdate option:selected").val();if(e&&t&&n)return e+"/"+t+"/"+n},validateDate:function(){var t=this.$el.find("#monthUpdate option:selected").val(),n=this.$el.find("#yearUpdate option:selected").val(),r=this.$el.find("#dayUpdate option:selected").val();return e.root.utils.validateDate(t,n,r)},onSaveProfileSuccessHandler:function(t){if(t.successResponse){this.$el.find(".cp-generic-error-registration").addClass("hidden"),e.data.cpRegistrationInfo.setResponse(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse);var n=this.options.context.type;e.root.utils.navigateView(this,"cpProfileConfirmationView",e,{type:n})}else t.errorResponse?this.onSaveProfileErrorHandler(t):this.onSaveProfileErrorHandler(t)},onSaveProfileErrorHandler:function(t){this.checkCaptcha!=="N"&&this.getRandomCaptcha(),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-captchatext-input").val(""),this.$el.find(".cp-reg-password").val(""),this.$el.find(".cp-reg-confirm-password").val("");if(t.errorResponse){var n=t.errorResponse.errorFields===undefined?"":t.errorResponse.errorFields,r=Object.keys(n);if(r.length==0){var i=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(i)}for(var s=0;s<r.length;s++)r[s]&&(this.$el.find("*[data-validateId="+r[s]+"]").not("span").removeClass("cp-blue-border").addClass("cp-red-border"),this.$el.find("span[data-validateId="+r[s]+"]").removeClass("hidden").addClass("show"),this.$el.find("span[data-validateId="+r[s]+"]").html(n[r[s]]));if(r.length>0){var o=this.$el.find("*[data-validateId="+r[0]+"]");o&&o.length>0&&$(".cpEditProfileView").animate({scrollTop:o.offset().top},500)}}else e.root.common.Alertservice.showAlert("")},showAlertMessage:function(t){e.root.common.Alertservice.showAlert(t),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent")}})}}),define("cp.views.cpAlertSetUpView",[],function(){return function(e){e.views.cpAlertSetUpView=CT.View.extend({initialize:function(){this.retrieveMobileCarriers()},events:{"click .cp-continue-button":"activateAlerts","click .cp-tc-checkbox":"checkInputElement","click .cp-cancel-button":"disableAlert","click .cp-ok-button":"navigateView","focus .cp-alert-section-phone-areacode,.cp-alert-section-phone":"focusEditProfileText","blur .cp-alert-section-phone-areacode,.cp-alert-section-phone":"blurEditProfileText"},blurEditProfileText:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskAuthenticationText(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusEditProfileText:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},mobileCarriers:{},checkInputElement:function(e){var t=$(e.currentTarget),n=t.attr("data-name");t.toggleClass("cp-Checkmark-logo-tc");var r=this.$el.find(".cp-tc-checkbox[data-name=Email-Alert]").hasClass("cp-Checkmark-logo-tc")||this.$el.find(".cp-tc-checkbox[data-name=Phone-Alert]").hasClass("cp-Checkmark-logo-tc");n==="Email-Alert"?r?this.$el.find(".cp-alert-frequency").removeClass("hidden"):this.$el.find(".cp-alert-frequency").addClass("hidden"):n==="Phone-Alert"&&(r?this.$el.find(".cp-alert-frequency").removeClass("hidden"):this.$el.find(".cp-alert-frequency").addClass("hidden"),this.$el.find(".cp-mobile-phone").toggleClass("hidden"),this.$el.find(".cp-mobile-carrier").toggleClass("hidden"))},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.registration.alertSetup");$(".cp-menu-title").html(t);var n=e.data.cpAlertSetUp;if(this.options.page=="editProfile"){var n=e.data.cpAlertSetUp;this.$el.empty().append(e.templates.cpAlertSetUpView({page:this.options.page}))}else{var r=e.data.cpRegistrationConfiguration;r.set("currentContext",r.context.ALERT_SETUP);var i=$(".cp-steps");i.removeClass("cp-removeVisibility"),i.addClass("hidden"),this.$el.empty().append(e.templates.cpAlertSetUpView({model:n,type:"",page:this.options.page}));if(n.get("phoneNumber")&&typeof n.get("phoneNumber").areaCode!="undefined"){this.$el.find(".cp-alert-section-phone-areacode").attr("data-val",n.get("phoneNumber").areaCode);var s=$(".cp-alert-section-phone-areacode").attr("data-val");s!=""&&s!==undefined?this.$el.find(".cp-alert-section-phone-areacode").val(e.root.utils.maskAuthenticationText(s)):this.$el.find(".cp-alert-section-phone-areacode").val("")}if(n.get("phoneNumber")&&typeof n.get("phoneNumber").number!="undefined"){this.$el.find(".cp-alert-section-phone").attr("data-val",n.get("phoneNumber").number);var o=$(".cp-alert-section-phone").attr("data-val");o!=""&&o!==undefined?this.$el.find(".cp-alert-section-phone").val(e.root.utils.maskAuthenticationText(o)):this.$el.find(".cp-alert-section-phone").val("")}}var t=e.data.cpLanguageMapping.getLabelForKey("cp.registration.alertSetup");$(".cp-menu-title").html(t)},setDetails:function(t){this.$el.find(".cp-mobile-carrier,.cp-mobile-phone,.cp-alert-frequency").removeClass("hidden");if(t.get("phoneNumber")&&typeof t.get("phoneNumber").areaCode!="undefined"){this.$el.find(".cp-alert-section-phone-areacode").attr("data-val",t.get("phoneNumber").areaCode);var n=$(".cp-alert-section-phone-areacode").attr("data-val");n!=""&&n!==undefined?this.$el.find(".cp-alert-section-phone-areacode").val(e.root.utils.maskAuthenticationText(n)):this.$el.find(".cp-alert-section-phone-areacode").val("")}if(t.get("phoneNumber")&&typeof t.get("phoneNumber").number!="undefined"){this.$el.find(".cp-alert-section-phone").attr("data-val",t.get("phoneNumber").number);var r=$(".cp-alert-section-phone").attr("data-val");r!=""&&r!==undefined?this.$el.find(".cp-alert-section-phone").val(e.root.utils.maskAuthenticationText(r)):this.$el.find(".cp-alert-section-phone").val("")}t.get("emailAlert")=="Y"&&this.$el.find("#cpEmail").addClass("cp-Checkmark-logo-tc"),t.get("mobilePhoneAlert")=="Y"&&this.$el.find("#cpMobile").addClass("cp-Checkmark-logo-tc");var i="";t.get("alertFrequency")=="balanceReminders"?i="Balance-Remainders":t.get("alertFrequency")=="transactionAlerts"&&(i="Transaction-Alert"),$(".cp-alert-radio input[data-name="+i+"]").attr("checked","true")},retrieveMobileCarriers:function(){if(this.options.page=="editProfile")this.render(),e.root.utils.updateLanguageLabels(e,this);else if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onMobileCarrierSuccessHandler,this.onMobileCarrierErrorHandler,e.localURLs.MOBILE_CARRIER_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_MOBILECARRIERS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.onMobileCarrierSuccessHandler,this.onMobileCarrierErrorHandler,e.localURLs.MOBILE_CARRIER_JSON,{},this)}},onMobileCarrierSuccessHandler:function(t){t.successResponse?(e.data.cpAlertSetUp||(e.data.cpAlertSetUp=new e.models.cpAlertSetUp),e.data.cpAlertSetUp.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this),this.populateMobileCarriers()):t.errorResponse?this.onMobileCarrierErrorHandler(t):this.onMobileCarrierErrorHandler(t)},onMobileCarrierErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},populateMobileCarriers:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.registration.carrierChoice");this.$el.find(".cp-mobile-carrier-dropdown").empty().append('<option disabled selected value="carrierSelect">'+t+"</option>");var n=e.data.cpAlertSetUp.get("mobileCarriers"),r=_.keys(n);for(var i=0;i<r.length;i++){var s=n[r[i]];this.$el.find(".cp-mobile-carrier-dropdown").append("<option value="+r[i]+">"+s+"</option>")}},activateAlerts:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");var n=this.$el.find("#cpEmail").hasClass("cp-Checkmark-logo-tc"),r=this.$el.find("#cpMobile").hasClass("cp-Checkmark-logo-tc"),i=this.$el.find("input[data-name=Balance-Remainders]").is(":checked"),s=this.$el.find("input[data-name=Transaction-Alert]").is(":checked"),o=this.$el.find("#cpNotification").hasClass("cp-Checkmark-logo-tc");if(r){var u=$(".cp-alert-section-phone-areacode").attr("data-val"),a=$(".cp-alert-section-phone").attr("data-val"),f=this.$el.find(".cp-mobile-carrier-dropdown option:selected").val(),l=e.root.utils.isEmptyString(u),c=e.root.utils.isEmptyString(u)||u.length<3||!$.isNumeric(u),h=e.root.utils.isEmptyString(a)||a.length<7||!$.isNumeric(a),p=f=="carrierSelect";if((c||h)&&p){var d=e.data.cpLanguageMapping.getLabelForKey("cp.registraion.mobileNumberCarrierEntry");e.root.common.Alertservice.showAlert(d),this.$el.find(".cp-alert-section-phone-areacode").val(""),this.$el.find(".cp-alert-section-phone").val(""),this.$el.find(".cp-alert-section-phone-areacode").attr("data-val",""),this.$el.find(".cp-alert-section-phone").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(c){var d=e.data.cpLanguageMapping.getLabelForKey("cp.registration.enterMobileNumber");e.root.common.Alertservice.showAlert(d),this.$el.find(".cp-alert-section-phone-areacode").val(""),this.$el.find(".cp-alert-section-phone").val(""),this.$el.find(".cp-alert-section-phone-areacode").attr("data-val",""),this.$el.find(".cp-alert-section-phone").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(h){var d=e.data.cpLanguageMapping.getLabelForKey("cp.registration.enterMobileNumber");e.root.common.Alertservice.showAlert(d),this.$el.find(".cp-alert-section-phone-areacode").val(""),this.$el.find(".cp-alert-section-phone").val(""),this.$el.find(".cp-alert-section-phone-areacode").attr("data-val",""),this.$el.find(".cp-alert-section-phone").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(p){var d=e.data.cpLanguageMapping.getLabelForKey("cp.registration.mobileCarrierRequired");e.root.common.Alertservice.showAlert(d),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onActivateAlertSuccessHandler,this.onActivateAlertErrorHandler,e.localURLs.ALERT_SETUP_JSON,{},this);else{var v={},m={};m.action={},m.action.appName=e.constants.APP_NAME,m.action.criterion=e.constants.ACTIVATE_ALERTS,m.action.language=e.data.cpLanguageMapping.get("currentLanguage"),this.options.page=="editProfile"?m.action.type="editProfile":m.action.type=e.constants.REGISTER,m.data={},m.data.emailAlert=n?"Y":"N",m.data.mobilePhoneAlert=r?"Y":"N",i?m.data.alertFrequency="balanceReminders":s?m.data.alertFrequency="transactionAlerts":m.data.alertFrequency="",r&&(m.data.phoneNumber={},m.data.phoneNumber.areaCode=this.$el.find(".cp-alert-section-phone-areacode").attr("data-val"),m.data.phoneNumber.number=this.$el.find(".cp-alert-section-phone").attr("data-val"),m.data.mobileCarrier=this.$el.find(".cp-mobile-carrier-dropdown option:selected").val()),m.data.notification=o?"Y":"N",v.inputRequest=m,e.root.common.networkingservice.postRequest(v,this.onActivateAlertSuccessHandler,this.onActivateAlertErrorHandler,e.localURLs.SAVE_USER_PROFILE_JSON,{},this)}},onActivateAlertSuccessHandler:function(t){if(t.successResponse)if(this.options.page=="editProfile"){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpPasswordValidationView({el:"#cp-menu-container",type:this.options.type,origin:"cpAlertSetUpView"})}else this.navigateNext();else t.errorResponse?this.onActivateAlertErrorHandler(t):this.onActivateAlertErrorHandler(t)},onActivateAlertErrorHandler:function(t){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},disableAlert:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");if(this.options.page=="editProfile"){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpEditProfileView({el:"#cp-menu-container",type:this.options.type,origin:"cpAlertSetUpView"})}else if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onActivateAlertSuccessHandler,this.onActivateAlertErrorHandler,e.localURLs.ALERT_SETUP_JSON,{},this);else{var r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.ACTIVATE_ALERTS,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),this.options.page=="editProfile"?i.action.type="editProfile":i.action.type=e.constants.REGISTER,i.data={},i.data.emailAlert="N",i.data.mobilePhoneAlert="N",i.data.alertFrequency="N",i.data.notification="N",r.inputRequest=i,e.root.common.networkingservice.postRequest(r,this.onActivateAlertSuccessHandler,this.onActivateAlertErrorHandler,e.localURLs.ALERT_SETUP_JSON,{},this)}},navigateNext:function(t){var n=e.data.cpRegistrationConfiguration.navigationForCurrentContext();n&&(n===e.data.cpRegistrationConfiguration.context.MENU||n===e.data.cpRegistrationConfiguration.context.REGISTRATION_TIPS?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadLandingPage")):e.root.utils.navigateView(this,n,e,{type:this.options.context.type}))},navigateView:function(e){this.navigateNext()}})}}),define("cp.views.cpProfileConfirmationView",[],function(){return function(e){e.views.cpProfileConfirmationView=CT.View.extend({initialize:function(){this.configuration=e.data.cpRegistrationConfiguration,this.settings=e.data.cpSettings,this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-tc-checkbox":"checktickimage","click .cp-tc-cancel-button":"onCancelClicked","click .cp-tc-continue-button":"confirmProfile","click .cp-edit-img":"navigateRegister","click .cp-confirmation-tc-content":"performDisclaimerCheck"},render:function(){var t=e.data.cpRegistrationInfo;this.$el.empty().append(e.templates.cpProfileConfirmationView({configuration:this.configuration,model:t,settings:this.settings}));if(this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER){var n=$("<div class='cp-steps cp-backgroundcolor1 cp-textcolor1'><span class='cp-stepName'></span><span class='headerSeparator'> - </span><span class='cp-language-mapping headerStep' data-translateIdentifier='enroll_common_step'>Step</span>&nbsp;&nbsp;<span class='cp-currentStep'></span>&nbsp;&nbsp;<span class='headerOf cp-language-mapping' data-translateIdentifier='cp.common.of'>of</span>&nbsp;&nbsp;<span class='cp-totalSteps'></span></div>");this.$el.prepend(n)}this.configuration.set("currentContext",this.configuration.context.PROFILE_CONFIRMATION);var r=$(".cp-steps");r.removeClass("cp-removeVisibility"),r.removeClass("hidden");var i=e.data.cpLanguageMapping.getLabelForKey("register.confirm_submit");r.find(".cp-stepName").html(i),r.find(".cp-currentStep").html("2"),r.find(".cp-totalSteps").html("2");var s=t.get("username"),o=(new Array(s.length+1)).join("*");this.$el.find(".cp-logininfo-username-value").html(o),this.getuserdetails()},getuserdetails:function(){if(this.settings.get("editContact")&&this.settings.get("editContact")!=="N"){var t=e.data.cpRegistrationInfo.get("address"),n=t.streetAddress1,r=t.streetAddress2,i=t.city,s=t.zipcode,o=t.state,u=t.country===undefined?"US":t.country,a=n+" "+r+", "+i+", "+o+" "+s+" "+u;this.$el.find(".cp-address-value").html(a)}},checktickimage:function(){this.$el.find(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-tc-continue-button").toggleClass("cp-backgroundcolor1"),this.$el.find(".cp-tc-continue-button").toggleClass("cp-textcolor1"),this.$el.find(".cp-tc-continue-button").toggleClass("uiDisabled")},navigateRegister:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),e.root.utils.navigateView(this,"cpRegistrationNewUserView",e,{fromEdit:!0,type:this.options.context.type?this.options.context.type:""},"right")},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent")},confirmProfile:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onProfileConfirmationSuccessHandler,this.onProfileConfirmationErrorHandler,e.localURLs.PROFILE_CONFIRMATION,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.CONFIRM_PROFILE,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER?r.action.type=e.constants.PAYMENTCLAIM_REGISTER:this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC?r.action.type=e.constants.PAYMENT_CHOICE_REGESTER_VC:this.options.context.type===e.constants.REGISTER_FXTRANSFER?r.action.type=e.constants.REGISTER_FXTRANSFER:r.action.type=e.constants.REGISTER,r.data={},r.data.termsAndConditionsAcknowledged=this.$el.find(".cp-tc-checkbox").hasClass("cp-Checkmark-logo-tc")?"Y":"N",n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.onProfileConfirmationSuccessHandler,this.onProfileConfirmationErrorHandler,e.localURLs.PROFILE_CONFIRMATION,{},this)}},onProfileConfirmationSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpLanguageMapping.getLabelForKey("cp.registration.success");e.data.cpRegistrationConfiguration.set("mfaAuthenticationCode",t.successResponse.mfaAuthenticationCode?t.successResponse.mfaAuthenticationCode:e.constants.MFA_NONE),e.data.cpUserInfo.set("lastLogin",t.successResponse.lastLogin),this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER&&(e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),t.successResponse.claimDetails!==undefined?(e.data.cpPaymentClaim.setClaimable("Y"),e.data.cpPaymentClaim.setPaymentDetailsResponse(t.successResponse.claimDetails)):e.data.cpPaymentClaim.setClaimable("N"));if(this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),e.data.cpPaymentChoice.set("registeredUser","Y");e.root.common.Alertservice.showSuccessAlert(n,this.navigateNext())}else t.errorResponse?this.onProfileConfirmationErrorHandler(t):this.onProfileConfirmationErrorHandler(t)},onProfileConfirmationErrorHandler:function(t){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},performDisclaimerCheck:function(t){t.preventDefault();if($(t.target).is("a")){var n=$(t.target).attr("href");if(typeof n!=typeof undefined&&n!==!1)if(e.root.utils.isWhiteListedURL(n))$(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",n)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden");else{var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,r,"",null,null,{url:n,element:$(t.target)},!0)}}},navigateNext:function(){var t=e.data.cpRegistrationConfiguration.navigationForCurrentContext();t&&(t===e.data.cpRegistrationConfiguration.context.MENU||t===e.data.cpRegistrationConfiguration.context.REGISTRATION_TIPS?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadLandingPage")):e.root.utils.navigateView(this,t,e,{type:this.options.context.type}))}})}}),define("cp.views.cpPinResetView",[],function(){return function(e){e.views.cpPinResetView=CT.View.extend({initialize:function(){this.retrievePINResetSettings()},events:{"click #pinValidationContinue":"validateCardNumber","click #pinValidationCancel":"performCancel","focus .cp-cardnumber":"focusCardDetails","blur .cp-cardnumber":"blurCardDetails","touchmove #cpPinResetView":e.root.utils.dismissKeyboard},retrievePINResetSettings:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onRetrievePinSettingSuccessHandler,this.onRetrievePinSettingErrorHandler,e.localURLs.RETRIEVEPINSETTINGS_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_PINSETTINGS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.onRetrievePinSettingSuccessHandler,this.onRetrievePinSettingErrorHandler,e.localURLs.RETRIEVEPINSETTINGS_JSON,{},this)}},onRetrievePinSettingSuccessHandler:function(t){t.successResponse?(e.data.cpPinResetSettings||(e.data.cpPinResetSettings=new e.models.cpPinResetSettings),e.data.cpPinResetSettings.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse?this.onRetrievePinSettingErrorHandler(t):this.onRetrievePinSettingErrorHandler(t)},onRetrievePinSettingErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},render:function(){var t=e.data.cpPinResetSettings.get("PUID"),n=e.data.cpPinResetSettings.get("DOB");this.$el.empty().append(e.templates.cpPinResetViewCardValidation());var r=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.pinReset");$(".cp-menu-title").html(r);if(this.options.context&&(this.options.context.type===e.constants.REGISTER||this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)){e.data.cpRegistrationConfiguration.set("currentContext",e.data.cpRegistrationConfiguration.context.PIN_RESET);var i=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.pinReset");$("#cpRegistrationHeader").html(i),this.$el.find(".cp-pinsubHeader").hide();var s=$(".cp-steps"),o=e.data.cpLanguageMapping.getLabelForKey("cp.common.validation");s.find(".cp-stepName").html(o),s.find(".headerSeparator").html(" - "),s.find(".headerOf").html(" of "),s.find(".headerStep").html("Step"),s.find(".cp-currentStep").html("1"),s.find(".cp-totalSteps").html("2")}if(t==="Y")this.$el.find(".puid").removeClass("hidden");else if(n==="Y"){this.$el.find(".cp-dob-section").removeClass("hidden"),this.$el.find(".cp-reg-instruction-text").removeClass("hidden");for(var u=1;u<=31;u++)this.$el.find("#dayUpdate").append($("<option />").val(u).html(u))}},validateDate:function(){var t=this.$el.find("#monthUpdate option:selected").val(),n=this.$el.find("#yearUpdate option:selected").val(),r=this.$el.find("#dayUpdate option:selected").val();return e.root.utils.validateDate(t,n,r)},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},validateCardNumber:function(t){t.preventDefault(),t.stopPropagation();var n=this;$(t.currentTarget).addClass("cp-button-selected"),setTimeout(function(){$(document.activeElement).blur();var t=n.$el.find(".cp-cardnumber").attr("data-val"),r=n.$el.find(".cp-cardnumber").val(),i="";t!==undefined&&t!==""&&t.indexOf("*")==-1?i=t:r!==undefined&&r!==""&&r.indexOf("*")==-1?i=r:i="";var s=e.root.utils.isEmptyString(i);if(s||i.length<16||!$.isNumeric(i)){var o=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.cardnumber.text.info");e.root.common.Alertservice.showAlert(o),n.$el.find(".cp-cardnumber").val(""),n.$el.find(".puid").val(""),n.$el.find(".cp-cardnumber").attr("data-val",""),n.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.validateDate()!=1){var o="Invalid Date please enter correct date format";e.root.common.Alertservice.showAlert(o);return}$(".loaderOverlay").css("display","block");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(n.onValidationSuccessHandler,n.onValidationErrorHandler,e.localURLs.VALIDATECARDNUMBERPINRESET_JSON,{},n);else{var u={},a={};a.action={},a.action.appName=e.constants.APP_NAME,a.action.criterion=e.constants.VALIDATE_CARDNUMBER_PINRESET,a.action.type=n.options.context.type,a.action.language=e.data.cpLanguageMapping.get("currentLanguage"),a.data={},a.data.cardNumber=e.root.utils.trimText(i);var f=e.data.cpPinResetSettings.get("PUID"),l=e.data.cpPinResetSettings.get("DOB");f==="Y"?a.data.puid=e.root.utils.trimText(n.$el.find(".puid").val()):l==="Y"&&(a.data.dob={},a.data.dob.day=n.$el.find("#dayUpdate option:selected").val(),a.data.dob.month=n.$el.find("#monthUpdate option:selected").val(),a.data.dob.year=n.$el.find("#yearUpdate option:selected").val()),a.data.devicePrint=$("#devicePrintId").val(),a.data.rsaToken=$("#RSADeviceFso").val(),u.inputRequest=a,e.root.common.networkingservice.postRequest(u,n.onValidationSuccessHandler,n.onValidationErrorHandler,e.localURLs.VALIDATECARDNUMBERPINRESET_JSON,{},n)}},1e3)},onValidationSuccessHandler:function(e){$(".loaderOverlay").css("display","none"),e.successResponse?this.navigateNext(e.successResponse):e.errorResponse?this.onValidationErrorHandler(e):this.onValidationErrorHandler(e)},onValidationErrorHandler:function(t){$(".loaderOverlay").css("display","none"),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".puid").val(""),this.$el.find(".cp-cardnumber").attr("data-val","")}else e.root.common.Alertservice.showAlert("")},navigateNext:function(t){if(this.options.context.type==="pinreset"&&t.mfaAuthenticationCode!==undefined){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t);switch(t.mfaAuthenticationCode){case e.constants.MFA_NONE:e.root.utils.navigateView(this,"cpNewPinView",e,{type:"pinreset"});break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:"pinreset"});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:"pinreset"});break;default:}}else this.options.context&&(this.options.context.type===e.constants.REGISTER||this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)&&e.root.utils.navigateView(this,"cpNewPinView",e,{type:this.options.context.type})},getDOB:function(){var e=this.$el.find("#dayUpdate option:selected").val(),t=this.$el.find("#monthUpdate option:selected").val(),n=this.$el.find("#yearUpdate option:selected").val();return e&&t&&n?e+"/"+t+"/"+n:""},performCancel:function(t){var n=e.data.cpPinResetSettings.get("veCheck");if(!this.options.context||this.options.context.type!==e.constants.REGISTER&&this.options.context.type!==e.constants.PAYMENT_CHOICE_REGESTER_VC&&this.options.context.type!==e.constants.REGISTER_FXTRANSFER)n==="Y"?e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu"):e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu");else{$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");var r=e.data.cpRegistrationConfiguration.navigationForCurrentContext();r?r===e.data.cpRegistrationConfiguration.context.MENU||r===e.data.cpRegistrationConfiguration.context.REGISTRATION_TIPS?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadLandingPage")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent"))}}})}}),define("cp.views.cpNewPinView",[],function(){return function(e){e.views.cpNewPinView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-continue-button":"submitNewPin","click .cp-cancel-button":"performCancel","keyup #newPin,#confirmNewPin":"enableButton"},render:function(){this.$el.empty().append(e.templates.cpPinResetViewNewPIN());var t=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.pinReset");$(".cp-menu-title").html(t);if(this.options.context&&this.options.context.type===e.constants.REGISTER){e.data.cpRegistrationConfiguration.set("currentContext",e.data.cpRegistrationConfiguration.context.PIN_RESET),this.$el.find(".cp-pinsubHeader").hide();var n=$(".cp-steps"),r=e.data.cpLanguageMapping.getLabelForKey("enter_new_pin");n.find(".cp-stepName").html(r),n.find(".headerSeparator").html(" - "),n.find(".headerOf").html(" of "),n.find(".headerStep").html("Step"),n.find(".cp-currentStep").html("2"),n.find(".cp-totalSteps").html("2")}},enableButton:function(e){this.$el.find("#newPin").val()!==""&&this.$el.find("#confirmNewPin").val()!==""?this.$el.find(".cp-continue-button").removeClass("uiDisabled"):this.$el.find(".cp-continue-button").addClass("uiDisabled")},submitNewPin:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");var n=$("#newPin").val(),r=$("#confirmNewPin").val(),i=e.root.utils.isEmptyString(n);if(!($.isNumeric(n)||n<4)){var s=e.data.cpLanguageMapping.getLabelForKey("cp.pinreset.pinMismatch");e.root.common.Alertservice.showAlert(s),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var i=e.root.utils.isEmptyString(r);if(!($.isNumeric(r)||r<4)){var s=e.data.cpLanguageMapping.getLabelForKey("cp.pinreset.pinMismatch");e.root.common.Alertservice.showAlert(s),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n!=r){var s=e.data.cpLanguageMapping.getLabelForKey("cp.pinreset.pinMismatch");e.root.common.Alertservice.showAlert(s),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}$(".loaderOverlay").css("display","block");if(this.options.context&&this.options.context.type===e.constants.REQUEST_PLASTIC)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.requestPlasticSuccessHandler,this.requestPlasticErrorHandler,e.localURLs.REQUEST_PLASTIC_RESPONSE,{},this);else{var o=this.sendPlasticRequest();e.root.common.networkingservice.postRequest(o,this.requestPlasticSuccessHandler,this.requestPlasticErrorHandler,e.localURLs.REQUEST_PLASTIC_RESPONSE,{},this)}else{var u="";u=e.constants.SUBMIT_PIN;if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPinSubmitSuccessHandler,this.onPinSubmitErrorHandler,e.localURLs.SUBMITNEWPIN_JSON,{},this);else{var a={},f={};f.action={},f.action.appName=e.constants.APP_NAME,f.action.criterion=u,f.data={},f.data.pin=this.$el.find("#newPin").val(),f.action.language=e.data.cpLanguageMapping.get("currentLanguage"),a.inputRequest=f,e.root.common.networkingservice.postRequest(a,this.onPinSubmitSuccessHandler,this.onPinSubmitErrorHandler,e.localURLs.SUBMITNEWPIN_JSON,{},this)}}},sendPlasticRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.data={},n.data.pin=this.$el.find("#newPin").val(),n.action.criterion=e.constants.ORDER_CARD,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},requestPlasticSuccessHandler:function(t){$(".loaderOverlay").css("display","none");if(t.successResponse){var n;n=e.data.cpLanguageMapping.getLabelForKey("cp.requestPlastic.cardOrderDeliveryPeriod"),navigateTo=this.loadAcntDetails,e.root.common.Alertservice.showSuccessAlert(n,navigateTo,!1,!1,this)}else this.requestPlasticErrorHandler(t)},requestPlasticErrorHandler:function(t){$(".loaderOverlay").css("display","none"),this.$el.find(".cp-continue-button").removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val("")}else e.root.common.Alertservice.showAlert("")},loadAcntDetails:function(){e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")},onPinSubmitSuccessHandler:function(t){var n=e.data.cpPinResetSettings.get("veCheck");$(".loaderOverlay").css("display","none");if(t.successResponse)if(!this.options.context||this.options.context.type!==e.constants.REGISTER&&this.options.context.type!==e.constants.PAYMENT_CHOICE_REGESTER_VC&&this.options.context.type!==e.constants.REGISTER_FXTRANSFER){var i=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.success");e.root.common.Alertservice.showSuccessAlert(i),n==="Y"?e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu"):e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")}else{e.root.utils.destroyView(this);var r=e.data.cpRegistrationConfiguration.navigationForCurrentContext();if(r===e.data.cpRegistrationConfiguration.context.MENU||r===e.data.cpRegistrationConfiguration.context.REGISTRATION_TIPS){var i=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.success");e.root.common.Alertservice.showSuccessAlert(i),e.root.eventBus.trigger("cp:loadLandingPage")}else{var i=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.success");e.root.common.Alertservice.showSuccessAlert(i),e.root.eventBus.trigger("cp:exitRegistrationEvent")}}else t.errorResponse?this.onPinSubmitErrorHandler(t):this.onPinSubmitErrorHandler(t)},onPinSubmitErrorHandler:function(t){$(".loaderOverlay").css("display","none"),this.$el.find(".cp-continue-button").removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val("")}else e.root.common.Alertservice.showAlert("")},performCancel:function(t){var n=e.data.cpPinResetSettings.get("veCheck");$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");if(!this.options.context||this.options.context.type!==e.constants.REGISTER&&this.options.context.type!==e.constants.PAYMENT_CHOICE_REGESTER_VC&&this.options.context.type!==e.constants.REGISTER_FXTRANSFER)n==="Y"?e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu"):e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu");else{var r=e.data.cpRegistrationConfiguration.navigationForCurrentContext();r?r===e.data.cpRegistrationConfiguration.context.MENU||r===e.data.cpRegistrationConfiguration.context.REGISTRATION_TIPS?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadLandingPage")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitRegistrationEvent"))}}})}}),define("cp.views.cpRegistrationTipsView",[],function(){return function(e){e.views.cpRegistrationTipsView=CT.View.extend({initialize:function(){this.render(),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:{"click .cp-continue-button":"closeTips","click .cp-shop-link":"navigateShopNow"},render:function(){this.$el.empty().append(e.templates.cpRegistrationTipsView()),this.retrieveTipsContent();var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n),e.root.utils.updateLanguageLabels(e,this)},navigateShopNow:function(t){this.options.type==e.constants.DASHBOARD?(this.options.parent.dismissModalView(this,!0),e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu")):this.options.parent&&this.options.type!==e.constants.PAYMENTCLAIM_REGISTER?this.options.parent.dismissModalView(this,!0):e.data.cpSettings.get("shopNow")==="Y"?(e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:e.constants.PAYMENTCLAIM_REGISTER,redirectShop:!0,origin:""})):(t.preventDefault(),t.stopPropagation())},retrieveTipsContent:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.tipsContentSuccessHandler,this.tipsContentErrorHandler,e.localURLs.TIPS_PAGE_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIVE_TIPS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.tipsContentSuccessHandler,this.tipsContentErrorHandler,e.localURLs.TIPS_PAGE_JSON,{},this)}},tipsContentSuccessHandler:function(t){t.successResponse?(this.$el.find(".cp-tips-container").empty().append(t.successResponse.content),$(".cp-menu-title").empty().append(t.successResponse.header),e.data.cpSettings.get("shopNow")==="N"&&this.$el.find(".cp-tips-table>tbody>tr:nth-child(2)").hide()):this.tipsContentErrorHandler(t)},tipsContentErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},closeTips:function(t){$(document.activeElement).blur(),$(t.target).addClass("cp-button-selected"),this.options.type===e.constants.PAYMENTCLAIM_REGISTER?(e.root.utils.destroyView(this),e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")=="Y"?e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_CONFIRMATION,e.constants.PAYMENTCLAIM_REGISTER):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")=="N"?e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_ACTIVATION,e.constants.PAYMENTCLAIM_REGISTER):e.data.cpSettings.reloadMenu("cp-shopnow-Menu")):this.options.context.origin==="cp-shopnow-menu"?e.root.utils.navigateView(this,"cpShopView",e,{},"right"):this.options.context.origin==="cp-dashboard-menu"&&e.root.utils.navigateView(this,"cpDashboardView",e,{},"right")},clearData:function(){e.root.utils.destroyView(this)}})}}),define("cp.views.cpMFAChallengeCollectView",[],function(){return function(e){e.views.cpMFAChallengeCollectView=CT.View.extend({initialize:function(){this.options.context.type===e.constants.LOGIN?(this.render(),e.root.utils.updateLanguageLabels(e,this)):this.retrieveMFA()},events:function(){var e={"click .cp-continue-button":"submitMFAAnswers","click .cp-cancel-button":"onCancelClicked","change select":"enableInput","focus #cp-mfaAnswer1,#cp-mfaAnswer2,#cp-mfaAnswer3":"focusRegTxtFieldMask","blur #cp-mfaAnswer1,#cp-mfaAnswer2,#cp-mfaAnswer3":"blurRegTxtFieldMask"};return $.browser.mozilla?e["input #cp-mfaAnswer1,#cp-mfaAnswer2,#cp-mfaAnswer3"]="enableButton":e["keyup #cp-mfaAnswer1,#cp-mfaAnswer2,#cp-mfaAnswer3"]="enableButton",e},blurRegTxtFieldMask:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskAuthenticationText(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusRegTxtFieldMask:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},render:function(){this.$el.empty().append(e.templates.cpChallengeCollectView());if(this.options.context&&(this.options.context.type===e.constants.REGISTER||this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER||this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)){var t=e.data.cpLanguageMapping.getLabelForKey("mfa.setup.questions");$(".cp-menu-title").html(t);var n=e.data.cpRegistrationConfiguration;n.set("currentContext",n.context.CHALLENGE_COLLECT);var r=$(".cp-steps");r.removeClass("cp-removeVisibility"),r.removeClass("hidden");var i=e.data.cpLanguageMapping.getLabelForKey("mfa.setup.questions");r.find(".cp-stepName").html(i),r.find(".cp-currentStep").html(""),r.find(".headerSeparator").html(""),r.find(".headerOf").html(""),r.find(".headerStep").html(""),r.find(".cp-totalSteps").html("")}var s=e.data.cpMFAAuthentication.get("challengeCollect");for(var o=0;o<s.length;o++){var u=s[o],a=this.$el.find("#cp-mfaQuestion"+(o+1));for(var f=0;f<u.length;f++){var l=u.at(f),c=l.get("questionId"),h=l.get("question");a.append("<option value="+c+">"+h+"</option>")}}},enableInput:function(){this.question1(),this.question2(),this.question3()},enableButton:function(){$("#cp-mfaAnswer1").val()!=""&&$("#cp-mfaAnswer2").val()!=""&&$("#cp-mfaAnswer3").val()!=""?($(".cp-continue-button").removeClass("uiDisabled"),$(".cp-continue-button").addClass("cp-backgroundcolor1").removeClass("cp-cancel-button-color")):($(".cp-continue-button").removeClass("cp-backgroundcolor1").addClass("cp-cancel-button-color"),$(".cp-continue-button").addClass("uiDisabled"))},question1:function(){$("#cp-mfaQuestion1 option:selected").val()!="question 1"&&$("#cp-mfaAnswer1").prop("disabled",!1)},question2:function(){$("#cp-mfaQuestion2 option:selected").val()!="question 2"&&$("#cp-mfaAnswer2").prop("disabled",!1)},question3:function(){$("#cp-mfaQuestion3 option:selected").val()!="question 3"&&$("#cp-mfaAnswer3").prop("disabled",!1)},retrieveMFA:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.MFASuccessHandler,this.MFAErrorHandler,e.localURLs.MFA_QUESTION_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.MFA_RETRIEVECHALLENGEQUESTIONS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.MFASuccessHandler,this.MFAErrorHandler,e.localURLs.MFA_QUESTION_JSON,{},this)}},MFASuccessHandler:function(t){t.successResponse?(e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse?this.MFAErrorHandler(t):this.MFAErrorHandler(t)},MFAErrorHandler:function(t){if(SSO&&SSO==="Y"){SSO="N";if(t.errorResponse.redirectURL)window.location.href=t.errorResponse.redirectURL?t.errorResponse.redirectURL:"";else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},submitMFAAnswers:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");var n=this.$el.find("#cp-mfaAnswer1").attr("data-val")?this.$el.find("#cp-mfaAnswer1").attr("data-val"):"",r=this.$el.find("#cp-mfaAnswer2").attr("data-val")?this.$el.find("#cp-mfaAnswer2").attr("data-val"):"",i=this.$el.find("#cp-mfaAnswer3").attr("data-val")?this.$el.find("#cp-mfaAnswer3").attr("data-val"):"";if(n===""&&r===""&&i==="")return;var s=$("#cp-mfaQuestion1 option:selected").text(),o=$("#cp-mfaQuestion2 option:selected").text(),u=$("#cp-mfaQuestion3 option:selected").text(),a=$("#cp-mfaQuestion1 option:selected").val(),f=$("#cp-mfaQuestion2 option:selected").val(),l=$("#cp-mfaQuestion3 option:selected").val(),c={questionId:a,question:s,answer:n},h={questionId:f,question:o,answer:r},p={questionId:l,question:u,answer:i};if(n===r||r===i||i===n){var d=e.data.cpLanguageMapping.getLabelForKey("cp.mfa.duplicateAnswer");e.root.common.Alertservice.showAlert(d),this.$el.find("#cp-mfaAnswer1").val(""),this.$el.find("#cp-mfaAnswer2").val(""),this.$el.find("#cp-mfaAnswer3").val(""),$(".cp-continue-button").removeClass("cp-backgroundcolor1").addClass("cp-cancel-button-color"),this.$el.find(".cp-continue-button").removeClass("cp-button-selected");return}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.MFAAnswersSuccessHandler,this.MFAAnswersErrorHandler,e.localURLs.MFA_ANSWERS_JSON,{},this);else{var v={},m={};m.action={},m.action.appName=e.constants.APP_NAME,m.action.criterion=e.constants.MFA_CHALLENGECOLLECT,this.options.context&&this.options.context.type===e.constants.REGISTER?m.action.type=e.constants.REGISTER:m.action.type=this.options.context.type?this.options.context.type:"",m.action.language=e.data.cpLanguageMapping.get("currentLanguage"),m.data={},m.data.mfaDetails=[c,h,p],v.inputRequest=m,e.root.common.networkingservice.postRequest(v,this.MFAAnswersSuccessHandler,this.MFAAnswersErrorHandler,e.localURLs.MFA_ANSWERS_JSON,{},this)}},MFAAnswersSuccessHandler:function(t){if(t.successResponse){if(this.options.context&&(this.options.context.type===e.constants.REGISTER||this.options.context.type===e.constants.PAYMENTCLAIM_REGISTER||this.options.context.type===e.constants.PAYMENT_CHOICE_REGESTER_VC||this.options.context.type===e.constants.REGISTER_FXTRANSFER)){var n=e.data.cpRegistrationConfiguration.navigationForCurrentContext();n&&(n===e.data.cpRegistrationConfiguration.context.MENU||n===e.data.cpRegistrationConfiguration.context.REGISTRATION_TIPS?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadLandingPage")):e.root.utils.navigateView(this,n,e,{type:this.options.context.type}))}if(this.options.context&&(this.options.context.type===e.constants.LOGIN||this.options.context.type===e.constants.CLAIMCODE_LOGIN)){e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.setEditContact(t.successResponse),e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),t.successResponse.claimDetails!==undefined?(e.data.cpPaymentClaim.setClaimable("Y"),e.data.cpPaymentClaim.setPaymentDetailsResponse(t.successResponse.claimDetails)):e.data.cpPaymentClaim.setClaimable("N");if(this.options.context.type===e.constants.CLAIMCODE_LOGIN&&t.successResponse.userCode==="0"){var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.invalid_code");e.root.common.Alertservice.showAlert(r)}this.navigateNext()}this.options.context&&this.options.context.type===e.constants.EXPRESSLOGIN?(e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.set("express","Y"),this.navigateNext()):this.options.context&&this.options.context.type===e.constants.SSO_LOGIN?(e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.setEditContact(t.successResponse),e.data.cpSettings.setErrorURL(t.successResponse),this.navigateNext()):this.options.context&&this.options.context.type===e.constants.EDITBANK&&e.root.utils.navigateView(this,"cpEditBankDetailsView",e,{type:this.options.context.type,origin:this.options.context.origin})}else t.errorResponse?this.MFAAnswersErrorHandler(t):this.MFAAnswersErrorHandler(t)},MFAAnswersErrorHandler:function(t){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-MFAAnswers").attr("value",""),this.$el.find(".cp-MFAAnswers").attr("data-val",""),this.enableButton();if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.destroyView(this),!this.options.context||this.options.context.type!==e.constants.REGISTER&&this.options.context.type!==e.constants.REGISTER&&this.options.context.type!==e.constants.PAYMENTCLAIM_REGISTER&&this.options.context.type!==e.constants.PAYMENT_CHOICE_REGESTER_VC&&this.options.context.type!==e.constants.REGISTER_FXTRANSFER?!this.options.context||this.options.context.type!==e.constants.LOGIN&&this.options.context.type!==e.constants.EXPRESSLOGIN&&this.options.context.type!==e.constants.SSO_LOGIN&&this.options.context.type!==e.constants.CLAIMCODE_LOGIN?e.root.eventBus.trigger("cp:exitMFAEvent","fail"):e.root.eventBus.trigger("cp:exitMFAEvent","fail"):e.root.eventBus.trigger("cp:exitRegistrationEvent")},navigateNext:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","success")}})}}),define("cp.views.cpMFAChallengeQuestionView",[],function(){return function(e){e.views.cpMFAChallengeQuestionView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-continue-button":"submitMFAAnswer","click .cp-cancel-button":"onCancelClicked","keyup .cp-challenge-answer":"enableDisableBtn"},render:function(){this.$el.empty().append(e.templates.cpChallengeQuestionView());var t=e.data.cpMFAAuthentication.get("challengeQuestion");this.$el.find(".cp-challenge-que").html(t.get("question"));var n=e.data.cpLanguageMapping.getLabelForKey("cp.mfaAuthentication.userAuthentication");$(".cp-menu-title").html(n)},enableDisableBtn:function(e){var t=$(e.currentTarget).val();t.length==0?this.$el.find(".cp-continue-button").removeClass("cp-backgroundcolor1").addClass("uiDisabled"):this.$el.find(".cp-continue-button").removeClass("uiDisabled").addClass("cp-backgroundcolor1")},submitMFAAnswer:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");var n=this.$el.find(".cp-challenge-answer").val();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onMFAAnswerSuccessHandler,this.onMFAAnswerErrorHandler,e.localURLs.MFA_ANSWERS_JSON,{},this);else{var r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.MFA_CHALLENGEQUESTION,this.options.context&&this.options.context.type===e.constants.PINRESET?i.action.type=e.constants.PINRESET:i.action.type=this.options.context.type?this.options.context.type:"",i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),i.data={};var s=e.data.cpMFAAuthentication.get("challengeQuestion");i.data.questionId=s.get("questionId"),i.data.question=s.get("question"),i.data.answer=n,r.inputRequest=i,e.root.common.networkingservice.postRequest(r,this.onMFAAnswerSuccessHandler,this.onMFAAnswerErrorHandler,e.localURLs.MFA_ANSWERS_JSON,{},this)}},onMFAAnswerSuccessHandler:function(t){if(t.successResponse)if(this.options.context&&this.options.context.type===e.constants.PINRESET)e.root.utils.navigateView(this,"cpNewPinView",e,{type:e.constants.PINRESET});else if(!this.options.context||this.options.context.type!==e.constants.LOGIN&&this.options.context.type!==e.constants.CLAIMCODE_LOGIN)if(this.options.context&&this.options.context.type===e.constants.EXPRESSLOGIN)e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.set("express","Y"),this.navigateNext();else if(this.options.context&&this.options.context.type===e.constants.EDITBANK)e.root.utils.navigateView(this,"cpEditBankDetailsView",e,{type:this.options.context.type,origin:this.options.context.origin});else if(this.options.context&&this.options.context.type===e.constants.DELETEBANK)e.root.eventBus.trigger("cp:DeleteBank");else if(this.options.context&&this.options.context.type===e.constants.ADDBANK)e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),e.data.cpBankDetails.setResponse(t.successResponse),e.data.cpWithdrawalDetails.setRecurringWithdrawalEnabled(t.successResponse),e.data.cpWithdrawalDetails.setACHFee(t.successResponse),e.root.utils.navigateView(this,"cpWithdrawalTCView",e,{type:this.options.context.type,origin:this.options.context.origin});else if(this.options.context&&this.options.context.type===e.constants.SSO_LOGIN)e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.setEditContact(t.successResponse),e.data.cpSettings.setErrorURL(t.successResponse),this.navigateNext();else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_ADD_BANK_COUNTRIES)this.globalAddBankCountryList();else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_EDIT_LOAD_DETAILS)this.globalEditBankLoadDetails();else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_SAVE_ADD_BANK){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_SAVE_EDIT_BANK){var n;n=e.data.cpLanguageMapping.getLabelForKey("cp.globalEditMessage"),e.root.common.Alertservice.showSuccessAlert(n,this.navigateBankDetails,!1,!1,this)}else e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","fail");else{e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.setEditContact(t.successResponse),e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),t.successResponse.claimDetails!==undefined?(e.data.cpPaymentClaim.setClaimable("Y"),e.data.cpPaymentClaim.setPaymentDetailsResponse(t.successResponse.claimDetails)):e.data.cpPaymentClaim.setClaimable("N");if(this.options.context.type===e.constants.CLAIMCODE_LOGIN&&t.successResponse.userCode==="0"){var n=e.data.cpLanguageMapping.getLabelForKey("cp.common.invalid_code");e.root.common.Alertservice.showAlert(n)}this.navigateNext()}else if(t.errorResponse){var i=t.errorResponse.errorCode;if(i==="3"){var n=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n,this.redirectLogin,null,null,this)}else this.onMFAAnswerErrorHandler(t)}},redirectLogin:function(){this.options.context&&this.options.context.type===e.constants.PINRESET?e.root.eventBus.trigger("cp:logoutEvent",this):!this.options.context||this.options.context.type!==e.constants.ADDBANK&&this.options.context.type!==e.constants.EDITBANK?!this.options.context||this.options.context.type!==e.constants.GLOBAL_ADD_BANK_COUNTRIES&&this.options.context.type!==e.constants.GLOBAL_EDIT_LOAD_DETAILS&&this.options.context.type!==e.constants.GLOBAL_SAVE_ADD_BANK&&this.options.context.type!==e.constants.GLOBAL_SAVE_EDIT_BANK?e.root.eventBus.trigger("cp:exitMFAEvent","fail"):e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"):e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")},onMFAAnswerErrorHandler:function(t){if(SSO&&SSO==="Y"){SSO="N";if(t.errorResponse.redirectURL)window.location.href=t.errorResponse.redirectURL?t.errorResponse.redirectURL:"";else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-challenge-answer").val("");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-challenge-answer").val("");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),this.options.context&&this.options.context.type===e.constants.PINRESET?e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu"):!this.options.context||this.options.context.type!==e.constants.LOGIN&&this.options.context.type!==e.constants.SSO_LOGIN&&this.options.context.type!==e.constants.EXPRESSLOGIN&&this.options.context.type!==e.constants.CLAIMCODE_LOGIN?this.options.context&&this.options.context.type===e.constants.ADDBANK?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail")):this.options.context&&this.options.context.type===e.constants.DELETEBANK?this.options.context.origin?e.root.utils.navigateView(this,this.options.context.origin,e,{}):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail")):this.options.context&&this.options.context.type===e.constants.EDITBANK?this.options.context.origin?e.root.utils.navigateView(this,this.options.context.origin,e,{}):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail")):this.options.context.type===e.constants.GLOBAL_ADD_BANK_COUNTRIES||this.options.context.type===e.constants.GLOBAL_EDIT_LOAD_DETAILS||this.options.context.type===e.constants.GLOBAL_SAVE_ADD_BANK||this.options.context.type===e.constants.GLOBAL_SAVE_EDIT_BANK?(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")):e.root.eventBus.trigger("cp:exitMFAEvent","fail"):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","fail"))},navigateNext:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","success")},globalAddBankCountryList:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.addBankCountriesSuccessHandler,this.addBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_ADD_BANK,r.action.type=e.constants.GLOBAL_ADD_BANK_COUNTRIES,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.addBankCountriesSuccessHandler,this.addBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this)}},addBankCountriesSuccessHandler:function(t){t.successResponse?(undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.get("origin")==e.constants.GLOBAL_FX_RECURRING?(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.set("origin",e.constants.GLOBAL_FX_RECURRING),e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),e.data.cpCurrentFxRateCountryDetailsModel.setAddBankDetails(t.successResponse)):(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),e.data.cpCurrentFxRateCountryDetailsModel.setAddBankDetails(t.successResponse)),e.root.utils.navigateView(this,"cpGlobalAddBankView",e)):t.errorResponse&&this.addBankCountriesErrorHandler(t)},addBankCountriesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},globalEditBankLoadDetails:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.editBankLoadDetailsSuccessHandler,this.editBankLoadDetailsErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this);else{var n={},r={};r.action={},r.data={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_EDIT_BANK,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.action.type=e.constants.GLOBAL_EDIT_LOAD_DETAILS,r.data.deviceID=e.root.utils.formatDeviceId(e.data.cpGlobalSelectedBankInfoModel.get("deviceID")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.editBankLoadDetailsSuccessHandler,this.editBankLoadDetailsErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this)}},editBankLoadDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalEditRetrieveModel=new e.models.cpGlobalEditRetrieveModel,e.data.cpGlobalEditRetrieveModel.setResponse(t.successResponse),e.data.cpGlobalEditRetrieveModel.setbeneAndBankFieldsDetails(t.successResponse),e.root.utils.navigateView(this,"cpGlobalEditView",e)):t.errorResponse&&this.editBankLoadDetailsErrorHandler(t)},editBankLoadDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateBankDetails:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}})}}),define("cp.views.cpMFAOTPView",[],function(){return function(e){e.views.cpMFAOTPView=CT.View.extend({initialize:function(){this.otpDetails={},this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-continue-button":"navigateToAccessCodeScreen","click .cp-cancel-button":"onCancelClicked","change .cp-rb-Phone":"toggle","change .cp-rb-delivery":"toggle","click .here_class1":"navigateToPaymentDeliveryChoiceScreen"},render:function(){this.otpDetails=e.data.cpMFAAuthentication.get("otpDetails");var t={};t.home=this.otpDetails.phoneDetails.home,t.mobile=this.otpDetails.phoneDetails.mobile;if(!this.options.context||this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.ADD_PC&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING){this.$el.empty().append(e.templates.cpOTPView({model:t}));var i=e.data.cpLanguageMapping.getLabelForKey("cp.mfaAuthentication.userAuthentication");$(".cp-menu-title").html(i)}else{if(this.options.context.origin==e.constants.CHOICE_ACH)var n=e.data.cpPaymentChoice.get("availableChoices").length;this.$el.empty().append(e.templates.cpPaymentChoicesOTPView({model:t,choiceflag:this.options.context.type,origin:this.options.context.origin,availableChoices:n}));var r=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.oneTimePassword");$(".cp-menu-title").html(r)}if(this.otpDetails.phoneDetails.home){var s=this.otpDetails.phoneDetails.home.countryCode,o=this.otpDetails.phoneDetails.home.areaCode,u=this.otpDetails.phoneDetails.home.number;this.$el.find("#cp-homePhone").val(s+o+u)}if(this.otpDetails.phoneDetails.mobile){var s=this.otpDetails.phoneDetails.mobile.countryCode,o=this.otpDetails.phoneDetails.mobile.areaCode,u=this.otpDetails.phoneDetails.mobile.number;this.$el.find("#cp-mobilePhone").val(s+o+u)}this.options.context&&this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.ADD_PC&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING&&this.$el.find(".mfaotp-bottom-instruction-time-text").empty().append(this.otpDetails.phoneDetails.otpMessage)},navigateToAccessCodeScreen:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");var n=this.$el.find("input[name=phone]:checked"),r=this.$el.find("input[name=delivery]:checked"),i={},s;n.attr("id")=="cp-homePhone"?(i.countryCode=this.otpDetails.phoneDetails.home.countryCode,i.areaCode=this.otpDetails.phoneDetails.home.areaCode,i.number=this.otpDetails.phoneDetails.home.number):n.attr("id")=="cp-mobilePhone"&&(i.countryCode=this.otpDetails.phoneDetails.mobile.countryCode,i.areaCode=this.otpDetails.phoneDetails.mobile.areaCode,i.number=this.otpDetails.phoneDetails.mobile.number),r.attr("id")=="cp-deliveryVoice"?s=1:r.attr("id")=="cp-deliverySms"&&(s=0);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onOTPSuccessHandler,this.onOTPErrorHandler,e.localURLs.VALIDATEOTPPINRESET_JSON,{},this);else{var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.MFA_UPDATEDELIVARYMETHOD,u.action.type=this.options.context.type,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.data={},u.data.phoneNumber=i,u.data.deliveryType=s,o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.onOTPSuccessHandler,this.onOTPErrorHandler,e.localURLs.VALIDATEOTPPINRESET_JSON,{},this)}},navigateToPaymentDeliveryChoiceScreen:function(){if(this.options.context.type==e.constants.EDIT_ACH||this.options.context.type==e.constants.EDIT_ACH_RETURNING)this.options.context.type=e.constants.PC_LOGIN;e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context.type)},onOTPSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.otpMessage;this.options.context&&this.options.context.type==="pinreset"?e.root.utils.navigateView(this,"cpMFAAccessCodeView",e,{type:"pinreset",message:n}):this.options.context&&(this.options.context.type===e.constants.LOGIN||this.options.context.type===e.constants.SSO_LOGIN||this.options.context.type===e.constants.EXPRESSLOGIN||this.options.context.type===e.constants.DELETEBANK||this.options.context.type===e.constants.EDITBANK||this.options.context.type===e.constants.ADDBANK||this.options.context.type===e.constants.CLAIMCODE_LOGIN||this.options.context.type===e.constants.PC_LOGIN||this.options.context.type===e.constants.ADD_PC||this.options.context.type===e.constants.CHOICE_ACH||this.options.context.type===e.constants.EDIT_ACH||this.options.context.type===e.constants.EDIT_ACH_RETURNING||this.options.context.type===e.constants.GLOBAL_ADD_BANK_COUNTRIES||this.options.context.type===e.constants.GLOBAL_EDIT_LOAD_DETAILS||this.options.context.type===e.constants.GLOBAL_SAVE_ADD_BANK||this.options.context.type===e.constants.GLOBAL_SAVE_EDIT_BANK)&&e.root.utils.navigateView(this,"cpMFAAccessCodeView",e,{type:this.options.context.type,message:n,origin:this.options.context.origin})}else t.errorResponse?this.onOTPErrorHandler(t):this.onOTPErrorHandler(t)},onOTPErrorHandler:function(t){if(SSO&&SSO==="Y"){SSO="N";if(t.errorResponse.redirectURL)window.location.href=t.errorResponse.redirectURL?t.errorResponse.redirectURL:"";else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");if(this.options.context&&this.options.context.type==="pinreset")e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu");else if(!this.options.context||this.options.context.type!==e.constants.LOGIN&&this.options.context.type!==e.constants.EXPRESSLOGIN&&this.options.context.type!==e.constants.SSO_LOGIN&&this.options.context.type!==e.constants.CLAIMCODE_LOGIN)if(this.options.context&&this.options.context.type===e.constants.ADDBANK)this.options.context.origin===e.constants.PC_BANK?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE)):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail"));else if(this.options.context&&this.options.context.type===e.constants.DELETEBANK)this.options.context.origin?e.root.utils.navigateView(this,this.options.context.origin,e,{}):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail"));else if(this.options.context&&this.options.context.type===e.constants.EDITBANK)this.options.context.origin?e.root.utils.navigateView(this,this.options.context.origin,e,{}):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail"));else if(!this.options.context||this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.ADD_PC&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING){if(this.options.context&&(this.options.context.type===e.constants.GLOBAL_ADD_BANK_COUNTRIES||this.options.context.type===e.constants.GLOBAL_EDIT_LOAD_DETAILS)||this.options.context.type===e.constants.GLOBAL_SAVE_ADD_BANK||this.options.context.type===e.constants.GLOBAL_SAVE_EDIT_BANK)e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")}else this.options.context.type===e.constants.ADD_PC&&this.options.context.origin===e.constants.CHOICE_ACH&&e.data.cpPaymentChoice.get("availableChoices").length===1?(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")):this.options.context.origin===e.constants.CHOICE_ACH?(e.root.utils.destroyView(this),this.options.context.type==e.constants.EDIT_ACH||this.options.context.type==e.constants.EDIT_ACH_RETURNING?e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE,e.constants.PC_LOGIN):e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context.type)):(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"));else e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","fail")},toggle:function(e){var t=$(e.currentTarget);t.is("input")&&(t.prop("checked",!0),t.attr("name")=="phone"&&$(".cp-rb-delivery").is(":checked")&&this.$el.find(".cp-continue-button").removeClass("uiDisabled").addClass("cp-backgroundcolor1"),t.attr("name")=="delivery"&&$(".cp-rb-Phone").is(":checked")&&this.$el.find(".cp-continue-button").removeClass("uiDisabled").addClass("cp-backgroundcolor1"))}})}}),define("cp.views.cpMFAAccessCodeView",[],function(){return function(e){e.views.cpMFAAccessCodeView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-continue-button":"navigateNext","click .cp-continue-button-vertical":"navigateNext","click .cp-cancel-button":"onCancelClicked","click .cp-cancel-button-vertical":"onCancelClicked","keyup .cpAccessCode":"enableDisableBtn","touchmove .cp-otpaccesscode":e.root.utils.dismissKeyboard},render:function(){if(!this.options.context||this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.ADD_PC&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING)this.$el.empty().append(e.templates.cpAccesscodeView()),this.$el.find(".mfaotp-bottom-instruction-time-text").empty().append(this.options.context.message);else{this.$el.empty().append(e.templates.cpPaymentChoiceAccesscodeView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.oneTimePassword");$(".cp-menu-title").html(t)}},enableDisableBtn:function(e){var t=$(e.currentTarget).val();t.length==0?(this.$el.find(".cp-continue-button").removeClass("cp-backgroundcolor1").addClass("uiDisabled"),this.$el.find(".cp-continue-button-vertical").removeClass("cp-backgroundcolor1").addClass("uiDisabled")):(this.$el.find(".cp-continue-button").removeClass("uiDisabled").addClass("cp-backgroundcolor1"),this.$el.find(".cp-continue-button-vertical").removeClass("uiDisabled").addClass("cp-backgroundcolor1"))},navigateNext:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");var n=this.$el.find(".cpAccessCode").val();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onValidateAccessCodeSuccessHandler,this.onValidateAccessCodeErrorHandler,e.localURLs.VALIDATEACCESSCODEPINRESET_JSON,{},this);else{var r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.MFA_VALIDATEACCESSCODE;var s=this.options.context.type;this.options.context.origin===e.constants.CHOICE_ACH&&(s=e.constants.PC_BANK),i.action.type=s,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),i.data={},i.data.accessCode=e.root.utils.trimText(n),r.inputRequest=i,e.root.common.networkingservice.postRequest(r,this.onValidateAccessCodeSuccessHandler,this.onValidateAccessCodeErrorHandler,e.localURLs.VALIDATEACCESSCODEPINRESET_JSON,{},this)}},onValidateAccessCodeSuccessHandler:function(t){if(t.successResponse)if(this.options.context&&this.options.context.type===e.constants.PINRESET)e.root.utils.navigateView(this,"cpNewPinView",e,{type:e.constants.PINRESET});else if(!this.options.context||this.options.context.type!==e.constants.LOGIN&&this.options.context.type!==e.constants.CLAIMCODE_LOGIN)if(this.options.context&&this.options.context.type===e.constants.EXPRESSLOGIN)e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.set("express","Y"),this.validateAndNavigate();else if(this.options.context&&this.options.context.type===e.constants.EDITBANK)e.root.utils.navigateView(this,"cpEditBankDetailsView",e,{type:this.options.context.type,origin:this.options.context.origin});else if(this.options.context&&this.options.context.type===e.constants.DELETEBANK)e.root.eventBus.trigger("cp:DeleteBank");else if(this.options.context&&this.options.context.type===e.constants.ADDBANK)e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),e.data.cpBankDetails.setResponse(t.successResponse),e.data.cpWithdrawalDetails.setRecurringWithdrawalEnabled(t.successResponse),e.data.cpWithdrawalDetails.setACHFee(t.successResponse),e.root.utils.navigateView(this,"cpWithdrawalTCView",e,{type:this.options.context.type,origin:this.options.context.origin});else if(this.options.context&&this.options.context.type===e.constants.SSO_LOGIN)e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.setEditContact(t.successResponse),e.data.cpSettings.setErrorURL(t.successResponse),this.validateAndNavigate();else if(!this.options.context||this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING){if(this.options.context&&this.options.context.type===e.constants.ADD_PC){var r=e.data.cpPaymentChoiceLandingModel.get("systemDefaultedChoice");if(r=="4")e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem",e.constants.PAYMENT_CHOICE_USER_CREATION,e.constants.PC_LOGIN);else{var i=this,s=e.data.cpPaymentChoiceLandingModel,o=s.get("choiceMapping");this.options.context&&this.options.context.origin===e.constants.CHOICE_ACH?(e.root.utils.destroyView(i),e.root.eventBus.trigger("cp:loadPaymentChoiceACH",t)):(e.root.utils.destroyView(i),e.root.eventBus.trigger("loadMenuItem","cp-PaymentDelivary-Choice",e.constants.ADD_PC))}}else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_ADD_BANK_COUNTRIES)this.globalAddBankCountryList();else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_EDIT_LOAD_DETAILS)this.globalEditBankLoadDetails();else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_SAVE_ADD_BANK){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var u=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}else if(this.options.context&&this.options.context.type===e.constants.GLOBAL_SAVE_EDIT_BANK){var n;n=e.data.cpLanguageMapping.getLabelForKey("cp.globalEditMessage"),e.root.common.Alertservice.showSuccessAlert(n,this.navigateBankDetails,!1,!1,this)}}else this.options.context&&this.options.context.origin===e.constants.CHOICE_ACH?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoiceACH",t)):(e.data.cpUserInfo.setLastlogin(t.successResponse),e.root.utils.destroyView(this),SSO==="Y"?e.data.cpSettings.reloadMenu("cp-PaymentChoice-Menu"):e.data.cpSettings.reloadMenu("cp-AccountDetails-Menu"));else{e.data.cpUserInfo.setLastlogin(t.successResponse),e.data.cpSettings.setTermsAndConditions(t.successResponse),e.data.cpSettings.setEditContact(t.successResponse),e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),t.successResponse.claimDetails!==undefined?(e.data.cpPaymentClaim.setClaimable("Y"),e.data.cpPaymentClaim.setPaymentDetailsResponse(t.successResponse.claimDetails)):e.data.cpPaymentClaim.setClaimable("N");if(this.options.context.type===e.constants.CLAIMCODE_LOGIN&&t.successResponse.userCode==="0"){var n=e.data.cpLanguageMapping.getLabelForKey("cp.common.invalid_code");e.root.common.Alertservice.showAlert(n)}this.validateAndNavigate()}else if(t.errorResponse){var a=t.errorResponse.errorCode;if(a==="3"){var n=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n,this.redirectLogin,null,null,this)}else this.onValidateAccessCodeErrorHandler(t)}else this.onValidateAccessCodeErrorHandler(t)},onValidateAccessCodeErrorHandler:function(t){if(SSO&&SSO==="Y"){SSO="N";if(t.errorResponse.redirectURL)window.location.href=t.errorResponse.redirectURL?t.errorResponse.redirectURL:"";else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cpAccessCode").val("");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}else if(t.errorResponse){this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cpAccessCode").val("");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},redirectLogin:function(){this.options.context&&this.options.context.type===e.constants.PINRESET?e.root.eventBus.trigger("cp:logoutEvent",this):!this.options.context||this.options.context.type!==e.constants.ADDBANK&&this.options.context.type!==e.constants.EDITBANK&&this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.ADD_PC&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING?!this.options.context||this.options.context.type!==e.constants.GLOBAL_ADD_BANK_COUNTRIES&&this.options.context.type!==e.constants.GLOBAL_EDIT_LOAD_DETAILS&&this.options.context.type!==e.constants.GLOBAL_SAVE_ADD_BANK&&this.options.context.type!==e.constants.GLOBAL_SAVE_EDIT_BANK?e.root.eventBus.trigger("cp:exitMFAEvent","fail"):e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"):(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"))},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),this.options.context&&this.options.context.type===e.constants.PINRESET?e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu"):!this.options.context||this.options.context.type!==e.constants.LOGIN&&this.options.context.type!==e.constants.SSO_LOGIN&&this.options.context.type!==e.constants.EXPRESSLOGIN&&this.options.context.type!==e.constants.CLAIMCODE_LOGIN?this.options.context&&this.options.context.type===e.constants.ADDBANK?this.options.context.origin===e.constants.PC_BANK?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE)):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail")):this.options.context&&this.options.context.type===e.constants.DELETEBANK?this.options.context.origin?e.root.utils.navigateView(this,this.options.context.origin,e,{}):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail")):this.options.context&&this.options.context.type===e.constants.EDITBANK?this.options.context.origin?e.root.utils.navigateView(this,this.options.context.origin,e,{}):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitBankTransfer","fail")):!this.options.context||this.options.context.type!==e.constants.PC_LOGIN&&this.options.context.type!==e.constants.ADD_PC&&this.options.context.type!==e.constants.EDIT_ACH&&this.options.context.type!==e.constants.EDIT_ACH_RETURNING?this.options.context.type===e.constants.GLOBAL_ADD_BANK_COUNTRIES||this.options.context.type===e.constants.GLOBAL_EDIT_LOAD_DETAILS||this.options.context.type===e.constants.GLOBAL_SAVE_ADD_BANK||this.options.context.type===e.constants.GLOBAL_SAVE_EDIT_BANK?(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","fail")):this.options.context.type===e.constants.ADD_PC&&this.options.context.origin===e.constants.CHOICE_ACH&&e.data.cpPaymentChoice.get("availableChoices").length===1?(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")):this.options.context.origin===e.constants.CHOICE_ACH?(e.root.utils.destroyView(this),this.options.context.type==e.constants.EDIT_ACH||this.options.context.type==e.constants.EDIT_ACH_RETURNING?e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE,e.constants.PC_LOGIN):e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context.type)):(e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")):(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","fail"))},validateAndNavigate:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:exitMFAEvent","success")},globalAddBankCountryList:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.addBankCountriesSuccessHandler,this.addBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_ADD_BANK,r.action.type=e.constants.GLOBAL_ADD_BANK_COUNTRIES,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.addBankCountriesSuccessHandler,this.addBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this)}},addBankCountriesSuccessHandler:function(t){t.successResponse?(undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.get("origin")==e.constants.GLOBAL_FX_RECURRING?(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.set("origin",e.constants.GLOBAL_FX_RECURRING),e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),e.data.cpCurrentFxRateCountryDetailsModel.setAddBankDetails(t.successResponse)):(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),e.data.cpCurrentFxRateCountryDetailsModel.setAddBankDetails(t.successResponse)),e.root.utils.navigateView(this,"cpGlobalAddBankView",e)):t.errorResponse&&this.addBankCountriesErrorHandler(t)},addBankCountriesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},globalEditBankLoadDetails:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.editBankLoadDetailsSuccessHandler,this.editBankLoadDetailsErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this);else{var n={},r={};r.action={},r.data={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_EDIT_BANK,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.action.type=e.constants.GLOBAL_EDIT_LOAD_DETAILS,r.data.deviceID=e.root.utils.formatDeviceId(e.data.cpGlobalSelectedBankInfoModel.get("deviceID")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.editBankLoadDetailsSuccessHandler,this.editBankLoadDetailsErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this)}},editBankLoadDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalEditRetrieveModel=new e.models.cpGlobalEditRetrieveModel,e.data.cpGlobalEditRetrieveModel.setResponse(t.successResponse),e.data.cpGlobalEditRetrieveModel.setbeneAndBankFieldsDetails(t.successResponse),e.root.utils.navigateView(this,"cpGlobalEditView",e)):t.errorResponse&&this.editBankLoadDetailsErrorHandler(t)},editBankLoadDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateBankDetails:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}})}}),define("cp.views.cpExpressLoginView",[],function(){return function(e){e.views.cpExpressLoginView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),e.data.cpSessionController.resetTimeout(),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.Postallogout)},events:{"click .cp-validate-security-code":"navigateToPostalCodeValidation","click .cp-cancel-button":"navigateexptologincard","focus .cp-cardnumber":"focusCardDetails","blur .cp-cardnumber":"blurCardDetails"},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},render:function(){this.$el.empty().append(e.templates.cpExpressLogin());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n);var s=document.documentElement.clientHeight,o=document.documentElement.clientWidth;$(window).resize(function(){document.documentElement.clientHeight==o&&document.documentElement.clientWidth==s&&(s=document.documentElement.clientHeight,o=document.documentElement.clientWidth),document.documentElement.clientHeight<s})},navigateToPostalCodeValidation:function(t){$(document.activeElement).blur();var n=$(".cp-cardnumber").attr("data-val");$(".cp-validate-security-code").addClass("cp-button-selected");var r=e.root.utils.isEmptyString(n);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.cardnumber.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!$.isNumeric(n)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.cardnumber.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(n),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length!==16){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.cardnumber.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(n),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.trimText(this.$el.find(".cp-security").val());r=e.root.utils.isEmptyString(s);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.securitycode.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!$.isNumeric(s)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.securitycode.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s.length!==3){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.securitycode.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(PROGRAM!=="N"){var o=e.root.utils.trimText(this.$el.find(".cp-tmobile-areacode").val());r=e.root.utils.isEmptyString(o);if(r||!$.isNumeric(o)||o.length!==3){var i="T Mobile Phone is required";e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-postal-code").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var u=e.root.utils.trimText(this.$el.find(".cp-tmobile-phonenumber").val());r=e.root.utils.isEmptyString(u);if(r||!$.isNumeric(u)||u.length!==7){var i="T Mobile Phone is required";e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-postal-code").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onExpLoginSecuritySuccessHandler,this.onExpLoginSecurityErrorHandler,e.localURLs.VALIDATESECURITYCODE_JSON,{},this);else{var a={},f={};f.action={},f.action.appName=e.constants.APP_NAME,f.action.criterion=e.constants.EXPLOGIN_VALIDATESECURITYCODE,f.action.language=e.data.cpLanguageMapping.get("currentLanguage"),f.data={},f.data.cardNumber=e.root.utils.trimText(this.$el.find(".cp-cardnumber").attr("data-val")),f.data.securitycode=e.root.utils.trimText(this.$el.find(".cp-security").val()),f.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),PROGRAM!=="N"&&(f.data.mobile={},f.data.mobile.areaCode=o,f.data.mobile.number=u),f.data.rsaToken=$("#RSADeviceFso").val(),f.data.devicePrint=$("#devicePrintId").val(),a.inputRequest=f,e.root.common.networkingservice.postRequest(a,this.onExpLoginSecuritySuccessHandler,this.onExpLoginSecurityErrorHandler,e.localURLs.VALIDATESECURITYCODE_JSON,{},this)}},onExpLoginSecuritySuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.status;n=="success"&&(this.options.parent.resetAllViewContainers(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:"POSTAL_CODE",origin:e.constants.EXPRESSLOGIN,disableMenu:!0})),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding"))}else if(t.errorResponse){var r=t.errorResponse.errorCode;if(r==="3"){var i=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(i,this.goToMobileLogin(this))}else this.onExpLoginSecurityErrorHandler(t)}},goToMobileLogin:function(e){this.options.parent.dismissModalView(e,!0)},onExpLoginSecurityErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")},navigateexptologincard:function(e){$(document.activeElement).blur(),$(e.target).addClass("cp-button-selected"),this.options.parent.dismissModalView(this,!0)},Postallogout:function(t){$(document.activeElement).blur(),$(t.target).addClass("cp-button-selected"),e.data.cpSessionController.stopTimeout(),e.data.cpSessionController.clear(),e.data.cpSessionController=null,this.options.parent.dismissModalView(this,!0)}})}}),define("cp.views.cpPostalcodeView",[],function(){return function(e){e.views.cpPostalcodeView=CT.View.extend({initialize:function(){this.render()},events:{"click .cp-validate-postalcode":"navigateNext","click .cp-cancel-button-postal":"navigateexptologin"},render:function(){this.$el.empty().append(e.templates.postalCodeView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.login.expressLogin");$(".cp-menu-title").html(t)},navigateNext:function(t){$(document.activeElement).blur(),$(t.target).addClass("cp-button-selected");var n=e.root.utils.trimText(this.$el.find(".cp-postal-code").val()),r=e.root.utils.isEmptyString(n);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onExpLoginPostalSuccessHandler,this.onExpLoginPostalErrorHandler,e.localURLs.VALIDATEPOSTALCODE_JSON,{},this);else{var s={},o={};o.action={},o.action.appName=e.constants.APP_NAME,o.action.criterion=e.constants.EXPLOGIN_VALIDATEPOSTALCODE,o.action.language=e.data.cpLanguageMapping.get("currentLanguage"),o.data={},o.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),o.data.postalCode=e.root.utils.trimText(this.$el.find(".cp-postal-code").val()),o.data.rsaToken=$("#RSADeviceFso").val(),o.data.devicePrint=$("#devicePrintId").val(),s.inputRequest=o,e.root.common.networkingservice.postRequest(s,this.onExpLoginPostalSuccessHandler,this.onExpLoginPostalErrorHandler,e.localURLs.VALIDATEPOSTALCODE_JSON,{},this)}},navigateexptologin:function(t){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")},onExpLoginPostalSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t)}else this.onExpLoginPostalErrorHandler(t);this.$el.find(".cp-postal-code").val("")},onExpLoginPostalErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorCode;if(n==="3"||n==="4"){var r=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(r,e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"))}if(t.errorResponse){var i=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(i)}this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-postal-code").val("")}},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:e.data.cpMFAAuthentication.get("mfaAuthCode")===e.constants.MFA_NONE&&(e.data.cpUserInfo.setLastlogin(n.successResponse),e.data.cpSettings.setTermsAndConditions(n.successResponse),e.data.cpSettings.set("express","Y"),e.data.cpSettings.get("termsAndConditionsAcknowledged")==="N"?e.root.eventBus.trigger("cp:loadView",e.constants.TERMS_CONDITONS,e.constants.EXPRESSLOGIN):e.data.cpSettings.reloadMenu("cp-AccountDetails-Menu"));break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.MFA_ONETIMEPASSWORD,e.constants.EXPRESSLOGIN);break;case e.constants.MFA_CHALLENGE_COLLECT:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.MFA_CHALLENGE_COLLECT,e.constants.EXPRESSLOGIN);break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.MFA_CHALLENGE_QUESTION,e.constants.EXPRESSLOGIN);break;default:}}})}}),define("cp.views.cpForgotUsernameView",[],function(){return function(e){e.views.cpForgotUsernameView=CT.View.extend({initialize:function(){this.render(),this.currentLanguage=e.data.cpLanguageMapping.get("currentLanguage")?e.data.cpLanguageMapping.get("currentLanguage"):e.constants.LANGUAGE_EN},events:{"click .cp-refresh-image":"getRandomCaptcha","click .cp-cancel-button":"onCancelClicked","click .cp-continue-button":"navigateConfirmationView","click .cp-log-on":"navigateloginView","focus .cp-cardnumber":"focusCardDetails","blur .cp-cardnumber":"blurCardDetails","touchmove .cp-forgot-user-section":e.root.utils.dismissKeyboard},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},render:function(){this.$el.empty().append(e.templates.cpForgotUsername({object:e.redirectURLs})),this.getRandomCaptcha();var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n);var s=document.documentElement.clientHeight,o=document.documentElement.clientWidth;$(window).resize(function(){document.documentElement.clientHeight==o&&document.documentElement.clientWidth==s&&(s=document.documentElement.clientHeight,o=document.documentElement.clientWidth),document.documentElement.clientHeight<s&&e.root.utils.getMobileOperatingSystem()==="Android"?$(".cp-Menu-footer").hide():$(".cp-Menu-footer").show()})},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.createRequest(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),$(".cp-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),$("#cpImg").load(function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").error(function(){$(".loaderOverlay").css("display","none")})}else $(".cp-captchaimege-section").css("display","none"),$(".cp-captcha-section").css("display","none"),$(".loaderOverlay").css("display","none"),$(".cp-button-section").css("padding-top","4%"),this.$el.find(".cp-continue-cancel-btn").css("margin-top","6%");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onCancelClicked:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),setTimeout(function(){e.root.utils.destroyView(n),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpLoginView({el:"#main-container"})},1e3)},navigateConfirmationView:function(e){e.preventDefault(),e.stopPropagation(),$(e.currentTarget).addClass("cp-button-selected"),this.validateAndNavigate()},validateAndNavigate:function(){$(document.activeElement).blur();var t=$(".cp-cardnumber").attr("data-val"),n=e.root.utils.trimText(this.$el.find(".cp-security").val()),r=e.root.utils.trimText(this.$el.find(".cp-postalcode").val()),i=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()),s=e.root.utils.isEmptyString(t);if(s||t.length<16||!$.isNumeric(t)){this.getRandomCaptcha();var o=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.cardnumber.text.info");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.isEmptyString(n);if(s||n.length<3||!$.isNumeric(n)){this.getRandomCaptcha();var o=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.securitycode.text.info");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-security").val(""),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.isEmptyString(r);if(s){this.getRandomCaptcha();var o=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-security").val(""),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(r.length<5&&r.length<8){this.getRandomCaptcha();var o=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-security").val(""),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(r.match(/[^a-zA-Z0-9]/)){this.getRandomCaptcha();var o=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-security").val(""),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(this.checkCaptcha!=="N"){var s=e.root.utils.isEmptyString(i);if(s){this.getRandomCaptcha();var o=e.data.cpLanguageMapping.getLabelForKey("cp.image.letters.text.info");e.root.common.Alertservice.showAlert(o),this.$el.find(".cp-captchatext-input").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-security").val(""),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON"){var u={};e.root.common.networkingservice.getRequest(this.forgotUserNameSuccessHandler,this.forgotUserNameErrorHandler,e.localURLs.FORGOTUSERNAME_JSON,{},this)}else{var a={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.VALIDATE_CAPTCHA_USERDETAILS,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.data={},u.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),u.data.cardNumber=e.root.utils.trimText(this.$el.find(".cp-cardnumber").attr("data-val")),u.data.securitycode=e.root.utils.trimText(this.$el.find(".cp-security").val()),u.data.postalCode=e.root.utils.trimText(this.$el.find(".cp-postalcode").val()),u.data.captcha=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()),a.inputRequest=u,e.root.common.networkingservice.postRequest(a,this.forgotUserNameSuccessHandler,this.forgotUserNameErrorHandler,e.localURLs.FORGOTUSERNAME_JSON,{},this)}},forgotUserNameSuccessHandler:function(e){e.successResponse?($("#cp-forgot-user-section").addClass("hidden"),$("#cp-forgot-user-confirmation-section").removeClass("hidden").addClass("show")):e.errorResponse&&this.forgotUserNameErrorHandler(e)},forgotUserNameErrorHandler:function(t){this.getRandomCaptcha(),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val("")},navigateloginView:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>");var n=new e.views.cpLoginView({el:"#main-container"})},redirectToFullDesktopSite:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.FULL_DESKTOP_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.FULL_DESKTOP_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.FULL_DESKTOP_FR:e.redirectURLs.FULL_DESKTOP_EN},redirectToTermsConditions:function(){e.root.utils.redirectTOURL(e.redirectURLs.TC_LOGIN)},getPrivacyURL:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.PRIVACY_EN_LOGIN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.PRIVACY_SP_LOGIN:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.PRIVACY_FR_LOGIN:e.redirectURLs.PRIVACY_EN_LOGIN}})}}),define("cp.views.cpForgotPasswordView",[],function(){return function(e){e.views.cpForgotPasswordView=CT.View.extend({initialize:function(){this.render(),this.currentLanguage=e.data.cpLanguageMapping.get("currentLanguage")?e.data.cpLanguageMapping.get("currentLanguage"):e.constants.LANGUAGE_EN},events:{"click .cp-refresh-image":"getRandomCaptcha","click .cp-cancel-button":"onCancelClicked","click .cp-continue-button":"navigateConfirmationView","click .cp-log-on":"onCancelClicked","focus .cp-username":"focusUsernameDetails","touchmove .cp-forgotPassword-section":e.root.utils.dismissKeyboard},focusUsernameDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},render:function(){this.$el.empty().append(e.templates.cpForgotPassword({object:e.redirectURLs})),this.getRandomCaptcha();var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n);var s=document.documentElement.clientHeight,o=document.documentElement.clientWidth;$(window).resize(function(){document.documentElement.clientHeight==o&&document.documentElement.clientWidth==s&&(s=document.documentElement.clientHeight,o=document.documentElement.clientWidth),document.documentElement.clientHeight<s&&e.root.utils.getMobileOperatingSystem()==="Android"?$(".cp-Menu-footer").hide():$(".cp-Menu-footer").show()})},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.createRequest(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),$(".cp-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),$("#cpImg").load(function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").error(function(){$(".loaderOverlay").css("display","none")})}else $(".cp-captchaimege-section").css("display","none"),$(".cp-captcha-section").css("display","none"),$(".loaderOverlay").css("display","none"),$(".cp-button-section").css("padding-top","4%"),this.$el.find(".cp-continue-cancel-btn").css("margin-top","6%");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onCancelClicked:function(e){nativeHook(),$(e.target).addClass("cp-button-selected"),this.$el.find(".cp-username").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.options.parent.dismissModalView(this,!0)},navigateConfirmationView:function(e){e.preventDefault(),e.stopPropagation(),$(e.currentTarget).addClass("cp-button-selected"),this.validateAndNavigate()},validateAndNavigate:function(){$(document.activeElement).blur();var t=e.root.utils.trimText(this.$el.find(".cp-username").val()),n=e.root.utils.trimText(this.$el.find(".cp-postalcode").val()),r=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()),i=e.root.utils.isEmptyString(t);if(i){var s=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-username").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(t.length<3){var s=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-username").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}if(t.match(/[^a-zA-Z0-9\\@\\._ ]/)){var s=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-username").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.checkCaptcha!=="N"&&this.getRandomCaptcha();return}var i=e.root.utils.isEmptyString(n);if(i){this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-username").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length<5&&n.length<8){this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-username").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.match(/[^a-zA-Z0-9]/)){this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.invalid.postalcode.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-username").val(""),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(this.checkCaptcha!=="N"){var i=e.root.utils.isEmptyString(r);if(i){this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.image.letters.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-captchatext-input").val(""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-username").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON"){var o={};e.root.common.networkingservice.getRequest(this.forgotPasswordSuccessHandler,this.forgotPasswordErrorHandler,e.localURLs.FORGOTPASSWORD_JSON,{},this)}else{var u={},o={};o.action={},o.action.appName=e.constants.APP_NAME,o.action.criterion=e.constants.VALIDATE_CAPTCHA_PASSWORDDETAILS,o.action.language=e.data.cpLanguageMapping.get("currentLanguage"),o.data={},o.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),o.data.username=e.root.utils.trimText(this.$el.find(".cp-username").val()),o.data.postalCode=e.root.utils.trimText(this.$el.find(".cp-postalcode").val()),o.data.captcha=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()),u.inputRequest=o,e.root.common.networkingservice.postRequest(u,this.forgotPasswordSuccessHandler,this.forgotPasswordErrorHandler,e.localURLs.FORGOTPASSWORD_JSON,{},this)}},forgotPasswordSuccessHandler:function(e){e.successResponse?($("#cp-forgotPassword-section").addClass("hidden"),$("#cp-forgotPassword-confirmation-section").removeClass("hidden").addClass("show")):e.errorResponse&&this.forgotPasswordErrorHandler(e)},forgotPasswordErrorHandler:function(t){this.getRandomCaptcha(),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.$el.find(".cp-username").val(""),this.$el.find(".cp-username").attr("data-val",""),this.$el.find(".cp-postalcode").val(""),this.$el.find(".cp-captchatext-input").val("")},navigateloginView:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>");var n=new e.views.cpLoginView({el:"#main-container"})},redirectToFullDesktopSite:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.FULL_DESKTOP_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.FULL_DESKTOP_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.FULL_DESKTOP_FR:e.redirectURLs.FULL_DESKTOP_EN},redirectToTermsConditions:function(){e.root.utils.redirectTOURL(e.redirectURLs.TC_LOGIN)},getPrivacyURL:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.PRIVACY_EN_LOGIN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.PRIVACY_SP_LOGIN:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.PRIVACY_FR_LOGIN:e.redirectURLs.PRIVACY_EN_LOGIN}})}}),define("cp.views.cpPaymentClaimView",[],function(){return function(e){e.views.cpPaymentClaimView=CT.View.extend({initialize:function(){e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),this.listenTo(e.data.cpRegistrationConfiguration,"cp:registrationSettingsLoaded",this.onSettingsLoadSuccessHandler)},events:{"click .cp-continue-button":"navigateNext","click .cp-cancel-button":"onCancelClicked","click .cp-refresh-image":"getRandomCaptcha","click .cp-info":"showToolTip","touchmove #RewardCodeContainer section":e.root.utils.dismissKeyboard},render:function(){this.$el.empty().append(e.templates.cpRedeemCodeView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n),CLAIMCODE&&CLAIMCODE!==""&&this.$el.find(".cp-rewardcode").val(CLAIMCODE),this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.claim.RedeemPayment");$(".cp-menu-title").html(s)},getRandomCaptcha:function(){e.data.cpImageCaptcha||(e.data.cpImageCaptcha=new e.models.cpImageCaptcha);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this);else{var t=e.data.cpImageCaptcha.createRequest(this);e.root.common.networkingservice.postRequest(t,this.ImageCaptchaSuccessHandler,this.ImageCaptchaErrorHandler,e.localURLs.CAPTCHAIMAGE_JSON,{},this)}},ImageCaptchaSuccessHandler:function(t){$(".loaderOverlay").css("display","block");if(t.successResponse){this.checkCaptcha=t.successResponse.captchaFlag;if(this.checkCaptcha==="Y"){e.data.cpImageCaptcha.setResponse(t.successResponse);var n=e.data.cpImageCaptcha.get("image-detail").image;n=n+"#"+(new Date).getTime(),$(".cp-image-captcha").empty().append("<img id ='cpImg' src="+n+" />"),$("#cpImg").load(function(){$(".loaderOverlay").css("display","none")}),$("#cpImg").error(function(){$(".loaderOverlay").css("display","none")})}else this.$el.find(".cp-captchaimege-section").css("display","none"),this.$el.find(".cp-captcha-section").css("display","none"),$(".loaderOverlay").css("display","none"),this.$el.find(".cp-button-section").css("padding-top","4%");e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.ImageCaptchaErrorHandler(t)},ImageCaptchaErrorHandler:function(t){$(".loaderOverlay").css("display","none");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onCancelClicked:function(t){CLAIMCODE="",e.data.cpPaymentClaim&&e.data.cpPaymentClaim.setDefaults(),$(document.activeElement).blur(),t!==undefined&&$(t.target).addClass("cp-button-selected"),this.options.parent.dismissModalView(this,!0)},navigateNext:function(t){$(document.activeElement).blur();var n=e.root.utils.trimText(this.$el.find(".cp-rewardcode ").val()),r=e.root.utils.trimText(this.$el.find(".cp-captchatext-input").val()),i=e.root.utils.isEmptyString(n);if(i){this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.claim.invalidInfo");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(this.checkCaptcha==="Y"){var i=e.root.utils.isEmptyString(r);if(i){this.getRandomCaptcha();var s=e.data.cpLanguageMapping.getLabelForKey("cp.claim.imageLettersReq");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-captchatext-input").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onRewardCodeSuccessHandler,this.onRewardCodeErrorHandler,e.localURLs.REWARD_CODE,{},this);else{callDevice();var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.VALIDATE_CLAIM_CODE,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.data={},u.data.code=this.$el.find(".cp-rewardcode").val(),u.data.rsaToken=$("#RSADeviceFso").val(),u.data.devicePrint=$("#devicePrintId").val(),this.checkCaptcha==="Y"&&(u.data.jcaptcha=this.$el.find(".cp-captchatext-input").val()),o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.onRewardCodeSuccessHandler,this.onRewardCodeErrorHandler,e.localURLs.REWARD_CODE,{},this)}},onRewardCodeSuccessHandler:function(t){if(t.successResponse)CLAIMCODE="",e.data.cpPaymentClaim.setPaymentClaimResponse(t.successResponse),e.data.cpPaymentClaim.setAmount(t.successResponse),e.data.cpPaymentClaim.setMessage(t.successResponse),this.navigateScreen(t);else if(t.errorResponse){var n=t.errorResponse.errorCode;if(n==="3"){var r=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(r,this.onCancelClicked,null,null,this)}else this.onRewardCodeErrorHandler(t)}},onRewardCodeErrorHandler:function(t){this.$el.find(".cp-captchatext-input").val(""),this.$el.find(".cp-rewardcode").val("");if(t.errorResponse){CLAIMCODE="";var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n),this.getRandomCaptcha()}},showToolTip:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.getLabelForKey("cp.claim.contactCSforLostCode");e.root.utils.showInfoPopup(t,n,"right")},navigateScreen:function(t){var n=e.data.cpPaymentClaim.get("registered"),r=e.data.cpPaymentClaim.get("paymentVerification");t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),n==="N"&&r==="NONE"?e.data.cpRegistrationConfiguration.retrieveRegistrationFlagForContext(e.constants.PAYMENTCLAIM_REGISTER):n!=="N"||r!=="dob"&&r!=="puid"&&r!=="postalCode"&&r!=="phoneNumber"?n==="Y"&&(this.options.parent.resetAllViewContainers(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.CLAIM_LOGIN,origin:e.constants.CLAIMCODE_LOGIN,disableMenu:!0})):(this.options.parent.resetAllViewContainers(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.CLAIM_AUTHENTICATION,disableMenu:!0}))},onSettingsLoadSuccessHandler:function(){this.options.parent.resetAllViewContainers(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.PAYMENTCLAIM_REGISTER,disableMenu:!0})}})}}),define("cp.views.cpPaymentClaimAuthenticationView",[],function(){return function(e){e.views.cpPaymentClaimAuthenticationView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),this.listenTo(e.data.cpRegistrationConfiguration,"cp:registrationSettingsLoaded",this.onSettingsLoadSuccessHandler),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:function(){var e={"click .cp-continue-button":"validateAndNavigate","click .cp-cancel-button":"redirectLogin","change .cp-authentication-container select":"checkInput","focus .cp-mobile-phonePrefix,.cp-mobile-phoneNumber,.cp-zipcode,.cp-puid":"focusAuthentication","blur .cp-mobile-phonePrefix,.cp-mobile-phoneNumber,.cp-zipcode,.cp-puid":"blurAuthentication"};return $.browser.mozilla?e["input .cp-authentication-container input"]="checkInput":e["keyup .cp-authentication-container input"]="checkInput",e},blurAuthentication:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskAuthenticationText(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusAuthentication:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},validateAndNavigate:function(t){$(document.activeElement).blur();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.authenticationSuccessHandler,this.authenticationErrorHandler,e.localURLs.REWARD_CODE,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.AUTHENTICATE_PAYMENTCLAIM,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={};var i=e.data.cpPaymentClaim.get("paymentVerification");switch(i){case"dob":r.data.dob={},r.data.dob.day=this.$el.find("#dayUpdate option:selected").val(),r.data.dob.month=this.$el.find("#monthUpdate option:selected").val(),r.data.dob.year=this.$el.find("#yearUpdate option:selected").val();break;case"puid":r.data.puid=$(".cp-puid").attr("data-val");break;case"postalCode":r.data.postalCode=$(".cp-zipcode").attr("data-val");break;case"phoneNumber":r.data.phoneNumber={},r.data.phoneNumber.areaCode=$(".cp-mobile-phonePrefix").attr("data-val"),r.data.phoneNumber.number=$(".cp-mobile-phoneNumber").attr("data-val");break;default:}n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.authenticationSuccessHandler,this.authenticationErrorHandler,e.localURLs.REWARD_CODE,{},this)}},authenticationSuccessHandler:function(t){if(t.successResponse)this.navigateNext(t);else{var n=t.errorResponse.errorCode;if(n==="3"){var r=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(r,this.redirectLogin,null,null,this)}else this.authenticationErrorHandler(t)}},authenticationErrorHandler:function(t){if(t.errorResponse){this.$el.find(".cp-puid").val(""),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-zipcode").val(""),this.$el.find(".cp-puid").attr("data-val",""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find(".cp-zipcode").attr("data-val","");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateNext:function(t){e.data.cpPaymentClaim.setAmount(t.successResponse),e.data.cpPaymentClaim.setMessage(t.successResponse),e.data.cpRegistrationConfiguration.retrieveRegistrationFlagForContext(e.constants.PAYMENTCLAIM_REGISTER)},clearData:function(){e.data.cpPaymentClaim&&e.data.cpPaymentClaim.setDefaults(),$(document.activeElement).blur(),e.root.utils.destroyView(this)},redirectLogin:function(t){this.clearData(),e.data.cpSessionController.invalidateSession()},checkInput:function(t){var n=e.data.cpPaymentClaim.get("paymentVerification");switch(n){case"dob":var r=this.$el.find("#monthUpdate option:selected").val(),i=this.$el.find("#dayUpdate option:selected").val(),s=this.$el.find("#yearUpdate option:selected").val();r!==""&&i!==""&&s!==""?this.enableButton():this.disableButton();break;case"puid":this.$el.find(".cp-puid").val()!==""?this.enableButton():this.disableButton();break;case"postalCode":this.$el.find(".cp-zipcode").val()!==""?this.enableButton():this.disableButton();break;case"phoneNumber":var o=this.$el.find(".cp-mobile-phonePrefix").val(),u=this.$el.find(".cp-mobile-phoneNumber").val();o!==""&&u!==""?this.enableButton():this.disableButton();break;default:}},enableButton:function(e){this.$el.find(".cp-continue-button").removeClass("uiDisabled"),this.$el.find(".cp-continue-button").addClass("cp-backgroundcolor1").removeClass("cp-cancel-button-color")},disableButton:function(){this.$el.find(".cp-continue-button").removeClass("cp-backgroundcolor1").addClass("cp-cancel-button-color"),this.$el.find(".cp-continue-button").addClass("uiDisabled")},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.rewardAuth.auth");$(".cp-menu-title").html(t);var n=e.data.cpPaymentClaim;this.$el.empty().append(e.templates.cpPaymentClaimAuthentication({configuration:n})),n.get("paymentVerification")==="puid"&&this.$el.find(".cp-puid").attr("placeholder",n.get("puidValue"));var r=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),i=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),s=new Date,o=s.getFullYear();this.$el.find(".cp-footer-row2").html(r+" "+o+" "+i),n.get("paymentVerification")==="puid"&&this.$el.find(".cp-puid").attr("placeholder",n.get("puidValue"));for(var u=0;u<=31;u++)u==0?this.$el.find("#dayUpdate").append($('<option disabled selected class="cp-language-mapping" data-translateidentifier="cp.paymentAuth.day" />').val("").html("D")):this.$el.find("#dayUpdate").append($("<option />").val(u).html(u))},onSettingsLoadSuccessHandler:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_REGISTER)}})}}),define("cp.views.cpPaymentClaimLoginView",[],function(){return function(e){e.views.cpPaymentClaimLoginView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),e.data.cpSessionController.resetTimeout(),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:function(){var t={"click .cp-login-button":"navigateNext","click .cp-username-link":"forgotUsername","click .cp-info_w":"showToolTip","touchmove #cp-paymentclaimlogin-container section":e.root.utils.dismissKeyboard};return window.navigator.pointerEnabled?t.pointerdown="restartTimer":window.navigator.msPointerEnabled?(this.eventType="MSPointerDown",t.MSPointerDown="restartTimer"):(this.eventType="touchstart",t.touchstart="restartTimer"),t},restartTimer:function(){e.data.cpSessionController.resetTimeout()},clearData:function(){e.root.utils.destroyView(this)},render:function(){var t=e.data.cpPaymentClaim,n={};n.redirectURLs=e.redirectURLs,this.$el.empty().append(e.templates.cpPaymentClaimLogin({configuration:t,model:n})),this.$el.find(".cp-payment-card-logo").css("background","url("+t.get("imgDetail")+")no-repeat"),this.$el.find(".cp-payment-card-logo").css("background-size","contain"),this.$el.find(".cp-payment-card-logo").css("background-position","center");var r=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),i=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),s=new Date,o=s.getFullYear();this.$el.find(".cp-footer-row2").html(r+" "+o+" "+i)},showToolTip:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.getLabelForKey("cp.common.gamesNotAvailableLoginToActivate");e.root.utils.showInfoPopup(t,n,"right","small")},forgotUsername:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(t.target.hasAttribute("clicked"))return;t.target.setAttribute("clicked",!0),setTimeout(function(){t.target.removeAttribute("clicked"),e.root.utils.destroyView(n),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpForgotUsernameView({el:"#main-container"})},1e3)},navigateNext:function(t){t.preventDefault(),t.stopPropagation(),$(document.activeElement).blur();var n=e.root.utils.trimText(this.$el.find(".cp-payment-username").val());this.userName=n;var r=e.root.utils.isEmptyString(n);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length<3){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.match(/[^a-zA-Z0-9\\@\\._ ]/)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.trimText(this.$el.find(".cp-payment-password").val());r=e.root.utils.isEmptyString(s);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s.length<8&&s.length<50){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onLoginSuccessHandler,this.onLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this);else{var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.MOBILE_AUTHENTICATION,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.action.type=e.constants.CLAIMCODE_LOGIN,u.data={},u.data.username=this.$el.find(".cp-payment-username").val(),u.data.password=this.$el.find(".cp-payment-password").val(),u.data.rsaToken=$("#RSADeviceFso").val(),u.data.devicePrint=$("#devicePrintId").val(),u.data.geoLocation=e.data.cpGeoLocationHandler.get("address"),o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.onLoginSuccessHandler,this.onLoginErrorHandler,e.localURLs.LOGIN_RESPONSE_JSON,{},this)}},onLoginSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),t.successResponse.customBranding&&CUSTOM_BRANDING!==t.successResponse.customBranding&&(CUSTOM_BRANDING=t.successResponse.customBranding,CP_CONTENT_BOX===undefined||CP_CONTENT_BOX==="."?loadcssfile(t.successResponse.customBranding,"cpBranding"):loadcssfile(CP_CONTENT_BOX+"/"+t.successResponse.customBranding+"/m/client/common/css/cpBranding.css","cpBranding")),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t)}else t.errorResponse&&this.onLoginErrorHandler(t)},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:if(e.data.cpMFAAuthentication.get("mfaAuthCode")===e.constants.MFA_NONE){e.data.cpUserInfo.setLastlogin(n.successResponse),e.data.cpSettings.setTermsAndConditions(n.successResponse),e.data.cpSettings.setEditContact(n.successResponse);if(n.successResponse.userCode==="0"){var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.invalid_code");e.root.common.Alertservice.showAlert(r)}n.successResponse.claimDetails!==undefined?(e.data.cpPaymentClaim.setClaimable("Y"),e.data.cpPaymentClaim.setPaymentDetailsResponse(n.successResponse.claimDetails)):e.data.cpPaymentClaim.setClaimable("N"),e.data.cpSettings.get("termsAndConditionsAcknowledged")==="N"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.TERMS_CONDITONS,e.constants.CLAIMCODE_LOGIN)):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="Y"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_CONFIRMATION,e.constants.CLAIMCODE_LOGIN)):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="N"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_ACTIVATION,e.constants.CLAIMCODE_LOGIN)):(e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu"))}break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.MFA_ONETIMEPASSWORD,e.constants.CLAIMCODE_LOGIN);break;case e.constants.MFA_CHALLENGE_COLLECT:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.MFA_CHALLENGE_COLLECT,e.constants.CLAIMCODE_LOGIN);break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.MFA_CHALLENGE_QUESTION,e.constants.CLAIMCODE_LOGIN);break;default:}},onLoginErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;if(t.errorResponse.errorCode==="2"){var r=this.redirectToFullDesktopSite();e.root.common.Alertservice.showAlert(n,null,!0,r,this)}else e.root.common.Alertservice.showAlert(n)}this.userName!==undefined&&this.userName!==""&&this.$el.find(".cp-payment-username").val(this.userName),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")}})}}),define("cp.views.cpPaymentActivationView",[],function(){return function(e){e.views.cpPaymentActivationView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:{"click .cp-continue-button":"navigateConfirmationPage","click .cp-cancel-button":"navigateLogin"},render:function(){var t={};t=e.data.cpPaymentClaim,this.$el.empty().append(e.templates.cpPaymentActivationView({model:t}));var n=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),r=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),i=new Date,s=i.getFullYear();this.$el.find(".cp-footer-row2").html(n+" "+s+" "+r),this.$el.find(".cp-payment-claim-card-image").css("background","url("+t.get("imgDetail")+")no-repeat"),this.$el.find(".cp-payment-claim-card-image").css("background-size","contain"),this.$el.find(".cp-payment-claim-card-image").css("background-position","center")},navigateConfirmationPage:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.redeemCodeSuccessHandler,this.redeemCodeErrorHandler,e.localURLs.REDEEMCLAIM_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.REDEEM_CLAIM,r.data={},r.data.claimCode=e.data.cpPaymentClaim.get("claimCodes"),r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.redeemCodeSuccessHandler,this.redeemCodeErrorHandler,e.localURLs.REDEEMCLAIM_JSON,{},this)}},redeemCodeSuccessHandler:function(t){var n=this;t.successResponse?(e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),e.data.cpSettings.setRequestPlastic(t.successResponse.paymentDetails),e.data.cpPaymentClaim.setPaymentConfirmationResponse(t.successResponse.paymentDetails),e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_CONFIRMATION,this.options.type)):this.redeemCodeErrorHandler(t)},navigateLogin:function(e){this.loadMenuView()},clearData:function(){e.data.cpPaymentClaim&&e.data.cpPaymentClaim.setDefaults(),e.root.utils.destroyView(this)},redeemCodeErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showSuccessAlert(n,this.loadMenuView,!1,!1,this)}},loadMenuView:function(){e.data.cpPaymentClaim&&e.data.cpPaymentClaim.setDefaults(),e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu")}})}}),define("cp.views.cpPaymentConfirmationView",[],function(){return function(e){e.views.cpPaymentConfirmationView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this),(this.options.type===e.constants.PAYMENTCLAIM_REGISTER||this.options.type===e.constants.LOGIN||this.options.type===e.constants.CLAIMCODE_LOGIN)&&this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:{"click .cp-continue-button":"loadView"},render:function(){var t={};t.date=e.data.cpPaymentClaim.get("date")?e.data.cpPaymentClaim.get("date"):"",t.amount=e.data.cpPaymentClaim.get("amount")?e.data.cpPaymentClaim.get("amount"):"",t.message=e.data.cpPaymentClaim.get("message")?e.data.cpPaymentClaim.get("message"):"",this.$el.empty().append(e.templates.cpPaymentConfirmation({model:t}));var n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentConf.paymentConf");$(".cp-menu-title").html(n);var r=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),i=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),s=new Date,o=s.getFullYear();this.$el.find(".cp-footer-row2").html(r+" "+o+" "+i)},loadView:function(t){var n="";this.options.context!=undefined?n=this.options.context.type:n=this.options.type,$(t.currentTarget).addClass("cp-button-selected");switch(n){case e.constants.LOGIN:e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu");break;case e.constants.DASHBOARD:e.root.utils.navigateView(this,"cpDashboardView",e,{},"right");break;case e.constants.PAYMENTCLAIM_REGISTER:e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu");break;case e.constants.CLAIMCODE_LOGIN:e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu");break;default:}},clearData:function(){e.root.utils.destroyView(this)}})}}),define("cp.views.cpMenuView",[],function(){return function(e){e.views.cpMenuView=CT.View.extend({initialize:function(){var t=e.data.cpLanguageMapping.get("currentLanguage");_.size(e.data.cpLanguageMapping.get(t))===0&&e.root.utils.getMultilanguageMapping(e,this),this.listenTo(e.data.cpSettings,"cp:reloadMenu",this.configureMenu),this.listenTo(e.data.cpSettings,"cp:reloadLeftPanelOnly",this.reloadLeftPanelOnly),this.listenTo(e.root.eventBus,"cp:toggleMenuIcon",this.toggleMenuIcon),this.menuViews=[],this.render();var n=this;e.root.utils.updateLanguageLabels(e,this),this.listenTo(e.root.eventBus,"loadMenuItem",this.loadMenuItem),e.data.cpSettings.get("atmLocator")==="Y"&&this.listenTo(e.root.eventBus,"cp:loadATMURL",this.loadATMHref),this.loadPrivacyHref(),isIEBrowser()?$(window).on("orientationchange",function(){setTimeout(function(){n.setSectionHeight(),e.root.eventBus.trigger("resizeEvent")},100)}):$(window).on("resize",function(){setTimeout(function(){n.setSectionHeight(),e.root.eventBus.trigger("resizeEvent")},100)}),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),e.data.cpSessionController.stopTimeout(),e.data.cpSessionController.startTimeout(),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.goToMobileLogin)},toggleMenuIcon:function(){$(".cp-MenuIcon").toggleClass("hideVisiblity")},events:function(){var e={"click .cp-MenuIcon":"performSlide","click .menuOverLay":"closeMenu","click .cp-menu-item":"loadRightPanel"};return window.navigator.pointerEnabled?e.pointerdown="restartTimer":window.navigator.msPointerEnabled?(this.eventType="MSPointerDown",e.MSPointerDown="restartTimer"):(this.eventType="touchstart",e.touchstart="restartTimer"),e},closeMenu:function(e){e.preventDefault(),e.stopPropagation(),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),$(".menuOverLay").removeClass("show").addClass("hidden")},render:function(){this.$el.empty().append(e.templates.cpMenuView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n),e.root.utils.getMultilanguageMapping(e,this)},configureMenu:function(t){this.loadLeftPanel(),e.root.utils.updateLanguageLabels(e,this),e.data.cpSettings.get("atmLocator")=="N"&&this.$el.find(".cp-AtmLocator-Menu").hide(),e.data.cpSettings.get("pinReset")=="N"&&this.$el.find(".cp-PinReset-Menu").hide(),this.setSectionHeight();if(t){if(t==="cp-shopnow-Menu"){if(e.data.cpSettings.get("shopNow")==="Y"&&e.data.cpSettings.get("redirectShop")==="Y"){this.loadMenuItem(t);return}t="cp-Dashboard-Menu"}SSO=="Y"&&e.data.cpSettings.get("paymentChoice")=="Y"&&t!="cp-AccountDetails-Menu"&&(e.data.cpSettings.get("shopNow")==="Y"?t="cp-shopnow-Menu":t="cp-Dashboard-Menu"),this.loadMenuItem(t)}else this.loadDefaultMenu()},loadDefaultMenu:function(){this.$el.find(".cp-menu-item").removeClass("cp-menu-selected");if(e.data.cpSettings.get("express")==="Y")this.$el.find(".cp-AccountDetails-Menu").addClass("cp-menu-selected"),this.loadAccountTransaction();else{this.options.type=this.options.type?this.options.type:"",this.options.context=this.options.context?this.options.context:"";switch(this.options.type){case e.constants.PAYMENT_DELIVARY_CHOICE:this.loadPaymentChoice(e.constants.PAYMENT_DELIVARY_CHOICE);break;case e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE:this.$el.find(".cp-PaymentChoice-Menu").addClass("cp-menu-selected"),this.loadPaymentChoice(e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE);break;case e.constants.PAYMENT_CHOICE_USER_CREATION:this.loadPaymentChoice(e.constants.PAYMENT_CHOICE_USER_CREATION);break;case e.constants.CHOICE_CARD:case e.constants.CHOICE_CHEQUE:case e.constants.CHOICE_VIRTUAL:case e.constants.CHOICE_ACH:case e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER:this.loadPaymentChoice();break;case e.constants.LOGIN:e.data.cpSettings.get("paymentChoice")=="Y"?e.data.cpSettings.get("shopNow")==="Y"&&e.data.cpSettings.get("redirectShop")==="Y"?(this.$el.find(".cp-shopnow-Menu").addClass("cp-menu-selected"),this.loadShopPage()):(this.$el.find(".cp-Dashboard-Menu").addClass("cp-menu-selected"),this.loadDashboard()):e.data.cpPaymentClaim===undefined||e.data.cpPaymentClaim.get("isClaimable")==="N"?(this.$el.find(".cp-AccountDetails-Menu").addClass("cp-menu-selected"),this.loadAccountTransaction()):e.data.cpSettings.get("shopNow")==="Y"&&e.data.cpSettings.get("redirectShop")==="Y"?(this.$el.find(".cp-shopnow-Menu").addClass("cp-menu-selected"),this.loadShopPage()):(this.$el.find(".cp-Dashboard-Menu").addClass("cp-menu-selected"),this.loadDashboard());break;case e.constants.VIRTUALEXPRESS_MOBILE_LOGIN:e.data.cpSettings.get("shopNow")==="Y"&&e.data.cpSettings.get("redirectShop")==="Y"?(this.$el.find(".cp-shopnow-Menu").addClass("cp-menu-selected"),this.loadShopPage()):(this.$el.find(".cp-Dashboard-Menu").addClass("cp-menu-selected"),this.loadDashboard());break;case e.constants.PAYMENTCLAIM:case e.constants.SSO_LOGIN:case e.constants.CLAIMCODE_LOGIN:case e.constants.REGISTER:case e.constants.PAYMENTCLAIM_REGISTER:this.options.type==e.constants.SSO_LOGIN&&e.data.cpSettings.get("paymentChoice")=="Y"&&e.data.cpSettings.get("paymentType")=="2"?(this.loadPaymentChoice(e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE),this.$el.find(".cp-PaymentChoice-Menu").addClass("cp-menu-selected")):this.options.redirectShop?(this.$el.find(".cp-shopnow-Menu").addClass("cp-menu-selected"),this.loadShopPage()):e.data.cpSettings.get("shopNow")==="Y"&&e.data.cpSettings.get("redirectShop")==="Y"?(this.$el.find(".cp-shopnow-Menu").addClass("cp-menu-selected"),this.loadShopPage()):(this.$el.find(".cp-Dashboard-Menu").addClass("cp-menu-selected"),this.loadDashboard());break;case e.constants.MFA_ONETIMEPASSWORD:this.loadOTPView();break;case"cp-Menu-Loader":this.createMenuLoader(this.options.context);break;case e.constants.INT_BANKTRANSFER_RETURNINGUSER:this.loadGlobalDeposits();break;default:this.$el.find(".cp-AccountDetails-Menu").addClass("cp-menu-selected"),this.loadAccountTransaction()}}e.data.cpSettings.get("bankTransfer")=="N"&&this.$el.find(".cp-bankTransfer-Menu").hide()},setSectionHeight:function(){var e=$(window).height(),t=$(".cp-header").height(),n=e-t;this.$el.find("#RightPanelDetailsContainer").height(n),this.$el.find("#leftPanelMenuContainer").height(n),this.$el.find("#leftPanelMenuContainer").addClass("cp-panel-scroll");var r=$(".cp-Menu").innerHeight()+$(".cp-Menu-footer").innerHeight(),i=n-r;this.$el.find("#RightPanelDetailsContainer>section").height(i),$(window).width()>$(window).height()?this.$el.find("#RightPanelDetailsContainer>section").addClass("cp-panel-scroll"):this.$el.find("#RightPanelDetailsContainer>section").removeClass("cp-panel-scroll")},loadLeftPanel:function(){var t={};t.privacyURL=this.getPrivacyURL();var n=e.data.cpSettings,r=this.options.origin;this.$el.find("#leftPanelMenuContainer").empty().append(e.templates.cpLeftPanel({model:t,settings:n,userType:r})),this.$el.find(".cp-AccountDetails-Menu").addClass("cp-menu-selected"),this.$el.find(".cp-menu-item").addClass("cp-button-transition"),this.loadPrivacyHref()},loadRightPanel:function(e){$(".menuOverLay").removeClass("show").addClass("hidden");var t=$(e.currentTarget).attr("data-menuId"),n=this;this.$el.find("."+t).addClass("cp-button-selected-animated"),setTimeout(function(){n.$el.find("."+t).removeClass("cp-button-selected-animated"),n.loadMenuItem(t)},200)},loadMenuItem:function(t,n){this.$el.find(".cp-menu-item").removeClass("cp-menu-selected"),this.$el.find("."+t).addClass("cp-menu-selected"),t==="cp-Addfunds-Menu"&&this.$el.find(".cp-shopnow-Menu").addClass("cp-menu-selected");switch(t){case"cp-Dashboard-Menu":this.loadDashboard();break;case"cp-AccountDetails-Menu":this.loadAccountTransaction();break;case"cp-AtmLocator-Menu":e.data.cpAtmLocatorDetails||(e.data.cpAtmLocatorDetails=new e.models.cpAtmLocatorDetails),(e.data.cpAtmLocatorDetails.get("atm-info")===undefined||e.data.cpAtmLocatorDetails.get("atm-info")==="")&&e.data.cpAtmLocatorDetails.retrieveAtmInfo();break;case"cp-EditProfile-Menu":this.loadEditProfile();break;case"cp-shopnow-Menu":this.loadShopPage();break;case"cp-FAQ-Menu":this.loadFAQ();break;case"cp-accessFund-Menu":this.loadAccessFund();break;case"cp-bankTransfer-Menu":this.loadBankTransfer();break;case"cp-requestPlastic-Menu":this.loadRequestPlastic();break;case"cp-requestCheck-Menu":this.loadRequestCheck();break;case"cp-PinReset-Menu":this.loadPinReset();break;case"cp-contact-Menu":this.loadContact();break;case"cp-Disclosure-Menu":this.loadDisclosure();break;case"cp-Terms-Menu":this.loadTermsConditions();break;case"cp-logout-Menu":PAYMENT_CHOICE==="Y"||this.options.context===e.constants.PC_LOGIN||this.options.context===e.constants.ADD_PC?e.data.cpSessionController.invalidateSession(this.options.context):e.data.cpSessionController.invalidateSession();break;case"cp-Addfunds-Menu":this.loadAddfunds();break;case"cp-PaymentDelivary-Choice":this.loadPaymentChoice(e.constants.PAYMENT_DELIVARY_CHOICE,n);break;case"cp-PaymentChoice-Menu":e.data.cpPaymentChoice&&e.data.cpPaymentChoice.get("registeredUser")==="Y"&&(n=e.constants.PC_LOGIN),this.loadPaymentChoice(e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE,n);break;case e.constants.PAYMENT_CHOICE_USER_CREATION:this.loadPaymentChoice(e.constants.PAYMENT_CHOICE_USER_CREATION,e.constants.PC_LOGIN);break;case e.constants.CHOICE_CHEQUE:this.loadPaymentChoice(e.constants.CHOICE_CHEQUE,n);break;case e.constants.CHOICE_CARD:this.loadPaymentChoice(e.constants.CHOICE_CARD,n);break;case e.constants.CHOICE_ACH:this.loadPaymentChoice(e.constants.CHOICE_ACH,n);break;case e.constants.CHOICE_VIRTUAL:this.loadPaymentChoice(e.constants.CHOICE_VIRTUAL,n);break;case e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER:this.loadPaymentChoice(e.constants.CHOICE_INTERNATIONAL_BANKTRANSFER,n);break;case"cp-Tips-Menu":this.createMenuLoader(e.constants.REGISTER_TIPS);break;case"cp-globalDeposits-Menu":this.loadGlobalDeposits();break;default:}},goToMobileLogin:function(){e.data.cpSessionController.stopTimeout(),e.data.cpSessionController.clear(),e.data.cpSessionController=null,e.data.cpAtmLocatorDetails&&e.data.cpAtmLocatorDetails.set("atm-info",""),this.clearData(),$("#main-container").addClass("cp-fadeIn"),$("#cp-modal-container").empty().hide();var t=this;this.unloadAllMenuViews(),setTimeout(function(){PAYMENT_CHOICE==="Y"?(typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS==="V"&&(VIRTUAL_EXPRESS="L"),e.root.utils.performFlipAnimation(t,"cpPaymentHubBaseView",e)):e.root.utils.performFlipAnimation(t,"cpLoginView",e)},1200)},clearData:function(){e.data.cpUserInfo?e.data.cpUserInfo.setDefaults():"",e.data.cpSettings?e.data.cpSettings.setDefaults():"",e.data.cpPaymentClaim?e.data.cpPaymentClaim.setDefaults():"",e.data.cpPaymentClaimList?e.data.cpPaymentClaimList.reset():"",e.data.cpAccountDetails?e.data.cpAccountDetails.clear():"",e.data.cpPinResetSettings?e.data.cpPinResetSettings.clear():"",e.data.cpPostFAQCollection?e.data.cpPostFAQCollection.reset():"",e.data.cpDisclosuresAndFees?e.data.cpDisclosuresAndFees.reset():"",e.data.cpDisclosureAndFeesMessages?e.data.cpDisclosureAndFeesMessages.length=0:"",e.data.cpContactUsDetails?e.data.cpContactUsDetails.clear():"",e.data.cpBankDetails?e.data.cpBankDetails.setDefaults():"",e.data.cpWithdrawalDetails?e.data.cpWithdrawalDetails.setDefaults():"",e.data.cpCardDetails?e.data.cpCardDetails.clear():"",e.data.cpShop?e.data.cpShop.setDefaults():"",e.data.cpAddFunds?e.data.cpAddFunds.clear():"",e.data.cpChoicesUserInfo?e.data.cpChoicesUserInfo.setDefaults():"",e.data.cpPaymentChoiceLandingModel?e.data.cpPaymentChoiceLandingModel.setDefaults():"",e.data.cpPaymentChoice?e.data.cpPaymentChoice.setDefaults():"",e.data.cpPaymentChoiceBankDetailsModel?e.data.cpPaymentChoiceBankDetailsModel.setDefaults():""},restartTimer:function(){e.data.cpSessionController.resetTimeout()},loadDashboard:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpDashboardView({el:"#cp-menu-container"}),n=e.data.cpLanguageMapping.getLabelForKey("cp.dashboard.text");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadATMHref:function(){var t=e.data.cpAtmLocatorDetails.get("atm-info");this.$el.find(".cp-AtmLocator-Menu a").attr("href",t),this.$el.find(".cp-AtmLocator-Menu a")[0].click()},loadPrivacyHref:function(){var e=this.getPrivacyURL();this.$el.find(".cp-privacy-Menu a").attr("href",e)},loadAccountTransaction:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),e.data.cpAccountDetails||(e.data.cpAccountDetails=new e.models.cpAccountDetails);var t=new e.views.cpAccountDetailsView({el:"#cp-menu-container"}),n=e.data.cpLanguageMapping.getLabelForKey("account_details");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadOTPView:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpMFAOTPView({el:"#cp-menu-container",context:{type:this.options.context?this.options.context:""}}),n=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.oneTimePassword");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadEditProfile:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo);var t=new e.views.cpEditProfileView({el:"#cp-menu-container",type:"cp-AccountDetails-Menu",origin:"cp-AccountDetails-Menu"}),n=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.text");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadShopPage:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpShopView({el:"#cp-menu-container"});this.menuViews.push(t)},loadPaymentChoice:function(t,n){e.root.eventBus.trigger("cp:destroyPaymentHub"),this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),t&&(this.options.type=t),n&&(this.options.context=n);var r=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.paymentDeliveryChoice");this.$el.find(".cp-menu-title").html(r);var i=new e.views.cpPaymentHubLoaderView({el:"#cp-menu-container",choice:this.options.type,context:this.options.context});this.menuViews.push(i)},createMenuLoader:function(t){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var n=new e.views.cpMenuLoader({el:"#cp-menu-container",context:t,origin:this.options.origin});this.menuViews.push(n)},loadAccessFund:function(){this.$el.find(".accessFundExpand").hasClass("hidden")?this.$el.find(".accessFundExpand").removeClass("hidden").addClass("show"):this.$el.find(".accessFundExpand").removeClass("show").addClass("hidden")},loadBankTransfer:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpBankTransferBaseView({el:"#cp-menu-container",origin:e.constants.ACH}),n=e.data.cpLanguageMapping.getLabelForKey("dashbord.transferfund_msg");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadRequestPlastic:function(){this.requestPlasticEligibility()},loadRequestCheck:function(){this.requestCheckEligibility()},loadAddfunds:function(){this.unloadAllMenuViews(),e.data.cpAddFunds||(e.data.cpAddFunds=new e.models.cpAddFunds),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpAddFundsView({el:"#cp-menu-container"})},loadFAQ:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),e.data.cpPostFAQCollection||(e.data.cpPostFAQCollection=new e.collections.cpFAQCollection);var t=new e.views.cpFAQ({el:"#cp-menu-container",type:"postlogin"}),n=e.data.cpLanguageMapping.getLabelForKey("cp.faq.text");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadPinReset:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'><div id='cp-pin-reset-container'></div></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpPinResetView({el:"#cp-pin-reset-container",context:{type:"pinreset"}}),n=e.data.cpLanguageMapping.getLabelForKey("cp.pinReset.pinReset");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadContact:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),e.data.cpContactUsDetails||(e.data.cpContactUsDetails=new e.models.cpContactUsDetails);var t=new e.views.cpContactUsView({el:"#cp-menu-container"}),n=e.data.cpLanguageMapping.getLabelForKey("common.contact_us");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadDisclosure:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),e.data.cpDisclosuresAndFees||(e.data.cpDisclosuresAndFees=new e.collections.cpDisclosuresAndFees);var t=new e.views.cpDisclosuresAndFees({el:"#cp-menu-container"}),n=e.data.cpLanguageMapping.getLabelForKey("cp.disclosures.fees");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadTermsConditions:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpTermsAndConditionsView({el:"#cp-menu-container",type:"post-login"});$("#cp-Terms-Header,.cp-tc-Accept-section,.cp-tc-footer,.cp-tc-button-section,.cp-txt-area").addClass("hidden");var n=e.data.cpLanguageMapping.getLabelForKey("cp.notification.terms_and_conditions");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},loadGlobalDeposits:function(){this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var t=new e.views.cpGlobalDepositsView({el:"#cp-menu-container"}),n=e.data.cpLanguageMapping.getLabelForKey("cp.globalTransfer.premiumFX");this.$el.find(".cp-menu-title").html(n),this.menuViews.push(t)},getPrivacyURL:function(){var t=e.data.cpSettings.get("binBank").toUpperCase(),n="";return t.toLowerCase()==e.constants.CITI_BANK.toLowerCase()?e.data.cpLanguageMapping.get("currentLanguage")===e.constants.LANGUAGE_SP?n="PRIVACY_SP_POSTLOGIN":e.data.cpLanguageMapping.get("currentLanguage")===e.constants.LANGUAGE_FR?n="PRIVACY_FR_POSTLOGIN":n="PRIVACY_EN_POSTLOGIN":e.data.cpLanguageMapping.get("currentLanguage")===e.constants.LANGUAGE_SP?n="PRIVACY_"+t+"_SP_LOGIN":e.data.cpLanguageMapping.get("currentLanguage")===e.constants.LANGUAGE_FR?n="PRIVACY_"+t+"_FR_LOGIN":n="PRIVACY_"+t+"_EN_LOGIN",e.redirectURLs[n]},loginView:function(){e.root.utils.destroyView(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpLoginView({el:"#main-container",type:e.constants.LOGIN})},unloadAllMenuViews:function(){for(var t=0;t<this.menuViews.length;t++)e.root.utils.destroyView(this.menuViews[t]);this.menuViews.length=0},performSlide:function(){$("#RightPanelDetailsContainer").hasClass("slideLeft")?($("#RightPanelDetailsContainer").removeClass("slideLeft").addClass("slideRight"),$(".menuOverLay").removeClass("hidden").addClass("show")):$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft")},remove:function(){$(window).off("resize",null),Backbone.View.prototype.remove.apply(this,arguments)},languageMappingSuccessHandler:function(t){t.successResponse?(e.data.cpLanguageMapping.setResponse(t.successResponse),this.options.context===e.constants.ADD_PC||this.options.disableMenu?e.data.cpSettings.disableMenu():e.data.cpSettings.get("express")==="Y"?e.data.cpSettings.enableExpressMenus():e.data.cpSettings.reloadMenu(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.languageErrorhandler(t)},languageErrorhandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},requestPlasticEligibility:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.plasticEligibilitySuccessHandler,this.plasticEligibilityErrorHandler,e.localURLs.REQUEST_PLASTIC_ELIGIBILITY,{},this);else{var t=e.data.cpUserInfo.retrievePlasticEligibility();e.root.common.networkingservice.postRequest(t,this.plasticEligibilitySuccessHandler,this.plasticEligibilityErrorHandler,e.localURLs.REQUEST_PLASTIC_ELIGIBILITY,{},this)}},plasticEligibilitySuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.feeMessage?t.successResponse.feeMessage:"",r=t.successResponse.requestPlasticMessage?t.successResponse.requestPlasticMessage:"";e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo),e.data.cpUserInfo.set("address",t.successResponse.billingAddress?t.successResponse.billingAddress:{});var i=t.successResponse.ctype?t.successResponse.ctype:"",s=t.successResponse.pinReset?t.successResponse.pinReset:"N";this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var o=e.data.cpLanguageMapping.getLabelForKey("cp.requestPlastic.orderPlastic");this.$el.find(".cp-menu-title").html(o),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft");var u=new e.views.cpRequestPlasticView({el:"#cp-menu-container",message:n,requestPlasticMessage:r,cardType:i,pinReset:s});this.menuViews.push(u)}else if(t.errorResponse){var a=t.errorResponse.errorCode;if(a==="1"){var f=t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(f)}else this.plasticEligibilityErrorHandler(t)}},plasticEligibilityErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},requestCheckEligibility:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.checkEligibilitySuccessHandler,this.checkEligibilityErrorHandler,e.localURLs.REQUEST_CHECK_ELIGIBILITY,{},this);else{var t=e.data.cpUserInfo.retreiveCheckEligibility();e.root.common.networkingservice.postRequest(t,this.checkEligibilitySuccessHandler,this.checkEligibilityErrorHandler,e.localURLs.REQUEST_CHECK_ELIGIBILITY,{},this)}},checkEligibilitySuccessHandler:function(t){if(t.successResponse){e.data.cpUserInfo.retreiveCheckEligibilityResponse(t.successResponse),this.unloadAllMenuViews(),this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>"),$("#RightPanelDetailsContainer").removeClass("slideRight").addClass("slideLeft"),e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo);var n=new e.views.cpRequestCheckView({el:"#cp-menu-container"}),r=e.data.cpLanguageMapping.getLabelForKey("device.heading.check.text");this.$el.find(".cp-menu-title").html(r),this.menuViews.push(n)}else t.errorResponse&&this.checkEligibilityErrorHandler(t)},checkEligibilityErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},reloadLeftPanelOnly:function(){this.loadLeftPanel(),e.root.utils.updateLanguageLabels(e,this),e.data.cpSettings.get("atmLocator")=="N"&&this.$el.find(".cp-AtmLocator-Menu").hide(),e.data.cpSettings.get("pinReset")=="N"&&this.$el.find(".cp-PinReset-Menu").hide(),this.setSectionHeight()}})}}),define("cp.views.cpDashboardView",[],function(){return function(e){e.views.cpDashboardView=CT.View.extend({initialize:function(){this.retreiveDashboardDetails()},events:{"click .cp-card-front,.cp-card-back":"toggle","click .cp-shopNow-Link":"navigateShopNow","click .cp-info":"showInfo","click .cp-info_w":"showAccountInfoMessage","click .cp-redeem-button":"redeemCode","click .addressEdit":"navigateEditProfile","click .cp-tips-info":"openTips","click .cp-cardNumber-overlay":"copyCardDetails","touchstart .cp-cardNumber-overlay":"formatNumber","copy .cp-cardNumber-overlay":e.root.utils.formatCardNumber},retreiveDashboardDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.dashboardSuccessHandler,this.dashboardErrorHandler,e.localURLs.DASHBOARD_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_DASHBOARD_DETAILS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.dashboardSuccessHandler,this.dashboardErrorHandler,e.localURLs.DASHBOARD_JSON,{},this)}},dashboardSuccessHandler:function(t){t.successResponse?(e.data.cpAccountDetails||(e.data.cpAccountDetails=new e.models.cpAccountDetails),e.data.cpAccountDetails.setCurrentBalance(t.successResponse),e.data.cpAccountDetails.setTransactionList(t.successResponse),e.data.cpCardDetails||(e.data.cpCardDetails=new e.models.cpCardDetails),e.data.cpSettings.setDisplayCardInfo(t.successResponse),e.data.cpSettings.setProgramType(t.successResponse),e.data.cpSettings.setCustomBranding(t.successResponse),e.data.cpCardDetails.setResponse(t.successResponse.cardInfo),e.data.cpCardDetails.setCardType(t.successResponse),e.data.cpShop||(e.data.cpShop=new e.models.cpShop),e.data.cpShop.setMessage(t.successResponse),e.data.cpUserInfo.set("address",t.successResponse.billingAddress!==undefined?t.successResponse.billingAddress:{}),e.data.cpPaymentClaimList||(e.data.cpPaymentClaimList=new e.collections.cpPaymentClaim),e.data.cpPaymentClaimList.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):this.dashboardErrorHandler(t)},dashboardErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},toggle:function(e){this.$el.find(".cp-card-front").toggleClass("cp-card-flip-front"),this.$el.find(".cp-card-back").toggleClass("cp-card-flip-back"),$(".cp-card-front").hasClass("cp-card-flip-front")?(this.$el.find(".cp-info-tap-front").hide(),this.$el.find(".cp-info-tap-back").show()):(this.$el.find(".cp-info-tap-back").hide(),this.$el.find(".cp-info-tap-front").show())},navigateShopNow:function(t){e.root.eventBus.trigger("loadMenuItem","cp-shopnow-Menu")},copyCardDetails:function(e){e.preventDefault(),e.stopPropagation()},navigateEditProfile:function(t){t.preventDefault(),t.stopPropagation(),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpEditProfileView({el:"#cp-menu-container",type:"cp-Dashboard-Menu"})},showInfo:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.getLabelForKey("cp.common.gamesNotAvailable");e.root.utils.showInfoPopup(t,n,"right")},showAccountInfoMessage:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.getLabelForKey("cp.dashboard.referAccDetails");e.root.utils.showInfoPopup(t,n,"right","small")},redeemCode:function(t){var n=$(t.currentTarget);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.redeemCodeSuccessHandler,this.redeemCodeErrorHandler,e.localURLs.REDEEMCLAIM_JSON,{},this);else{var r={};r.inputRequest={},r.inputRequest.action={},r.inputRequest.action.appName=e.constants.APP_NAME,r.inputRequest.action.criterion=e.constants.REDEEM_CLAIM,r.inputRequest.language=e.data.cpLanguageMapping.get("currentLanguage"),r.inputRequest.data={},r.inputRequest.data.claimCode=[],r.inputRequest.data.claimCode.push({code:n.attr("data-key")?n.attr("data-key"):""}),e.root.common.networkingservice.postRequest(r,this.redeemCodeSuccessHandler,this.redeemCodeErrorHandler,e.localURLs.REDEEMCLAIM_JSON,{},this)}},redeemCodeSuccessHandler:function(t){var n=this;t.successResponse?(e.data.cpPaymentClaim||(e.data.cpPaymentClaim=new e.models.cpPaymentClaim),e.data.cpPaymentClaim.setPaymentConfirmationResponse(t.successResponse.paymentDetails),e.root.utils.navigateView(this,"cpPaymentConfirmationView",e,{type:e.constants.DASHBOARD})):this.redeemCodeErrorHandler(t)},modalDismissed:function(){this.retreiveDashboardDetails()},redeemCodeErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.dashboard.dashboard");$(".cp-menu-title").html(t);var n=e.data.cpSettings,r=e.data.cpAccountDetails,i=e.data.cpUserInfo,s=e.data.cpCardDetails,o=e.data.cpShop;this.$el.empty().append(e.templates.cpDashboardView({settings:n,accountDetails:r,profile:i,cardDetails:s,shop:o}));if(n.get("displayCardInfo")==="Y"){var u=o.get("message");this.$el.find(".cp-shop-header-message").html(u)}var a=e.data.cpPaymentClaimList;for(var f=0;f<a.length;f++){if(f==5)break;var l={};l.date=a.at(f).get("date"),l.amount=a.at(f).get("amount")?a.at(f).get("amount"):"",l.message=a.at(f).get("message")?a.at(f).get("message"):"",l.key=a.at(f).get("code")?a.at(f).get("code"):"",this.$el.find(".cp-payment-list").append(e.templates.cpDashboardPaymentRow({model:l}))}var c=r.get("transactionList");for(var f=0;f<c.length;f++){var l={};l.date=c.at(f).get("transactionDate"),l.amount=c.at(f).get("transactionAmount")?c.at(f).get("transactionAmount"):"",l.message=c.at(f).get("transactionMemo"),this.$el.find(".cp-payment-list").append(e.templates.cpDashboardPaymentRow({model:l}))}this.$el.find(".cp-info-tap-front").hide(),this.$el.find(".cp-info-tap-back").hide(),$(".cp-card-front").hasClass("cp-card-flip-front")?this.$el.find(".cp-info-tap-back").show():this.$el.find(".cp-info-tap-front").show(),isIEBrowser()&&this.$el.find(".cp-cardNumber-overlay").css("font-size","110%")},openTips:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),e.root.utils.navigateView(this,"cpRegistrationTipsView",e,{origin:"cp-dashboard-menu"})},formatNumber:function(){e.root.utils.copytoClipboard(e.data.cpCardDetails.get("cardNumber"))},modalDismissed:function(){this.retreiveDashboardDetails()},modalTipsDismissed:function(){}})}}),define("cp.views.cpAccountDetailsView",[],function(){return function(e){e.views.cpAccountDetailsView=CT.View.extend({initialize:function(){this.retrieveTransactionDetails(),this.listenTo(e.root.eventBus,"resizeEvent",this.setTransactionContainerHeight)},events:{"click .cp-paymentDetails":"paymentExpand","click .cp-update":"updateTransaction","click .transactionEditImg":"editTransaction","click .cp-lastTwelveMonthsStatement":"getLastTwelveMonthsTransaction"},render:function(){var t=1998,n=(new Date).getMonth(),r=e.data.cpAccountDetails.get("progType"),i=e.data.cpAccountDetails.get("curDate"),s=e.data.cpAccountDetails;this.$el.empty().append(e.templates.cpAccountDetailsView({model:s}));var o=e.data.cpLanguageMapping.getLabelForKey("account_details");$(".cp-menu-title").html(o);for(var u=(new Date).getFullYear();u>=t;u--)this.$el.find("#yearUpdate").append($("<option />").val(u).html(u));n==0&&(currentMonth="January"),n==1&&(currentMonth="February"),n==2&&(currentMonth="March"),n==3&&(currentMonth="April"),n==4&&(currentMonth="May"),n==5&&(currentMonth="June"),n==6&&(currentMonth="July"),n==7&&(currentMonth="August"),n==8&&(currentMonth="September"),n==9&&(currentMonth="October"),n==10&&(currentMonth="November"),n==11&&(currentMonth="December"),$("#monthUpdate").val(currentMonth),this.renderTransactionDetailsFromResponse()},editTransaction:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpBankTransferBaseView({el:"#cp-menu-container",origin:e.constants.ACCOUNT_DETAILS})},updateTransaction:function(){this.updateTransactionDetails()},getLastTwelveMonthsTransaction:function(){this.getLastTwelveMonthsTransactionStatement()},paymentExpand:function(e){var t=$(e.currentTarget),n=t.parent();n.hasClass("cp-slidedown")?(n.removeClass("cp-slidedown").addClass("cp-slideup"),t.removeClass("cp-Minus").addClass("cp-Add"),n.find(".cp-additional-details").removeClass("show").addClass("hidden")):(n.removeClass("cp-slideup").addClass("cp-slidedown"),t.removeClass("cp-Add").addClass("cp-Minus"),n.find(".cp-additional-details").removeClass("hidden").addClass("show"))},renderTransactionDetailsFromResponse:function(){var t=e.data.cpUserInfo.get("lastLogin"),n=e.data.cpAccountDetails.get("transactionList"),r=e.data.cpAccountDetails.get("currentBalance"),i=e.data.cpAccountDetails.get("beginningBalance"),s=e.data.cpAccountDetails.get("endingBalance"),o=e.data.cpAccountDetails.get("currentMonthFee"),u=e.data.cpAccountDetails.get("previousMonthFee"),a=e.data.cpAccountDetails.get("ytdFee"),f=e.data.cpAccountDetails.get("pendingTransactions"),l=e.data.cpAccountDetails.get("onlineErrorResolutionContent"),c=e.data.cpAccountDetails.get("directInquiryPhone"),h=e.data.cpAccountDetails.get("directInquiryEmail"),p=e.data.cpAccountDetails.get("directInquiryWebsite");if(t=="")$(".cp-Lastlogin").css("display","none");else{var d=this.$el.find(".cp-LastLoginTime");d.html(t)}this.$el.find(".cp-currentAmount").html(r),this.$el.find(".cp-beginningBalance").html(i),this.$el.find(".cp-endingBalance").html(s),this.$el.find(".cp-currentMonthFee").html(o),this.$el.find(".cp-previousMonthFee").html(u),this.$el.find(".cp-ytdFee").html(a),this.$el.find(".cp-errorResolutionContent").html(l),this.$el.find(".cp-directInquiryPhone").html(c),this.$el.find(".cp-directInquiryEmail").html(h),this.$el.find(".cp-directInquiryWebsite").html(p),this.$el.find(".cp-pendingAmount").html(f),this.setTransactionContainerHeight();var v=e.data.cpAccountDetails.get("transRecordsSize"),m=e.data.cpAccountDetails.get("isInvalidPeriod");if(v=="0"||v=="")this.showNoRecordsMsg(),m=="Y"&&($(".cp-noTransaction-list-container").removeClass("show").addClass("hidden"),$(".cp-selectedPeriodBeforeCreationDate").removeClass("hidden").addClass("show")),$(".cp-noRecords").removeClass("hidden").addClass("show");else{$(".cp-noTransaction-list-container").removeClass("show").addClass("hidden"),$(".cp-transaction-list-container").removeClass("hidden").addClass("show"),$(".cp-noRecords").removeClass("show").addClass("hidden"),$(".cp-selectedPeriodBeforeCreationDate").removeClass("show").addClass("hidden");var g=this.$el.find(".cp-transaction-wrapper");for(var y=0;y<n.length;y++){var b=n.at(y);g.append(e.templates.cpAccountTransaction({model:b}))}}},setTransactionContainerHeight:function(){$(window).width()>$(window).height()?this.isLandscape=!0:this.isLandscape=!1;var e=this.$el.innerHeight(),t=this.$el.find(".cp-account-balance-conatiner").innerHeight()+this.$el.find("#cp-accountText").innerHeight()+this.$el.find(".cp-account-filter-container").innerHeight()+this.$el.find(".cp-feeErrorText").innerHeight()+this.$el.find(".cp-errorResolutionContent").height()+this.$el.find("#inquiryText").innerHeight(),n=e-t;this.isLandscape?(this.$el.find(".cp-transaction-list-container").height("auto"),this.$el.find(".cp-transaction-list-container").removeClass("cp-panel-scroll")):n<120?(this.$el.find(".cp-transaction-list-container").height(120),this.$el.find(".cp-transaction-list-container").addClass("cp-panel-scroll")):(this.$el.find(".cp-transaction-list-container").height(n+1),this.$el.find(".cp-transaction-list-container").addClass("cp-panel-scroll"))},showNoRecordsMsg:function(){$(".cp-transaction-list-container").removeClass("show").addClass("hidden"),$(".cp-noTransaction-list-container").removeClass("hidden").addClass("show"),$(".cp-selectedPeriodBeforeCreationDate").removeClass("show").addClass("hidden")},retrieveTransactionDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.accountTransactionSuccessHandler,this.accountTransactionErrorHandler,e.localURLs.TRANSACTIONDETAILS_JSON,{},this);else{var t=e.data.cpAccountDetails.createRequest("default");e.root.common.networkingservice.postRequest(t,this.accountTransactionSuccessHandler,this.accountTransactionErrorHandler,e.localURLs.TRANSACTIONDETAILS_JSON,{},this)}},accountTransactionSuccessHandler:function(t){t.successResponse?(e.data.cpAccountDetails.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this),this.setTransactionContainerHeight()):t.errorResponse&&this.accountTransactionErrorHandler(t)},accountTransactionErrorHandler:function(t){this.showNoRecordsMsg();if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},updateTransactionDetails:function(){$(".cp-update-button").addClass("cp-button-selected");var t=$("#monthUpdate").val(),n;t=="January"?n="00":t=="February"?n="01":t=="March"?n="02":t=="April"?n="03":t=="May"?n="04":t=="June"?n="05":t=="July"?n="06":t=="August"?n="07":t=="September"?n="08":t=="October"?n="09":t=="November"?n="10":t=="December"&&(n="11");var r=$("#yearUpdate").val();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.updateaccountTransactionSuccessHandler,this.updateaccountTransactionErrorHandler,e.localURLs.UPDATETRANSACTIONDETAILS_JSON,{},this);else{var i=e.data.cpAccountDetails.createRequest("update",n,r);e.root.common.networkingservice.postRequest(i,this.updateaccountTransactionSuccessHandler,this.updateaccountTransactionErrorHandler,e.localURLs.UPDATETRANSACTIONDETAILS_JSON,{},this)}},updateaccountTransactionSuccessHandler:function(t){this.$el.find(".cp-transaction-wrapper").html(""),t.successResponse?(e.data.cpAccountDetails.setResponse(t.successResponse),this.renderTransactionDetailsFromResponse(),$(".cp-update-button").removeClass("cp-button-selected")):t.errorResponse&&this.updateaccountTransactionErrorHandler(t)},updateaccountTransactionErrorHandler:function(t){this.showNoRecordsMsg();if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}$(".cp-update-button").removeClass("cp-button-selected")},getLastTwelveMonthsTransactionStatement:function(){var t=e.data.cpAccountDetails.createLastTwelveMonthsTransactionsRequest("lastTwelveMonth");e.root.common.networkingservice.postRequest(t,this.updateaccountTransactionSuccessHandler,this.updateaccountTransactionErrorHandler,e.localURLs.TRANSACTIONDETAILS_JSON,{},this)}})}}),define("cp.views.cpEditProfileView",[],function(){return function(e){e.views.cpEditProfileView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button":"onCancelClicked","click .cp-continue-button":"updateDetails","change #countryList":"countrySelected","focus .cp-mobile-phonePrefix,.cp-mobile-phoneNumber,.cp-home-phonePrefix,.cp-home-phoneNumber":"focusEditProfileText","blur .cp-mobile-phonePrefix,.cp-mobile-phoneNumber,.cp-home-phonePrefix,.cp-home-phoneNumber":"blurEditProfileText","touchmove .cpEditProfileView":e.root.utils.dismissKeyboard},blurEditProfileText:function(t){var n=t.currentTarget,r=$(t.currentTarget).val(),i=e.root.utils.trimText(r);$(t.currentTarget).attr("data-val",i);var s=e.data.cpUserInfo,o="";s.get("mask_phone_number")==="Y"&&(n.classList.contains("cp-home-phonePrefix")||n.classList.contains("cp-mobile-phonePrefix")?o=e.root.utils.maskAuthenticationText(i):o=e.root.utils.maskCardNumber(i)),o!==undefined&&o!==""&&$(t.currentTarget).val(o)},focusEditProfileText:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},render:function(){if(this.options.origin=="cpPasswordValidationView"||this.options.origin=="cpAlertSetUpView"){var t=e.data.cpUserInfo;this.$el.empty().append(e.templates.cpEditProfileView({model:t})),this.setUserInfo()}else this.reteriveProfileDetails();var n=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.updateProfile");$(".cp-menu-title").html(n),typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS==="V"&&(this.$el.find(".cp-home-phonePrefix").attr("readonly",!0),this.$el.find(".cp-home-phoneNumber").attr("readonly",!0),this.$el.find(".cp-mobile-phonePrefix").attr("readonly",!0),this.$el.find(".cp-mobile-phoneNumber").attr("readonly",!0),this.$el.find(".cp-phone-section-text").removeClass("cp-phone-mandatory"))},reteriveProfileDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retreiveProfileSuccessHandler,this.retreiveProfileErrorHandler,e.localURLs.RETERIVE_PROFILE_RESPONSE,{},this);else{var t=e.data.cpUserInfo.retreiveProfileRequest();e.root.common.networkingservice.postRequest(t,this.retreiveProfileSuccessHandler,this.retreiveProfileErrorHandler,e.localURLs.RETERIVE_PROFILE_RESPONSE,{},this)}},retreiveProfileSuccessHandler:function(t){if(t.successResponse){e.data.cpUserInfo.retreiveProfileResponse(t.successResponse);var n=e.data.cpUserInfo;this.$el.empty().append(e.templates.cpEditProfileView({model:n})),e.root.utils.updateLanguageLabels(e,this),this.setUserInfo(),(this.options.type==e.constants.CHOICE_CARD||this.options.type==e.constants.CHOICE_CHEQUE)&&this.disableInputFields(),typeof VIRTUAL_EXPRESS!="undefined"&&VIRTUAL_EXPRESS==="V"&&(this.disableVEPhone(),this.$el.find(".cp-contact-customercare").removeClass("hidden"))}else t.errorResponse&&this.retreiveProfileErrorHandler(t)},retreiveProfileErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},disableInputFields:function(){this.$el.find(".cp-edit-firstName").prop("disabled",!0),this.$el.find(".cp-edit-lastName").prop("disabled",!0),this.$el.find(".cp-edit-attention").prop("disabled",!0),this.$el.find(".cp-edit-company").prop("disabled",!0),this.$el.find(".cp-edit-email").prop("disabled",!0),this.$el.find(".cp-home-phonePrefix").prop("disabled",!0),this.$el.find(".cp-home-phoneNumber").prop("disabled",!0),this.$el.find(".cp-mobile-phonePrefix").prop("disabled",!0),this.$el.find(".cp-mobile-phoneNumber").prop("disabled",!0)},disableVEPhone:function(){this.$el.find(".cp-home-phonePrefix").prop("disabled",!0),this.$el.find(".cp-home-phoneNumber").prop("disabled",!0),this.$el.find(".cp-mobile-phonePrefix").prop("disabled",!0),this.$el.find(".cp-mobile-phoneNumber").prop("disabled",!0)},clearFields:function(){this.$el.find(".cp-edit-firstName").val(""),this.$el.find(".cp-edit-lastName").val(""),this.$el.find(".cp-edit-attention").val(""),this.$el.find(".cp-edit-company").val(""),this.$el.find(".cp-edit-streetAddress1").val(""),this.$el.find(".cp-edit-streetAddress2").val(""),this.$el.find(".cp-edit-city").val(""),this.$el.find(".cp-edit-zipcode").val(""),this.$el.find(".cp-edit-email").val(""),this.$el.find(".cp-home-phonePrefix").val(""),this.$el.find(".cp-home-phoneNumber").val(""),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-home-phonePrefix").attr("data-val",""),this.$el.find(".cp-home-phoneNumber").attr("data-val",""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val","")},setUserInfo:function(){var t=e.data.cpUserInfo;t.get("universalAddress")==="Y"&&(this.$el.find(".cp-edit-name").text(t.get("userName")),this.$el.find(".cp-edit-company").val(t.get("company")),this.$el.find(".cp-edit-attention").val(t.get("attention"))),t.get("prepopulateAddress")==="N"&&(this.$el.find(".cp-edit-firstName").text(t.get("firstName")),this.$el.find(".cp-edit-lastName").text(t.get("lastName"))),this.$el.find(".cp-edit-streetAddress1").val(t.get("address").streetAddress1),this.$el.find(".cp-edit-streetAddress2").val(t.get("address").streetAddress2),this.$el.find(".cp-edit-city").val(t.get("address").city),this.$el.find(".cp-edit-zipcode").val(t.get("address").zipcode),this.$el.find(".cp-edit-email").val(t.get("emailID")),this.$el.find(".cp-home-phonePrefix").attr("data-val",t.get("phoneDetails").home.areaCode),this.$el.find(".cp-home-phoneNumber").attr("data-val",t.get("phoneDetails").home.number),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",t.get("phoneDetails").mobile.areaCode),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",t.get("phoneDetails").mobile.number);var n=$(".cp-home-phonePrefix").attr("data-val"),r=$(".cp-home-phoneNumber").attr("data-val"),i=$(".cp-mobile-phonePrefix").attr("data-val"),s=$(".cp-mobile-phoneNumber").attr("data-val");t.get("mask_phone_number")==="Y"?(n!=""&&n!=undefined?this.$el.find(".cp-home-phonePrefix").val(e.root.utils.maskAuthenticationText(n)):this.$el.find(".cp-home-phonePrefix").val(""),r!=""&&r!=undefined?this.$el.find(".cp-home-phoneNumber").val(e.root.utils.maskCardNumber(r)):this.$el.find(".cp-home-phoneNumber").val(""),i!=""&&i!=undefined?this.$el.find(".cp-mobile-phonePrefix").val(e.root.utils.maskAuthenticationText(i)):this.$el.find(".cp-mobile-phonePrefix").val(""),s!=""&&s!=undefined?this.$el.find(".cp-mobile-phoneNumber").val(e.root.utils.maskCardNumber(s)):this.$el.find(".cp-mobile-phoneNumber").val("")):(n!=""&&n!=undefined?this.$el.find(".cp-home-phonePrefix").val(n):this.$el.find(".cp-home-phonePrefix").val(""),r!=""&&r!=undefined?this.$el.find(".cp-home-phoneNumber").val(r):this.$el.find(".cp-home-phoneNumber").val(""),i!=""&&i!=undefined?this.$el.find(".cp-mobile-phonePrefix").val(i):this.$el.find(".cp-mobile-phonePrefix").val(""),s!=""&&s!=undefined?this.$el.find(".cp-mobile-phoneNumber").val(s):this.$el.find(".cp-mobile-phoneNumber").val(""));var o=t.get("address").country,u=t.get("address").state;e.root.utils.populateCountries(this.$el,t),$("#countryList option[data-key="+o+"]").attr("selected","selected"),$("#stateList option[data-key="+u+"]").attr("selected","selected");var a=t.get("prepopulateAddress");a=="N"&&(this.$el.find(".cp-edit-firstName").removeClass("hidden"),this.$el.find(".cp-edit-lastName").removeClass("hidden"),this.$el.find(".cp-edit-firstName").val(t.get("firstName")),this.$el.find(".cp-edit-lastName").val(t.get("lastName"))),t.get("universalAddress")==="Y"?(this.$el.find(".cp-name").removeClass("hidden"),this.$el.find(".cp-edit-attention").removeClass("hidden"),this.$el.find(".cp-edit-company").removeClass("hidden"),this.$el.find(".cp-edit-streetAddress1").attr("maxLength","50")):this.$el.find(".cp-edit-streetAddress1").attr("maxLength","26")},removeHiglightedborder:function(){this.validateFlag=!0,this.$el.find("input").removeClass("cp-red-border").addClass("cp-bordercolor2"),this.$el.find("select").removeClass("cp-red-border").addClass("cp-bordercolor2"),this.$el.find("*[data-errorId='cp-error']").removeClass("show").addClass("hidden")},updateDetails:function(t){this.options.type==e.constants.CHOICE_CARD||this.options.type==e.constants.CHOICE_CHEQUE?this.updateAddress(t):this.validateDetails(t)},validateDetails:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();var n,r=this.$el.find(".cp-edit-firstName").val(),i=this.$el.find(".cp-edit-lastName").val(),s=this.$el.find(".cp-edit-attention").val(),o=this.$el.find(".cp-edit-company").val(),u=this.$el.find(".cp-edit-streetAddress1").val(),a=e.root.utils.trimText(this.$el.find(".cp-edit-streetAddress2").val()),f=this.$el.find(".cp-edit-city").val(),l=e.root.utils.trimText(this.$el.find(".cp-edit-zipcode").val()),c=this.$el.find(".cp-edit-email").val(),h=$(".cp-home-phonePrefix").attr("data-val"),p=$(".cp-home-phoneNumber").attr("data-val"),d=$(".cp-mobile-phonePrefix").attr("data-val"),v=$(".cp-mobile-phoneNumber").attr("data-val");this.removeHiglightedborder();var m=[],g=e.data.cpUserInfo.get("prepopulateAddress");if(g==="N"){n=e.root.utils.isEmptyString(r);if(n){this.$el.find(".cp-edit-firstName").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-firstName").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.firstNameMissing");this.$el.find(".cp-error-label-firstName").html(y),m.push(this.$el.find(".cp-edit-firstName").attr("data-validateId")),this.validateFlag=!1}if(n||r.match(/[^[a-zA-Za-zA-Z\\-\\ \\'\\.*$]/)||r.indexOf("<")!=-1&&r.indexOf("<")!=-1){this.$el.find(".cp-edit-firstName").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-firstName").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.firstNameInvalid");this.$el.find(".cp-error-label-firstName").html(y),m.push(this.$el.find(".cp-edit-firstName").attr("data-validateId")),this.$el.find(".cp-edit-firstName").val(""),this.validateFlag=!1}n=e.root.utils.isEmptyString(i);if(n){this.$el.find(".cp-edit-lastName").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-lastName").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.lastNameMissing");this.$el.find(".cp-error-label-lastName").html(y),m.push(this.$el.find(".cp-edit-lastName").attr("data-validateId")),this.validateFlag=!1}if(n||i.match(/[^[a-zA-Za-zA-Z\\-\\ \\'\\.*$]/)||i.indexOf("<")!=-1&&i.indexOf("<")!=-1){this.$el.find(".cp-edit-lastName").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-lastName").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.lastNameInvalid");this.$el.find(".cp-error-label-lastName").html(y),m.push(this.$el.find(".cp-edit-lastName").attr("data-validateId")),this.$el.find(".cp-edit-lastName").val(""),this.validateFlag=!1}}n=e.root.utils.isEmptyString(u);if(n){this.$el.find(".cp-edit-streetAddress1").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-address1").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.address1Req");this.$el.find(".cp-error-label-address1").html(y),m.push(this.$el.find(".cp-edit-streetAddress1").attr("data-validateId")),this.validateFlag=!1}if(!n&&u.length<3){this.$el.find(".cp-edit-streetAddress1").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-address1").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidAddress");this.$el.find(".cp-error-label-address1").html(y),this.$el.find(".cp-edit-streetAddress1").val(""),m.push(this.$el.find(".cp-edit-streetAddress1").attr("data-validateId")),this.validateFlag=!1}n=e.root.utils.isEmptyString(f);if(n){this.$el.find(".cp-edit-city").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-city").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.cityRequired");this.$el.find(".cp-error-label-city").html(y),m.push(this.$el.find(".cp-edit-city").attr("data-validateId")),this.validateFlag=!1}if(!n&&(f.match(/[^a-zA-Za-zA-Z\\#\\-\\ \\'\\.*$]/)||f.length<2)){this.$el.find(".cp-edit-city").removeClass("cp-bordercolor2").addClass("cp-red-border");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidCity");this.$el.find(".cp-error-label-city").html(y),this.$el.find(".cp-error-label-city").removeClass("hidden").addClass("show"),m.push(this.$el.find(".cp-edit-city").attr("data-validateId")),this.validateFlag=!1}n=e.root.utils.isEmptyString(l);if(n){this.$el.find(".cp-edit-zipcode").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-zipcode").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.zipcodeRequired");this.$el.find(".cp-error-label-zipcode").html(y),m.push(this.$el.find(".cp-edit-zipcode").attr("data-validateId")),this.validateFlag=!1}if(!n&&l.length<5){this.$el.find(".cp-edit-zipcode").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-zipcode").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidZipCode");this.$el.find(".cp-error-label-zipcode").html(y),m.push(this.$el.find(".cp-edit-zipcode").attr("data-validateId")),this.$el.find(".cp-edit-zipcode").val(""),this.validateFlag=!1}n=e.root.utils.isEmptyString(c);var b=/(([a-zA-Z0-9\-?\.?]+)@(([a-zA-Z0-9\-_]+\.)+)([a-z]{2,3}))+$/;if(n){this.$el.find(".cp-edit-email").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-email").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.provideEmailAddress");this.$el.find(".cp-error-label-email").html(y),m.push(this.$el.find(".cp-edit-email").attr("data-validateId")),this.validateFlag=!1}if(!n&&!b.test(c)){this.$el.find(".cp-edit-email").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-email").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidEmailAddress");this.$el.find(".cp-error-label-email").html(y),m.push(this.$el.find(".cp-edit-email").attr("data-validateId")),this.$el.find(".cp-edit-email").val(""),this.validateFlag=!1}if(typeof VIRTUAL_EXPRESS=="undefined"&&VIRTUAL_EXPRESS!=="V"){if(d===""||v===""){n=e.root.utils.isEmptyString(h);if(n){this.$el.find(".cp-home-phonePrefix").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.phoneReq");this.$el.find(".cp-error-label-phone").html(y),m.push(this.$el.find(".cp-home-phonePrefix").attr("data-validateId")),this.validateFlag=!1}if(!n&&!$.isNumeric(h)||h.length!==3){this.$el.find(".cp-home-phonePrefix").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidMobilePhone");this.$el.find(".cp-error-label-phone").html(y),m.push(this.$el.find(".cp-home-phonePrefix").attr("data-validateId")),this.$el.find(".cp-home-phonePrefix").val(""),this.$el.find(".cp-home-phonePrefix").attr("data-val",""),this.validateFlag=!1}n=e.root.utils.isEmptyString(p);if(n){this.$el.find(".cp-home-phoneNumber").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.phoneReq");this.$el.find(".cp-error-label-phone").html(y),m.push(this.$el.find(".cp-home-phoneNumber").attr("data-validateId")),this.validateFlag=!1}if(!n&&!$.isNumeric(p)||p.length!==7){this.$el.find(".cp-home-phoneNumber").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidHomePhone");this.$el.find(".cp-error-label-phone").html(y),m.push(this.$el.find(".cp-home-phoneNumber").attr("data-validateId")),this.$el.find(".cp-home-phoneNumber").val(""),this.$el.find(".cp-home-phoneNumber").attr("data-val",""),this.validateFlag=!1}}if(h===""||p===""){n=e.root.utils.isEmptyString(d);if(n||!$.isNumeric(d)||d.length!==3){this.$el.find(".cp-mobile-phonePrefix").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.phoneReq");this.$el.find(".cp-error-label-phone").html(y),m.push(this.$el.find(".cp-mobile-phonePrefix").attr("data-validateId")),this.$el.find(".cp-mobile-phonePrefix").val(""),this.$el.find(".cp-mobile-phonePrefix").attr("data-val",""),this.validateFlag=!1}n=e.root.utils.isEmptyString(v);if(n||!$.isNumeric(v)||v.length!==7){this.$el.find(".cp-mobile-phoneNumber").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-phone").removeClass("hidden").addClass("show");var y=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.phoneReq");this.$el.find(".cp-error-label-phone").html(y),m.push(this.$el.find(".cp-mobile-phoneNumber").attr("data-validateId")),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.validateFlag=!1}}}if(this.validateFlag!==!0){var w=this.$el.find("*[data-validateId="+m[0]+"]");$(".cpEditProfileView").animate({scrollTop:w.offset()},500),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var E={};E.firstName=r,E.lastName=i,E.attention=s?s:"",E.company=o?o:"",E.address={},E.address.streetAddress1=u,E.address.streetAddress2=a,E.address.city=f,E.address.state=this.$el.find("#stateList option:selected").attr("data-key")?this.$el.find("#stateList option:selected").attr("data-key"):"",E.address.country=this.$el.find("#countryList option:selected").attr("data-key")?this.$el.find("#countryList option:selected").attr("data-key"):"",E.address.zipcode=l,E.emailAddress=c,E.phone={},E.phoneDetails={},E.phoneDetails.home={},E.phoneDetails.home.areaCode=h?h:"",E.phoneDetails.home.number=p?p:"",E.phoneDetails.mobile={},E.phoneDetails.mobile.areaCode=d?d:"",E.phoneDetails.mobile.number=v?v:"",e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo),e.data.cpUserInfo.setUserDetails(E);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.updateProfileSuccessHandler,this.updateProfileErrorHandler,e.localURLs.PROFILE_UPDATE_RESPONSE,{},this);else{var S=e.data.cpUserInfo.updateProfileRequest();e.root.common.networkingservice.postRequest(S,this.updateProfileSuccessHandler,this.updateProfileErrorHandler,e.localURLs.PROFILE_UPDATE_RESPONSE,{},this)}},updateAddress:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();var n,r=this.$el.find(".cp-edit-streetAddress1").val(),i=e.root.utils.trimText(this.$el.find(".cp-edit-streetAddress2").val()),s=this.$el.find(".cp-edit-city").val(),o=e.root.utils.trimText(this.$el.find(".cp-edit-zipcode").val());this.removeHiglightedborder();var u=[];n=e.root.utils.isEmptyString(r);if(n){this.$el.find(".cp-edit-streetAddress1").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-address1").removeClass("hidden").addClass("show");var a=e.data.cpLanguageMapping.getLabelForKey("cp.editProfile.address1Req");this.$el.find(".cp-error-label-address1").html(a),u.push(this.$el.find(".cp-edit-streetAddress1").attr("data-validateId")),this.validateFlag=!1}if(!n&&r.length<3){this.$el.find(".cp-edit-streetAddress1").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-address1").removeClass("hidden").addClass("show");var a=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidAddress");this.$el.find(".cp-error-label-address1").html(a),this.$el.find(".cp-edit-streetAddress1").val(""),u.push(this.$el.find(".cp-edit-streetAddress1").attr("data-validateId")),this.validateFlag=!1}n=e.root.utils.isEmptyString(s);if(n){this.$el.find(".cp-edit-city").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-city").removeClass("hidden").addClass("show");var a=e.data.cpLanguageMapping.getLabelForKey("cp.registration.cityRequired");this.$el.find(".cp-error-label-city").html(a),u.push(this.$el.find(".cp-edit-city").attr("data-validateId")),this.validateFlag=!1}if(!n&&(s.match(/[^a-zA-Za-zA-Z\\#\\-\\ \\'\\.*$]/)||s.length<2)){this.$el.find(".cp-edit-city").removeClass("cp-bordercolor2").addClass("cp-red-border");var a=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidCity");this.$el.find(".cp-error-label-city").html(a),this.$el.find(".cp-error-label-city").removeClass("hidden").addClass("show"),u.push(this.$el.find(".cp-edit-city").attr("data-validateId")),this.validateFlag=!1}n=e.root.utils.isEmptyString(o);if(n){this.$el.find(".cp-edit-zipcode").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-zipcode").removeClass("hidden").addClass("show");var a=e.data.cpLanguageMapping.getLabelForKey("cp.registration.zipcodeRequired");this.$el.find(".cp-error-label-zipcode").html(a),u.push(this.$el.find(".cp-edit-zipcode").attr("data-validateId")),this.validateFlag=!1}if(!n&&o.length<5){this.$el.find(".cp-edit-zipcode").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find(".cp-error-label-zipcode").removeClass("hidden").addClass("show");var a=e.data.cpLanguageMapping.getLabelForKey("cp.registration.reenterInvalidZipCode");this.$el.find(".cp-error-label-zipcode").html(a),u.push(this.$el.find(".cp-edit-zipcode").attr("data-validateId")),this.$el.find(".cp-edit-zipcode").val(""),this.validateFlag=!1}if(this.validateFlag!==!0){var f=this.$el.find("*[data-validateId="+u[0]+"]");$(".cpEditProfileView").animate({scrollTop:f.offset()},500),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var l={};l.address={},l.address.streetAddress1=r,l.address.streetAddress2=i,l.address.city=s,l.address.state=this.$el.find("#stateList option:selected").attr("data-key")?this.$el.find("#stateList option:selected").attr("data-key"):"",l.address.country=this.$el.find("#countryList option:selected").attr("data-key")?this.$el.find("#countryList option:selected").attr("data-key"):"",l.address.zipcode=o,e.data.cpUserInfo||(e.data.cpUserInfo=new e.models.cpUserInfo),e.data.cpUserInfo.updateAddress(l);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.updateProfileSuccessHandler,this.updateProfileErrorHandler,e.localURLs.PROFILE_UPDATE_RESPONSE,{},this);else{var c=e.data.cpUserInfo.updateAddressRequest();e.root.common.networkingservice.postRequest(c,this.updateProfileSuccessHandler,this.updateProfileErrorHandler,e.localURLs.PROFILE_UPDATE_RESPONSE,{},this)}},updateProfileSuccessHandler:function(t){t.successResponse?($(document.activeElement).blur(),e.data.cpUserInfo.setUpdateResponse(t.successResponse),this.navigateToPreviousView(t.successResponse)):t.errorResponse&&this.updateProfileErrorHandler(t)},updateProfileErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var r=t.errorResponse.errorFields===undefined?"":t.errorResponse.errorFields,i=Object.keys(r);if(i.length==0){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}for(var s=0;s<i.length;s++)if(i[s]){this.$el.find("*[data-validateId="+i[s]+"]").not("span").val("");var o=this.$el.find("*[data-validateId="+i[s]+"]").not("span").attr("data-val");typeof o!=typeof undefined&&o!==!1&&this.$el.find("*[data-validateId="+i[s]+"]").not("span").attr("data-val",""),this.$el.find("*[data-validateId="+i[s]+"]").not("span").attr("data-val",""),this.$el.find("*[data-validateId="+i[s]+"]").not("span").removeClass("cp-bordercolor2").addClass("cp-red-border"),this.$el.find("span[data-validateId="+i[s]+"]").removeClass("hidden").addClass("show"),this.$el.find("span[data-validateId="+i[s]+"]").html(r[i[s]])}if(i.length>0){var u=this.$el.find("*[data-validateId="+i[0]+"]");u&&u.length>0&&$(".cpEditProfileView").animate({scrollTop:u.offset().top},500)}}else e.root.common.Alertservice.showAlert("")},onCancelClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.revertProfileSuccessHandler,this.retreiveProfileErrorHandler,e.localURLs.RETERIVE_PROFILE_RESPONSE,{},this);else{var n=e.data.cpUserInfo.retreiveProfileRequest();e.root.common.networkingservice.postRequest(n,this.revertProfileSuccessHandler,this.retreiveProfileErrorHandler,e.localURLs.RETERIVE_PROFILE_RESPONSE,{},this)}},revertProfileSuccessHandler:function(t){if(t.successResponse){var n=this.options.type;e.data.cpUserInfo.retreiveProfileResponse(t.successResponse),n===e.constants.CHOICE_CHEQUE||n===e.constants.CHOICE_CARD?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",this.options.type)):e.root.eventBus.trigger("loadMenuItem",n)}else this.retreiveProfileErrorHandler(t)},navigateToPreviousView:function(t){var n=e.data.cpUserInfo,r=n.get("authenticationRequired"),i=n.get("pushAlert"),s=this.options.type;if(s===e.constants.CHOICE_CHEQUE||s===e.constants.CHOICE_CARD)e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadPaymentChoice",this.options.type);else if(r=="Y"){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var o=new e.views.cpPasswordValidationView({el:"#cp-menu-container",origin:"editProfile",type:this.options.type})}else{var s=this.options.type;e.root.eventBus.trigger("loadMenuItem",s)}},countrySelected:function(t){var n=$(t.currentTarget),r=n.find("option:selected"),i=r.attr("data-key"),s=e.data.cpUserInfo;i&&e.root.utils.populateStatesForCountry(i,this.$el,s)}})}}),define("cp.views.cpShopView",[],function(){return function(e){e.views.cpShopView=CT.View.extend({initialize:function(){this.walletType="",this.cardNumber="",this.pressTimer="",this.retrieveShopDetails()},events:{"click .cp-tips-info":"openTips","click .cp-card-front,.cp-card-back":"toggle","click .cp-addfunds-info":"showAddFundsInfo","click .cp-addfunds":"navigateAddFunds","click .addressEdit":"navigateEditProfile","click .cp-shopOffer":"showDisclaimer","click .cp-cardNumber-overlay":"copyCardDetails","click .cp-wallet-logo":"navigateWalletInfo","click .cp-create-pin":"PINReset","touchstart .cp-cardNumber-overlay":"formatNumber","copy .cp-cardNumber-overlay":e.root.utils.formatCardNumber},PINReset:function(t){this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpPinResetView({el:"#cp-menu-container",context:{type:"pinreset"}})},formatNumber:function(){e.root.utils.copytoClipboard(e.data.cpCardDetails.get("cardNumber"))},retrieveShopDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.shopSuccessHandler,this.shopErrorHandler,e.localURLs.SHOP_JSON,{},this);else{var t={};t.inputRequest={},t.inputRequest.action={},t.inputRequest.action.appName=e.constants.APP_NAME,t.inputRequest.action.criterion=e.constants.RETRIEVE_SHOPDETAILS,t.inputRequest.action.language=e.data.cpLanguageMapping.get("currentLanguage"),e.root.common.networkingservice.postRequest(t,this.shopSuccessHandler,this.shopErrorHandler,e.localURLs.SHOP_JSON,{},this)}},shopSuccessHandler:function(t){t.successResponse?(e.data.cpAccountDetails||(e.data.cpAccountDetails=new e.models.cpAccountDetails),e.data.cpAccountDetails.setCurrentBalance(t.successResponse),e.data.cpCardDetails||(e.data.cpCardDetails=new e.models.cpCardDetails),e.data.cpSettings.setDisplayCardInfo(t.successResponse),e.data.cpSettings.setProgramType(t.successResponse),e.data.cpSettings.setCustomBranding(t.successResponse),e.data.cpCardDetails.setResponse(t.successResponse.cardInfo),e.data.cpCardDetails.setCardType(t.successResponse),e.data.cpUserInfo.set("address",t.successResponse.billingAddress!==undefined?t.successResponse.billingAddress:{}),e.data.cpShop||(e.data.cpShop=new e.models.cpShop),e.data.cpShop.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this),this.cardNumber=t.successResponse.cardInfo.cardNumber):this.shopErrorHandler(t)},shopErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},clearTimer:function(){document.getSelection().removeAllRanges()},showAddFundsInfo:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.getLabelForKey("cp.shopNow.addUpTo");e.root.utils.showInfoPopup(t,n,"right")},navigateAddFunds:function(t){e.data.cpAddFunds||(e.data.cpAddFunds=new e.models.cpAddFunds),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpAddFundsView({el:"#cp-menu-container"})},navigateEditProfile:function(t){t.preventDefault(),t.stopPropagation(),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpEditProfileView({el:"#cp-menu-container",type:"cp-shopnow-Menu"})},showDisclaimer:function(t){var n=$(t.currentTarget),r=n.attr("data-src");t.preventDefault();if(typeof r!=typeof undefined&&r!==!1)if(r.indexOf("cp:BankTransfer")!=-1&&e.data.cpSettings.get("bankTransfer")==="Y")e.root.eventBus.trigger("loadMenuItem","cp-accessFund-Menu"),e.root.eventBus.trigger("loadMenuItem","cp-bankTransfer-Menu");else if(r.indexOf("cp:BankTransfer")==-1||e.data.cpSettings.get("bankTransfer")!=="N"){var i=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,i,"",null,null,{url:r,element:$(t.target)},!0)}},copyCardDetails:function(e){e.preventDefault(),e.stopPropagation()},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.shopNow.shopNow");$(".cp-menu-title").html(t+"!");var n=e.data.cpSettings,r=e.data.cpAccountDetails,i=e.data.cpUserInfo,s=e.data.cpShop,o=e.data.cpCardDetails,u=s.get("vendorCollection");if(s.get("wallet")!==undefined&&s.get("wallet")=="Y"){var a=navigator.userAgent||navigator.vendor||window.opera,f=e.root.utils.getMobileOperatingSystem(),l=e.data.cpShop.get("pin_change"),c=e.data.cpShop.get("paymentVE");f==="iOS"?(this.walletType=e.constants.DEVICE_IPHONE,a.match(/Windows Phone/)&&(this.walletType=e.constants.DEVICE_ANDROID)):this.walletType=e.constants.DEVICE_ANDROID}this.$el.empty().append(e.templates.cpShopView({settings:n,accountDetails:r,profile:i,shop:s,cardDetails:o,walletType:this.walletType,pin_change:l,paymentVE:c}));if(s.get("message")!==undefined&&s.get("message")!==""){var h=s.get("message");this.$el.find(".cp-shop-header-message").html(h)}var p=this.$el.find(".cp-product-list");for(var d=0;d<u.length;d++){var v=u.at(d);p.append(e.templates.cpShopCategory({model:v,index:d}));var m=p.find("div[data-index="+d+"]"),m=m.find(".cp-offer-details");for(var g=0;g<v.get("offers").length;g++){var y=v.get("offers")[g],b=$('<div class="cp-shopOffer" data-src='+y.vendorURL+"></div>");m.append(b);if(typeof CP_CONTENT_BOX=="undefined"||CP_CONTENT_BOX===""||CP_CONTENT_BOX===".")b.css("background","url("+y.vendorImg+")no-repeat"),b.css("background-position","center"),b.css("background-size","contain");else{var w="";window.devicePixelRatio>2?w=CP_CONTENT_BOX+"/"+CUSTOM_BRANDING+"/m/client/common/imgs/"+y.vendorImg+"@3x.png":w=CP_CONTENT_BOX+"/"+CUSTOM_BRANDING+"/m/client/common/imgs/"+y.vendorImg+"@2x.png",b.css("background","url("+w+")no-repeat"),b.css("background-position","center"),b.css("background-size","contain")}}}this.$el.find(".cp-info-tap-front").hide(),this.$el.find(".cp-info-tap-back").hide(),$(".cp-card-front").hasClass("cp-card-flip-front")?this.$el.find(".cp-info-tap-back").show():this.$el.find(".cp-info-tap-front").show(),isIEBrowser()&&this.$el.find(".cp-cardNumber-overlay").css("font-size","110%"),e.data.cpAddFunds?e.data.cpAddFunds.clear():""},navigateWalletInfo:function(t){$(t.currentTarget).hasClass("cp-samsungPay-logo")&&(this.walletType=e.constants.DEVICE_SAMSUNG);var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),e.root.utils.navigateView(this,"cpMobileWalletSetupView",e,{type:this.walletType})},toggle:function(e){this.$el.find(".cp-card-front").toggleClass("cp-card-flip-front"),this.$el.find(".cp-card-back").toggleClass("cp-card-flip-back"),$(".cp-card-front").hasClass("cp-card-flip-front")?(this.$el.find(".cp-info-tap-front").hide(),this.$el.find(".cp-info-tap-back").show()):(this.$el.find(".cp-info-tap-back").hide(),this.$el.find(".cp-info-tap-front").show())},openTips:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),e.root.utils.navigateView(this,"cpRegistrationTipsView",e,{origin:"cp-shopnow-menu"})},modalDismissed:function(){}})}}),define("cp.views.cpMobileWalletSetupView",[],function(){return function(e){e.views.cpMobileWalletSetupView=CT.View.extend({initialize:function(){this.render()},events:{"click .cp-wallet-cancel-button":"navigateToShop","click .cp-continue-cancel-btn a":"showDisclaimer","click .cp-mobile-wallet-container a":"showDisclaimer"},render:function(){var t=this.options.context.type;this.$el.empty().append(e.templates.cpMobileWalletSetup({walletType:t})),this.retrieveMobileWalletContent(),e.root.utils.updateLanguageLabels(e,this);var n=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),r=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),i=new Date,s=i.getFullYear();this.$el.find(".cp-footer-row2").html(n+" "+s+" "+r)},retrieveMobileWalletContent:function(){var t="";this.options.context.type==e.constants.DEVICE_IPHONE?t=e.localURLs.MOBILE_WALLET_SETUP_APPLE:this.options.context.type==e.constants.DEVICE_SAMSUNG?t=e.localURLs.MOBILE_WALLET_SETUP_SAMSUNG:this.options.context.type==e.constants.DEVICE_ANDROID&&(t=e.localURLs.MOBILE_WALLET_SETUP_ANDROID);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.mobileWalletSuccessHandler,this.mobileWalletErrorHandler,t,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.MOBILE_WALLET_SETUP,r.action.type=this.options.context.type,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.mobileWalletSuccessHandler,this.mobileWalletErrorHandler,t,{},this)}},mobileWalletSuccessHandler:function(t){if(t.successResponse){this.$el.find(".cp-mobile-wallet-container").empty().append(t.successResponse.content);var n=e.data.cpLanguageMapping.getLabelForKey("cp.shop.addYourCard");$(".cp-menu-title").html(n),this.$el.find(".cp-mobile-wallet-store").attr("href",t.successResponse.walletURL)}else this.mobileWalletErrorHandler(t)},mobileWalletErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateToShop:function(){e.root.utils.navigateView(this,"cpShopView",e,{},"right")},showDisclaimer:function(t){if(this.options.context.type==e.constants.DEVICE_IPHONE)$(".cp-apple-store").attr("href",r)[0].click(),$(".cp-apple-store").attr("href","#");else if($(t.target).is("a")){var n=$(t.currentTarget),r=$(t.target).attr("href");t.preventDefault();if(typeof r!=typeof undefined&&r!==!1){var i=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,i,"",this.logWalletType,null,{url:r,element:$(t.target)},!0)}}},logWalletType:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.logPageResponseHandler,this.logPageResponseHandler,e.localURLs.MOBILE_WALLET_AUDIT,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.MOBILE_WALLET_AUDIT,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.action.type=this.options.context.type,t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.logPageResponseHandler,this.logPageResponseHandler,e.localURLs.MOBILE_WALLET_AUDIT,{},this)}},logPageResponseHandler:function(){}})}}),define("cp.views.cpAddFundsView",[],function(){return function(e){e.views.cpAddFundsView=CT.View.extend({initialize:function(){this.render()},events:{"click .cp-info":"showAddFundsInfo","click .editImg":"loadEditPage","click .cp-addfunds-continue-btn":"navigateAddfundConfirmationScreen","focus .cp-cardnumber":"focusCardDetails","blur .cp-cardnumber":"blurCardDetails","keypress .cp-addamount":"checkAmountLength","change .cp-addamount":"formatNumber","touchmove #AddFundsContainer":"dismissKeyboard"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.addFunds");$(".cp-menu-title").html(t),this.options.context==="edit"?this.setCardDetails():this.reteriveAddFunds()},dismissKeyboard:function(){e.root.utils.getMobileOperatingSystem()==="iOS"&&$(document.activeElement).blur()},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},setCardDetails:function(){var t=e.data.cpAddFunds;this.$el.empty().append(e.templates.cpAddFundsView({model:t}));var n=t.get("expDate");if(n){var r=this.$el.find("#monthUpdate option[value="+n.month+"]"),i=this.$el.find("#yearUpdate option[value="+n.year+"]");r&&i&&(r.attr("selected",!0),i.attr("selected",!0))}var s=t.get("cardType"),o=e.root.utils.maskCardNumber(t.get("cardNumber"));this.$el.find("input[name=cp-card-type-value][value="+s+"]").attr("checked",!0),t.get("amount")&&(this.$el.find(".cp-addamount").val(t.get("amount").dollars),this.$el.find(".cp-addtotalamount").val(t.get("amount").cents)),this.$el.find(".cp-cardnumber").val(o),this.$el.find(".cp-cardnumber").attr("data-val",t.get("cardNumber")),this.$el.find(".cp-security-text").val(t.get("securityCode")),e.root.utils.updateLanguageLabels(e,this);var u=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.add15DollarsToAccount");$(".cp-add-funds-text").empty().append(u)},checkAmountLength:function(e){var t=$(e.currentTarget);t.val().length>=5&&(e.preventDefault(),e.stopPropagation())},formatNumber:function(t){var n=$(t.currentTarget),r=parseFloat(n.val());if(r<1||r>15){n.val("");var i=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.requestAmountBtw1And15");e.root.common.Alertservice.showAlert(i)}else n.val(r.toFixed(2))},showAddFundsInfo:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),setTimeout(function(){n.presentModalView(e.views.cpModalView,{type:"card"},!0,n.modalDismissed,!0)},300)},modalDismissed:function(){$("#modalElement").removeClass("cp-modal-element-transparent-background")},loadEditPage:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpEditProfileView({el:"#cp-menu-container",type:"cp-Addfunds-Menu"})},reteriveAddFunds:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retreiveProfileSuccessHandler,this.retreiveProfileErrorHandler,e.localURLs.RETRIEVE_ADD_FUNDS,{},this);else{var t=e.data.cpAddFunds.createRequest();e.root.common.networkingservice.postRequest(t,this.retreiveProfileSuccessHandler,this.retreiveProfileErrorHandler,e.localURLs.RETRIEVE_ADD_FUNDS,{},this)}},retreiveProfileErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retreiveProfileSuccessHandler:function(t){t.successResponse?(e.data.cpAddFunds.setResponse(t.successResponse),this.setCardDetails()):t.errorResponse&&this.retreiveProfileErrorHandler(t)},navigateAddfundConfirmationScreen:function(){$(document.activeElement).blur();var t=e.root.utils.trimText(this.$el.find(".cp-addamount").val()),n=e.root.utils.isEmptyString(t);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidAmount");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}if(!$.isNumeric(t)){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidAmount");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}if(!isNaN(parseFloat(t))){var i=parseFloat(t);if(i>15){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.requestAmountBtw1And15");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}}if(this.$el.find("input[name=cp-card-type-value]").is(":checked")==0){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidCardType");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}var s=e.root.utils.trimText(this.$el.find(".cp-cardnumber").attr("data-val")),n=e.root.utils.isEmptyString(s);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidCardNumber");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}if(!$.isNumeric(s)){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidCardNumber");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}if(s.length!==16){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidCardNumber");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}var o=this.$el.find("#monthUpdate option:selected").val(),u=this.$el.find("#yearUpdate option:selected").val();if(o==""||u==""){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidExpirationDate");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}var a=e.root.utils.trimText(this.$el.find(".cp-security-text").val()),n=e.root.utils.isEmptyString(a);if(n){var r=e.data.cpLanguageMapping.getLabelForKey("cp.addFunds.invalidSecurityNumber");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-security-text").val("");return}var f={};f.amount={};var l=t.split(".");f.amount.dollars=l[0]?l[0]:"0",l[1]&&l[1].length==1&&(l[1]=l[1]+"0"),f.amount.cents=l[1]?l[1]:"00",f.cardType=$("input[name=cp-card-type-value]:checked").val(),f.cardNumber=this.$el.find(".cp-cardnumber").attr("data-val"),f.expDate={},f.expDate.month=this.$el.find("#monthUpdate option:selected").val(),f.expDate.year=this.$el.find("#yearUpdate option:selected").val(),f.securityCode=this.$el.find(".cp-security-text").val(),e.data.cpAddFunds.setUserDetails(f);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onAddfundSuccessHandler,this.onAddfundErrorHandler,e.localURLs.SAVE_ADD_FUNDS,{},this);else{var c=e.data.cpAddFunds.saveAddfundRequest();e.root.common.networkingservice.postRequest(c,this.onAddfundSuccessHandler,this.onAddfundErrorHandler,e.localURLs.SAVE_ADD_FUNDS,{},this)}},onAddfundErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onAddfundSuccessHandler:function(t){if(t.successResponse){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpAddFundsConfirmationView({el:"#cp-menu-container"})}else t.errorResponse&&this.onAddfundErrorHandler(t)}})}}),define("cp.views.cpAddFundsConfirmationView",[],function(){return function(e){e.views.cpAddFundsConfirmationView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button":"navigateAddfundScreen","click .cp-continue-button":"onChargemyCardClicked"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.addFundsConfirm.confirm");$(".cp-menu-title").html(t);var n=e.data.cpAddFunds,r=e.root.utils.maskCardNumber(n.get("cardNumber"));this.$el.empty().append(e.templates.cpAddFundsConfirmationView({model:n,maskedCardNumber:r}));var i=e.root.utils.maskCardNumber(n.get("cardNumber"));this.$el.find(".cp-cardholder-cardno-value").val(i),this.$el.find(".cp-cardholder-name-value").html(n.get("userName"));var s="$ "+n.get("amount").dollars+"."+n.get("amount").cents,o=n.get("fee");s=s+"+ "+o,this.$el.find(".cp-cardholder-amount-value").html(s),this.$el.find(".cp-cardholder-card-type-value").html(n.get("cardType"));var u=n.get("expDate").month+"/"+n.get("expDate").year;this.$el.find(".cp-cardholder-expiration-value").html(u);var a=n.get("amount").dollars+"."+n.get("amount").cents;a=parseFloat(a),o=o.replace("$",""),o=o.replace("USD",""),o=o.replace("+",""),o=parseFloat(o),isNaN(o)&&(o=0),a+=o,a=a.toFixed(2),this.$el.find(".add-funds-total").text(a)},navigateAddfundScreen:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),e.data.cpAddFunds?e.data.cpAddFunds.clear():"",e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")},onChargemyCardClicked:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onConfirmAddfundSuccessHandler,this.onConfirmAddfundErrorHandler,e.localURLs.ADD_FUND_CONFIRMATION_JSON,{},this);else{var n={},r={};r.action={},r.data={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.CONFIRM_FUND,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.onConfirmAddfundSuccessHandler,this.onTCErrorHandler,e.localURLs.TERMSCONDITIONS_JSON,{},this)}},onConfirmAddfundSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.message,r=n;e.root.common.Alertservice.showSuccessAlert(r,this.loadAcntDetails,!1,!1,this)}else this.onConfirmAddfundErrorHandler(t)},onConfirmAddfundErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},loadAcntDetails:function(){e.data.cpAddFunds.setDefaults(),e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")}})}}),define("cp.views.cpFAQView",[],function(){return function(e){e.views.cpFAQ=CT.View.extend({initialize:function(){this.currentLanguage=e.data.cpLanguageMapping.get("currentLanguage")?e.data.cpLanguageMapping.get("currentLanguage"):e.constants.LANGUAGE_EN,this.options.type==="prelogin"?this.render():this.retrieveFAQs()},events:{"click .cp-close,.cp-cross":"onCloseClicked","click .cpFAQQA":"performDisclaimerCheck"},render:function(){this.options.type==="prelogin"&&this.retrieveFAQs();var t={};t.redirectURLs=e.redirectURLs;if(this.options.type==="postlogin")this.$el.empty().append(e.templates.cpFAQPostLogin());else if(this.options.type==="prelogin"){this.$el.empty().append(e.templates.cpFAQ({model:t})),this.$el.find(".cp-privacy-link").attr("href",this.getPrivacyURL()),this.$el.find(".cp-fullsite-link").attr("href",this.redirectToFullDesktopSite());var n=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),r=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),i=new Date,s=i.getFullYear();this.$el.find(".cp-footer-row2").html(n+" "+s+" "+r)}e.root.utils.updateLanguageLabels(e,this);var o=e.data.cpLanguageMapping.getLabelForKey("cp.faq.instruction");$(".cp-instruction-text").empty().append(o),this.$el.find(".cp-link").attr("href",this.redirectToSecurityCenter()),this.options.type==="postlogin"&&this.appendFAQs(),document.getElementsByClassName("cp-faq-container")[0].addEventListener("touchstart",function(e){});var u=e.data.cpLanguageMapping.getLabelForKey("cp.faq.text");$(".cp-menu-title").html(u)},appendFAQs:function(){var t=[];this.options.type==="postlogin"?t=e.data.cpPostFAQCollection:t=e.data.cpPreFAQCollection;for(var n=0;n<t.length;n++){var r=$('<div class = "cp-faq-content"></div>');r.append(e.templates.cpFAQList({model:t.at(n)})),r.find(".cp-faq-category").empty().append(t.at(n).get("faq-category")),this.$el.find(".cpFAQQA").append(r);var i=t.at(n);if(i&&i.get("faqs")&&i.get("faqs").length){$(".cp-title-text").addClass("cp-backgroundcolor2 cp-textcolor2");for(var s=0;s<i.get("faqs").length;s++){var o=$('<div class="cp-question-text greyFont"><span class="cp-questions cp-textcolor5"></span><span class="cp-faq-question"></span></div>'),u=$('<div class="cp-answer-text greyFont"><span class="cp-ans cp-textcolor4"></span><span class="cp-faq-answer"></span></div>'),a=$('<div class="cp-faq-border cp-bordercolor2"></div>');o.find(".cp-faq-question").empty().append(i.get("faqs")[s].question),u.find(".cp-faq-answer").empty().append(i.get("faqs")[s].answer),a.append(o),a.append(u),r.find(".cp-container").append(a)}var f=e.data.cpLanguageMapping.getLabelForKey("cp.faq.Q"),l=e.data.cpLanguageMapping.getLabelForKey("cp.faq.A");$(".cp-questions").empty().append(f===undefined?"Q: ":f+": "),$(".cp-ans").empty().append(l===undefined?"A: ":l+": ")}}},retrieveFAQs:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.FAQSuccessHandler,this.FAQErrorHandler,e.localURLs.FAQ_JSON,{},this);else{if(this.options.type==="postlogin")var t=e.data.cpPostFAQCollection.createRequest(this.options.type);else if(this.options.type==="prelogin")var t=e.data.cpPreFAQCollection.createRequest(this.options.type);e.root.common.networkingservice.postRequest(t,this.FAQSuccessHandler,this.FAQErrorHandler,e.localURLs.FAQ_JSON,{},this)}},FAQSuccessHandler:function(t){t.successResponse?(this.options.type==="postlogin"?e.data.cpPostFAQCollection.setResponse(t.successResponse,this.options.type):this.options.type==="prelogin"&&e.data.cpPreFAQCollection.setResponse(t.successResponse,this.options.type),this.options.type==="postlogin"?this.render():this.appendFAQs()):t.errorResponse&&this.FAQErrorHandler(t)},FAQErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onCloseClicked:function(){document.getElementsByClassName("cp-faq-container")[0].removeEventListener("touchstart",function(e){}),this.options.parent.dismissModalView(this,!0)},redirectToSecurityCenter:function(){return e.redirectURLs.SECURITY_CENTER},redirectToFullDesktopSite:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.FULL_DESKTOP_EN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.FULL_DESKTOP_SP:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.FULL_DESKTOP_FR:e.redirectURLs.FULL_DESKTOP_EN},redirectToTermsConditions:function(){e.root.utils.redirectTOURL(e.redirectURLs.TC_LOGIN)},getPrivacyURL:function(){return this.currentLanguage===e.constants.LANGUAGE_EN?e.redirectURLs.PRIVACY_EN_LOGIN:this.currentLanguage===e.constants.LANGUAGE_SP?e.redirectURLs.PRIVACY_SP_LOGIN:this.currentLanguage===e.constants.LANGUAGE_FR?e.redirectURLs.PRIVACY_FR_LOGIN:e.redirectURLs.PRIVACY_EN_LOGIN},performDisclaimerCheck:function(t){t.preventDefault();if($(t.target).is("a")){var n=$(t.target).attr("href");if(typeof n!=typeof undefined&&n!==!1)if(e.root.utils.isWhiteListedURL(n))$(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",n)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden");else{var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,r,"",null,null,{url:n,element:$(t.target)},!0)}}},confirmDisclaimerHandler:function(e){var t=e.url?e.url:"",n=e.element;n?($(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",t)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden")):$("<a>").attr("href",t).attr("target","_blank")[0].click()},cancelDisclaimerHandler:function(e){}})}}),define("cp.views.cpContactUsView",[],function(){return function(e){e.views.cpContactUsView=CT.View.extend({initialize:function(){this.retrieveContactInfo()},events:{},render:function(){this.$el.empty().append(e.templates.cpContactUs({model:e.data.cpContactUsDetails.get("contact-info")})),$(".cp-phone").wrapInner('<a href="tel:'+e.data.cpContactUsDetails.get("contact-info")[0].phoneNumber+'" />'),$(".cp-mail").wrapInner('<a href="../contactus" target="_blank" />');var t=e.data.cpLanguageMapping.getLabelForKey("common.contact_us");$(".cp-menu-title").html(t)},retrieveContactInfo:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.ContactUsSuccessHandler,this.ContactUsErrorHandler,e.localURLs.CONTACT_US_JSON,{},this);else{var t=e.data.cpContactUsDetails.createRequest(this.options.type);e.root.common.networkingservice.postRequest(t,this.ContactUsSuccessHandler,this.ContactUsErrorHandler,e.localURLs.CONTACT_US_JSON,{},this)}},ContactUsSuccessHandler:function(t){t.successResponse?(e.data.cpContactUsDetails.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.ContactUsErrorHandler(t)},ContactUsErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpDisclosuresAndFeesView",[],function(){return function(e){e.views.cpDisclosuresAndFees=CT.View.extend({initialize:function(){this.retrieveDisclosureFeeDetails()},events:{},render:function(){this.$el.empty().append(e.templates.cpDisclosuresAndFees());var t=e.data.cpDisclosuresAndFees,n=e.data.cpLanguageMapping.getLabelForKey("cp.disclosures.fees");$(".cp-menu-title").html(n);for(var r=0;r<t.length;r++){var i=$('<div class = "cp-content"></div>');i.addClass("category"+r),i.append(e.templates.cpDisclosuresAndFeesCategory({model:t.at(r)})),this.$el.find(".cp-disclosure-fee-categories").append(i);var s=t.at(r);if(s&&s.get("disclosure-fees")&&s.get("disclosure-fees").length)for(var o=0;o<s.get("disclosure-fees").length;o++){var u=$('<div class="container cp-disclosure-children"><div class="row"><div class="cell  line cp-disclosurefee-column1"></div><div class="cell  cp-disclosurefee-column2"></div></div></div>');u.find(".row").addClass("row"+o),u.find(".cp-disclosurefee-column1").empty().append(s.get("disclosure-fees")[o].description),u.find(".cp-disclosurefee-column2").empty().append(s.get("disclosure-fees")[o].amount),i.find(".cp-disclosure-container").append(u)}}t.length===0&&this.$el.find(".cp-description-header").parent().hide(),t.length===1&&s.get("disclosure-fees").length==0&&s.get("fee-category")==""&&this.$el.find(".cp-fees-container").parent().hide();var a=e.data.cpDisclosureAndFeesMessages;for(var r=0;r<a.length;r++){var f=$('<div class="row"><div class="cell cp-disclosurefee-message"></div></div>');f.find(".cp-disclosurefee-message").empty().append(a[r].label),this.$el.find(".cp-message-container").append(f)}},retrieveDisclosureFeeDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.DisclosuresAndFeesSuccessHandler,this.DisclosuresAndFeesErrorHandler,e.localURLs.DISCLOSUREFEE_JSON,{},this);else{var t=e.data.cpDisclosuresAndFees.createRequest();e.root.common.networkingservice.postRequest(t,this.DisclosuresAndFeesSuccessHandler,this.DisclosuresAndFeesErrorHandler,e.localURLs.DISCLOSUREFEE_JSON,{},this)}},DisclosuresAndFeesSuccessHandler:function(t){if(t.successResponse){e.data.cpDisclosuresAndFees.setResponse(t.successResponse);if(t.successResponse.type=="2"){this.$el.empty().append(e.templates.cpDisclosuresAndFees());var n=t.successResponse.feeHtml;this.$el.find(".container").parent().hide(),this.$el.find(".cp-disclosurefee-section").append(n)}else this.render();e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.DisclosuresAndFeesErrorHandler(t)},DisclosuresAndFeesErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpTermsAndConditionsView",[],function(){return function(e){e.views.cpTermsAndConditionsView=CT.View.extend({initialize:function(){var t=e.data.cpLanguageMapping.get("currentLanguage");_.size(e.data.cpLanguageMapping.get(t))===0&&e.root.utils.getMultilanguageMapping(e,this),this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),e.data.cpSessionController.resetTimeout(),this.options.type===e.constants.LOGIN&&this.listenTo(e.root.eventBus,"cp:logoutEvent",this.clearData)},events:{"click .cp-tc-cancel-button":"navigatetologin","click .cp-tc-continue-button":"navigatetoAcc","click .cp-tc-checkbox":"checktickimage","click .cp-pre-tc-content":"performDisclaimerCheck","click .cp-post-tc-content":"performDisclaimerCheck"},render:function(){if(this.options.type===e.constants.LOGIN||this.options.type===e.constants.SSO_LOGIN||this.options.type===e.constants.CLAIMCODE_LOGIN||this.options.type===e.constants.EXPRESSLOGIN){this.$el.empty().append(e.templates.cpTermsAndConditionsPreLoginView());var t=e.data.cpLanguageMapping.getLabelForKey("default.terms.disclaimar"),n=e.data.cpSettings.get("termsAndConditionContent"),r=$("<p style='padding:10px 5px'>"+t+"</p>");this.$el.find(".cp-pre-tc-content").append(r),this.$el.find(".cp-pre-tc-content").append(n);var i=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),s=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),o=new Date,u=o.getFullYear();this.$el.find(".cp-footer-row2").html(i+" "+u+" "+s)}else this.retrievePostTC(),e.root.utils.updateLanguageLabels(e,this);var a=e.data.cpLanguageMapping.getLabelForKey("notification.terms_and_conditions");$(".cp-menu-title").html(a)},navigatetologin:function(t){$(t.currentTarget).addClass("cp-button-selected"),e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")},navigatetoAcc:function(t){this.$el.find(".cp-tc-continue-button").addClass("cp-button-selected");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onTCSuccessHandler,this.onTCErrorHandler,e.localURLs.TERMSCONDITIONS_JSON,{},this);else{var n={},r={};r.action={},r.data={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.ACKNOWLEDGE_TERMS,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data.termsAndConditionsAcknowledged="Y",n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.onTCSuccessHandler,this.onTCErrorHandler,e.localURLs.TERMSCONDITIONS_JSON,{},this)}},onTCSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.status;n=="success"&&(this.options.type===e.constants.SSO_LOGIN?(e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu")):this.options.type===e.constants.EXPRESSLOGIN?(e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-AccountDetails-Menu")):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="Y"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_CONFIRMATION,this.options.type)):e.data.cpPaymentClaim&&e.data.cpPaymentClaim.get("redeemed")==="N"?(e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.PAYMENTCLAIM_ACTIVATION,this.options.type)):(e.root.utils.destroyView(this),e.data.cpSettings.reloadMenu("cp-shopnow-Menu")))}else t.errorResponse&&this.onTCErrorHandler(t)},onTCErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrievePostTC:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPostTCSuccessHandler,this.onPostTCErrorHandler,e.localURLs.POST_TC_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_TERMS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.onPostTCSuccessHandler,this.onPostTCErrorHandler,e.localURLs.POST_TC_JSON,{},this)}},onPostTCSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse;if(n.termsAndConditions&&n.termsAndConditions.content!==undefined){var r=e.data.cpLanguageMapping.getLabelForKey("default.terms.disclaimar"),i=n.termsAndConditions.content;this.$el.empty().append(e.templates.cpTermsAndConditionsPostLoginView());var s=$("<p style='border:1px solid #006; padding:10px 5px;width: 96%;'>"+r+"</p>");this.$el.find(".cp-post-tc-content").append(s),this.$el.find(".cp-post-tc-content").append(i),e.root.utils.updateLanguageLabels(e,this)}}else t.errorResponse&&this.onPostTCErrorHandler(t)},onPostTCErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},checktickimage:function(){$(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-tc-continue-button").toggleClass("cp-backgroundcolor1"),this.$el.find(".cp-tc-continue-button").toggleClass("uiDisabled")},clearData:function(){e.root.utils.destroyView(this)},languageMappingSuccessHandler:function(t){t.successResponse?(e.data.cpLanguageMapping.setResponse(t.successResponse),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.languageErrorhandler(t)},languageErrorhandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},performDisclaimerCheck:function(t){t.preventDefault();if($(t.target).is("a")){var n=$(t.target).attr("href");if(typeof n!=typeof undefined&&n!==!1)if(e.root.utils.isWhiteListedURL(n))$(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",n)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden");else{var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,r,"",null,null,{url:n,element:$(t.target)},!0)}}},confirmDisclaimerHandler:function(e){var t=e.url?e.url:"",n=e.element;n?($(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",t)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden")):$("<a>").attr("href",t).attr("target","_blank")[0].click()},cancelDisclaimerHandler:function(e){}})}}),define("cp.views.cpPrivacyView",[],function(){return function(e){e.views.cpPrivacyView=CT.View.extend({initialize:function(){this.render()},events:{},render:function(){}})}}),define("cp.views.cpBankTransferBaseView",[],function(){return function(e){e.views.cpBankTransferBaseView=CT.View.extend({initialize:function(){this.type=e.constants.ADDBANK,this.render(),e.root.utils.updateLanguageLabels(e,this),e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),this.listenTo(e.root.eventBus,"cp:exitBankTransfer",this.exitBankTransfer),this.listenTo(e.root.eventBus,"cp:reloadBankTransfer",this.reloadBankTransfer),this.retreiveBankTransfer(),this.listenTo(e.root.eventBus,"cp:DeleteBank",this.goToDeleteBankInfo)},events:{},retreiveBankTransfer:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveBTSuccessHandler,this.retrieveBTErrorHandler,e.localURLs.RETRIEVEBANKTRANSFERTC_JSON,{},this);else{var t=e.data.cpBankDetails.retrieveBankTransferSettings("ACH");this.options.origin===e.constants.ACCOUNT_DETAILS&&(t=e.data.cpBankDetails.retrieveBankTransferSettings("triggerACH")),t.inputRequest.data={},t.inputRequest.data.devicePrint=$("#devicePrintId").val(),t.inputRequest.data.rsaToken=$("#RSADeviceFso").val(),e.root.common.networkingservice.postRequest(t,this.retrieveBTSuccessHandler,this.retrieveBTErrorHandler,e.localURLs.RETRIEVEBANKTRANSFERTC_JSON,{},this)}},retrieveBTSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.mfaAuthenticationCode?t.successResponse.mfaAuthenticationCode:e.constants.MFA_NONE;t.successResponse.bankInfo?(e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpBankDetails.setResponse(t.successResponse),e.data.cpBankDetails.setBankDetails(t.successResponse.bankInfo),e.data.cpWithdrawalDetails.setRecurringWithdrawalEnabled(t.successResponse),e.data.cpWithdrawalDetails.setACHFee(t.successResponse),this.options.origin===e.constants.ACCOUNT_DETAILS?(e.data.cpMFAAuthentication.setResponse(t.successResponse),this.type=e.constants.EDITBANK,this.triggerMFAView(n,t)):this.loadScheduleWithdrawal()):(e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpMFAAuthentication.setResponse(t.successResponse),this.triggerMFAView(n,t))}else this.retrieveBTErrorHandler(t)},retrieveBTErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},loadScheduleWithdrawal:function(){this.$el.find(".cp-banktransfer-baseView").empty().append('<div id="cp-bank-transfer-section"></div>'),new e.views.cpScheduleWithdrawalView({el:"#cp-bank-transfer-section"})},triggerMFAView:function(t,n){switch(t){case e.constants.MFA_CHALLENGE_QUESTION:this.$el.find(".cp-banktransfer-baseView").append('<div id="cp-bank-transfer-section"></div>'),new e.views.cpMFAChallengeQuestionView({el:"#cp-bank-transfer-section",context:{type:this.type,origin:this.options.origin}});break;case e.constants.MFA_ONETIMEPASSWORD:this.$el.find(".cp-banktransfer-baseView").append('<div id="cp-bank-transfer-section"></div>'),new e.views.cpMFAOTPView({el:"#cp-bank-transfer-section",context:{type:this.type,origin:this.options.origin}});break;case e.constants.MFA_NONE:e.data.cpBankDetails.setResponse(n.successResponse),e.data.cpWithdrawalDetails.setRecurringWithdrawalEnabled(n.successResponse),e.data.cpWithdrawalDetails.setACHFee(n.successResponse),this.type===e.constants.EDITBANK?(this.$el.find(".cp-banktransfer-baseView").append('<div id="cp-bank-transfer-section"></div>'),new e.views.cpEditBankDetailsView({el:"#cp-bank-transfer-section",context:{origin:this.options.origin}})):(this.$el.find(".cp-banktransfer-baseView").append('<div id="cp-bank-transfer-section"></div>'),new e.views.cpWithdrawalTCView({el:"#cp-bank-transfer-section",context:{origin:this.options.origin}}));break;default:}},render:function(){this.$el.empty().append(e.templates.cpBankTransferBaseView())},exitBankTransfer:function(){e.data.cpBankDetails?e.data.cpBankDetails.setDefaults():"",e.data.cpWithdrawalDetails?e.data.cpWithdrawalDetails.setDefaults():"",e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")},reloadBankTransfer:function(){e.data.cpBankDetails?e.data.cpBankDetails.setDefaults():"",e.data.cpWithdrawalDetails?e.data.cpWithdrawalDetails.setDefaults():"",e.root.utils.destroyView(this),e.root.eventBus.trigger("loadMenuItem","cp-bankTransfer-Menu")},goToDeleteBankInfo:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onDeleteSuccessHandler,this.onDeleteErrorHandler,e.localURLs.DELETE_BANK_INFO,{},this);else{var n=e.data.cpBankDetails.deleteBankDetails();e.root.common.networkingservice.postRequest(n,this.onDeleteSuccessHandler,this.onDeleteErrorHandler,e.localURLs.DELETE_BANK_INFO,{},this)}},onDeleteSuccessHandler:function(t){if(t.successResponse){e.data.cpBankDetails.setDefaults();var n=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.addNewBankInfo"),r="";e.root.common.Alertservice.showDeleteWarning(this,n,r,"",this.navigateToAcntInfo,this.navigateToAcntDetail,"",!1,"Add Details")}else this.onDeleteErrorHandler(t)},navigateToAcntInfo:function(){e.root.eventBus.trigger("cp:reloadBankTransfer","cp-bankTransfer-Menu")},navigateToAcntDetail:function(){e.root.eventBus.trigger("cp:exitBankTransfer")},onDeleteErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpCurrentWithdrawalSettingsView",[],function(){return function(e){e.views.cpCurrentWithdrawalSettingsView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button":"performCancel","click .cp-editBankInfo-button":"editBankInformation","click .cp-continue-button":"deleteWithdrawal","click .editRecurringDetails":"navigateRecurring"},performCancel:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.utils.navigateView(this,"cpScheduleWithdrawalView",e,{})},render:function(){var t=e.data.cpBankDetails.get("canadianProgram"),n=e.data.cpWithdrawalDetails.get("isSameDayACHOn");this.$el.empty().append(e.templates.cpCurrentWithdrawalSettings({canadianProgram:t,isSameDayAchOn:n})),this.setBankInfo(),this.$el.find(".cp-recurring-amount").text(e.data.cpWithdrawalDetails.get("recurringPercent").concat("%"));var r=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.withdrawalSettings");$(".cp-menu-title").html(r)},navigateRecurring:function(t){e.root.utils.navigateView(this,"cpRecurringWithdrawalView",e,{})},setBankInfo:function(){var t=e.data.cpBankDetails,n=e.root.utils.maskCardNumber(t.get("accountNumber")),r=t.get("accountType");r=="c"||r=="C"?this.$el.find(".cp-account-type").text("Checking"):(r=="s"||r=="S")&&this.$el.find(".cp-account-type").text("Saving"),this.$el.find(".cp-bank-name").text(t.get("bankName")),t.get("canadianProgram")=="Y"?(this.$el.find(".cp-transit").text(e.root.utils.maskCardNumber(t.get("transitNumber"))),this.$el.find(".cp-institution-number").text(e.root.utils.maskCardNumber(t.get("institutionNumber")))):t.get("canadianProgram")=="N"&&this.$el.find(".cp-routing-number").text(e.root.utils.maskCardNumber(t.get("routingNumber"))),this.$el.find(".cp-account-number").text(n)},deleteWithdrawal:function(t){t.preventDefault(),t.stopPropagation();var n=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.cancelScheduledWithdrawal"),r="";e.root.common.Alertservice.showDeleteWarning(this,n,r,"",this.cancelWithdrawal,"",null,"",!1)},cancelWithdrawal:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.cancelWithdrawalSuccessHandler,this.cancelWithdrawalErrorHandler,e.localURLs.RECURRINGWITHDRAWAL_JSON,{},this);else{var t=e.data.cpWithdrawalDetails.cancelExistingWithdrawal();e.root.common.networkingservice.postRequest(t,this.cancelWithdrawalSuccessHandler,this.cancelWithdrawalErrorHandler,e.localURLs.RECURRINGWITHDRAWAL_JSON,{},this)}},cancelWithdrawalSuccessHandler:function(t){t.successResponse?(e.data.cpWithdrawalDetails.setCurrentWithdrawal({}),e.root.utils.navigateView(this,"cpScheduleWithdrawalView",e,{})):this.cancelWithdrawalErrorHandler(t)},cancelWithdrawalErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},editBankInformation:function(){$(".cp-edit-button").addClass("cp-button-selected");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retreiveMFASuccessHandler,this.retreiveMFAErrorHandler,e.localURLs.EDIT_MFA_RESPONSE,{},this);else{var t=this.requestMFA();e.root.common.networkingservice.postRequest(t,this.retreiveMFASuccessHandler,this.retreiveMFAErrorHandler,e.localURLs.EDIT_MFA_RESPONSE,{},this)}},requestMFA:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.EDIT_BANKINFO_MFA,n.action.type=e.constants.UPDATE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.devicePrint=$("#devicePrintId").val(),n.data.rsaToken=$("#RSADeviceFso").val(),t.inputRequest=n,t},retreiveMFASuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t)}else this.retreiveMFAErrorHandler(t)},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:e.root.utils.navigateView(this,"cpEditBankDetailsView",e,{origin:"cpCurrentWithdrawalSettingsView"});break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:e.constants.EDITBANK,origin:"cpCurrentWithdrawalSettingsView"});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:e.constants.EDITBANK,origin:"cpCurrentWithdrawalSettingsView"});break;default:}},retreiveMFAErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpWithdrawalTCView",[],function(){return function(e){e.views.cpWithdrawalTCView=CT.View.extend({initialize:function(){this.canadianUser="N",this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-tc-checkbox":"checktickimage","click .cp-continue-button-bankTransfer":"navigateNext","click .cp-info":"presentCheck","click .cp-cancel-button-bankTransfer":"performCancel","focus #accountNumber,#routingNumber,#transitNumber,#institutionNumber":"focusCardDetails","blur #accountNumber,#routingNumber,#transitNumber,#institutionNumber":"blurCardDetails","touchmove .cp-transferfunds-container":e.root.utils.dismissKeyboard,"click .cp-pre-tc-content":"performDisclaimerCheck"},render:function(){var t=e.data.cpBankDetails.get("termsAndConditionContent");this.canadianUser=e.data.cpBankDetails.get("canadianProgram"),this.$el.empty().append(e.templates.cpTransferFundsTermsandConditions({canadianUser:this.canadianUser})),this.$el.find(".cp-pre-tc-content").empty().append(t);var n=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.accountInfo");$(".cp-menu-title").html(n)},performDisclaimerCheck:function(t){t.preventDefault();if($(t.target).is("a")){var n=$(t.target).attr("href");if(typeof n!=typeof undefined&&n!==!1)if(e.root.utils.isWhiteListedURL(n))$(".cp-redirect").removeClass("hidden"),$(".cp-redirect").attr("href",n)[0].click(),$(".cp-redirect").attr("href","#"),$(".cp-redirect").addClass("hidden");else{var r=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,r,"",null,null,{url:n,element:$(t.target)},!0)}}},checktickimage:function(){$(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("cp-backgroundcolor1"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("uiDisabled")},removeHiglightedborder:function(){this.validateFlag=!0,this.$el.find("input").removeClass("cp-red-border").addClass("cp-gray-border"),this.$el.find("select").removeClass("cp-red-border").addClass("cp-gray-border"),this.$el.find("*[data-errorId='cp-error']").removeClass("show").addClass("hidden")},navigateNext:function(t){var n=$("input[name=accountType]:checked").val();if(n=="Checking account")var r=e.constants.CHECKING;else if(n=="Savings account")var r=e.constants.SAVINGS;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();var i,s=this.$el.find("#bankName").val();if(this.canadianUser=="N")var o=e.root.utils.trimText(this.$el.find("#routingNumber").attr("data-val"));else if(this.canadianUser=="Y")var u=e.root.utils.trimText(this.$el.find("#transitNumber").attr("data-val")),a=e.root.utils.trimText(this.$el.find("#institutionNumber").attr("data-val"));var f=e.root.utils.trimText(this.$el.find("#accountNumber").attr("data-val"));this.removeHiglightedborder();var l=[];i=e.root.utils.isEmptyString(s);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validBankRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#bankName").val("");return}if(!i&&s.length<2||!i&&s.length>30){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validBankRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#bankName").val("");return}if(this.canadianUser=="Y"){i=e.root.utils.isEmptyString(u);if(i){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidTransitNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#transitNumber").val(""),this.$el.find("#transitNumber").attr("data-val","");return}if(!i&&u.length!=5||!i&&!$.isNumeric(u)){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidTransitNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#transitNumber").val(""),this.$el.find("#transitNumber").attr("data-val","");return}i=e.root.utils.isEmptyString(a);if(i){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidInstitutionNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#institutionNumber").val(""),this.$el.find("#institutionNumber").attr("data-val","");return}if(!i&&a.length<3||!i&&a.length>4||!i&&!$.isNumeric(a)){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidInstitutionNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#institutionNumber").val(""),this.$el.find("#institutionNumber").attr("data-val","");return}i=e.root.utils.isEmptyString(f);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumber").attr("data-val","");return}if(!i&&f.length>12||!i&&f.length<4||!i&&!$.isNumeric(f)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find("#accountNumber").val("");return}}else if(this.canadianUser=="N"){i=e.root.utils.isEmptyString(o);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.validRoutingNumberRqrd");e.root.common.Alertservice.showAlert(c),this.$el.find("#routingNumber").val(""),this.$el.find("#routingNumber").attr("data-val","");return}if(!i&&o.length!=9||!i&&!$.isNumeric(o)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.validRoutingNumberRqrd");e.root.common.Alertservice.showAlert(c),this.$el.find("#routingNumber").val(""),this.$el.find("#routingNumber").attr("data-val","");return}i=e.root.utils.isEmptyString(f);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumber").attr("data-val","");return}if(!i&&f.length>17||!i&&f.length<4||!i&&!$.isNumeric(f)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find("#accountNumber").val("");return}}var p={};p.accountType=r,p.termsAcknowledged="Y",p.bankName=this.$el.find("#bankName").val(),p.accountNumber=e.root.utils.trimText(this.$el.find("#accountNumber").attr("data-val")),p.canadianProgram=this.canadianUser,this.canadianUser=="Y"?(p.institutionNumber=e.root.utils.trimText(this.$el.find("#institutionNumber").attr("data-val")),p.transitNumber=e.root.utils.trimText(this.$el.find("#transitNumber").attr("data-val"))):this.canadianUser=="N"&&(p.routingNumber=e.root.utils.trimText(this.$el.find("#routingNumber").attr("data-val"))),e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpBankDetails.setBankDetails(p);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onvalidateSuccessHandler,this.onvalidateErrorHandler,e.localURLs.ADDBANKTRANSFER_JSON,{},this);else{var d=e.data.cpBankDetails.getBankDetails();this.options.context.origin===e.constants.ACCOUNT_DETAILS&&(d.inputRequest.action.type="triggerACH"),e.root.common.networkingservice.postRequest(d,this.onvalidateSuccessHandler,this.onvalidateErrorHandler,e.localURLs.ADDBANKTRANSFER_JSON,{},this)}},onvalidateSuccessHandler:function(t){t.successResponse?this.options.context.origin==e.constants.ACCOUNT_DETAILS?e.root.utils.navigateView(this,e.constants.ACCOUNT_DETAILS,e,{}):e.root.utils.navigateView(this,"cpScheduleWithdrawalView",e,{type:""}):t.errorResponse?this.onvalidateErrorHandler(t):this.onvalidateErrorHandler(t)},onvalidateErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},presentCheck:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),setTimeout(function(){n.presentModalView(e.views.cpModalView,{type:"check"},!0,n.modalDismissed,!0)},300)},modalDismissed:function(){$("#modalElement").removeClass("cp-modal-element-transparent-background")},performCancel:function(t){this.options.context.origin===e.constants.ACCOUNT_DETAILS?e.root.utils.navigateView(this,e.constants.ACCOUNT_DETAILS,e,{}):e.root.eventBus.trigger("cp:exitBankTransfer")},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))}})}}),define("cp.views.cpModalView",[],function(){return function(e){e.views.cpModalView=CT.View.extend({initialize:function(){this.render(),e.data.cpSessionController||(e.data.cpSessionController=new e.models.cpSessionController),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.goToMobileLogin)},events:{"click .cp-cancel-modal":"dismissModal"},render:function(){var t=this;$("#modalElement").addClass("cp-modal-element-transparent-background"),this.$el.empty().append(e.templates.cpModalView()),setTimeout(function(){t.$el.find(".cp-modal-view-container").addClass("cp-transparent")},900),this.options.type==="check"?e.data.cpBankDetails.get("canadianProgram")==="Y"?this.$el.find(".cp-modal-content").addClass("cp-modal-content-check-CA"):this.$el.find(".cp-modal-content").addClass("cp-modal-content-check"):this.options.type==="card"?this.$el.find(".cp-modal-content").addClass("cp-modal-content-card"):this.options.type==="ACH"&&(e.data.cpPaymentChoiceBankDetailsModel.get("canadianProgram")==="Y"?this.$el.find(".cp-modal-content").addClass("cp-modal-content-check-CA"):this.$el.find(".cp-modal-content").addClass("cp-modal-content-check"))},dismissModal:function(){this.$el.find(".cp-modal-view-container").removeClass("cp-transparent").addClass("cp-modal-element-transparent-background"),this.options.parent.dismissModalView(this,!0)},goToMobileLogin:function(){this.options.parent.dismissModalView(this,!1)}})}}),define("cp.views.cpScheduleWithdrawalView",[],function(){return function(e){e.views.cpScheduleWithdrawalView=CT.View.extend({initialize:function(){this.retreiveBankTransfer(),this.canadianUser="N",this.type=""},events:{"click .cp-edit-button":function(){this.editBankInformation(e.constants.EDITBANK)},"click .cp-delete-button":"deleteBankInfo","click .cp-recurring-withdrawal-button":"loadRecurringWithdrawal","click .cp-oneTime-withdrawal-button":"loadOneTimeWithdrawal"},retreiveBankTransfer:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveBTSuccessHandler,this.retrieveBTErrorHandler,e.localURLs.RETRIEVE_BANKSETTINGS,{},this);else{var t=e.data.cpBankDetails.retrieveBankTransferSettings("ACH");t.inputRequest.data={},t.inputRequest.data.devicePrint=$("#devicePrintId").val(),t.inputRequest.data.rsaToken=$("#RSADeviceFso").val(),e.root.common.networkingservice.postRequest(t,this.retrieveBTSuccessHandler,this.retrieveBTErrorHandler,e.localURLs.RETRIEVE_BANKSETTINGS,{},this)}},retrieveBTSuccessHandler:function(t){t.successResponse?t.successResponse.bankInfo&&(e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),e.data.cpBankDetails.setResponse(t.successResponse),e.data.cpBankDetails.setBankDetails(t.successResponse.bankInfo),e.data.cpWithdrawalDetails.setRecurringWithdrawalEnabled(t.successResponse),this.render()):this.retrieveBTErrorHandler(t)},retrieveBTErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},render:function(){var t=e.data.cpWithdrawalDetails.get("recurringWithdrawalEnabled"),n=e.data.cpWithdrawalDetails.get("oneTimeWithdrawal"),r=e.data.cpBankDetails;this.$el.empty().append(e.templates.cpBankDetailsView({setting:r})),e.root.utils.updateLanguageLabels(e,this),t==="N"&&this.$el.find(".cp-recurring-withdrawal-button").addClass("hidden"),n==="N"&&this.$el.find(".cp-oneTime-withdrawal-button").addClass("hidden"),this.canadianUser=r.get("canadianProgram"),this.setBankInfo();var i=e.data.cpLanguageMapping.getLabelForKey("dashbord.transferfund_msg"),s=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.bankInfo");$(".cp-menu-title").html(i+" : "+s)},setBankInfo:function(){var t=e.data.cpBankDetails,n=e.root.utils.maskCardNumber(t.get("accountNumber")),r=t.get("accountType");r=="C"||r=="c"?this.$el.find(".cp-account-type").text(e.data.cpLanguageMapping.getLabelForKey("ieft-field-value-AccountType-C")):(r=="S"||r=="s")&&this.$el.find(".cp-account-type").text(e.data.cpLanguageMapping.getLabelForKey("ieft-field-value-AccountType-S")),this.$el.find(".cp-bank-name").text(t.get("bankName")),this.$el.find(".cp-account-number").text(n),t.get("canadianProgram")=="Y"?(this.$el.find(".cp-transit").text(e.root.utils.maskCardNumber(t.get("transitNumber"))),this.$el.find(".cp-institution-number").text(e.root.utils.maskCardNumber(t.get("institutionNumber")))):t.get("canadianProgram")=="N"&&this.$el.find(".cp-routing-number").text(e.root.utils.maskCardNumber(t.get("routingNumber")))},editBankInformation:function(t){this.type=t;var n=this.retreiveMFASuccessHandler;this.type===e.constants.EDITBANK?n=this.retreiveMFASuccessHandler:n=this.retreiveDeleteMFASuccessHandler;if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(n,this.retreiveMFAErrorHandler,e.localURLs.EDIT_MFA_RESPONSE,{},this);else{var r=this.requestMFA();e.root.common.networkingservice.postRequest(r,n,this.retreiveMFAErrorHandler,e.localURLs.EDIT_MFA_RESPONSE,{},this)}},requestMFA:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.EDIT_BANKINFO_MFA,this.type==e.constants.EDITBANK?n.action.type=e.constants.UPDATE:n.action.type=e.constants.DELETE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.devicePrint=$("#devicePrintId").val(),n.data.rsaToken=$("#RSADeviceFso").val(),t.inputRequest=n,t},retreiveMFASuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t)}else this.retreiveMFAErrorHandler(t)},retreiveDeleteMFASuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t,e.constants.DELETE)}else this.retreiveMFAErrorHandler(t)},mfaauthenticationType:function(t,n,r){switch(t){case e.constants.MFA_NONE:r===e.constants.DELETE?e.root.eventBus.trigger("cp:DeleteBank"):e.root.utils.navigateView(this,"cpEditBankDetailsView",e,{origin:"cpScheduleWithdrawalView"});break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:this.type,origin:"cpScheduleWithdrawalView"});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:this.type,origin:"cpScheduleWithdrawalView"});break;case e.constants.MFA_CHALLENGE_COLLECT:e.root.utils.navigateView(this,"cpMFAChallengeCollectView",e,{type:this.type,origin:"cpScheduleWithdrawalView"});break;default:}},retreiveMFAErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},deleteBankInfo:function(t){var n=e.data.cpLanguageMapping.getLabelForKey("cp.withdraw.ach.delete_bank.confirm.param"),r="";e.root.common.Alertservice.showDeleteWarning(this,n,r,"",function(){this.editBankInformation(e.constants.DELETEBANK)},null,"",!1)},loadRecurringWithdrawal:function(){this.$el.find(".cp-recurring-withdrawal-button").addClass("cp-button-selected"),this.retrieveCurrentWithdrawalSettings()},loadOneTimeWithdrawal:function(){this.$el.find(".cp-oneTime-withdrawal-button").addClass("cp-button-selected"),e.root.utils.navigateView(this,"cpOneTimeWithdrawalView",e,{canadianUser:this.canadianUser,type:e.constants.NONE})},retrieveCurrentWithdrawalSettings:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.recurringWithdrawalSuccessHandler,this.recurringWithdrawalErrorHandler,e.localURLs.RECURRINGWITHDRAWAL_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RECURRING_WITHDRAWALSETTINGS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.recurringWithdrawalSuccessHandler,this.recurringWithdrawalErrorHandler,e.localURLs.RECURRINGWITHDRAWAL_JSON,{},this)}},recurringWithdrawalSuccessHandler:function(t){t.successResponse?(e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),e.data.cpWithdrawalDetails.setRecurringResponse(t.successResponse),e.data.cpWithdrawalDetails.setCurrentWithdrawal(t.successResponse.currentWithdrawal),this.navigateNext()):t.errorResponse?this.recurringWithdrawalErrorHandler(t):this.recurringWithdrawalErrorHandler(t)},recurringWithdrawalErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},navigateNext:function(){var t=e.data.cpWithdrawalDetails.get("frequency"),n=e.data.cpWithdrawalDetails.get("recurringPercent");t&&n?e.root.utils.navigateView(this,"cpCurrentWithdrawalSettingsView",e,{}):e.root.utils.navigateView(this,"cpRecurringWithdrawalView",e,{})}})}}),define("cp.views.cpRecurringWithdrawalView",[],function(){return function(e){e.views.cpRecurringWithdrawalView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button":"loadAccountTransaction","click .cp-continue-button":"loadConfirmWithdrawal","change input[type=radio]":"changedRadio"},changedRadio:function(){$('[name=cp-amount-percentage-value][value="0"]').prop("checked")?$("[name=cp-amount-percentage-value-other]").prop("disabled",!1):($("[name=cp-amount-percentage-value-other]").prop("disabled",!0),$("[name=cp-amount-percentage-value-other]").val(""))},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.TransferFunds");$(".cp-menu-title").html(t),this.$el.empty().append(e.templates.cpRecurringWithdrawal());var n=e.data.cpWithdrawalDetails.get("maxAutoPercent");this.$el.find(".cp-maxAutoPercentValue-hidden").val(""),this.$el.find(".cp-maxAutoPercentValue-hidden").val(n),this.$el.find('[name=cp-amount-percentage-value][value="90"]').parent().show(),this.$el.find('[name=cp-amount-percentage-value][value="50"]').parent().show(),this.$el.find('[name=cp-amount-percentage-value][value="25"]').parent().show(),this.$el.find('[name=cp-amount-percentage-value][value="10"]').parent().show(),n>=50&&n<90?this.$el.find('[name=cp-amount-percentage-value][value="90"]').parent().hide():n>=25&&n<50?(this.$el.find('[name=cp-amount-percentage-value][value="90"]').parent().hide(),this.$el.find('[name=cp-amount-percentage-value][value="50"]').parent().hide()):n>=10&&n<25?($('[name=cp-amount-percentage-value][value="90"]').parent().hide(),$('[name=cp-amount-percentage-value][value="50"]').parent().hide(),$('[name=cp-amount-percentage-value][value="25"]').parent().hide()):n>0&&n<10&&($('[name=cp-amount-percentage-value][value="90"]').parent().hide(),$('[name=cp-amount-percentage-value][value="50"]').parent().hide(),$('[name=cp-amount-percentage-value][value="25"]').parent().hide(),$('[name=cp-amount-percentage-value][value="10"]').parent().hide(),$("[name=cp-amount-percentage-value-other]").prop("disabled",!1));if(e.data.cpWithdrawalDetails.get("recurringPercent")){var r=e.data.cpWithdrawalDetails.get("recurringPercent");$("[name=cp-amount-percentage-value][value="+r+"]").length>0?$("[name=cp-amount-percentage-value][value="+r+"]").prop("checked",!0):($("[name=cp-amount-percentage-value][value=0]").prop("checked",!0),$("[name=cp-amount-percentage-value-other]").prop("disabled",!1),$("[name=cp-amount-percentage-value-other]").val(r))}},loadAccountTransaction:function(t){$(document.activeElement).blur(),$("input[name=cp-amount-percentage-value]:checked").val(""),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.eventBus.trigger("cp:exitBankTransfer")},loadConfirmWithdrawal:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");var n=e.data.cpWithdrawalDetails.get("maxAutoPercent"),r="Recurring",i="",s="";s=$("input[name=cp-amount-percentage-value]:checked").val();if(s==0){var o="";o=e.root.utils.trimText(this.$el.find(".cp-amount-percentage-value-other-text").val());var u=e.root.utils.isEmptyString(o);if(u){var a=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.validPercentage");e.root.common.Alertservice.showAlert(a),this.$el.find(".cp-amount-percentage-value-other-text").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!$.isNumeric(o)||o.indexOf(".")!=-1){var a=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.validPercentage");e.root.common.Alertservice.showAlert(a),this.$el.find(".cp-amount-percentage-value-other-text").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!(o>0&&parseFloat(o)<=parseFloat(n))){var a=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.validPercentage");e.root.common.Alertservice.showAlert(a),this.$el.find(".cp-amount-percentage-value-other-text").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}s=o}i=s;var f={};f.type=r?r:"Recurring",f.recurringPercent=i?i:"",e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),e.data.cpWithdrawalDetails.setWithdrawalDetails(f,r),e.data.cpWithdrawalDetails.setRecurringPercent(f),e.root.utils.navigateView(this,"cpConfirmWithdrawalDetailsView",e,{})}})}}),define("cp.views.cpOneTimeWithdrawalView",[],function(){return function(e){e.views.cpOneTimeWithdrawalView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button":"loadAccountTransaction","click .cp-continue-button":"loadConfirmWithdrawal","change input[type=radio]":"loadFee"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.transferFunds");$(".cp-menu-title").html(t);var n=e.data.cpWithdrawalDetails.get("fullAmount").dollars,r=e.data.cpWithdrawalDetails.get("fullAmount").cents,i=e.data.cpWithdrawalDetails;this.$el.empty().append(e.templates.cpOneTimeWithdrawal({model:i}));if(this.options.context.type==e.constants.EDIT){this.$el.find(".cp-frequencyamount-text1").val(e.data.cpWithdrawalDetails.get("amount").dollars),this.$el.find(".cp-frequencyamount-text2").val(e.data.cpWithdrawalDetails.get("amount").cents);if(e.data.cpWithdrawalDetails.get("withdrawType")){var s=e.data.cpWithdrawalDetails.get("withdrawType");$("input[name='withdrawType'][value='"+s+"']").prop("checked",!0)}}else this.$el.find(".cp-frequencyamount-text1").val(""),this.$el.find(".cp-frequencyamount-text2").val("");var o=e.root.utils.isEmptyString(n),u=e.root.utils.isEmptyString(r),a=$("input[name=withdrawType]:checked").val();o&&u||o&&r==0||n==0&&u?($("[name=cp-frequencyamount-value1]").prop("disabled",!1),$("[name=cp-frequencyamount-value2]").prop("disabled",!1)):a==e.constants.STANDARD_ACH&&(this.$el.find(".cp-frequencyamount-text1").val(n),this.$el.find(".cp-frequencyamount-text2").val(r),$("[name=cp-frequencyamount-value1]").prop("disabled",!0),$("[name=cp-frequencyamount-value2]").prop("disabled",!0));var f=i.get("isSameDayACHOn");f!="Y"&&($(".cp-fee-label").removeClass("hidden"),e.data.cpWithdrawalDetails.get("stdPercentFee")>0?$(".cp-fee-value").text(e.data.cpWithdrawalDetails.get("stdPercentFee")+"%"):$(".cp-fee-value").text("$"+e.data.cpWithdrawalDetails.get("stdFixedFee"))),setTimeout(this.loadFee(),3e4)},loadAccountTransaction:function(t){$(document.activeElement).blur(),$("input[name=cp-amount-percentage-value]:checked").val(""),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.eventBus.trigger("cp:exitBankTransfer")},loadFee:function(t){var n=$("input[name=withdrawType]:checked").val(),r=e.data.cpWithdrawalDetails.get("fullAmount").dollars,i=e.data.cpWithdrawalDetails.get("fullAmount").cents,s=e.root.utils.isEmptyString(r),o=e.root.utils.isEmptyString(i);if(n==e.constants.STANDARD_ACH){$(".cp-fee-label").removeClass("hidden"),e.data.cpWithdrawalDetails.get("stdPercentFee")>0?$(".cp-fee-value").text(e.data.cpWithdrawalDetails.get("stdPercentFee")+"%"):$(".cp-fee-value").text("$"+e.data.cpWithdrawalDetails.get("stdFixedFee"));if(!s&&!o||!s&&i>0||r>0&&!o)this.$el.find(".cp-frequencyamount-text1").val(r),this.$el.find(".cp-frequencyamount-text2").val(i),$("[name=cp-frequencyamount-value1]").prop("disabled",!0),$("[name=cp-frequencyamount-value2]").prop("disabled",!0)}else if(n==e.constants.SAME_DAY_ACH){$(".cp-fee-label").removeClass("hidden"),e.data.cpWithdrawalDetails.get("sameDayPercentFee")>0?$(".cp-fee-value").text(e.data.cpWithdrawalDetails.get("sameDayPercentFee")+"%"):$(".cp-fee-value").text("$"+e.data.cpWithdrawalDetails.get("sameDayFixedFee"));if(!s&&!o||!s&&i>0||r>0&&!o)$("[name=cp-frequencyamount-value1]").prop("disabled",!1),$("[name=cp-frequencyamount-value2]").prop("disabled",!1)}},loadConfirmWithdrawal:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");var n="One time",r={},i="",s="",o="";i=e.root.utils.trimText(this.$el.find(".cp-frequencyamount-text1").val());var u=$("input[name=withdrawType]:checked").val(),a=e.data.cpWithdrawalDetails.get("isSameDayACHOn");this.$el.find(".cp-frequencyamount-text2").val().length==1?s=e.root.utils.trimText(this.$el.find(".cp-frequencyamount-text2").val()+"0"):s=e.root.utils.trimText(this.$el.find(".cp-frequencyamount-text2").val());var f=e.root.utils.isEmptyString(i),l=e.root.utils.isEmptyString(s);if(f&&l){var c=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.amountRequired");e.root.common.Alertservice.showAlert(c),this.$el.find(".cp-frequencyamount-text1").val(""),this.$el.find(".cp-frequencyamount-text2").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}f&&(i=0),l&&(s=0);if(!$.isNumeric(i)||!$.isNumeric(s)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.amountRequired");e.root.common.Alertservice.showAlert(c),this.$el.find(".cp-frequencyamount-text1").val(""),this.$el.find(".cp-frequencyamount-text2").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(a=="Y"&&u===undefined){var c=e.data.cpLanguageMapping.getLabelForKey("withdrawal.ach.type");e.root.common.Alertservice.showAlert(c),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}o=i+"."+s,r.dollars=i,r.cents=s;var h={};h.type=n?n:"",h.amount=r?r:"",h.withdrawType=u?u:e.constants.STANDARD_ACH,e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),e.data.cpWithdrawalDetails.setWithdrawalDetails(h,"One time");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.oneTimeWithdrawalSuccessHandler,this.oneTimeWithdrawalErrorHandler,e.localURLs.ONETIMEWITHDRAWAL_JSON,{},this);else{var p={},d={};d.action={},d.action.appName=e.constants.APP_NAME,d.action.criterion=e.constants.VALIDATE_AMOUNT_OT,d.action.language=e.data.cpLanguageMapping.get("currentLanguage"),d.data={},d.data.amount={},d.data.amount.dollars=i,d.data.amount.cents=s,d.data.withdrawType=u,p.inputRequest=d,e.root.common.networkingservice.postRequest(p,this.oneTimeWithdrawalSuccessHandler,this.oneTimeWithdrawalErrorHandler,e.localURLs.ONETIMEWITHDRAWAL_JSON,{},this)}},oneTimeWithdrawalSuccessHandler:function(t){t.successResponse?(e.data.cpWithdrawalDetails||(e.data.cpWithdrawalDetails=new e.models.cpWithdrawalDetails),e.data.cpWithdrawalDetails.setResponse(t.successResponse,"One time"),e.root.utils.updateLanguageLabels(e,this),e.root.utils.navigateView(this,"cpConfirmWithdrawalDetailsView",e,{})):t.errorResponse?this.oneTimeWithdrawalErrorHandler(t):this.oneTimeWithdrawalErrorHandler(t)},oneTimeWithdrawalErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}this.$el.find(".cp-continue-button").removeClass("cp-button-selected");if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")}})}}),define("cp.views.cpEditBankDetailsView",[],function(){return function(e){e.views.cpEditBankDetailsView=CT.View.extend({initialize:function(){this.canadianUser="N",this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button-editBankDetails":"performCancel","click .cp-continue-button-editBankDetails":"performUpdate","focus .cp-account-number,.cp-routing-number,.cp-transit,.cp-institution-number":"focusCardDetails","blur .cp-account-number,.cp-routing-number,.cp-transit,.cp-institution-number":"blurCardDetails","click .cp-info":"presentCheck","touchmove .cpEditBankDetailsView":e.root.utils.dismissKeyboard},render:function(){this.canadianUser=e.data.cpBankDetails.get("canadianProgram"),this.$el.empty().append(e.templates.cpEditBankDetailsView({canadianUser:this.canadianUser}));var t=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.updateBankInfo");$(".cp-menu-title").html(t),this.setBankInfo()},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},setBankInfo:function(){var t=e.data.cpBankDetails,n=e.root.utils.maskCardNumber(t.get("accountNumber"));t.get("accountType")==="s"||t.get("accountType")==="S"?this.$el.find("#cp-SavingsAccount").attr("checked",!0):this.$el.find("#cp-checkingAccount").attr("checked",!0),this.$el.find(".cp-account-number").attr("data-val",t.get("accountNumber")),this.$el.find(".cp-account-type").val(t.get("accountType")),this.$el.find(".cp-bank-name").val(t.get("bankName")),this.$el.find(".cp-account-number").val(n),this.canadianUser=t.get("canadianProgram");if(this.canadianUser=="Y"){this.$el.find(".cp-transit").attr("data-val",t.get("transitNumber"));var r=this.$el.find(".cp-transit").attr("data-val");this.$el.find(".cp-transit").val(e.root.utils.maskCardNumber(r)),this.$el.find(".cp-institution-number").attr("data-val",t.get("institutionNumber"));var i=this.$el.find(".cp-institution-number").attr("data-val");this.$el.find(".cp-institution-number").val(e.root.utils.maskCardNumber(i))}else if(this.canadianUser=="N"){this.$el.find(".cp-routing-number").attr("data-val",t.get("routingNumber"));var s=this.$el.find(".cp-routing-number").attr("data-val");this.$el.find(".cp-routing-number").val(e.root.utils.maskCardNumber(s))}},performCancel:function(){$(".cp-cancel-button-bankTransfer").addClass("cp-button-selected");if(this.options.context.origin&&this.options.context.origin==="cpScheduleWithdrawalView"){e.root.utils.destroyView(this),$(".cp-banktransfer-baseView").empty().append('<div id="cp-bank-transfer-section"></div>');var t=new e.views.cpScheduleWithdrawalView({el:"#cp-bank-transfer-section"})}else if(this.options.context.origin&&this.options.context.origin==="cpConfirmWithdrawalDetailsView"){e.root.utils.destroyView(this),$(".cp-banktransfer-baseView").empty().append('<div id="cp-bank-transfer-section"></div>');var t=new e.views.cpConfirmWithdrawalDetailsView({el:"#cp-bank-transfer-section"})}else if(this.options.context.origin&&this.options.context.origin===e.constants.ACCOUNT_DETAILS)e.root.utils.navigateView(this,e.constants.ACCOUNT_DETAILS,e,{});else{e.root.utils.destroyView(this),$(".cp-banktransfer-baseView").empty().append('<div id="cp-bank-transfer-section"></div>');var t=new e.views.cpScheduleWithdrawalView({el:"#cp-bank-transfer-section"})}},removeHiglightedborder:function(){this.validateFlag=!0,this.$el.find("input").removeClass("cp-red-border").addClass("cp-gray-border"),this.$el.find("select").removeClass("cp-red-border").addClass("cp-gray-border"),this.$el.find("*[data-errorId='cp-error']").removeClass("show").addClass("hidden")},performUpdate:function(t){var n=$("input[name=accountType]:checked").val();if(n=="Checking account")var r=e.constants.CHECKING;else if(n=="Savings account")var r=e.constants.SAVINGS;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();var i,s=this.$el.find("#bankNameEdit").val();if(this.canadianUser=="N")var o=e.root.utils.trimText(this.$el.find("#routingNumberEdit").attr("data-val"));else if(this.canadianUser=="Y")var u=e.root.utils.trimText(this.$el.find("#transitNumberEdit").attr("data-val")),a=e.root.utils.trimText(this.$el.find("#institutionNumberEdit").attr("data-val"));var f=e.root.utils.trimText(this.$el.find("#accountNumberEdit").attr("data-val"));this.removeHiglightedborder();var l=[];i=e.root.utils.isEmptyString(s);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validBankRequired");e.root.common.Alertservice.showAlert(c);return}if(!i&&s.length<2||!i&&s.length>30){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validBankRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#bankNameEdit").val("");return}if(this.canadianUser=="Y"){i=e.root.utils.isEmptyString(u);if(i){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidTransitNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#transitNumberEdit").val(""),this.$el.find("#transitNumberEdit").attr("data-val","");return}if(!i&&u.length!=5||!i&&!$.isNumeric(u)){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidTransitNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#transitNumberEdit").val(""),this.$el.find("#transitNumberEdit").attr("data-val","");return}i=e.root.utils.isEmptyString(a);if(i){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidInstitutionNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#institutionNumberEdit").val(""),this.$el.find("#institutionNumberEdit").attr("data-val","");return}if(!i&&a.length<3||!i&&a.length>4||!i&&!$.isNumeric(a)){var h=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidInstitutionNumber");e.root.common.Alertservice.showAlert(h),this.$el.find("#institutionNumberEdit").val(""),this.$el.find("#institutionNumberEdit").attr("data-val","");return}i=e.root.utils.isEmptyString(f);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumber").attr("data-val","");return}if(!i&&f.length>12||!i&&f.length<4||!i&&!$.isNumeric(f)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumberEdit").val(""),this.$el.find("#accountNumberEdit").attr("data-val","");return}}else if(this.canadianUser=="N"){i=e.root.utils.isEmptyString(o);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.validRoutingNumberRqrd");e.root.common.Alertservice.showAlert(c),this.$el.find("#routingNumberEdit").val(""),this.$el.find("#routingNumberEdit").attr("data-val","");return}if(!i&&o.length!=9||!i&&!$.isNumeric(o)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.validRoutingNumberRqrd");e.root.common.Alertservice.showAlert(c),this.$el.find("#routingNumberEdit").val(""),this.$el.find("#routingNumberEdit").attr("data-val","");return}i=e.root.utils.isEmptyString(f);if(i){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumber").attr("data-val","");return}if(!i&&f.length>17||!i&&f.length<4||!i&&!$.isNumeric(f)){var c=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(c),this.$el.find("#accountNumberEdit").val(""),this.$el.find("#accountNumberEdit").attr("data-val","");return}}var p={};p.accountType=r,p.bankName=this.$el.find(".cp-bank-name").val(),p.accountNumber=e.root.utils.trimText(this.$el.find(".cp-account-number").attr("data-val")),p.canadianProgram=this.canadianUser,this.canadianUser=="Y"?(p.institutionNumber=this.$el.find(".cp-institution-number").attr("data-val"),p.transitNumber=this.$el.find(".cp-transit").attr("data-val")):this.canadianUser=="N"&&(p.routingNumber=this.$el.find(".cp-routing-number").attr("data-val")),e.data.cpBankDetails||(e.data.cpBankDetails=new e.models.cpBankDetails),this.bankDetails=p;if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onUpdateSuccessHandler,this.onUpdateErrorHandler,e.localURLs.EDITBANKINFO_JSON,{},this);else{var d=e.constants.UPDATE,v=e.data.cpBankDetails.UpdateBankDetails(d);v.inputRequest.data.accountType=p.accountType,v.inputRequest.data.bankName=p.bankName,this.canadianUser=="Y"?(v.inputRequest.data.institutionNumber=p.institutionNumber,v.inputRequest.data.transitNumber=p.transitNumber):v.inputRequest.data.routingNumber=p.routingNumber,v.inputRequest.data.accountNumber=p.accountNumber,v.inputRequest.data.triggerACH=this.options.context.origin===e.constants.ACCOUNT_DETAILS?"Y":"N",this.options.context.origin===e.constants.ACCOUNT_DETAILS&&(v.inputRequest.action.type="triggerACH"),v.inputRequest.data.devicePrint=$("#devicePrintId").val(),v.inputRequest.data.rsaToken=$("#RSADeviceFso").val(),e.root.common.networkingservice.postRequest(v,this.onUpdateSuccessHandler,this.onUpdateErrorHandler,e.localURLs.EDITBANKINFO_JSON,{},this)}},onUpdateSuccessHandler:function(t){t.successResponse?(e.data.cpBankDetails.setBankDetails(this.bankDetails),this.navigateToPreviousView()):this.onUpdateErrorHandler(t)},onUpdateErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}else e.root.common.Alertservice.showAlert("")},clearFields:function(){this.$el.find("#bankNameEdit").val(""),this.$el.find("#transitNumberEdit").val(""),this.$el.find("#transitNumberEdit").attr("data-val",""),this.$el.find("#institutionNumberEdit").val(""),this.$el.find("#institutionNumberEdit").attr("data-val",""),this.$el.find("#accountNumberEdit").val(""),this.$el.find("#accountNumberEdit").attr("data-val",""),this.$el.find("#routingNumberEdit").val(""),this.$el.find("#routingNumberEdit").attr("data-val","")},navigateToPreviousView:function(){this.options.context.origin&&this.options.context.origin==="cpScheduleWithdrawalView"?e.root.utils.navigateView(this,"cpScheduleWithdrawalView",e,{}):this.options.context.origin&&this.options.context.origin==="cpConfirmWithdrawalDetailsView"?e.root.utils.navigateView(this,"cpConfirmWithdrawalDetailsView",e,{}):this.options.context.origin&&this.options.context.origin==="cpCurrentWithdrawalSettingsView"?e.root.utils.navigateView(this,"cpCurrentWithdrawalSettingsView",e,{}):this.options.context.origin&&this.options.context.origin===e.constants.ACCOUNT_DETAILS?e.root.utils.navigateView(this,e.constants.ACCOUNT_DETAILS,e,{}):e.root.utils.navigateView(this,"cpScheduleWithdrawalView",e,{})},presentCheck:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),setTimeout(function(){n.presentModalView(e.views.cpModalView,{type:"check"},!0,n.modalDismissed,!0)},300)},modalDismissed:function(){$("#modalElement").removeClass("cp-modal-element-transparent-background")}})}}),define("cp.views.cpConfirmWithdrawalDetailsView",[],function(){return function(e){e.views.cpConfirmWithdrawalDetailsView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-cancel-button":"loadAccountTransaction","click .cp-editBankInfo-button":"editBankInformation","click .cp-editWithdrawalInfo-button":"loadWithdrawal","click .cp-continue-button":"confirmWithDrawal","click .cp-continue-button-recurring":"confirmRecuringWithdrawal"},render:function(){var t=e.data.cpBankDetails.get("canadianProgram"),n=e.data.cpWithdrawalDetails.get("isSameDayACHOn");this.$el.empty().append(e.templates.cpWithdrawalConfirmation({canadianProgram:t,isSameDayACHOn:n})),this.setBankInfo(),this.setWithDrawalDetails();var r=e.data.cpWithdrawalDetails;r.get("type")==="One time"?$(".cp-onetimeField").removeClass("hidden"):$(".cp-recurring-withdrawal-message,.cp-recurringWithdrawal").removeClass("hidden");var i=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.confirmWithdrawal");$(".cp-menu-title").html(i)},setWithDrawalDetails:function(){var t=e.data.cpWithdrawalDetails,n=t.get("type"),r="";if(n=="One time"){var i=t.get("amount").dollars+"."+t.get("amount").cents,s=parseFloat(i)+parseFloat(t.get("fee"));s=parseFloat(s).toFixed(2),this.$el.find(".cp-withdrawalFrequency").text(t.get("type")),this.$el.find(".cp-withdrawalType").text(t.get("withdrawType")),this.$el.find(".cp-withdrawalAmt").text("$ "+t.get("amount").dollars+"."+t.get("amount").cents),this.$el.find(".cp-withdrawalFee").text("$ "+t.get("fee")),this.$el.find(".cp-withDrawalTotal").text("$"+s)}else this.$el.find(".cp-withdrawalFrequency").text(t.get("type")),this.$el.find(".cp-recurring-amount").text(t.get("recurringPercent").concat("%"))},setBankInfo:function(){var t=e.data.cpBankDetails,n=e.root.utils.maskCardNumber(t.get("accountNumber")),r=t.get("accountType");r=="c"||r=="C"?this.$el.find(".cp-account-type").text(e.constants.CHECKING_TEXT):(r=="s"||r=="S")&&this.$el.find(".cp-account-type").text(e.constants.SAVING_TEXT),this.$el.find(".cp-bank-name").text(t.get("bankName")),this.$el.find(".cp-account-number").text(n),t.get("canadianProgram")=="Y"?(this.$el.find(".cp-transit").text(e.root.utils.maskCardNumber(t.get("transitNumber"))),this.$el.find(".cp-institution-number").text(e.root.utils.maskCardNumber(t.get("institutionNumber")))):t.get("canadianProgram")=="N"&&this.$el.find(".cp-routing-number").text(e.root.utils.maskCardNumber(t.get("routingNumber")))},editBankInformation:function(){$(".cp-edit-button").addClass("cp-button-selected");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retreiveMFASuccessHandler,this.retreiveMFAErrorHandler,e.localURLs.EDIT_MFA_RESPONSE,{},this);else{var t=this.requestMFA();e.root.common.networkingservice.postRequest(t,this.retreiveMFASuccessHandler,this.retreiveMFAErrorHandler,e.localURLs.EDIT_MFA_RESPONSE,{},this)}},requestMFA:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.EDIT_BANKINFO_MFA,n.action.type=e.constants.UPDATE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.devicePrint=$("#devicePrintId").val(),n.data.rsaToken=$("#RSADeviceFso").val(),t.inputRequest=n,t},retreiveMFASuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);var n=e.data.cpMFAAuthentication.get("mfaAuthCode");this.mfaauthenticationType(n,t)}else this.retreiveMFAErrorHandler(t)},mfaauthenticationType:function(t,n){switch(t){case e.constants.MFA_NONE:e.root.utils.navigateView(this,"cpEditBankDetailsView",e,{origin:"cpConfirmWithdrawalDetailsView"});break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:e.constants.EDITBANK,origin:"cpConfirmWithdrawalDetailsView"});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:e.constants.EDITBANK,origin:"cpConfirmWithdrawalDetailsView"});break;default:}},retreiveMFAErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},loadWithdrawal:function(){$(".cp-oneTime-withdrawal-button").addClass("cp-button-selected");var t=e.data.cpWithdrawalDetails;t.get("type")==="One time"?e.root.utils.navigateView(this,"cpOneTimeWithdrawalView",e,{type:e.constants.EDIT}):t.get("type")==="Recurring"?e.root.utils.navigateView(this,"cpRecurringWithdrawalView",e,{}):e.root.utils.navigateView(this,"cpOneTimeWithdrawalView",e,{})},loadAccountTransaction:function(t){$(document.activeElement).blur(),$("input[name=cp-amount-percentage-value]:checked").val(""),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected"),e.root.eventBus.trigger("cp:exitBankTransfer")},confirmWithDrawal:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onConfirmSuccessHandler,this.onConfirmErrorHandler,e.localURLs.CONFIRM_ONETIME_WITHDRAWAL,{},this);else{var n=e.data.cpWithdrawalDetails.confirmWithdrawalDetails();e.root.common.networkingservice.postRequest(n,this.onConfirmSuccessHandler,this.onConfirmErrorHandler,e.localURLs.CONFIRM_ONETIME_WITHDRAWAL,{},this)}},onConfirmSuccessHandler:function(t){if(t.successResponse){e.data.cpSettings.setBankTransfer(t.successResponse);var n=e.data.cpWithdrawalDetails.get("isSameDayACHOn"),r=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.scheduledWithdrawal.standard");n=="Y"&&(r=e.data.cpLanguageMapping.getLabelForKey("cp.oneTimeWithdrawal.scheduledWithdrawal")),e.data.cpSettings.get("bankTransfer")==="N"&&($(".bankTransferMenu").hide(),e.data.cpSettings.get("requestPlastic")==="N"&&e.data.cpSettings.get("requestCheck")==="N"&&$(".cp-accessFund-Menu").hide()),e.root.common.Alertservice.showSuccessAlert(r,this.loadAcntDetails,!1,!1,this)}else this.onConfirmErrorHandler(t)},onConfirmErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},loadAcntDetails:function(){e.root.eventBus.trigger("cp:exitBankTransfer")},confirmRecuringWithdrawal:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation();if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onRecuringWithdrawalSuccessHandler,this.onRecuringWithdrawalErrorHandler,e.localURLs.CONFIRM_RECURING_WITHDRAWAL,{},this);else{var n=e.data.cpWithdrawalDetails.confirmRecuringWithdrawalDetails();e.root.common.networkingservice.postRequest(n,this.onRecuringWithdrawalSuccessHandler,this.onRecuringWithdrawalErrorHandler,e.localURLs.CONFIRM_RECURING_WITHDRAWAL,{},this)}},onRecuringWithdrawalSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpLanguageMapping.getLabelForKey("cp.recurringWithdrawal.scheduledWithdrawalDuration");e.root.common.Alertservice.showSuccessAlert(n,this.loadAcntDetails,!1,!1,this)}else this.onRecuringWithdrawalErrorHandler(t)},onRecuringWithdrawalErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpRequestCheckView",[],function(){return function(e){e.views.cpRequestCheckView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-address-checkbox":"checktickimage","click .cp-address-edit":"loadUpdateProfile","click .cp-continue-button-requestCheck":"checkRequest","click .cp-cancel-button":"navigateNext"},render:function(){this.$el.empty().append(e.templates.cpRequestCheckView()),this.setUserInfo();var t=e.data.cpLanguageMapping.getLabelForKey("device.heading.check.text");$(".cp-menu-title").html(t)},checktickimage:function(){$(".cp-address-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button-requestCheck").toggleClass("cp-backgroundcolor1"),this.$el.find(".cp-continue-button-requestCheck").toggleClass("uiDisabled")},setUserInfo:function(){var t=e.data.cpUserInfo;this.$el.find(".cp-edit-name").text(t.get("firstName")),this.$el.find(".cp-edit-company").text(t.get("company")),this.$el.find(".cp-edit-attention").text(t.get("attention")),this.$el.find(".cp-edit-streetAddress1").text(t.get("address").streetAddress1),this.$el.find(".cp-edit-streetAddress2").text(t.get("address").streetAddress2);var n=t.get("address").city,r=t.get("address").state,i=t.get("address").zipcode;this.$el.find(".cp-edit-city").text(n+" ,"+r+" ,"+i),this.$el.find(".cp-edit-country").text(t.get("address").country)},loadUpdateProfile:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpEditProfileView({el:"#cp-menu-container",type:"cp-requestCheck-Menu"})},checkRequest:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.requestCheckSuccessHandler,this.requestCheckErrorHandler,e.localURLs.REQUEST_CHECK_RESPONSE,{},this);else{var t=this.sendCheckRequest();e.root.common.networkingservice.postRequest(t,this.requestCheckSuccessHandler,this.requestCheckErrorHandler,e.localURLs.REQUEST_CHECK_RESPONSE,{},this)}},sendCheckRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CHECK_REQUEST,n.action.type="",n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},requestCheckErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},requestCheckSuccessHandler:function(e){e.successResponse?this.displayResponse(e.successResponse):e.errorResponse&&this.requestCheckErrorHandler(e)},displayResponse:function(t){var n;t.status=="success"?n=e.data.cpLanguageMapping.getLabelForKey("cp.requestCheck.checkArrival"):n=e.data.cpLanguageMapping.getLabelForKey("cp.requestCheck.balanceZero"),e.root.common.Alertservice.showSuccessAlert(n,this.navigateNext,!1,!1,this)},navigateNext:function(){e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")}})}}),define("cp.views.cpRequestPlasticView",[],function(){return function(e){e.views.cpRequestPlasticView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-tc-checkbox":"checktickimage","click .cp-continue-button-bankTransfer":"requestPlastic","click .cp-cancel-button-bankTransfer":"RequestCancel","click .requestPlaticEdit":"loadEditPage"},render:function(){var t=this.options.message,n=e.data.cpUserInfo,r=this.options.cardType?this.options.cardType:"",i=this.options.requestPlasticMessage?this.options.requestPlasticMessage:"";this.$el.empty().append(e.templates.cpRequestPlastic({message:t,profile:n,cardType:r,requestPlasticMessage:i}));var s=e.data.cpLanguageMapping.getLabelForKey("cp.requestPlastic.orderPlastic");$(".cp-menu-title").html(s),t==""&&(this.$el.find(".cp-continue-button-bankTransfer").removeClass("uiDisabled"),this.$el.find(".cp-continue-button-bankTransfer").addClass("cp-backgroundcolor1"))},checktickimage:function(){$(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("uiDisabled"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("cp-backgroundcolor1")},requestPlastic:function(){var t=this.options.pinReset;if(t=="Y")e.root.utils.navigateView(this,"cpNewPinView",e,{type:e.constants.REQUEST_PLASTIC});else if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.requestPlasticSuccessHandler,this.requestPlasticErrorHandler,e.localURLs.REQUEST_PLASTIC_RESPONSE,{},this);else{var n=this.sendPlasticRequest();e.root.common.networkingservice.postRequest(n,this.requestPlasticSuccessHandler,this.requestPlasticErrorHandler,e.localURLs.REQUEST_PLASTIC_RESPONSE,{},this)}},sendPlasticRequest:function(){var t={},n={};return n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.ORDER_CARD,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,t},requestPlasticSuccessHandler:function(t){if(t.successResponse){var n;n=e.data.cpLanguageMapping.getLabelForKey("cp.requestPlastic.cardOrderDeliveryPeriod"),navigateTo=this.loadAcntDetails,e.root.common.Alertservice.showSuccessAlert(n,navigateTo,!1,!1,this)}else this.requestPlasticErrorHandler(t)},loadAcntDetails:function(){e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")},requestPlasticErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},RequestCancel:function(){e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu")},loadEditPage:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpEditProfileView({el:"#cp-menu-container",type:"cp-requestPlastic-Menu"})}})}}),define("cp.views.cpPasswordValidationView",[],function(){return function(e){e.views.cpPasswordValidationView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-confirm-button":"validatePassword","click .cp-cancel-button":"navigateBack"},render:function(){this.$el.empty().append(e.templates.cpPasswordValidationView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.phoneChange.authPassword");$(".cp-menu-title").html(t)},validatePassword:function(t){t.preventDefault(),t.stopPropagation(),$(document.activeElement).blur(),$(t.target).addClass("cp-button-selected");var n=e.root.utils.trimText(this.$el.find(".cp-password").val());isEmpty=e.root.utils.isEmptyString(n);if(isEmpty){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length<8&&n.length<50){var r=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(r),this.$el.find(".cp-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPasswordValidateSuccessHandler,this.onPasswordValidateErrorHandler,e.localURLs.VALIDATE_PASSWORD_RESPONSE,{},this);else{var i={},s={};s.action={},s.action.appName=e.constants.APP_NAME,s.action.criterion=e.constants.VALIDATE_PASSWORD,this.options.origin==="cpAlertSetUpView"?s.action.type="pushAlert":s.action.type="editProfile",s.action.language=e.data.cpLanguageMapping.get("currentLanguage"),s.data={},s.data.password=this.$el.find(".cp-password").val(),i.inputRequest=s,e.root.common.networkingservice.postRequest(i,this.onPasswordValidateSuccessHandler,this.onPasswordValidateErrorHandler,e.localURLs.VALIDATE_PASSWORD_RESPONSE,{},this)}},onPasswordValidateSuccessHandler:function(t){if(t.successResponse){this.$el.find(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=this.options.type;e.root.eventBus.trigger("loadMenuItem",n)}else t.errorResponse&&this.onPasswordValidateErrorHandler(t)},onPasswordValidateErrorHandler:function(t){this.$el.find(".cp-confirm-button").removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse.errorCode==="3"){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.$el.find(".cp-password").val("")},navigateBack:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");if(this.options.origin=="cpAlertSetUpView")var t=new e.views.cpAlertSetUpView({el:"#cp-menu-container",type:this.options.type,page:"editProfile"});else var t=new e.views.cpEditProfileView({el:"#cp-menu-container",type:this.options.type,origin:"cpPasswordValidationView"})}})}}),define("cp.views.cpChoicesTransfertoBankView",[],function(){return function(e){e.views.cpChoicesTransfertoBankView=CT.View.extend({initialize:function(){this.userInfo={},e.data.cpPaymentChoice||(e.data.cpPaymentChoice=new e.models.cpPaymentChoice),this.render(),this.listenTo(e.data.cpPaymentChoice,"cp:paymentChoiceSelected",this.navigateNext),this.listenTo(e.data.cpPaymentChoice,"disableUserInfo",this.disableUserInfo),this.listenTo(e.data.cpPaymentChoice,"choiceSelectionFailed",this.clearFields),this.listenTo(e.root.eventBus,"cp:logoutEvent",this.destroy),this.listenTo(e.root.eventBus,"cp:destroyPaymentHub",this.destroyView)},events:{"click .cp-tc-checkbox":"checktickimage","click .cp-continue-button-bankTransfer":"checkAndNavigateRegisterACH","click .cp-info":"presentCheck","click .cp-cancel-button-bankTransfer":"RequestCancel","focus #accountNumber,#confirmaccountNumber,#routingNumber,#transitNumber,#institutionNumber":"focusCardDetails","blur #accountNumber,#confirmaccountNumber,#routingNumber,#transitNumber,#institutionNumber":"blurCardDetails","touchmove .cp-paymentBankTransfer-container":e.root.utils.dismissKeyboard,"change input[name=withdrawalType]":"changedWithdrawalType"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.requestTransferToBank");$(".cp-menu-title").html(t);var n=e.data.cpPaymentChoiceBankDetailsModel;this.canadianUser=n.get("canadianProgram"),this.options.context&&(this.choiceflag=this.options.context),this.$el.empty().append(e.templates.cpChoicesTransfertoBankView({model:n,choiceflag:this.choiceflag})),this.$el.find(".cp-pre-tc-content").empty().append(n.get("termsAndConditionContent")),this.$el.find(".cp-agree-me").empty().append(n.get("termsMessage")),$.isEmptyObject(n.get("bankInfo"))==0&&this.setBankInfo();var r=e.data.cpPaymentChoice;this.choiceflag===e.constants.ADD_PC&&r.get("registeredUser")=="Y"&&this.disableUserInfo();var i=n.get("isSameDayACHOn");i=="Y"&&this.$el.find("#cp-StandardACH").attr("checked",!0),$(".cp-fee-section-ph").removeClass("hidden"),$(".cp-fee-value-ph").text(n.get("stdFee")),SSO==="Y"&&this.$el.find(".cp-firsttime-user-section").hide(),e.root.utils.updateLanguageLabels(e,this)},setBankInfo:function(){var t=e.data.cpPaymentChoiceBankDetailsModel,n=t.get("bankInfo").accountType;n==="s"||n==="S"?this.$el.find("#cp-SavingsAccount").attr("checked",!0):this.$el.find("#cp-CheckingAccount").attr("checked",!0),this.$el.find(".cp-bankTransfer-bankName").val(t.get("bankInfo").bankName),this.$el.find("#accountNumber").attr("data-val",t.get("bankInfo").accountNumber?t.get("bankInfo").accountNumber:"");var r=this.$el.find("#accountNumber").attr("data-val");this.$el.find("#accountNumber").val(e.root.utils.maskCardNumber(r));if(this.canadianUser=="Y"){this.$el.find("#transitNumber").attr("data-val",t.get("bankInfo").transitNumber?t.get("bankInfo").transitNumber:"");var i=this.$el.find("#transitNumber").attr("data-val");this.$el.find("#transitNumber").val(e.root.utils.maskCardNumber(i)),this.$el.find("#institutionNumber").attr("data-val",t.get("bankInfo").institutionNumber?t.get("bankInfo").institutionNumber:"");var s=this.$el.find("#institutionNumber").attr("data-val");this.$el.find("#institutionNumber").val(e.root.utils.maskCardNumber(s))}else if(this.canadianUser=="N"){this.$el.find("#routingNumber").attr("data-val",t.get("bankInfo").routingNumber?t.get("bankInfo").routingNumber:"");var o=this.$el.find("#routingNumber").attr("data-val");this.$el.find("#routingNumber").val(e.root.utils.maskCardNumber(o))}},checktickimage:function(){$(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("cp-backgroundcolor1"),this.$el.find(".cp-continue-button-bankTransfer").toggleClass("uiDisabled")},RequestCancel:function(){e.root.utils.destroyView(this),this.options.context===e.constants.ADD_PC&&e.data.cpPaymentChoice.get("availableChoices").length==1?e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu"):this.options.context==e.constants.EDIT_ACH_RETURNING?(this.options.context=e.constants.PC_LOGIN,e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_SELECTED_DELIVARY_CHOICE,this.options.context)):(this.options.context==e.constants.EDIT_ACH&&(this.options.context=e.constants.PC_LOGIN),e.root.eventBus.trigger("cp:loadPaymentChoice",e.constants.PAYMENT_DELIVARY_CHOICE,this.options.context))},checkAndNavigateRegisterACH:function(){this.options.context===e.constants.ADD_PC?this.navigateRegisterACH():this.navigateAddBank()},navigateRegisterACH:function(){var t=e.data.cpPaymentChoice;if(t.get("registeredUser")=="N"&&SSO!=="Y"){var n=e.root.utils.trimText(this.$el.find(".cp-payment-username").val()),r=e.root.utils.isEmptyString(n);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterUsername.Text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length<3){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.username.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.match(/[^a-zA-Z0-9\\@\\._ ]/)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.usernameInvalid");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.trimText(this.$el.find(".cp-payment-password").val());r=e.root.utils.isEmptyString(s);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s.length<8&&s.length<50){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var o=e.root.utils.trimText(this.$el.find(".cp-payment-confirmpassword").val());r=e.root.utils.isEmptyString(o);if(r){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.enterpassword.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(o.length<8&&o.length<50){var i=e.data.cpLanguageMapping.getLabelForKey("cp.login.password.length.text");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(s!=o){var i=e.data.cpLanguageMapping.getLabelForKey("cp.registration.mismatchConfirmPassword");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}this.userInfo.userName=e.root.utils.trimText(this.$el.find(".cp-payment-username").val()),this.userInfo.password=e.root.utils.trimText(this.$el.find(".cp-payment-password").val())}this.navigateAddBank()},navigateAddBank:function(t){var n=$(document.activeElement).attr("id");$("#"+n).trigger("blur");var r=e.data.cpPaymentChoiceBankDetailsModel,i=$("input[name=accountType]:checked").val();if(i=="Checking account")var s=e.constants.CHECKING;else if(i=="Savings account")var s=e.constants.SAVINGS;var o=$("input[name=withdrawalType]:checked").val(),u=r.get("isSameDayACHOn"),a=r.get("isEditBankReturning"),f=r.get("bankTransferNotInitialChoice");if(u=="Y"&&a!="Y"&&f!="Y"&&o===undefined){var l=e.data.cpLanguageMapping.getLabelForKey("withdraw.type.required");e.root.common.Alertservice.showAlert(l),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}o=o?o:e.constants.STANDARD_ACH;var c,h=this.$el.find("#bankName").val();if(this.canadianUser=="N")var p=e.root.utils.trimText(this.$el.find("#routingNumber").attr("data-val"));else if(this.canadianUser=="Y")var d=e.root.utils.trimText(this.$el.find("#transitNumber").attr("data-val")),v=e.root.utils.trimText(this.$el.find("#institutionNumber").attr("data-val"));c=e.root.utils.isEmptyString(h);if(c){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validBankRequired");e.root.common.Alertservice.showAlert(l),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(!c&&h.length<2||!c&&h.length>30){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validBankRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#bankName").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(this.canadianUser=="Y"){var m=e.root.utils.trimText(this.$el.find("#accountNumber").attr("data-val"));c=e.root.utils.isEmptyString(m);if(c){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#accountNumber").val(""),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(!c&&m.length>12||!c&&m.length<4||!c&&!$.isNumeric(m)){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#accountNumber").val(""),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}var g=e.root.utils.trimText(this.$el.find("#confirmaccountNumber").attr("data-val"));if(this.$el.find("#confirmaccountNumber").length){c=e.root.utils.isEmptyString(g);if(c){var l=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.invalid_confirm_account_number");e.root.common.Alertservice.showAlert(l),this.$el.find("#confirmaccountNumber").val(""),this.$el.find("#confirmaccountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(!c&&g.length>12||!c&&g.length<4||!c&&!$.isNumeric(g)){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#confirmaccountNumber").val(""),this.$el.find("#confirmaccountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(m!=g){var l=e.data.cpLanguageMapping.getLabelForKey("cp.error.account_number_mismatch");e.root.common.Alertservice.showAlert(l),this.$el.find("#accountNumber").val(""),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find("#confirmaccountNumber").val(""),this.$el.find("#confirmaccountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage(),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}var d=e.root.utils.trimText(this.$el.find("#transitNumber").attr("data-val")),v=e.root.utils.trimText(this.$el.find("#institutionNumber").attr("data-val"));c=e.root.utils.isEmptyString(d);if(c){var y=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidTransitNumber");e.root.common.Alertservice.showAlert(y),this.$el.find("#transitNumber").val(""),this.$el.find("#transitNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val("");return}if(!c&&d.length!=5||!c&&!$.isNumeric(d)){var y=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidTransitNumber");e.root.common.Alertservice.showAlert(y),this.$el.find("#transitNumber").val(""),this.$el.find("#transitNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val("");return}c=e.root.utils.isEmptyString(v);if(c){var y=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidInstitutionNumber");e.root.common.Alertservice.showAlert(y),this.$el.find("#institutionNumber").val(""),this.$el.find("#institutionNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val("");return}if(!c&&v.length<3||!c&&v.length>4||!c&&!$.isNumeric(v)){var y=e.data.cpLanguageMapping.getLabelForKey("cp.transferFunds.invalidInstitutionNumber");e.root.common.Alertservice.showAlert(y),this.$el.find("#institutionNumber").val(""),this.$el.find("#institutionNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val("");return}}else if(this.canadianUser=="N"){c=e.root.utils.isEmptyString(p);if(c){var l=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.validRoutingNumberRqrd");e.root.common.Alertservice.showAlert(l),this.$el.find("#routingNumber").val(""),this.$el.find("#routingNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(p.length!=9||!c&&!$.isNumeric(p)){var l=e.data.cpLanguageMapping.getLabelForKey("cp.bankTransferAcceptTerms.validRoutingNumberRqrd");e.root.common.Alertservice.showAlert(l),this.$el.find("#routingNumber").val(""),this.$el.find("#routingNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}var m=e.root.utils.trimText(this.$el.find("#accountNumber").attr("data-val")),g=e.root.utils.trimText(this.$el.find("#confirmaccountNumber").attr("data-val"));c=e.root.utils.isEmptyString(m);if(c){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#accountNumber").val(""),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(!c&&m.length>17||!c&&m.length<4||!c&&!$.isNumeric(m)){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#accountNumber").val(""),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(this.$el.find("#confirmaccountNumber").length){c=e.root.utils.isEmptyString(g);if(c){var l=e.data.cpLanguageMapping.getLabelForKey("cp.paymentChoice.invalid_confirm_account_number");e.root.common.Alertservice.showAlert(l),this.$el.find("#confirmaccountNumber").val(""),this.$el.find("#confirmaccountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(!c&&g.length>17||!c&&g.length<4||!c&&!$.isNumeric(g)){var l=e.data.cpLanguageMapping.getLabelForKey("cp.common.validaccountNumberRequired");e.root.common.Alertservice.showAlert(l),this.$el.find("#confirmaccountNumber").val(""),this.$el.find("#confirmaccountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage();return}if(m!=g){var l=e.data.cpLanguageMapping.getLabelForKey("cp.error.account_number_mismatch");e.root.common.Alertservice.showAlert(l),this.$el.find("#accountNumber").val(""),this.$el.find("#accountNumber").attr("data-val",""),this.$el.find("#confirmaccountNumber").val(""),this.$el.find("#confirmaccountNumber").attr("data-val",""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.checktickimage(),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}}var b={};b.accountNumber=m,b.accountType=s,b.bankName=h,this.canadianUser=="N"?b.routingNumber=p:(b.transitNumber=d,b.institutionNumber=v),this.userInfo.bankInfo=b,this.userInfo.withdrawalType=o,e.data.cpPaymentChoice.selectPC(e.constants.CHOICE_ACH,this.options.context,this.userInfo)},navigateNext:function(){e.root.utils.destroyView(this),this.options.context===e.constants.EDIT_ACH||this.options.context===e.constants.EDIT_ACH_RETURNING?e.root.eventBus.trigger("loadMenuItem","cp-AccountDetails-Menu"):e.root.eventBus.trigger("cp:loadPaymentChoiceConfirmation",e.constants.CHOICE_ACH,this.options.context)},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},changedWithdrawalType:function(e){$this=$(e.target);var t=$this.val();this.showFee(t)},showFee:function(t){$(".cp-fee-section-ph").removeClass("hidden"),t==e.constants.STANDARD_ACH?($(".cp-conditions-sameday-ph").addClass("hidden"),$(".cp-fee-value-ph").text(e.data.cpPaymentChoiceBankDetailsModel.get("stdFee"))):($(".cp-conditions-sameday-ph").removeClass("hidden"),$(".cp-fee-value-ph").text(e.data.cpPaymentChoiceBankDetailsModel.get("sameDayFee")))},presentCheck:function(t){var n=this;$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),setTimeout(function(){n.presentModalView(e.views.cpModalView,{type:e.constants.CHOICE_ACH},!0,n.modalDismissed,!0)},300)},modalDismissed:function(){$("#modalElement").removeClass("cp-modal-element-transparent-background")},disableUserInfo:function(){this.$el.find(".cp-payment-username").val(""),this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find(".cp-payment-username").prop("disabled",!0),this.$el.find(".cp-payment-password").prop("disabled",!0),this.$el.find(".cp-payment-confirmpassword").prop("disabled",!0),SSO!="Y"&&this.options.context!=e.constants.PC_LOGIN&&this.$el.find(".user-registered-text").removeClass("hidden")},clearFields:function(){this.$el.find(".cp-payment-password").val(""),this.$el.find(".cp-payment-confirmpassword").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")}})}}),define("cp.views.cpGlobalDepositsView",[],function(){return function(e){e.views.cpGlobalDepositsView=CT.View.extend({initialize:function(){this.retrieveTransferHistory(e.constants.GLOBAL_TRANSFERS_HOME_DEFAULT_TYPE),this.listenTo(e.root.eventBus,"resizeEvent",this.setTransactionContainerHeight)},events:{"click .cp-bankDetails-Link":"navigateGlobalBankDetails","click .cp-currentFXRates-Link":"navigateCurrentFXRates","click .cp-oneTimeTransfer-Link":"navigateOneTimeTransfer","click .cp-recurringTransfers-Link":"navigateGlobalRecurringTransfers","click .cp-bankTransactionDetails-Link":"transactionDetailsExpand","click .cp-dashboard-Link":"navigateToDashboard","click .cp-listTop-link":"navigateToTransferListTop","click .cp-listViewMore-link":"requestNextTransferDetails","click .cp-globalHome-cancel-link":"cancelOneTimeTransfer"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalTransfer.premiumFX");$(".cp-menu-title").html(t);var n=e.data.cpGlobalTransferHistoryModel,r=e.data.cpGlobalTransferHistoryModel.get("moreTransactionsAvailable");this.$el.empty().append(e.templates.cpGlobalDepositsView({globalDetails:n})),(n.get("suspended")==="Y"||n.get("pendingCorrection")==="Y")&&$("#GlobalDepositsFeatureSection").find(".cp-bankDetails-Link").addClass("text-highlight"),r==="N"&&$(".cp-global-transfer-list-container").find(".cp-listViewMore-link").removeClass("show").addClass("hidden"),this.renderTransferDetailsFromResponse(),n.set("cancelOrigin",""),n.set("deleteOrigin","")},renderTransferDetailsFromResponse:function(t){this.setTransactionContainerHeight();var n=e.data.cpGlobalTransferHistoryModel.get("transHistorySize"),r=e.data.cpGlobalTransferHistoryModel.get("transferList"),i=e.data.cpGlobalTransferHistoryModel.get("moreTransactionsAvailable");if(n=="0"||n=="")$(".cp-global-transfer-list-container").find(".cp-listTop-link").removeClass("show").addClass("hidden"),$(".cp-global-transfer-list-container").find(".cp-listViewMore-link").removeClass("show").addClass("hidden");else{$(".cp-global-transfer-list-container").removeClass("hidden").addClass("show");var s=this.$el.find(".cp-global-transfer-wrapper");for(var o=0;o<r.length;o++){var u=r.at(o);s.append(e.templates.cpGlobalTransferHistory({model:u})),$(".cp-globalTransferList:even").addClass("colorEEEEEE"),$(".cp-globalTransferListDetailsParent:even").addClass("colorEEEEEE")}i==="N"&&$(".cp-global-transfer-list-container").find(".cp-listViewMore-link").removeClass("show").addClass("hidden")}},retrieveTransferHistory:function(t){this.type=t;var n=this.retreiveTransferHistorySuccessHandler;this.type===e.constants.GLOBAL_TRANSFERS_HOME_DEFAULT_TYPE?n=this.retreiveTransferHistorySuccessHandler:n=this.retreiveNextTransferHistorySetSuccessHandler;if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(n,this.retreiveTransferHistoryErrorHandler,e.localURLs.GLOBAL_HOME_JSON,{},this);else{var r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.GLOBAL_DEPOSITS_HOME,i.action.type=t,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.inputRequest=i,e.root.common.networkingservice.postRequest(r,n,this.retreiveTransferHistoryErrorHandler,e.localURLs.GLOBAL_HOME_JSON,{},this)}},retreiveNextTransferHistorySetSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalTransferHistoryModel||(e.data.cpGlobalTransferHistoryModel=new e.models.cpGlobalTransferHistoryModel),e.data.cpGlobalTransferHistoryModel.setResponse(t.successResponse),this.renderTransferDetailsFromResponse(),e.root.utils.updateLanguageLabels(e,this),this.setTransactionContainerHeight()):t.errorResponse&&this.retreiveNextTransferHistorySetErrorHandler(t)},retreiveNextTransferHistorySetErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retreiveTransferHistorySuccessHandler:function(t){t.successResponse?(e.data.cpGlobalTransferHistoryModel||(e.data.cpGlobalTransferHistoryModel=new e.models.cpGlobalTransferHistoryModel),e.data.cpGlobalTransferHistoryModel.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this),this.setTransactionContainerHeight()):t.errorResponse&&this.retreiveTransferHistoryErrorHandler(t)},retreiveTransferHistoryErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},requestNextTransferDetails:function(){var t=e.constants.GLOBAL_TRANSFERS_HOME_VIEW_MORE,n=e.data.cpGlobalTransferHistoryModel.get("moreTransactionsAvailable"),r=this.$el.find(".cp-global-transfer-wrapper");r.empty(),n==="N"&&$(".cp-global-transfer-list-container").find(".cp-listViewMore-link").removeClass("show").addClass("hidden"),this.retrieveTransferHistory(t)},navigateToTransferListTop:function(){$(".cp-global-transfer-list-container").scrollTop(0)},navigateGlobalBankDetails:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})},navigateCurrentFXRates:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpCurrentFxRateView({el:"#cp-menu-container"})},navigateOneTimeTransfer:function(t){var n=e.data.cpGlobalTransferHistoryModel;n.set("origin",e.constants.GLOBAL_HOME_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalOTTUserBanksDetailsView({el:"#cp-menu-container"})},cancelOneTimeTransfer:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.cancelOneTimeTransferSuccessHandler,this.cancelOneTimeTransferErrorHandler,e.localURLs.GLOBAL_OTT_CANCEL,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_CANCEL,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.referenceID=$(t.currentTarget).attr("id"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.cancelOneTimeTransferSuccessHandler,this.cancelOneTimeTransferErrorHandler,e.localURLs.GLOBAL_OTT_CANCEL,{},this)}},cancelOneTimeTransferSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalOTTCancelModel=new e.models.cpGlobalOTTCancelModel,e.data.cpGlobalOTTCancelModel.setResponse(t.successResponse),this.navigateToCancelOneTimeTransfer(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.cancelOneTimeTransferErrorHandler(t)},cancelOneTimeTransferErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateToCancelOneTimeTransfer:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalOTTCancelView({el:"#cp-menu-container"})},navigateGlobalRecurringTransfers:function(t){var n=e.data.cpGlobalTransferHistoryModel;n.set("origin",e.constants.GLOBAL_HOME_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})},navigateToDashboard:function(t){e.root.eventBus.trigger("loadMenuItem","cp-Dashboard-Menu")},transactionDetailsExpand:function(e){var t=$(e.currentTarget),n=t.parent(),r=n.parent();r.find(".cp-globalTransfer-transactionDetails").hasClass("cp-slidedown")?(r.find(".cp-globalTransfer-transactionDetails").removeClass("cp-slidedown").addClass("cp-slideup"),r.find(".cp-globalTransfer-transactionDetails").removeClass("show").addClass("hidden")):(r.find(".cp-globalTransfer-transactionDetails").removeClass("cp-slideup").addClass("cp-slidedown"),r.find(".cp-globalTransfer-transactionDetails").removeClass("hidden").addClass("show"))},setTransactionContainerHeight:function(){$(window).width()>$(window).height()?this.isLandscape=!0:this.isLandscape=!1;var e=this.$el.innerHeight(),t=this.$el.find(".cp-dashboard-balance").innerHeight()+this.$el.find(".cp-globalDeposits-header").innerHeight()+this.$el.find(".GlobalDepositsFeatureSection").innerHeight()+this.$el.find(".cp-payment-header").innerHeight(),n=e-t;this.isLandscape?(this.$el.find(".cp-global-transfer-list-container").height(e),this.$el.find(".cp-global-transfer-list-container").addClass("cp-panel-scroll")):n<120?(this.$el.find(".cp-global-transfer-list-container").height(120),this.$el.find(".cp-global-transfer-list-container").addClass("cp-panel-scroll")):(this.$el.find(".cp-global-transfer-list-container").height(n-180),this.$el.find(".cp-global-transfer-list-container").addClass("cp-panel-scroll"))}})}}),define("cp.views.cpGlobalBankDetailsView",[],function(){return function(e){e.views.cpGlobalBankDetailsView=CT.View.extend({initialize:function(){this.retrieveBankDetails()},events:{"click .cp-recurringTransfers-Link":"navigateGlobalRecurringTransfers","click .cp-globalAddBank":"navigateGlobalAddBank","click .cp-oneTimeTransfer-Link":"populateSelectedBankDetails","click .cp-bankTransactionDetails-Link":"retrieveDetailedSelectedBankInfo","click .cp-globalDelete-Link":"navigateToGlobalDelete","click .cp-globalBank-CancelLink":"navigateGlobalHome"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalTransfer.bankDetail");$(".cp-menu-title").html(t);var n=e.data.cpGlobalRetrieveBankDetailsModel;this.$el.empty().append(e.templates.cpGlobalBankDetailsView({globalRetrieveBankDetails:n})),this.retrieveBankDetailsInfo()},retrieveBankDetailsInfo:function(t){var n=e.data.cpGlobalRetrieveBankDetailsModel.get("banksListSize"),r=e.data.cpGlobalRetrieveBankDetailsModel.get("banksList"),i=this.$el.find("#cp-globalDeposits-outline-container");for(var s=0;s<r.length;s++){var o=r[s];i.append(e.templates.cpGlobalBankDetailsInfo({model:o}));var u=e.root.utils.maskCardNumber(o.accountNumber);this.$el.find("#"+o.deviceID+"").text(u),o.bankName===e.constants.GLOBAL_PREPAID&&$(".cp-globalBankList-Bank").removeClass("cp-bankTransactionDetails-Link");if(o.suspended!=="N")$(".cp-global-listedBanks").addClass("text-highlight"),this.$el.find("#cp-bank-suspended-alert").append('<div class="cp-global-alert-margin red wordWrap cp-language-mapping">'+o.suspendedAlert+"</div>");else if(o.pendingCorrection!=="N")$(".cp-global-listedBanks").addClass("text-highlight"),this.$el.find("#cp-bank-pendingCorrection-alert").empty().append('<div class="cp-global-alert-margin red wordWrap cp-language-mapping" data-translateidentifier="cp.globalBank.editHighlight">Please edit the highlighted bank.</div>');else{var a=this.$el.find(".cp-global-listedBanks");a.removeClass("cp-global-listedBanks"),a.addClass("cp-global-bank-transferfailed")}}},retrieveBankDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveBankDetailsSuccessHandler,this.retrieveBankDetailsErrorHandler,e.localURLs.GLOBAL_RETRIEVE_BANK_JSON,{},this);else{e.data.cpGlobalRetrieveBankDetailsModel||(e.data.cpGlobalRetrieveBankDetailsModel=new e.models.cpGlobalRetrieveBankDetailsModel);var t=e.data.cpGlobalRetrieveBankDetailsModel.createRequest();e.root.common.networkingservice.postRequest(t,this.retrieveBankDetailsSuccessHandler,this.retrieveBankDetailsErrorHandler,e.localURLs.GLOBAL_RETRIEVE_BANK_JSON,{},this)}},retrieveBankDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalRetrieveBankDetailsModel=new e.models.cpGlobalRetrieveBankDetailsModel,e.data.cpGlobalRetrieveBankDetailsModel.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveBankDetailsErrorHandler(t)},retrieveBankDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveDetailedSelectedBankInfo:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.selectedBankInfoSuccessHandler,this.selectedBankInfoErrorHandler,e.localURLs.GLOBAl_SELECTED_BANK_INFO,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("data-validateId")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.selectedBankInfoSuccessHandler,this.selectedBankInfoErrorHandler,e.localURLs.GLOBAl_SELECTED_BANK_INFO,{},this)}},selectedBankInfoSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalSelectedBankInfoModel=new e.models.cpGlobalSelectedBankInfoModel,e.data.cpGlobalSelectedBankInfoModel.setResponse(t.successResponse),this.navigateSelectedBankInfo(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.selectedBankInfoErrorHandler(t)},selectedBankInfoErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},deleteSelectedBank:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.deleteSelectedBankSuccessHandler,this.deleteSelectedBankErrorHandler,e.localURLs.GLOBAL_RETRIEVE_DELETE_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_DELETE_BANK,r.action.type=e.constants.GLOBAL_INITIATE_DELETE,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("id")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.deleteSelectedBankSuccessHandler,this.deleteSelectedBankErrorHandler,e.localURLs.GLOBAL_RETRIEVE_DELETE_JSON,{},this)}},deleteSelectedBankSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpGlobalTransferHistoryModel,r=e.data.cpGlobalRetrieveBankDetailsModel;if(n.get("recurringTransfer")!==undefined&&n.get("recurringTransfer")!=="N"){n.set("deleteOrigin",e.constants.GLOBAL_BANK_RECURRING),n.set("cancelOrigin",e.constants.GLOBAL_BANK_RECURRING),r.set("recurringOrigin",e.constants.GLOBAL_BANK_RECURRING),e.data.cpGlobalRetrieveBankDetailsModel.set("editRecurring",e.constants.GLOBAL_RECURRING_DELETE_BANK),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var i=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})}else if(n.get("recurringTransfer")!==undefined&&n.get("recurringTransfer")!=="Y"){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var i=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.deleteSelectedBankErrorHandler(t)},deleteSelectedBankErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateGlobalRecurringTransfers:function(t){var n=e.data.cpGlobalRetrieveBankDetailsModel;n.set("origin",e.constants.GLOBAL_BANK_RECURRING),n.set("sourceOrigin",e.constants.GLOBAL_BANK_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})},navigateGlobalAddBank:function(t){e.root.utils.destroyView(this);var n=e.data.cpGlobalRetrieveBankDetailsModel;n.set("screen",e.constants.GLOBAL_BANK_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalBankMFAView({el:"#cp-menu-container"})},populateSelectedBankDetails:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.populateSelectedBankDetailsSuccessHandler,this.populateSelectedBankDetailsErrorHandler,e.localURLs.GLOBAL_OTT_GET_FXRATE,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_USER_BANKS,r.action.type="getFXRate",r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("id")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.populateSelectedBankDetailsSuccessHandler,this.populateSelectedBankDetailsErrorHandler,e.localURLs.GLOBAL_OTT_GET_FXRATE,{},this)}},populateSelectedBankDetailsSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpGlobalRetrieveBankDetailsModel;n.set("oneTimeTransferOrigin",e.constants.GLOBAL_BANK_RECURRING),e.data.cpGlobalOTTGetFxRateModel=new e.models.cpGlobalOTTGetFxRateModel,e.data.cpGlobalOTTGetFxRateModel.setResponse(t.successResponse),this.navigateOneTimeTransfer(),e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.populateSelectedBankDetailsErrorHandler(t)},populateSelectedBankDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateOneTimeTransfer:function(t){var n=e.data.cpGlobalRetrieveBankDetailsModel;n.set("origin",e.constants.GLOBAL_BANK_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalOTTUserBanksDetailsView({el:"#cp-menu-container"})},navigateSelectedBankInfo:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"})},navigateGlobalHome:function(t){e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")},navigateToGlobalDelete:function(t){var n=e.data.cpLanguageMapping.getLabelForKey("cp.globalBank.deleteMessage"),r="";e.root.common.Alertservice.showDeleteWarning(this,n,r,"",function(){this.deleteSelectedBank(t)},null,"",!1)}})}}),define("cp.views.cpGlobalRecurringTransfersView",[],function(){return function(e){e.views.cpGlobalRecurringTransfersView=CT.View.extend({initialize:function(){this.retrieveConfigurationSettings()},events:{"click .cp-globalRecurring-editLink":"navigateGlobalRecurringEdit","click .cp-globalRecurringEdit-cancelLink":"requestCancel","click .cp-globalRecurringAddBank":"navigateGlobalAddBank","click .cp-globalRecurring-submitLink":"navigateRecurringSuccess","click .cp-bankTransactionDetails-Link":"navigateToSelectedBankInfo","click .cpGlobal-cancel-button":"navigateBack","keypress .cp-checkEditamount":"checkAmountLength"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalTransfer.recurring");$(".cp-menu-title").html(t);var n=e.data.cpGlobalRecurringTransfersModel,r=e.data.cpGlobalRecurringTransfersModel.get("isCardlessFxON"),i=e.data.cpGlobalRecurringTransfersModel.get("banksListSize"),s=r==="Y"?i>1?!0:!1:!0;this.$el.empty().append(e.templates.cpGlobalRecurringTransfersView({globalRecurringDetails:n,showBankDetailsHeader:s})),this.retrieveGlobalRecurringDetails()},checkAmountLength:function(e){var t=$(e.currentTarget),n=e.which?e.which:e.keyCode;if(n>31&&(n<48||n>57))return!1;t.val().length>=3&&(e.preventDefault(),e.stopPropagation())},retrieveConfigurationSettings:function(){undefined!==e.data.cpGlobalSelectedBankInfoModel&&e.data.cpGlobalSelectedBankInfoModel.get("editRecurring")===e.constants.GLOBAL_RECURRING_DELETE_BANK?(this.retrieveDeleteConfigResponse(),e.data.cpGlobalSelectedBankInfoModel.set("editRecurring","")):undefined!==e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.get("editRecurring")===e.constants.GLOBAL_RECURRING_DELETE_BANK?(this.retrieveDeleteConfigResponse(),e.data.cpGlobalRetrieveBankDetailsModel.set("editRecurring","")):this.retrieveRecurringConfig()},editGlobalRecurringDetails:function(t){var n=e.data.cpGlobalRecurringTransfersModel;n.set("edit","True"),this.retrieveGlobalRecurringDetails()},retrieveGlobalRecurringDetails:function(t){var n=e.data.cpGlobalRecurringTransfersModel.get("banksListSize"),r=e.data.cpGlobalRecurringTransfersModel.get("banksList"),i=this.$el.find(".cp-global-transfer-wrapper"),s=this.$el.find(".cpGlobal-continue-cancel-btn"),o=e.data.cpGlobalRecurringTransfersModel,u=e.data.cpGlobalRecurringTransfersModel.get("isCardlessFxON"),a=u==="Y"?n>1?!0:!1:!0;if(o.get("edit")=="True"){i.html(""),s.html("");var f=$('<div class="cp-globalRecurringTransfer-row cp-backgroundcolor1 cp-textcolor1"> <div class="cp-globalTransferList-Date cp-language-mapping" data-translateidentifier="ieft-OneTimeTransfer-beneficiaryName">Recipient</div><div class="cp-globalTransferList-Date cp-language-mapping" data-translateidentifier="ieft-transaction-title-bank">Bank</div><div class="cp-globalTransferList-Date cp-language-mapping" data-translateidentifier="ieft-edit-select-radio-percent">Percent</div><div class="cp-globalTransferList-Date cp-language-mapping" data-translateidentifier="cp.globalRecurringTransfer.fee">Fee</div></div>'),l=$('<div class="cpGlobalEdit-cancel-button cp-globalRecurringEdit-cancelLink rounderCorner5 cp-language-mapping cp-backgroundcolor2 cp-textcolor1" data-inputtype="button" data-translateidentifier="profile.security_info.cancel.button.text">Cancel</div>'),c=$('<div class="cpGlobal-continue-button cp-globalRecurring-submitLink  marginLeft5 cp-border-radius cp-language-mapping cp-backgroundcolor2 cp-textcolor1" data-inputtype="button" data-translateidentifier="ieft-add-button-submit">Submit</div>');a&&i.append(f),s.append(l),s.append(c)}for(var h=0;h<r.length;h++){var p=r[h];i.append(e.templates.cpGlobalRecurringTransfersViewDetail({model:p,recurringModel:o})),u=="N"?$(".cp-globalRecurringListDetails:even").addClass("colorEEEEEE"):$(".cp-globalRecurringListDetails:odd").addClass("colorEEEEEE"),this.$el.find("#"+p.deviceID+"").val(p.percAllotment);if(p.bankName==e.constants.GLOBAL_PREPAID){var d=this.$el.find(".cp-globalTransferList-Bank");d.removeClass("cp-globalTransferList-Bank"),d.addClass("cp-globalTransferList-PrepaidBank")}p.bankName!==e.constants.GLOBAL_PREPAID&&$(".cp-globalTransferList-Bank").addClass("cp-bankTransactionDetails-Link"),p.bankName==e.constants.GLOBAL_PREPAID&&u=="Y"&&$(".cp-globalRecurringListDetails").hide()}e.root.utils.updateLanguageLabels(e,this)},retrieveRecurringConfig:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveRecurringConfigSuccessHandler,this.retrieveRecurringConfigErrorHandler,e.localURLs.GLOBAL_RECURRING_JSON,{},this);else{e.data.cpGlobalRecurringTransfersModel||(e.data.cpGlobalRecurringTransfersModel=new e.models.cpGlobalRecurringTransfersModel);var t=e.data.cpGlobalRecurringTransfersModel.createRequest();e.root.common.networkingservice.postRequest(t,this.retrieveRecurringConfigSuccessHandler,this.retrieveRecurringConfigErrorHandler,e.localURLs.GLOBAL_RECURRING_JSON,{},this)}},retrieveRecurringConfigSuccessHandler:function(t){t.successResponse?(undefined===e.data.cpGlobalRetrieveBankDetailsModel||e.data.cpGlobalRetrieveBankDetailsModel.get("recurringOrigin")!==e.constants.GLOBAL_BANK_RECURRING&&e.data.cpGlobalRetrieveBankDetailsModel.get("sourceOrigin")!==e.constants.GLOBAL_BANK_RECURRING?undefined===e.data.cpGlobalSelectedBankInfoModel||e.data.cpGlobalSelectedBankInfoModel.get("recurringOrigin")!==e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE&&e.data.cpGlobalSelectedBankInfoModel.get("sourceOrigin")!==e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE?e.data.cpGlobalRecurringTransfersModel||(e.data.cpGlobalRecurringTransfersModel=new e.models.cpGlobalRecurringTransfersModel):(e.data.cpGlobalRecurringTransfersModel=new e.models.cpGlobalRecurringTransfersModel,e.data.cpGlobalSelectedBankInfoModel.set("recurringOrigin",""),e.data.cpGlobalSelectedBankInfoModel.set("sourceOrigin","")):(e.data.cpGlobalRecurringTransfersModel=new e.models.cpGlobalRecurringTransfersModel,e.data.cpGlobalRetrieveBankDetailsModel.set("recurringOrigin",""),e.data.cpGlobalRetrieveBankDetailsModel.set("sourceOrigin","")),e.data.cpGlobalRecurringTransfersModel.get("edit")==="False"&&e.data.cpGlobalRecurringTransfersModel.setResponse(t.successResponse),e.data.cpGlobalRecurringTransfersModel.get("screen")!=="addBankEdit"?e.data.cpGlobalRecurringTransfersModel.set("edit","False"):e.data.cpGlobalRecurringTransfersModel.set("screen",""),this.render()):t.errorResponse&&this.retrieveRecurringConfigErrorHandler(t)},retrieveRecurringConfigErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveDeleteConfigResponse:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.deleteConfigResponseSuccessHandler,this.deleteConfigResponseErrorHandler,e.localURLs.GLOBAL_RECURRING_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_RECURRING,n.action.type=e.constants.GLOBAL_RECURRING_DELETE_BANK,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.deleteConfigResponseSuccessHandler,this.deleteConfigResponseErrorHandler,e.localURLs.GLOBAL_RECURRING_JSON,{},this)}},deleteConfigResponseSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalRecurringTransfersModel=new e.models.cpGlobalRecurringTransfersModel,e.data.cpGlobalRecurringTransfersModel.setResponse(t.successResponse),e.data.cpGlobalRecurringTransfersModel.set("edit","True"),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.deleteConfigResponseErrorHandler(t)},deleteConfigResponseErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateGlobalRecurringEdit:function(e){this.editGlobalRecurringDetails(e)},navigateGlobalAddBank:function(t){var n=e.data.cpGlobalRecurringTransfersModel;n.set("screen",e.constants.GLOBAL_ADD_BANK_RECURRING),undefined!==e.data.cpGlobalRetrieveBankDetailsModel&&(e.data.cpGlobalRetrieveBankDetailsModel.get("recurringOrigin")===e.constants.GLOBAL_BANK_RECURRING||e.data.cpGlobalRetrieveBankDetailsModel.get("sourceOrigin")===e.constants.GLOBAL_BANK_RECURRING)&&(e.data.cpGlobalRetrieveBankDetailsModel.set("recurringOrigin",""),e.data.cpGlobalRetrieveBankDetailsModel.set("sourceOrigin","")),undefined!==e.data.cpGlobalSelectedBankInfoModel&&(e.data.cpGlobalSelectedBankInfoModel.get("recurringOrigin")===e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE||e.data.cpGlobalSelectedBankInfoModel.get("sourceOrigin")===e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE)&&(e.data.cpGlobalSelectedBankInfoModel.set("recurringOrigin",""),e.data.cpGlobalSelectedBankInfoModel.set("sourceOrigin","")),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalBankMFAView({el:"#cp-menu-container"})},navigateRecurringSuccess:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retreiveGlobalRecurringEditSuccessHandler,this.retreiveGlobalRecurringEditErrorHandler,e.localURLs.GLOBAL_RECURRING_EDIT_JSON,{},this);else{if(undefined!==e.data.cpGlobalRecurringTransfersModel&&e.data.cpGlobalRecurringTransfersModel.get("deleteBank")==="Y")var n=e.constants.GLOBAL_RECURRING_DELETE_BANK;else var n=e.constants.GLOBAL_TRANSFERS_HOME_DEFAULT_TYPE;var r={},i={};i.action={};var s=e.data.cpGlobalRecurringTransfersModel;i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.GLOBAL_RECURRING_EDIT,i.action.type=n,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),i.data={},i.data.banksList=[];var o,u=e.data.cpGlobalRecurringTransfersModel.get("isCardlessFxON");for(var a=0;a<s.get("banksListSize");a++){var f=s.get("banksList")[a].deviceID,l=e.root.utils.formatDeviceId(f);u==="Y"?undefined!==$("#"+f+"").val()?o=$("#"+f+"").val():o=s.get("banksList")[a].percAllotment:o=$("#"+f+"").val(),o!==""?o=o:o="0",i.data.banksList.push({deviceID:l,percAllotment:o})}r.inputRequest=i,e.root.common.networkingservice.postRequest(r,this.retreiveGlobalRecurringEditSuccessHandler,this.retreiveGlobalRecurringEditErrorHandler,e.localURLs.GLOBAL_RECURRING_EDIT_JSON,{},this)}},navigateToSelectedBankInfo:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.navigateToSelectedBankInfoSuccessHandler,this.navigateToSelectedBankInfoErrorHandler,e.localURLs.GLOBAl_SELECTED_BANK_INFO,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("data-validateId")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.navigateToSelectedBankInfoSuccessHandler,this.navigateToSelectedBankInfoErrorHandler,e.localURLs.GLOBAl_SELECTED_BANK_INFO,{},this)}},navigateToSelectedBankInfoSuccessHandler:function(t){if(t.successResponse){e.data.cpGlobalSelectedBankInfoModel=new e.models.cpGlobalSelectedBankInfoModel,e.data.cpGlobalSelectedBankInfoModel.setResponse(t.successResponse),undefined!=e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.set("origin",""),undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.set("origin",""),undefined!=e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"});e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.navigateToSelectedBankInfoErrorHandler(t)},navigateToSelectedBankInfoErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retreiveGlobalRecurringEditSuccessHandler:function(t){if(t.successResponse){var n;undefined!==e.data.cpGlobalRecurringTransfersModel&&e.data.cpGlobalRecurringTransfersModel.get("deleteBank")==="Y"?n=e.data.cpLanguageMapping.getLabelForKey("cp.globalDelete.successMessage"):n=e.data.cpLanguageMapping.getLabelForKey("cp.globalRecurringTransfer.successMessage"),e.root.common.Alertservice.showSuccessAlert(n,this.navigateNext,!1,!1,this),e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.retreiveGlobalRecurringEditErrorHandler(t)},retreiveGlobalRecurringEditErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateNext:function(){e.data.cpGlobalRecurringTransfersModel.setDefaults();if(undefined===e.data.cpGlobalTransferHistoryModel||e.data.cpGlobalTransferHistoryModel.get("deleteOrigin")!==e.constants.GLOBAL_BANK_RECURRING&&e.data.cpGlobalTransferHistoryModel.get("deleteOrigin")!==e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE)undefined!=e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.get("origin")==e.constants.GLOBAL_HOME_RECURRING?(e.data.cpGlobalTransferHistoryModel.set("origin",""),e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")):undefined!=e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.get("origin")==e.constants.GLOBAL_BANK_RECURRING?(e.data.cpGlobalRetrieveBankDetailsModel.set("origin",""),e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")):undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.get("origin")==e.constants.GLOBAL_FX_RECURRING?(e.data.cpCurrentFxRateCountryDetailsModel.set("origin",""),e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")):undefined!=e.data.cpGlobalSelectedBankInfoModel&&e.data.cpGlobalSelectedBankInfoModel.get("origin")==e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE?(e.data.cpGlobalSelectedBankInfoModel.set("origin",""),e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")):e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu");else{e.data.cpGlobalTransferHistoryModel.set("deleteOrigin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}},requestCancel:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.requestCancelSuccessHandler,this.requestCancelErrorHandler,e.localURLs.GLOBAL_RETRIEVE_DELETE_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_DELETE_BANK,n.action.type=e.constants.GLOBAL_CANCEL_DELETE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.requestCancelSuccessHandler,this.requestCancelErrorHandler,e.localURLs.GLOBAL_RETRIEVE_DELETE_JSON,{},this)}},requestCancelSuccessHandler:function(t){t.successResponse?(this.navigateGlobalRecurringEditCancel(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.requestCancelErrorHandler(t)},requestCancelErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateGlobalRecurringEditCancel:function(t){e.data.cpGlobalRecurringTransfersModel.setDefaults(),e.root.utils.destroyView(this);if(undefined!==e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.get("cancelOrigin")===e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE){e.data.cpGlobalTransferHistoryModel.set("cancelOrigin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.get("cancelOrigin")===e.constants.GLOBAL_BANK_RECURRING){e.data.cpGlobalTransferHistoryModel.set("cancelOrigin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}else{$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})}},navigateBack:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.target).addClass("cp-button-selected");if(undefined!=e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.get("origin")==e.constants.GLOBAL_HOME_RECURRING)e.data.cpGlobalTransferHistoryModel.set("origin",""),e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu");else if(undefined!=e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.get("origin")==e.constants.GLOBAL_BANK_RECURRING){e.data.cpGlobalRetrieveBankDetailsModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}else if(undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.get("origin")==e.constants.GLOBAL_FX_RECURRING){e.data.cpCurrentFxRateCountryDetailsModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpCurrentFxRateView({el:"#cp-menu-container"})}else if(undefined!=e.data.cpGlobalSelectedBankInfoModel&&e.data.cpGlobalSelectedBankInfoModel.get("origin")==e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE){e.data.cpGlobalSelectedBankInfoModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"})}}})}}),define("cp.views.cpGlobalAddBankView",[],function(){return function(e){e.views.cpGlobalAddBankView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"change #countryList":"retrieveAddBankCurrencyDetails","change #currencyList":"retrieveAddBankPaymentMethods","change #paymentMethod":"retrieveAddBankCountryFields","click .cp-tc-checkbox":"checktickimage","click .cp-continue-button":"addBankConfirm","click .cp-cancel-button":"navigateBankDetailsView","blur .secured":"maskValue","focus .secured":"focusMaskValue","click .cp-infoLink":"showDisclaimer"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalAddBank");$(".cp-menu-title").html(t);var n=e.data.cpCurrentFxRateCountryDetailsModel;this.$el.empty().append(e.templates.cpGlobalAddBankView({globalCountryDetails:n})),this.$el.find(".cp-global-pre-tc-content").empty().append(n.get("termsAndConditionContent")),this.appendCountryDetails()},showDisclaimer:function(t){var n=$(t.currentTarget),r=n.attr("data-src");t.preventDefault();if(typeof r!=typeof undefined&&r!==!1){var i=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,i,"",null,null,{url:r,element:$(t.target)},!0)}},maskValue:function(t){if($(t.currentTarget).hasClass("secured")){var n=$(t.currentTarget).val();$(t.currentTarget).attr("data-val",n);var r=e.root.utils.maskCardNumber(n);$(t.currentTarget).val(r)}},focusMaskValue:function(e){$(e.currentTarget).hasClass("secured")&&$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},appendCountryDetails:function(){var t=e.data.cpCurrentFxRateCountryDetailsModel.get("countryListDetails"),n=this.$el.find("#cpGlobalAddBankCountry");n.append(e.templates.cpGlobalAddBankViewCountryDetails());var r=$("#countryList").find(":selected").text(),i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country");$(".cp-country-section").find("#countryList").append($('<option value="Country"/>').html(i));var s=[];for(var o=0;o<t.length;o++)s=t[o],r!==i&&$(".cp-country-section").find("#countryList").append("<option value="+s.countryCode+">"+s.countryName+"</option>")},appendCurrencyDetails:function(){var t=e.data.cpCurrentFxRateCurrencyDetailsModel.get("currencyListDetails"),n=this.$el.find("#cpGlobalAddBankCurrency"),r=$("#countryList").find(":selected").text(),i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),s=[];for(var o=0;o<t.length;o++)s[o]=t[o];this.$el.find("#currencyList").empty(),this.$el.find(".cpCurrencyParent").empty(),this.$el.find("#cpGlobalAddBankCurrency").empty(),n.append(e.templates.cpGlobalAddBankViewCurrencyDetails());var u=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency");$(".cp-currency-section").find("#currencyList").append($("<option />").html(u));var a=$("#paymentMethod").find(":selected").text(),f=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");r!==""&&r!==null&&r!==i&&($(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankPayment").addClass("hidden"),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden"));if(r!==i){$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCurrency").removeClass("hidden");for(var o=0;o<s.length;o++)if(s.length>1)$(".cpCurrencyParent").find("#currencyList").removeClass("hidden"),$(".cpCurrencyParent").find("#cpCurrencyMandatory").removeClass("hidden"),$(".cpCurrencyParent").find("#currencyList").append($("<option />").html(s[o].currencyCode));else{this.$el.find(".cpCurrencyParent").empty(),this.$el.find(".cpCurrencyParent").removeClass("cp-currency-section"),$(".cpCurrencyParent").find("#currencyList").addClass("hidden"),$(".cpCurrencyParent").find("#cpCurrencyMandatory").addClass("hidden");var l=this.$el.find(".cpCurrencyParent"),c=s[o].currencyCode,h=$('<input readonly type="text" id ="currencyList" class="font80 cpGlobalEditProfileView-input-input cp-edit-attention cp-input-border cp-border-radius cp-globalBlue-border paddingLeft8 cp-language-mapping" data-translateIdentifier="" data-validateId="company" maxlength="50"  placeholder=""  ></input>');l.append(h),this.$el.find("#currencyList").val(c),this.retrieveAddBankPaymentMethods()}}},appendPaymentMethods:function(){var t=e.data.cpGlobalPaymentMethodsModel.get("paymentListDetails"),n=this.$el.find("#cpGlobalAddBankPayment"),r=$("#countryList").find(":selected").text(),i=$("#currencyList").find(":selected").text(),s=$("#paymentMethod").find(":selected").text(),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),u=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),a=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod"),f=[];for(var l=0;l<t.length;l++)f[l]=t[l];this.$el.find("#paymentMethod").empty(),this.$el.find(".cpPaymentParent").empty(),this.$el.find("#cpGlobalAddBankPayment").empty();if(i!==u){$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankPayment").removeClass("hidden"),n.append(e.templates.cpGlobalAddBankViewPaymentMethods());var a=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");$(".cp-payment-section").find("#paymentMethod").append($("<option />").html(a));var s=$("#paymentMethod").find(":selected").text(),a=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");s!==""&&s!==null&&s===a&&$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden");for(var l=0;l<f.length;l++)if(f.length>1)$(".cpPaymentParent").find("#paymentMethod").removeClass("hidden"),$(".cpPaymentParent").find("#cpPaymentMandatory").removeClass("hidden"),$(".cp-payment-section").find("#paymentMethod").append($("<option />").html(f[l].paymentMethod));else{this.$el.find(".cpPaymentParent").empty(),this.$el.find(".cpPaymentParent").removeClass("cp-payment-section"),$(".cpPaymentParent").find("#paymentMethod").addClass("hidden"),$(".cpPaymentParent").find("#cpPaymentMandatory").addClass("hidden");var c=this.$el.find(".cpPaymentParent"),h=f[l].paymentMethod,p=$('<input readonly type="text" id ="paymentMethod" class="font80 cpGlobalEditProfileView-input-input cp-edit-attention cp-input-border cp-border-radius cp-globalBlue-border paddingLeft8 cp-language-mapping" data-translateIdentifier="" data-validateId="company" maxlength="50"  placeholder=""  ></input>');c.append(p),this.$el.find("#paymentMethod").val(h),this.retrieveAddBankCountryFields()}}},appendCountryFields:function(){var t=this.$el.find("#cpGlobalAddBankCountryFields"),n=e.data.cpCurrentFxRateCountryDetailsModel.get("beneAndBankFields"),r=$("#currencyList").find(":selected").text(),i=$("#paymentMethod").find(":selected").text(),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod"),u=e.data.cpCurrentFxRateCountryDetailsModel.get("GDFeeApplicableMessage");t.empty();if(r!==s&&i!==o){$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").removeClass("hidden");var a=e.data.cpLanguageMapping.getLabelForKey("ieft-field-group-BeneficiaryAndBankFieldGrouping"),f=e.data.cpLanguageMapping.getLabelForKey("ieft-field-group-bankDetails");for(var l=0;l<n.length;l++){var c=n[l];c.name=="accountHolderName"&&t.append('<br><span class="cp-payment-header cp-list-header-text-color">'+a+"</span><br>"),c.name=="bankName"&&t.append('<br><span class="cp-payment-header cp-list-header-text-color">'+f+"</span><br>"),c.maxLength!=-1?c.maxLength=c.maxLength:c.maxLength="",t.append(e.templates.cpGlobalAddBankCountryFields({countryFields:c})),c.mandatory!==undefined&&c.mandatory!=="N"&&$("#"+c.name+"").not("span").addClass("cp-mandatory-input"),c.secure!==undefined&&c.secure!=="N"&&$("#"+c.name+"").not("span").addClass("secured"),c.hint!==undefined&&c.hint!==""&&$("#"+c.name+"").after('<span class="cp-infoLink cp-right-margin marginLeft5 cp-info cp-tips-info cp-language-mapping" data-src='+c.hint+"></span>")}u!=""&&t.append('<br><span style="color: red;">'+u+"</span>")}},checktickimage:function(){var t=$("#countryList").find(":selected").text(),n=$("#currencyList").find(":selected").text(),r=$("#paymentMethod").find(":selected").text(),i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");n!==s&&r!==o&&t!==i&&($(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button").toggleClass("cp-backgroundcolor2"),this.$el.find(".cp-continue-button").toggleClass("uiDisabled"))},retrieveAddBankCurrencyDetails:function(){var t=$("#countryList").find(":selected").text();if(t!==e.constants.FXRATE_DEFAULT_COUNTRY_VALUE)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveAddBankCurrencySuccessHandler,this.retrieveAddBankCurrencyErrorHandler,e.localURLs.CURRENT_FX_RATE_CURRENCY_DETAILS,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_ADD_BANK,r.action.type=e.constants.GLOBAL_ADD_BANK_CURRENCIES,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.countryCode=this.$el.find("#countryList").val(),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.retrieveAddBankCurrencySuccessHandler,this.retrieveAddBankCurrencyErrorHandler,e.localURLs.CURRENT_FX_RATE_CURRENCY_DETAILS,{},this)}else $(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCurrency").addClass("hidden"),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankPayment").addClass("hidden"),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden")},retrieveAddBankCurrencySuccessHandler:function(t){t.successResponse?(e.data.cpCurrentFxRateCurrencyDetailsModel=new e.models.cpCurrentFxRateCurrencyDetailsModel,e.data.cpCurrentFxRateCurrencyDetailsModel.setResponse(t.successResponse),this.appendCurrencyDetails(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveAddBankCurrencyErrorHandler(t)},retrieveAddBankCurrencyErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveAddBankPaymentMethods:function(){var t=$("#currencyList").find(":selected").text(),n=$("#currencyList").val(),r=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency");if(t!==r||n!==r)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveAddBankPaymentMethodsSuccessHandler,this.retrieveAddBankPaymentMethodsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_PAYMENT_METHODS_JSON,{},this);else{var i={},s={};s.action={},s.action.appName=e.constants.APP_NAME,s.action.criterion=e.constants.GLOBAL_ADD_BANK,s.action.type=e.constants.GLOBAL_PAYMENT_METHOD,s.action.language=e.data.cpLanguageMapping.get("currentLanguage"),s.data={},s.data.countryCode=this.$el.find("#countryList").val(),s.data.currencyCode=this.$el.find("#currencyList").val(),i.inputRequest=s,e.root.common.networkingservice.postRequest(i,this.retrieveAddBankPaymentMethodsSuccessHandler,this.retrieveAddBankPaymentMethodsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_PAYMENT_METHODS_JSON,{},this)}else this.$el.find("#paymentMethod").empty(),this.$el.find(".cpPaymentParent").empty(),this.$el.find("#cpGlobalAddBankPayment").empty(),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden")},retrieveAddBankPaymentMethodsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalPaymentMethodsModel=new e.models.cpGlobalPaymentMethodsModel,e.data.cpGlobalPaymentMethodsModel.setResponse(t.successResponse),this.appendPaymentMethods(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveAddBankPaymentMethodsErrorHandler(t)},retrieveAddBankPaymentMethodsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveAddBankCountryFields:function(){var t=$("#currencyList").find(":selected").text(),n=$("#paymentMethod").find(":selected").text(),r=$("#currencyList").val(),i=$("#paymentMethod").val(),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");if(t!==s&&n!==o||r!==s&&i!==o)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveAddBankCountryFieldsSuccessHandler,this.retrieveAddBankCountryFieldsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRY_FIELDS_JSON,{},this);else{var u={},a={};a.action={},a.action.appName=e.constants.APP_NAME,a.action.criterion=e.constants.GLOBAL_ADD_BANK,a.action.type=e.constants.GLOBAL_COUNTRY_FIELDS,a.action.language=e.data.cpLanguageMapping.get("currentLanguage"),a.data={},a.data.countryCode=this.$el.find("#countryList").val(),a.data.currencyCode=this.$el.find("#currencyList").val(),a.data.paymentMethod=this.$el.find("#paymentMethod").val(),u.inputRequest=a,e.root.common.networkingservice.postRequest(u,this.retrieveAddBankCountryFieldsSuccessHandler,this.retrieveAddBankCountryFieldsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRY_FIELDS_JSON,{},this)}else{var f=this.$el.find("#cpGlobalAddBankCountryFields");f.empty()}},retrieveAddBankCountryFieldsSuccessHandler:function(t){t.successResponse?(e.data.cpCurrentFxRateCountryDetailsModel.setCountryFields(t.successResponse),this.appendCountryFields(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveAddBankCountryFieldsErrorHandler(t)},retrieveAddBankCountryFieldsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},addBankConfirm:function(t){var n=e.data.cpLanguageMapping.getLabelForKey("cp.globalAddBank.confirmMessage");e.root.common.Alertservice.showDisclaimerWarning(this,n,"",this.addBankSuccess,this.navigateBack,"",!1)},navigateBankDetailsView:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})},navigateBack:function(t){$(document.activeElement).blur();if(undefined!==e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.get("screen")===e.constants.GLOBAL_BANK_RECURRING){e.data.cpGlobalRetrieveBankDetailsModel.set("screen",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpGlobalRecurringTransfersModel&&e.data.cpGlobalRecurringTransfersModel.get("screen")===e.constants.GLOBAL_ADD_BANK_RECURRING&&e.data.cpGlobalRecurringTransfersModel.get("edit")==="False"){e.data.cpGlobalRecurringTransfersModel.set("screen",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpGlobalRecurringTransfersModel&&e.data.cpGlobalRecurringTransfersModel.get("screen")===e.constants.GLOBAL_ADD_BANK_RECURRING){e.data.cpGlobalRecurringTransfersModel.set("screen","addBankEdit"),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpGlobalOTTUserBanksDetailsModel&&e.data.cpGlobalOTTUserBanksDetailsModel.get("screen")===e.constants.GLOBAL_OTT_HOME){e.data.cpGlobalOTTUserBanksDetailsModel.set("screen",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalOTTUserBanksDetailsView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpGlobalSelectedBankInfoModel&&e.data.cpGlobalSelectedBankInfoModel.get("screen")===e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE){e.data.cpGlobalSelectedBankInfoModel.set("screen",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"})}},addBankSuccess:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.addBankConfirmSuccessHandler,this.addBankConfirmErrorHandler,e.localURLs.GLOBAL_RECURRING_EDIT_JSON,{},this);else{var n={},r={};r.action={};var i=e.data.cpCurrentFxRateCountryDetailsModel;r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_ADD_BANK,r.action.type=e.constants.GLOBAL_ADD_BANK_CONFIRM,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={};var s=this.$el.find("#countryList").val(),o=this.$el.find("#currencyList").val(),u=this.$el.find("#paymentMethod").val();r.data.beneAndBankFields=[],r.data.beneAndBankFields.push({name:"Country",value:s}),r.data.beneAndBankFields.push({name:"PymtCurrency",value:o}),r.data.beneAndBankFields.push({name:"PaymentMethod",value:u});for(var a=0;a<i.get("beneAndBankFields").length;a++){var f=i.get("beneAndBankFields")[a].name,l=i.get("beneAndBankFields")[a].secure;if(l!=="Y")var c=$("#"+f+"").val();if(l!=="N")var c=$("#"+f+"").attr("data-val");r.data.beneAndBankFields.push({name:f,value:c})}n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.addBankConfirmSuccessHandler,this.addBankConfirmErrorHandler,e.localURLs.GLOBAL_RECURRING_EDIT_JSON,{},this)}},addBankConfirmSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);switch(t.successResponse.mfaAuthenticationCode){case e.constants.MFA_NONE:e.root.utils.navigateView(this,"cpGlobalBankDetailsView",e);break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:e.constants.GLOBAL_SAVE_ADD_BANK});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:e.constants.GLOBAL_SAVE_ADD_BANK});break;default:}}else t.errorResponse&&this.addBankConfirmErrorHandler(t)},addBankConfirmErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorFields===undefined?"":t.errorResponse.errorFields,r=Object.keys(n);if(r.length==0){var i=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(i)}var s=e.data.cpCurrentFxRateCountryDetailsModel.get("beneAndBankFields");for(var o=0;o<s.length;o++){var u=s[o].name;this.$el.find("."+u+"").empty(),this.$el.find("#"+u+"").not("span").removeClass("cp-red-border").addClass("cp-globalBlue-border")}for(var a=0;a<n.length;a++){this.$el.find("#"+n[a].field+"").not("span").removeClass("cp-globalBlue-border").addClass("cp-red-border"),this.$el.find("."+n[a].field+"").empty();for(var f=0;f<t.errorResponse.errorFields[a].errorList.length;f++){var l=$("<span data-validateId="+n[a].field+' class= "cp-reg-instruction-text cp-form-error cp-language-mapping">'+n[a].errorList[f].error+"</span>");this.$el.find("."+n[a].field+"").append(l)}}if(r.length>0){var c=this.$el.find("#"+n[0].field+"");c&&c.length>0&&$(".cpEditProfileView").animate({scrollTop:c.offset().top},500)}}else e.root.common.Alertservice.showAlert(i)},showAlertMessage:function(t){e.root.common.Alertservice.showAlert(t),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")}})}}),define("cp.views.cpCurrentFxRateView",[],function(){return function(e){e.views.cpCurrentFxRateView=CT.View.extend({initialize:function(){this.retrieveFxCountryDetails()},events:{"click .cp-oneTimeTransfer-Link":"navigateOneTimeTransfer","click .cp-recurringTransfers-Link":"navigateGlobalRecurringTransfers","click .cp-globalDepositsHomePage-Link":"navigateGlobalDepositsHomePage","change #countryList":"retrieveFxCurrencyDetails","change #currencyList":"retrieveFxRateDetails"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalTransfer.currentFXRate");$(".cp-menu-title").html(t);var n=e.data.cpCurrentFxRateCountryDetailsModel;this.$el.empty().append(e.templates.cpCurrentFxRateView({globalCountryDetails:n})),this.retrieveFxDefaultDetails()},appendCountryDetails:function(){var t=e.data.cpCurrentFxRateCountryDetailsModel.get("countryListDetails"),n=this.$el.find("#cp-global-transfer-wrapper-country"),r=[];for(var i=0;i<t.length;i++)r[i]=t[i],$(".cp-fxrate-country-section").find("#countryList").append($("<option  value="+r[i].countryCode+" />").html(r[i].countryName))},appendCurrencyDetails:function(){var t=e.data.cpCurrentFxRateCurrencyDetailsModel.get("currencyListDetails"),n=this.$el.find("#cp-global-transfer-wrapper-currency"),r=$("#countryList").find(":selected").text(),i=e.constants.FXRATE_DEFAULT_COUNTRY_VALUE,s=[];for(var o=0;o<t.length;o++)s[o]=t[o];this.$el.find("#currencyList").empty();var u=e.data.cpLanguageMapping.getLabelForKey("cp.currentFXRate.Currency");$(".cp-fxrate-currency-section").find("#currencyList").append($("<option />").html(u)),this.$el.find(".cp-currentFxRate-bottomView").html("");if(r!==i)for(var o=0;o<s.length;o++)$(".cp-fxrate-currency-section").find("#currencyList").append($("<option />").html(s[o].currencyCode))},appendFxRate:function(){var t=e.data.cpCurrentFxRateModel.get("fxRate"),n=this.$el.find(".cp-currentFxRate-bottomView"),r=$("#currencyList").find(":selected").text(),i=e.constants.FXRATE_DEFAULT_CURRENCY_VALUE;n.html(""),r!==i&&n.append($("<span />").html(t))},retrieveFxDefaultDetails:function(){var t=this.$el.find("#cp-global-transfer-wrapper-country"),n=this.$el.find("#cp-global-transfer-wrapper-currency"),r=this.$el.find("#cp-global-transfer-wrapper-fxrate");t.append(e.templates.cpCurrentFxRateViewCountryDetails()),n.append(e.templates.cpCurrentFxRateViewCurrencyDetails()),r.append(e.templates.cpCurrentFxRateDetails());var i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),s=e.data.cpLanguageMapping.getLabelForKey("cp.currentFXRate.Currency");$(".cp-fxrate-country-section").find("#countryList").append($('<option  value="Country" />').html(i)),$(".cp-fxrate-currency-section").find("#currencyList").append($("<option />").html(s)),this.appendCountryDetails()},retrieveFxCountryDetails:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveFxCountrySuccessHandler,this.retrieveFxCountryErrorHandler,e.localURLs.CURRENT_FX_RATE_COUNTRY_DETAILS,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CURRENT_FX_RATE,n.action.type=e.constants.GLOBAL_ADD_BANK_COUNTRIES,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.retrieveFxCountrySuccessHandler,this.retrieveFxCountryErrorHandler,e.localURLs.CURRENT_FX_RATE_COUNTRY_DETAILS,{},this)}},retrieveFxCurrencyDetails:function(){var t=$("#countryList").find(":selected").text(),n=e.constants.FXRATE_DEFAULT_COUNTRY_VALUE;if(t!==n)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveFxCurrencySuccessHandler,this.retrieveFxCurrencyErrorHandler,e.localURLs.CURRENT_FX_RATE_CURRENCY_DETAILS,{},this);else{var r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.CURRENT_FX_RATE,i.action.type=e.constants.GLOBAL_ADD_BANK_CURRENCIES,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),i.data={},i.data.countryCode=this.$el.find("#countryList").val(),r.inputRequest=i,e.root.common.networkingservice.postRequest(r,this.retrieveFxCurrencySuccessHandler,this.retrieveFxCurrencyErrorHandler,e.localURLs.CURRENT_FX_RATE_CURRENCY_DETAILS,{},this)}else{this.$el.find("#currencyList").empty();var s=e.data.cpLanguageMapping.getLabelForKey("cp.currentFXRate.Currency");$(".cp-fxrate-currency-section").find("#currencyList").append($("<option />").html(s)),this.$el.find(".cp-currentFxRate-bottomView").html("")}},retrieveFxRateDetails:function(){var t=this.$el.find(".cp-currentFxRate-bottomView"),n=$("#currencyList").find(":selected").text(),r=e.constants.FXRATE_DEFAULT_CURRENCY_VALUE;if(n!==r)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveFxRateSuccessHandler,this.retrieveFxRateErrorHandler,e.localURLs.CURRENT_FX_RATE,{},this);else{var i={},s={};s.action={},s.action.appName=e.constants.APP_NAME,s.action.criterion=e.constants.CURRENT_FX_RATE,s.action.type=e.constants.CURRENT_FX_RATE_GET_FXRATE,s.action.language=e.data.cpLanguageMapping.get("currentLanguage"),s.data={},s.data.sourceCurrencyCode=e.constants.FXRATE_SOURCE_CURRENCY_CODE,s.data.destCurrencyCode=this.$el.find("#currencyList").val(),i.inputRequest=s,e.root.common.networkingservice.postRequest(i,this.retrieveFxRateSuccessHandler,this.retrieveFxRateErrorHandler,e.localURLs.CURRENT_FX_RATE,{},this)}else t.html("")},retrieveFxCountrySuccessHandler:function(t){t.successResponse?(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveFxCountryErrorHandler(t)},retrieveFxCountryErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveFxCurrencySuccessHandler:function(t){t.successResponse?(e.data.cpCurrentFxRateCurrencyDetailsModel=new e.models.cpCurrentFxRateCurrencyDetailsModel,e.data.cpCurrentFxRateCurrencyDetailsModel.setResponse(t.successResponse),this.appendCurrencyDetails(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveFxCurrencyErrorHandler(t)},retrieveFxCurrencyErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveFxRateSuccessHandler:function(t){t.successResponse?(e.data.cpCurrentFxRateModel=new e.models.cpCurrentFxRateModel,e.data.cpCurrentFxRateModel.setResponse(t.successResponse),this.appendFxRate(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveFxRateErrorHandler(t)},retrieveFxRateErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateOneTimeTransfer:function(t){var n=e.data.cpCurrentFxRateCountryDetailsModel;n.set("origin",e.constants.GLOBAL_FX_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalOTTUserBanksDetailsView({el:"#cp-menu-container"})},navigateGlobalRecurringTransfers:function(t){var n=e.data.cpCurrentFxRateCountryDetailsModel;n.set("origin",e.constants.GLOBAL_FX_RECURRING),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})},navigateGlobalDepositsHomePage:function(t){e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")}})}}),define("cp.views.cpGlobalOTTUserBanksDetailsView",[],function(){return function(e){e.views.cpGlobalOTTUserBanksDetailsView=CT.View.extend({initialize:function(){this.retrieveUserBanks()},events:{"click .cp-oneTimeTransfer-transferLink":"submitTransferDetails","click .cp-schedule-transferLink":"retrieveSelectedBankDetails","click .cp-bankDetails-link":"navigateToSelectedBankInfo","click .cp-addBank-link":"navigateAddBank","click .cp-cancellink":"navigateOnCancel","keypress .cp-transfer-amount":"checkAmountLength","change .cp-input-amount":"formatNumber"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalOneTimeTransfer");$(".cp-menu-title").html(t);var n=e.data.cpGlobalOTTUserBanksDetailsModel;this.$el.empty().append(e.templates.cpGlobalOneTimeTransfer({globalDetails:n})),this.appendUserBanks()},appendUserBanks:function(){var t=e.data.cpGlobalOTTUserBanksDetailsModel.get("banksListDetails"),n=this.$el.find("#cp-global-parent-wrapper-userBanks"),r=[];for(var i=0;i<t.length;i++){r=t[i],n.append(e.templates.cpGlobalOneTimeTransferUserBanks({model:r}));var s=e.root.utils.maskCardNumber(r.accountNo);this.$el.find("#"+r.deviceID+"").text(s)}this.retrieveOTTDefaultDetails(),undefined!==e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.get("oneTimeTransferOrigin")===e.constants.GLOBAL_BANK_RECURRING&&(this.displaySelectedBankDetails(),e.data.cpGlobalRetrieveBankDetailsModel.set("oneTimeTransferOrigin","")),undefined!==e.data.cpGlobalSelectedBankInfoModel&&e.data.cpGlobalSelectedBankInfoModel.get("oneTimeTransferOrigin")===e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE&&(this.displaySelectedBankDetails(),e.data.cpGlobalSelectedBankInfoModel.set("oneTimeTransferOrigin",""))},displaySelectedBankDetails:function(){var t=e.data.cpGlobalOTTGetFxRateModel.get("banksDetails"),n=e.data.cpGlobalOTTGetFxRateModel.get("fxRate"),r=this.$el.find("#cp-global-recipientName"),i=this.$el.find("#cp-global-recipientBank"),s=this.$el.find("#cp-global-exchangeRate");r.empty().append($("<div />").html(t.payeeName)),i.empty().append($("<div />").html(t.bankName)),s.empty().append($("<div />").html(n)),this.$el.find("#cp-global-amount").removeClass("cp-amount-disabled"),this.$el.find(".cp-oneTimeTransfer-transferLink").removeClass("uiDisabled"),this.$el.find(".cp-oneTimeTransferPage-outerView-border").removeClass("cp-oneTimeTransferPage-outerView-border-selected"),this.$el.find("#border-"+t.deviceID+"").addClass("cp-oneTimeTransferPage-outerView-border-selected")},retrieveSelectedBankDetails:function(t){this.$el.find("#cp-global-amount").val("");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveSelectedBankDetailsSuccessHandler,this.retrieveSelectedBankDetailsErrorHandler,e.localURLs.GLOBAL_OTT_GET_FXRATE,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_USER_BANKS,r.action.type="getFXRate",r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("id")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.retrieveSelectedBankDetailsSuccessHandler,this.retrieveSelectedBankDetailsErrorHandler,e.localURLs.GLOBAL_OTT_GET_FXRATE,{},this)}},retrieveSelectedBankDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalOTTGetFxRateModel=new e.models.cpGlobalOTTGetFxRateModel,e.data.cpGlobalOTTGetFxRateModel.setResponse(t.successResponse),this.displaySelectedBankDetails(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveSelectedBankDetailsErrorHandler(t)},retrieveSelectedBankDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveOTTDefaultDetails:function(){var t=this.$el.find("#cp-global-parent-wrapper-bankDetails");t.append(e.templates.cpGlobalOneTimeTransferBankDetails())},retrieveUserBanks:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveUserBanksSuccessHandler,this.retrieveUserBanksErrorHandler,e.localURLs.GLOBAL_OTT_USER_BANKS,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_OTT_USER_BANKS,n.action.type="getUserBanks",n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.retrieveUserBanksSuccessHandler,this.retrieveUserBanksErrorHandler,e.localURLs.GLOBAL_OTT_USER_BANKS,{},this)}},retrieveUserBanksSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalOTTUserBanksDetailsModel=new e.models.cpGlobalOTTUserBanksDetailsModel,e.data.cpGlobalOTTUserBanksDetailsModel.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveUserBanksErrorHandler(t)},retrieveUserBanksErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},checkAmountLength:function(e){var t=$(e.currentTarget);t.val().length>=10&&(e.preventDefault(),e.stopPropagation())},formatNumber:function(e){var t=$(e.currentTarget),n=parseFloat(t.val());t.val(n.toFixed(2))},submitTransferDetails:function(t){this.$el.find("#cp-ott-alertText").empty();var n=this.$el.find("#cp-global-amount").val(),r=parseFloat(n),i=r.toFixed(2);if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveTransferDetailsSuccessHandler,this.retrieveTransferDetailsErrorHandler,e.localURLs.GLOBAL_OTT_CONFIRM,{},this);else{var s=e.data.cpGlobalOTTGetFxRateModel.get("banksDetails"),o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.GLOBAL_OTT_CONFIRM,u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),u.data={},u.data.deviceID=e.root.utils.formatDeviceId(s.deviceID),u.data.amount=i,o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.retrieveTransferDetailsSuccessHandler,this.retrieveTransferDetailsErrorHandler,e.localURLs.GLOBAL_OTT_CONFIRM,{},this)}},retrieveTransferDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalOTTConfirmModel=new e.models.cpGlobalOTTConfirmModel,e.data.cpGlobalOTTConfirmModel.setResponse(t.successResponse),this.navigateOTTConfirm(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveTransferDetailsErrorHandler(t)},retrieveTransferDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateOTTConfirm:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalOTTConfirmView({el:"#cp-menu-container"})},navigateAddBank:function(t){var n=e.data.cpGlobalOTTUserBanksDetailsModel;n.set("screen",e.constants.GLOBAL_OTT_HOME),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalBankMFAView({el:"#cp-menu-container"})},navigateToSelectedBankInfo:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.navigateToSelectedBankInfoSuccessHandler,this.navigateToSelectedBankInfoErrorHandler,e.localURLs.GLOBAl_SELECTED_BANK_INFO,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("data-validateId")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.navigateToSelectedBankInfoSuccessHandler,this.navigateToSelectedBankInfoErrorHandler,e.localURLs.GLOBAl_SELECTED_BANK_INFO,{},this)}},navigateToSelectedBankInfoSuccessHandler:function(t){if(t.successResponse){e.data.cpGlobalSelectedBankInfoModel=new e.models.cpGlobalSelectedBankInfoModel,e.data.cpGlobalSelectedBankInfoModel.setResponse(t.successResponse),undefined!=e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.set("origin",""),undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.set("origin",""),undefined!=e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"});e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.navigateToSelectedBankInfoErrorHandler(t)},navigateToSelectedBankInfoErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateOnCancel:function(t){$(document.activeElement).blur();if(undefined!==e.data.cpGlobalTransferHistoryModel&&e.data.cpGlobalTransferHistoryModel.get("origin")===e.constants.GLOBAL_HOME_RECURRING)e.data.cpGlobalTransferHistoryModel.set("origin",""),e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu");else if(undefined!==e.data.cpGlobalRetrieveBankDetailsModel&&e.data.cpGlobalRetrieveBankDetailsModel.get("origin")===e.constants.GLOBAL_BANK_RECURRING){e.data.cpGlobalRetrieveBankDetailsModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.get("origin")===e.constants.GLOBAL_FX_RECURRING){e.data.cpCurrentFxRateCountryDetailsModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpCurrentFxRateView({el:"#cp-menu-container"})}else if(undefined!==e.data.cpGlobalSelectedBankInfoModel&&e.data.cpGlobalSelectedBankInfoModel.get("origin")===e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE){e.data.cpGlobalSelectedBankInfoModel.set("origin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"})}}})}}),define("cp.views.cpGlobalOTTConfirmView",[],function(){return function(e){e.views.cpGlobalOTTConfirmView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-oneTimeTransfer-confirmLink":"confirmOTTTransfer","click .cp-ott-backLink":"navigateOTTHomeScreen"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalOneTimeTransfer");$(".cp-menu-title").html(t);var n=e.data.cpGlobalOTTConfirmModel;this.$el.empty().append(e.templates.cpGlobalOneTimeTransferConfirm({reviewTransferDetails:n})),n.get("negativeAmountMessage")!==undefined&&n.get("negativeAmountMessage")!==""&&($(".cp-ott-confirmation-text").append('<div class="cp-ott-confirm-alert red wordWrap cp-language-mapping">'+n.get("negativeAmountMessage")+"</div>"),$(".cp-cancel-transfer-btn").find(".cp-oneTimeTransfer-confirmLink").addClass("uiDisabled"),$(".cp-cancel-transfer-btn").find(".cp-oneTimeTransfer-confirmLink").removeClass("cp-backgroundcolor-gd3").addClass("cp-textcolor1"))},confirmOTTTransfer:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveTransferSuccessDetailsSuccessHandler,this.retrieveTransferSuccessDetailsErrorHandler,e.localURLs.GLOBAL_OTT_SUCCESS,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_SUCCESS,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.retrieveTransferSuccessDetailsSuccessHandler,this.retrieveTransferSuccessDetailsErrorHandler,e.localURLs.GLOBAL_OTT_SUCCESS,{},this)}},retrieveTransferSuccessDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalOTTSuccessModel=new e.models.cpGlobalOTTSuccessModel,e.data.cpGlobalOTTSuccessModel.setResponse(t.successResponse),this.navigateOTTSuccess(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveTransferSuccessDetailsErrorHandler(t)},retrieveTransferSuccessDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n,this.navigateOTTHomeScreen,null,null,this)}},navigateOTTSuccess:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalOTTSuccessView({el:"#cp-menu-container"})},navigateOTTHomeScreen:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalOTTUserBanksDetailsView({el:"#cp-menu-container"})}})}}),define("cp.views.cpGlobalOTTSuccessView",[],function(){return function(e){e.views.cpGlobalOTTSuccessView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-doneLink":"navigateGlobalDepositsHomePage","click .cp-email-link":"sendEmailNotification"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalOneTimeTransfer");$(".cp-menu-title").html(t);var n=e.data.cpGlobalOTTSuccessModel;this.$el.empty().append(e.templates.cpGlobalOneTimeTransferSuccess({reviewTransferDetails:n}))},sendEmailNotification:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.sendEmailNotificationSuccessHandler,this.sendEmailNotificationErrorHandler,e.localURLs.GLOBAL_OTT_USER_BANKS,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_SEND_NOTIFICATION,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.sendEmailNotificationSuccessHandler,this.sendEmailNotificationErrorHandler,e.localURLs.GLOBAL_OTT_USER_BANKS,{},this)}},sendEmailNotificationSuccessHandler:function(t){if(t.successResponse){var n="An email confirmation has been sent.";e.root.common.Alertservice.showSuccessAlert(n,this.navigateNext,!1,!1,this)}else t.errorResponse&&this.sendEmailNotificationErrorHandler(t)},sendEmailNotificationErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateGlobalDepositsHomePage:function(t){e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")}})}}),define("cp.views.cpGlobalOTTCancelView",[],function(){return function(e){e.views.cpGlobalOTTCancelView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-ott-cancelLink":"reviewCancelOneTimeTransfer","click .cp-global-backLink":"navigateGlobalDepositsHomePage"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalOneTimeTransfer");$(".cp-menu-title").html(t);var n=e.data.cpGlobalOTTCancelModel;this.$el.empty().append(e.templates.cpGlobalOneTimeTransferCancel({reviewTransferDetails:n}))},reviewCancelOneTimeTransfer:function(t){var n=e.data.cpLanguageMapping.getLabelForKey("cp.globalOTT.cancelTransfer.alert"),r="";e.root.common.Alertservice.showDeleteWarning(this,n,r,"",this.cancelOneTimeTransferConfirm,"","",!1,"")},cancelOneTimeTransferConfirm:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.cancelOneTimeTransferConfirmSuccessHandler,this.cancelOneTimeTransferConfirmErrorHandler,e.localURLs.GLOBAL_OTT_CONFIRM,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_CANCEL_CONFIRM,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.cancelOneTimeTransferConfirmSuccessHandler,this.cancelOneTimeTransferConfirmErrorHandler,e.localURLs.GLOBAL_OTT_CONFIRM,{},this)}},cancelOneTimeTransferConfirmSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpLanguageMapping.getLabelForKey("cp.globalOTT.cancelTransfer");e.root.common.Alertservice.showSuccessAlert(n,this.navigateGlobalDepositsHomePage,!1,!1,this),e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.cancelOneTimeTransferConfirmErrorHandler(t)},cancelOneTimeTransferConfirmErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateGlobalDepositsHomePage:function(t){e.root.eventBus.trigger("loadMenuItem","cp-globalDeposits-Menu")}})}}),define("cp.views.cpGlobalEditView",[],function(){return function(e){e.views.cpGlobalEditView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"change #countryList":"retrieveEditBankCurrencyDetails","change #currencyList":"retrieveEditBankPaymentMethods","change #paymentMethod":"retrieveEditBankCountryFields","click .cp-tc-checkbox":"checktickimage","click .cp-continue-button":"editBankConfirm","click .cp-cancel-button":"navigateBankDetailsView","blur .cp-secured-value,.secured":"maskValue","focus .cp-secured-value,.secured":"focusMaskValue","click .cp-infoLink":"showDisclaimer"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalEditBank");$(".cp-menu-title").html(t);var n=e.data.cpGlobalEditRetrieveModel.get("currentBalance");this.$el.empty().append(e.templates.cpGlobalEditView({currentBalance:n})),this.setEditBankInfo()},showDisclaimer:function(t){var n=$(t.currentTarget),r=n.attr("data-src");t.preventDefault();if(typeof r!=typeof undefined&&r!==!1){var i=e.data.cpLanguageMapping.getLabelForKey("cp.common.disclaimer.alert");e.root.common.Alertservice.showDisclaimerWarning(this,i,"",null,null,{url:r,element:$(t.target)},!0)}},maskValue:function(t){if($(t.currentTarget).hasClass("cp-secured-value")||$(t.currentTarget).hasClass("secured")){var n=$(t.currentTarget).val();$(t.currentTarget).attr("data-val",n);var r=e.root.utils.maskCardNumber(n);$(t.currentTarget).val(r)}},focusMaskValue:function(e){($(e.currentTarget).hasClass("cp-secured-value")||$(e.currentTarget).hasClass("secured"))&&$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},setEditBankInfo:function(){e.data.cpGlobalTransferHistoryModel.set("edit","False");var t=e.data.cpGlobalEditRetrieveModel.get("countryListDetails"),n=e.data.cpGlobalEditRetrieveModel.get("currencyListDetails"),r=e.data.cpGlobalEditRetrieveModel.get("paymentMethodsListDetails"),i=e.data.cpGlobalEditRetrieveModel.get("beneAndBankFields");this.$el.find(".cp-global-pre-tc-content").empty().append(e.data.cpGlobalEditRetrieveModel.get("termsAndConditionContent"));var s=this.$el.find("#cpGlobalAddBankCountry"),o=this.$el.find("#cpGlobalAddBankCurrency"),u=this.$el.find("#cpGlobalAddBankPayment"),a=this.$el.find("#cpGlobalAddBankCountryFields");s.append(e.templates.cpGlobalEditBankViewCountryDetails()),o.append(e.templates.cpGlobalAddBankViewCurrencyDetails()),u.append(e.templates.cpGlobalAddBankViewPaymentMethods());var f=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),l=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),c=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");$(".cp-country-section").find("#countryList").append($('<option value="Country"/>').html(f)),$(".cp-currency-section").find("#currencyList").append($("<option/>").html(l)),$(".cp-payment-section").find("#paymentMethod").append($("<option/>").html(c));var h=[],p=[],d=[];for(var v=0;v<t.length;v++)h=t[v],h.selected!==undefined&&h.selected!=="N"?$(".cp-country-section").find("#countryList").append("<option selected = "+h.selected+" value="+h.name+">"+h.displayName+"</option>"):$(".cp-country-section").find("#countryList").append("<option value="+h.name+">"+h.displayName+"</option>");for(var v=0;v<n.length;v++){p=n[v];if(n.length>1)p.selected!==undefined&&p.selected!=="N"?$(".cp-currency-section").find("#currencyList").append("<option selected = "+p.selected+">"+p.currency+"</option>"):$(".cp-currency-section").find("#currencyList").append("<option>"+p.currency+"</option>");else{this.$el.find(".cpCurrencyParent").empty(),this.$el.find(".cpCurrencyParent").removeClass("cp-currency-section"),$(".cpCurrencyParent").find("#currencyList").addClass("hidden"),$(".cpCurrencyParent").find("#cpCurrencyMandatory").addClass("hidden");var o=this.$el.find(".cpCurrencyParent"),m=p.currency,g=$('<input readonly type="text" id ="currencyList" class="font80 cpGlobalEditProfileView-input-input cp-edit-attention cp-input-border cp-border-radius cp-globalBlue-border paddingLeft8 cp-language-mapping" data-translateIdentifier="" data-validateId="company" maxlength="50"  placeholder=""  ></input>');o.append(g),this.$el.find("#currencyList").val(m)}}for(var v=0;v<r.length;v++){d=r[v];if(r.length>1)d.selected!==undefined&&d.selected!=="N"?$(".cp-payment-section").find("#paymentMethod").append("<option selected = "+d.selected+">"+d.paymentMethod+"</option>"):$(".cp-payment-section").find("#paymentMethod").append("<option>"+d.paymentMethod+"</option>");else{this.$el.find(".cpPaymentParent").empty(),this.$el.find(".cpPaymentParent").removeClass("cp-payment-section"),$(".cpPaymentParent").find("#paymentMethod").addClass("hidden"),$(".cpPaymentParent").find("#cpPaymentMandatory").addClass("hidden");var u=this.$el.find(".cpPaymentParent"),y=d.paymentMethod,b=$('<input readonly type="text" id ="paymentMethod" class="font80 cpGlobalEditProfileView-input-input cp-edit-attention cp-input-border cp-border-radius cp-globalBlue-border paddingLeft8 cp-language-mapping" data-translateIdentifier="" data-validateId="company" maxlength="50"  placeholder=""  ></input>');u.append(b),this.$el.find("#paymentMethod").val(y)}}for(var v=0;v<i.length;v++){var w=i[v];w.maxLength!=-1?w.maxLength=w.maxLength:w.maxLength="",a.append(e.templates.cpGlobalEditBankCountryFields({countryFields:w})),w.mandatory!==undefined&&w.mandatory!=="N"&&$("#"+w.name+"").not("span").addClass("cp-mandatory-input");if(w.secure!==undefined&&w.secure!=="N"){$("#"+w.name+"").not("span").addClass("cp-secured-value");var E=$("#"+w.name+"").val();$("#"+w.name+"").not("span").attr("data-val",E);var S=e.root.utils.maskCardNumber(E);$("#"+w.name+"").not("span").val(S)}w.hint!==undefined&&w.hint!==""&&$("#"+w.name+"").after('<span class="cp-infoLink cp-right-margin marginLeft5 cp-info cp-tips-info cp-language-mapping" data-src='+w.hint+"></span>")}},appendCurrencyDetails:function(){var t=e.data.cpCurrentFxRateCurrencyDetailsModel.get("currencyListDetails"),n=this.$el.find("#cpGlobalAddBankCurrency"),r=$("#countryList").find(":selected").text(),i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),s=[];for(var o=0;o<t.length;o++)s[o]=t[o];this.$el.find("#currencyList").empty(),this.$el.find(".cpCurrencyParent").empty(),this.$el.find("#cpGlobalAddBankCurrency").empty(),n.append(e.templates.cpGlobalAddBankViewCurrencyDetails());var u=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency");$(".cp-currency-section").find("#currencyList").append($("<option />").html(u));var a=$("#paymentMethod").find(":selected").text(),f=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");r!==""&&r!==null&&r!==i&&($(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankPayment").addClass("hidden"),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden"));if(r!==i){$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCurrency").removeClass("hidden");for(var o=0;o<s.length;o++)if(s.length>1)$(".cpCurrencyParent").find("#currencyList").removeClass("hidden"),$(".cpCurrencyParent").find("#cpCurrencyMandatory").removeClass("hidden"),$(".cpCurrencyParent").find("#currencyList").append($("<option />").html(s[o].currencyCode));else{this.$el.find(".cpCurrencyParent").empty(),this.$el.find(".cpCurrencyParent").removeClass("cp-currency-section"),$(".cpCurrencyParent").find("#currencyList").addClass("hidden"),$(".cpCurrencyParent").find("#cpCurrencyMandatory").addClass("hidden");var l=this.$el.find(".cpCurrencyParent"),c=s[o].currencyCode,h=$('<input readonly type="text" id ="currencyList" class="font80 cpGlobalEditProfileView-input-input cp-edit-attention cp-input-border cp-border-radius cp-globalBlue-border paddingLeft8 cp-language-mapping" data-translateIdentifier="" data-validateId="company" maxlength="50"  placeholder=""  ></input>');l.append(h),this.$el.find("#currencyList").val(c),this.retrieveEditBankPaymentMethods()}}},appendPaymentMethods:function(){var t=e.data.cpGlobalPaymentMethodsModel.get("paymentListDetails"),n=this.$el.find("#cpGlobalAddBankPayment"),r=$("#countryList").find(":selected").text(),i=$("#currencyList").find(":selected").text(),s=$("#paymentMethod").find(":selected").text(),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),u=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),a=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod"),f=[];for(var l=0;l<t.length;l++)f[l]=t[l];this.$el.find("#paymentMethod").empty(),this.$el.find(".cpPaymentParent").empty(),this.$el.find("#cpGlobalAddBankPayment").empty();if(i!==u){$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankPayment").removeClass("hidden"),n.append(e.templates.cpGlobalAddBankViewPaymentMethods());var a=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");$(".cp-payment-section").find("#paymentMethod").append($("<option />").html(a));var s=$("#paymentMethod").find(":selected").text();s!==""&&s!==null&&s===a&&$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden");for(var l=0;l<f.length;l++)if(f.length>1)$(".cpPaymentParent").find("#paymentMethod").removeClass("hidden"),$(".cpPaymentParent").find("#cpPaymentMandatory").removeClass("hidden"),$(".cp-payment-section").find("#paymentMethod").append($("<option />").html(f[l].paymentMethod));else{this.$el.find(".cpPaymentParent").empty(),this.$el.find(".cpPaymentParent").removeClass("cp-payment-section"),$(".cpPaymentParent").find("#paymentMethod").addClass("hidden"),$(".cpPaymentParent").find("#cpPaymentMandatory").addClass("hidden");var c=this.$el.find(".cpPaymentParent"),h=f[l].paymentMethod,p=$('<input readonly type="text" id ="paymentMethod" class="font80 cpGlobalEditProfileView-input-input cp-edit-attention cp-input-border cp-border-radius cp-globalBlue-border paddingLeft8 cp-language-mapping" data-translateIdentifier="" data-validateId="company" maxlength="50"  placeholder=""  ></input>');c.append(p),this.$el.find("#paymentMethod").val(h),this.retrieveEditBankCountryFields()}}},appendCountryFields:function(){var t=this.$el.find("#cpGlobalAddBankCountryFields"),n=e.data.cpGlobalEditRetrieveModel.get("beneAndBankFields"),r=$("#currencyList").find(":selected").text(),i=$("#paymentMethod").find(":selected").text(),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");t.empty();if(r!==s&&i!==o){$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").removeClass("hidden");for(var u=0;u<n.length;u++){var a=n[u];a.maxLength!=-1?a.maxLength=a.maxLength:a.maxLength="",t.append(e.templates.cpGlobalEditBankCountryFields({countryFields:a})),a.mandatory!==undefined&&a.mandatory!=="N"&&$("#"+a.name+"").not("span").addClass("cp-mandatory-input"),a.secure!==undefined&&a.secure!=="N"&&$("#"+a.name+"").not("span").addClass("secured"),a.hint!==undefined&&a.hint!==""&&$("#"+a.name+"").after('<span class="cp-infoLink cp-right-margin marginLeft5 cp-info cp-tips-info cp-language-mapping" data-src='+a.hint+"></span>")}}},checktickimage:function(){var t=$("#countryList").find(":selected").text(),n=$("#currencyList").find(":selected").text(),r=$("#paymentMethod").find(":selected").text(),i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country"),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");n!==s&&r!==o&&t!==i&&($(".cp-tc-checkbox").toggleClass("cp-Checkmark-logo-tc"),this.$el.find(".cp-continue-button").toggleClass("cp-backgroundcolor2"),this.$el.find(".cp-continue-button").toggleClass("uiDisabled"))},retrieveEditBankCurrencyDetails:function(){var t=$("#countryList").find(":selected").text(),n=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-Country");if(t!==n)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveEditBankCurrencySuccessHandler,this.retrieveEditBankCurrencyErrorHandler,e.localURLs.CURRENT_FX_RATE_CURRENCY_DETAILS,{},this);else{var r={},i={};i.action={},i.action.appName=e.constants.APP_NAME,i.action.criterion=e.constants.GLOBAL_EDIT_BANK,i.action.type=e.constants.GLOBAL_ADD_BANK_CURRENCIES,i.action.language=e.data.cpLanguageMapping.get("currentLanguage"),i.data={},i.data.countryCode=this.$el.find("#countryList").val(),r.inputRequest=i,e.root.common.networkingservice.postRequest(r,this.retrieveEditBankCurrencySuccessHandler,this.retrieveEditBankCurrencyErrorHandler,e.localURLs.CURRENT_FX_RATE_CURRENCY_DETAILS,{},this)}else $(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCurrency").addClass("hidden"),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankPayment").addClass("hidden"),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden")},retrieveEditBankCurrencySuccessHandler:function(t){t.successResponse?(e.data.cpCurrentFxRateCurrencyDetailsModel=new e.models.cpCurrentFxRateCurrencyDetailsModel,e.data.cpCurrentFxRateCurrencyDetailsModel.setResponse(t.successResponse),this.appendCurrencyDetails(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveEditBankCurrencyErrorHandler(t)},retrieveEditBankCurrencyErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveEditBankPaymentMethods:function(){var t=$("#currencyList").find(":selected").text(),n=$("#currencyList").val(),r=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency");if(t!==r||n!==r)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveEditBankPaymentMethodsSuccessHandler,this.retrieveEditBankPaymentMethodsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_PAYMENT_METHODS_JSON,{},this);else{var i={},s={};s.action={},s.action.appName=e.constants.APP_NAME,s.action.criterion=e.constants.GLOBAL_EDIT_BANK,s.action.type=e.constants.GLOBAL_PAYMENT_METHOD,s.action.language=e.data.cpLanguageMapping.get("currentLanguage"),s.data={},s.data.countryCode=this.$el.find("#countryList").val(),s.data.currencyCode=this.$el.find("#currencyList").val(),i.inputRequest=s,e.root.common.networkingservice.postRequest(i,this.retrieveEditBankPaymentMethodsSuccessHandler,this.retrieveEditBankPaymentMethodsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_PAYMENT_METHODS_JSON,{},this)}else this.$el.find("#paymentMethod").empty(),this.$el.find(".cpPaymentParent").empty(),this.$el.find("#cpGlobalAddBankPayment").empty(),$(".cpGlobalEditProfileView-input").find("#cpGlobalAddBankCountryFields").addClass("hidden")},retrieveEditBankPaymentMethodsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalPaymentMethodsModel=new e.models.cpGlobalPaymentMethodsModel,e.data.cpGlobalPaymentMethodsModel.setResponse(t.successResponse),this.appendPaymentMethods(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveEditBankPaymentMethodsErrorHandler(t)},retrieveEditBankPaymentMethodsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},retrieveEditBankCountryFields:function(){var t=$("#currencyList").find(":selected").text(),n=$("#paymentMethod").find(":selected").text(),r=$("#currencyList").val(),i=$("#paymentMethod").val(),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PymtCurrency"),o=e.data.cpLanguageMapping.getLabelForKey("ieft-field-label-PaymentMethod");if(t!==s&&n!==o||r!==s&&i!==o)if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveEditBankCountryFieldsSuccessHandler,this.retrieveEditBankCountryFieldsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRY_FIELDS_JSON,{},this);else{var u={},a={};a.action={},a.action.appName=e.constants.APP_NAME,a.action.criterion=e.constants.GLOBAL_EDIT_BANK,a.action.type=e.constants.GLOBAL_COUNTRY_FIELDS,a.action.language=e.data.cpLanguageMapping.get("currentLanguage"),a.data={},a.data.countryCode=this.$el.find("#countryList").val(),a.data.currencyCode=this.$el.find("#currencyList").val(),a.data.paymentMethod=this.$el.find("#paymentMethod").val(),u.inputRequest=a,e.root.common.networkingservice.postRequest(u,this.retrieveEditBankCountryFieldsSuccessHandler,this.retrieveEditBankCountryFieldsErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRY_FIELDS_JSON,{},this)}else{var f=this.$el.find("#cpGlobalAddBankCountryFields");f.empty()}},retrieveEditBankCountryFieldsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalEditRetrieveModel.setbeneAndBankFieldsDetails(t.successResponse),this.appendCountryFields(),e.root.utils.updateLanguageLabels(e,this)):t.errorResponse&&this.retrieveEditBankCountryFieldsErrorHandler(t)},retrieveEditBankCountriesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},editBankConfirm:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.editBankConfirmSuccessHandler,this.editBankConfirmErrorHandler,e.localURLs.GLOBAL_RECURRING_EDIT_JSON,{},this);else{var n={},r={};r.action={};var i=e.data.cpGlobalEditRetrieveModel.get("beneAndBankFields");r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_EDIT_BANK,r.action.type=e.constants.GLOBAL_ADD_BANK_CONFIRM,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={};var s=this.$el.find("#countryList").val(),o=this.$el.find("#currencyList").val(),u=this.$el.find("#paymentMethod").val();r.data.beneAndBankFields=[],r.data.beneAndBankFields.push({name:"Country",value:s}),r.data.beneAndBankFields.push({name:"PymtCurrency",value:o}),r.data.beneAndBankFields.push({name:"PaymentMethod",value:u});for(var a=0;a<i.length;a++){var f=i[a].name,l=i[a].secure;if(l!=="Y")var c=$("#"+f+"").val();if(l!=="N")var c=$("#"+f+"").attr("data-val");r.data.beneAndBankFields.push({name:f,value:c})}r.data.deviceID=e.root.utils.formatDeviceId(e.data.cpGlobalSelectedBankInfoModel.get("deviceID")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.editBankConfirmSuccessHandler,this.editBankConfirmErrorHandler,e.localURLs.GLOBAL_RECURRING_EDIT_JSON,{},this)}},editBankConfirmSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication||(e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication),e.data.cpMFAAuthentication.setResponse(t.successResponse);switch(t.successResponse.mfaAuthenticationCode){case e.constants.MFA_NONE:var n;n=e.data.cpLanguageMapping.getLabelForKey("cp.globalEditMessage"),e.root.common.Alertservice.showSuccessAlert(n,this.navigateNext,!1,!1,this);break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:e.constants.GLOBAL_SAVE_EDIT_BANK});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:e.constants.GLOBAL_SAVE_EDIT_BANK});break;default:}}else t.errorResponse&&this.editBankConfirmErrorHandler(t)},editBankConfirmErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorFields===undefined?"":t.errorResponse.errorFields,r=Object.keys(n);if(r.length==0){var i=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(i)}var s=e.data.cpGlobalEditRetrieveModel.get("beneAndBankFields");for(var o=0;o<s.length;o++){var u=s[o].name;this.$el.find("."+u+"").empty(),this.$el.find("#"+u+"").not("span").removeClass("cp-red-border").addClass("cp-globalBlue-border")}for(var a=0;a<n.length;a++){this.$el.find("#"+n[a].field+"").not("span").removeClass("cp-globalBlue-border").addClass("cp-red-border"),this.$el.find("."+n[a].field+"").empty();for(var f=0;f<t.errorResponse.errorFields[a].errorList.length;f++){var l=$("<span data-validateId="+n[a].field+' class= "cp-reg-instruction-text cp-form-error">'+n[a].errorList[f].error+"</span>");this.$el.find("."+n[a].field+"").append(l)}}if(r.length>0){var c=this.$el.find("#"+n[0].field+"");c&&c.length>0&&$(".cpEditProfileView").animate({scrollTop:c.offset().top},500)}}else e.root.common.Alertservice.showAlert(i)},showAlertMessage:function(t){e.root.common.Alertservice.showAlert(t),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")},navigateNext:function(){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var t=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})},navigateBankDetailsView:function(t){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var n=new e.views.cpGlobalSelectedBankInfoView({el:"#cp-menu-container"})}})}}),define("cp.views.cpGlobalSelectedBankInfoView",[],function(){return function(e){e.views.cpGlobalSelectedBankInfoView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-recurringTransfers-Link":"navigateGlobalRecurringTransfers","click .cp-addBank-link":"navigateAddBank","click .cp-oneTimeTransfer-Link":"populateSelectedBankDetails","click .cp-globalEditBank":"navigateGlobalEditBank","click .cp-deleteBank-link":"navigateToGlobalDelete"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalTransfer.bankDetail");$(".cp-menu-title").html(t),this.appendSelectedBankDetails()},appendSelectedBankDetails:function(){var t=e.data.cpGlobalSelectedBankInfoModel;this.$el.empty().append(e.templates.cpGlobalSelectedBankInfo({globalDetails:t}));var n=e.data.cpGlobalSelectedBankInfoModel.get("suspended");n!=="N"&&this.$el.find("#cp-selected-bankinfo-suspended-alert").empty().append('<div class="cp-global-alert-margin red wordWrap cp-language-mapping" data-translateidentifier="ieft-view-suspended-account">This account is not eligible for deposit</div>'),parentWrapper=this.$el.find("#cp-selected-bank-GlobalDetails");var r=e.data.cpGlobalSelectedBankInfoModel.get("beneAndBankFields"),i=e.data.cpLanguageMapping.getLabelForKey("ieft-field-group-BeneficiaryAndBankFieldGrouping"),s=e.data.cpLanguageMapping.getLabelForKey("ieft-field-group-bankDetails");for(var o=0;o<r.length;o++){var u=r[o];u.name=="accountHolderName"&&parentWrapper.append('<span class="cp-payment-header cp-list-header-text-color">'+i+"</span><br>"),u.name=="bankName"&&parentWrapper.append('<br><span class="cp-payment-header cp-list-header-text-color">'+s+"</span><br>"),u.secure!==undefined&&u.secure==="Y"&&(u.value=e.root.utils.maskCardNumber(u.value)),parentWrapper.append(e.templates.cpGlobalDetailedSelectedBankInfo({model:u}))}},navigateGlobalRecurringTransfers:function(t){var n=e.data.cpGlobalSelectedBankInfoModel;n.set("origin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),n.set("sourceOrigin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),e.data.cpGlobalTransferHistoryModel.set("cancelOrigin",""),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})},navigateAddBank:function(t){var n=e.data.cpGlobalSelectedBankInfoModel;n.set("screen",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalBankMFAView({el:"#cp-menu-container"})},populateSelectedBankDetails:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.populateSelectedBankDetailsSuccessHandler,this.populateSelectedBankDetailsErrorHandler,e.localURLs.GLOBAL_OTT_GET_FXRATE,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_OTT_USER_BANKS,r.action.type="getFXRate",r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.data={},r.data.deviceID=e.root.utils.formatDeviceId($(t.currentTarget).attr("id")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.populateSelectedBankDetailsSuccessHandler,this.populateSelectedBankDetailsErrorHandler,e.localURLs.GLOBAL_OTT_GET_FXRATE,{},this)}},populateSelectedBankDetailsSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpGlobalSelectedBankInfoModel;n.set("oneTimeTransferOrigin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),e.data.cpGlobalOTTGetFxRateModel=new e.models.cpGlobalOTTGetFxRateModel,e.data.cpGlobalOTTGetFxRateModel.setResponse(t.successResponse),this.navigateOneTimeTransfer(),e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.populateSelectedBankDetailsErrorHandler(t)},populateSelectedBankDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateOneTimeTransfer:function(t){var n=e.data.cpGlobalSelectedBankInfoModel;n.set("origin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalOTTUserBanksDetailsView({el:"#cp-menu-container"})},navigateGlobalEditBank:function(t){e.root.utils.destroyView(this);var n=e.data.cpGlobalTransferHistoryModel;n.set("edit","True"),e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var r=new e.views.cpGlobalBankMFAView({el:"#cp-menu-container"})},deleteSelectedBank:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.deleteSelectedBankSuccessHandler,this.deleteSelectedBankErrorHandler,e.localURLs.GLOBAL_RETRIEVE_DELETE_JSON,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.GLOBAL_DELETE_BANK,n.action.type=e.constants.GLOBAL_INITIATE_DELETE,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.deviceID=e.root.utils.formatDeviceId(e.data.cpGlobalSelectedBankInfoModel.get("deviceID")),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.deleteSelectedBankSuccessHandler,this.deleteSelectedBankErrorHandler,e.localURLs.GLOBAL_RETRIEVE_DELETE_JSON,{},this)}},deleteSelectedBankSuccessHandler:function(t){if(t.successResponse){var n=e.data.cpGlobalTransferHistoryModel,r=e.data.cpGlobalSelectedBankInfoModel;if(n.get("recurringTransfer")!==undefined&&n.get("recurringTransfer")!=="N"){n.set("cancelOrigin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),n.set("deleteOrigin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),r.set("recurringOrigin",e.constants.GLOBAL_SELECTED_BANK_DETAILS_TYPE),e.data.cpGlobalSelectedBankInfoModel.set("editRecurring",e.constants.GLOBAL_RECURRING_DELETE_BANK),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var i=new e.views.cpGlobalRecurringTransfersView({el:"#cp-menu-container"})}else if(n.get("recurringTransfer")!==undefined&&n.get("recurringTransfer")!=="Y"){e.root.utils.destroyView(this),$(".cp-menu-details-container").empty().append("<div id='cp-menu-container'></div>");var i=new e.views.cpGlobalBankDetailsView({el:"#cp-menu-container"})}e.root.utils.updateLanguageLabels(e,this)}else t.errorResponse&&this.deleteSelectedBankErrorHandler(t)},deleteSelectedBankErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateToGlobalDelete:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.globalBank.deleteMessage"),n="";e.root.common.Alertservice.showDeleteWarning(this,t,n,"",function(){this.deleteSelectedBank()},null,"",!1)}})}}),define("cp.views.cpGlobalBankMFAView",[],function(){return function(e){e.views.cpGlobalBankMFAView=CT.View.extend({initialize:function(){this.render()},events:{},render:function(){var t=e.data.cpGlobalTransferHistoryModel;t.get("edit")=="True"?this.navigateGlobalEditBank():this.navigateGlobalAddBank()},navigateGlobalAddBank:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveAddBankCountriesSuccessHandler,this.retrieveAddBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_ADD_BANK,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.action.type=e.constants.GLOBAL_MFA,n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.retrieveAddBankCountriesSuccessHandler,this.retrieveAddBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this)}},retrieveAddBankCountriesSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication,e.data.cpMFAAuthentication.setResponse(t.successResponse);switch(t.successResponse.mfaAuthenticationCode){case e.constants.MFA_NONE:this.globalAddBankCountryList();break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:e.constants.GLOBAL_ADD_BANK_COUNTRIES});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:e.constants.GLOBAL_ADD_BANK_COUNTRIES});break;default:}}else t.errorResponse&&this.retrieveAddBankCountriesErrorHandler(t)},retrieveAddBankCountriesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},globalAddBankCountryList:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.addBankCountriesSuccessHandler,this.addBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_ADD_BANK,r.action.type=e.constants.GLOBAL_ADD_BANK_COUNTRIES,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.addBankCountriesSuccessHandler,this.addBankCountriesErrorHandler,e.localURLs.GLOBAL_ADD_BANK_COUNTRIES_JSON,{},this)}},addBankCountriesSuccessHandler:function(t){t.successResponse?(undefined!=e.data.cpCurrentFxRateCountryDetailsModel&&e.data.cpCurrentFxRateCountryDetailsModel.get("origin")==e.constants.GLOBAL_FX_RECURRING?(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.set("origin",e.constants.GLOBAL_FX_RECURRING),e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),e.data.cpCurrentFxRateCountryDetailsModel.setAddBankDetails(t.successResponse)):(e.data.cpCurrentFxRateCountryDetailsModel=new e.models.cpCurrentFxRateCountryDetailsModel,e.data.cpCurrentFxRateCountryDetailsModel.setResponse(t.successResponse),e.data.cpCurrentFxRateCountryDetailsModel.setAddBankDetails(t.successResponse)),e.root.utils.navigateView(this,"cpGlobalAddBankView",e)):t.errorResponse&&this.addBankCountriesErrorHandler(t)},addBankCountriesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},navigateGlobalEditBank:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveEditBankCountriesSuccessHandler,this.retrieveEditBankCountriesErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this);else{var n={},r={};r.action={},r.data={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_EDIT_BANK,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.action.type=e.constants.GLOBAL_MFA,n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.retrieveEditBankCountriesSuccessHandler,this.retrieveEditBankCountriesErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this)}},retrieveEditBankCountriesSuccessHandler:function(t){if(t.successResponse){e.data.cpMFAAuthentication=new e.models.cpMFAAuthentication,e.data.cpMFAAuthentication.setResponse(t.successResponse);switch(t.successResponse.mfaAuthenticationCode){case e.constants.MFA_NONE:this.globalEditBankLoadDetails();break;case e.constants.MFA_ONETIMEPASSWORD:e.root.utils.navigateView(this,"cpMFAOTPView",e,{type:e.constants.GLOBAL_EDIT_LOAD_DETAILS});break;case e.constants.MFA_CHALLENGE_QUESTION:e.root.utils.navigateView(this,"cpMFAChallengeQuestionView",e,{type:e.constants.GLOBAL_EDIT_LOAD_DETAILS});break;default:}}else t.errorResponse&&this.retrieveEditBankCountriesErrorHandler(t)},retrieveEditBankCountriesErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},globalEditBankLoadDetails:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.editBankLoadDetailsSuccessHandler,this.editBankLoadDetailsErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this);else{var n={},r={};r.action={},r.data={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.GLOBAL_EDIT_BANK,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),r.action.type=e.constants.GLOBAL_EDIT_LOAD_DETAILS,r.data.deviceID=e.root.utils.formatDeviceId(e.data.cpGlobalSelectedBankInfoModel.get("deviceID")),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.editBankLoadDetailsSuccessHandler,this.editBankLoadDetailsErrorHandler,e.localURLs.GLOBAL_EDIT_RETRIEVE_JSON,{},this)}},editBankLoadDetailsSuccessHandler:function(t){t.successResponse?(e.data.cpGlobalEditRetrieveModel=new e.models.cpGlobalEditRetrieveModel,e.data.cpGlobalEditRetrieveModel.setResponse(t.successResponse),e.data.cpGlobalEditRetrieveModel.setbeneAndBankFieldsDetails(t.successResponse),e.root.utils.navigateView(this,"cpGlobalEditView",e)):t.errorResponse&&this.editBankLoadDetailsErrorHandler(t)},editBankLoadDetailsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}}})}}),define("cp.views.cpCardActivationLandingPageView",[],function(){return function(e){e.views.cpCardActivationLandingPageView=CT.View.extend({initialize:function(){this.render(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-validate-security-code":"validateCardNumberAndSecurityCode","click .cp-cancel-button":"performCancel","focus .cp-cardnumber":"focusCardDetails","blur .cp-cardnumber":"blurCardDetails"},blurCardDetails:function(t){var n=$(t.currentTarget).val(),r=e.root.utils.trimText(n);$(t.currentTarget).attr("data-val",r);var i=e.root.utils.maskCardNumber(r);i!==undefined&&i!==""&&$(t.currentTarget).val(i)},focusCardDetails:function(e){$(e.currentTarget).val($(e.currentTarget).attr("data-val"))},render:function(){this.$el.empty().append(e.templates.cpCardActivationLandingPageView());var t=e.data.cpLanguageMapping.getLabelForKey("cp.footerCopyRight"),n=e.data.cpLanguageMapping.getLabelForKey("cp.footerWireCard"),r=new Date,i=r.getFullYear();this.$el.find(".cp-footer-row2").html(t+" "+i+" "+n);var s=document.documentElement.clientHeight,o=document.documentElement.clientWidth;$(window).resize(function(){document.documentElement.clientHeight==o&&document.documentElement.clientWidth==s&&(s=document.documentElement.clientHeight,o=document.documentElement.clientWidth),document.documentElement.clientHeight<s})},validateCardNumberAndSecurityCode:function(t){$(document.activeElement).blur();var n=$(".cp-cardnumber").attr("data-val"),r=e.root.utils.trimText(this.$el.find(".cp-security").val());$(".cp-validate-security-code").addClass("cp-button-selected");if(e.root.utils.isEmptyString(n)&&e.root.utils.isEmptyString(r)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var s=e.root.utils.isEmptyString(n);if(s){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!$.isNumeric(n)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(n),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n.length!==16){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(n),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}s=e.root.utils.isEmptyString(r);if(s){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!$.isNumeric(r)){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(r.length!==3){var i=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(i),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}this.checkCardActivationStatus()},checkCardActivationStatus:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.checkCardActivationStatusSuccessHandler,this.checkCardActivationStatusErrorHandler,e.localURLs.CHECK_CARD_ACTIVATION_STATUS,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CHECK_CARD_ACTIVATION_STATUS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},n.data.cardNumber=e.root.utils.trimText(this.$el.find(".cp-cardnumber").attr("data-val")),n.data.securitycode=e.root.utils.trimText(this.$el.find(".cp-security").val()),t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.checkCardActivationStatusSuccessHandler,this.checkCardActivationStatusErrorHandler,e.localURLs.CHECK_CARD_ACTIVATION_STATUS,{},this)}},checkCardActivationStatusSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.cardActivated;n!==""&&n!=="Y"?(this.options.parent.resetAllViewContainers(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.CARD_AUTHENTICATION,origin:e.constants.CARD_ACTIVATION,disableMenu:!0})):n!==""&&n!=="N"&&(this.options.parent.resetAllViewContainers(this),$("#cp-container").append("<div id='main-container'></div>"),new e.views.cpMenuView({el:"#main-container",type:"cp-Menu-Loader",context:e.constants.CARD_ACTIVATED,origin:e.constants.CARD_ACTIVATION,disableMenu:!0}))}else t.errorResponse&&this.checkCardActivationStatusErrorHandler(t)},checkCardActivationStatusErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected")},performCancel:function(e){$(e.target).addClass("cp-button-selected"),this.$el.find(".cp-cardnumber").val(""),this.$el.find(".cp-cardnumber").attr("data-val",""),this.$el.find(".cp-security").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.options.parent.dismissModalView(this,!0)}})}}),define("cp.views.cpCardAuthenticationView",[],function(){return function(e){e.views.cpCardAuthenticationView=CT.View.extend({initialize:function(){this.retrieveCardAuthSettings()},events:{"click .cp-validate-authInfo":"validateAuthInfo","click .cp-cancel-button-postal":"navigateToLandingPage"},render:function(){var t=e.data.cpCardAuthenticationModel,n=e.data.cpLanguageMapping.getLabelForKey("cp.login.activation");$(".cp-menu-title").html(n),t.get("authSettingsDisplay").noAddtionalAuth!==""&&t.get("authSettingsDisplay").noAddtionalAuth==="Y"&&e.root.utils.navigateView(this,"cpCardActivationNewPinView",e,{}),this.$el.empty().append(e.templates.cpCardAuthenticationView({authSettings:t}));for(var r=1;r<=31;r++)this.$el.find("#dayUpdate").append($("<option />").val(r).html(r))},retrieveCardAuthSettings:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveCardAuthSettingsSuccessHandler,this.retrieveCardAuthSettingsErrorHandler,e.localURLs.CARD_AUTH_INFO_SETTINGS,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.RETRIEVE_CARD_AUTH_SETTINGS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.retrieveCardAuthSettingsSuccessHandler,this.retrieveCardAuthSettingsErrorHandler,e.localURLs.CARD_AUTH_INFO_SETTINGS,{},this)}},retrieveCardAuthSettingsSuccessHandler:function(t){if(t.successResponse){e.data.cpCardAuthenticationModel||(e.data.cpCardAuthenticationModel=new e.models.cpCardAuthenticationModel),e.data.cpCardAuthenticationModel.setResponse(t.successResponse),this.render(),e.root.utils.updateLanguageLabels(e,this);var n=e.data.cpCardAuthenticationModel;n.get("authSettingsDisplay").puid!==""&&n.get("authSettingsDisplay").puid==="Y"&&(this.$el.find(".cp-puid-value").attr("placeholder",n.get("authSettingsDisplay").puidDisplayValue?n.get("authSettingsDisplay").puidDisplayValue:""),this.$el.find(".cp-puid-message").append(n.get("authSettingsDisplay").puidDisplayValue+"."))}else t.errorResponse&&this.retrieveCardAuthSettingsErrorHandler(t)},retrieveCardAuthSettingsErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},validateAuthInfo:function(t){$(document.activeElement).blur(),$(t.target).addClass("cp-button-selected");var n=e.data.cpCardAuthenticationModel;if(n.get("authSettingsDisplay").ssn!=="N"){var r=e.root.utils.trimText(this.$el.find(".cp-ssn-code").val());this.ssn=r;var i=e.root.utils.isEmptyString(r);if(i){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-ssn-code").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!i&&(!$.isNumeric(r)||r.length!==4)){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-ssn-code").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(n.get("authSettingsDisplay").dob!=="N"){var o=this.$el.find("#dayUpdate option:selected").val(),u=this.$el.find("#monthUpdate option:selected").val(),a=this.$el.find("#yearUpdate option:selected").val(),f=e.root.utils.validateDate(u,a,o);if(f!=1||o==""||u==""||a==""){var l=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(l),this.$el.find("#dayUpdate").val(""),this.$el.find("#monthUpdate").val(""),this.$el.find("#yearUpdate").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(n.get("authSettingsDisplay").postalCode!=="N"){var c=e.root.utils.trimText(this.$el.find(".cp-postal-code").val());this.postalCode=c;var i=e.root.utils.isEmptyString(c);if(i){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-postal-code").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!i&&c.length<5){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-postal-code").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(n.get("authSettingsDisplay").mobilePhone!=="N"){var h=e.root.utils.trimText(this.$el.find(".cp-mobile-phoneNumber").val());i=e.root.utils.isEmptyString(h);if(i){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(!i&&!$.isNumeric(h)||h.length!==10){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find(".cp-mobile-phoneNumber").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(n.get("authSettingsDisplay").puid!=="N"){var p=e.root.utils.trimText(this.$el.find(".cp-puid-value").val());i=e.root.utils.isEmptyString(p);if(i){var s=e.data.cpLanguageMapping.getLabelForKey("cp.express.error.text.info");e.root.common.Alertservice.showAlert(s),this.$el.find(".cp-puid-value").val(""),this.$el.find(".cp-puid-value").attr("data-val",""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}}if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.validateAuthInfoSuccessHandler,this.validateAuthInfoErrorHandler,e.localURLs.CHECK_CARD_ACTIVATION_STATUS,{},this);else{var d={},v={};v.action={},v.action.appName=e.constants.APP_NAME,v.action.criterion=e.constants.VALIDATE_CARD_AUTH_INFO,v.action.language=e.data.cpLanguageMapping.get("currentLanguage"),v.data={},n.get("authSettingsDisplay").ssn!=="N"&&(v.data.ssn=this.$el.find(".cp-ssn-code").val()?this.$el.find(".cp-ssn-code").val():""),n.get("authSettingsDisplay").dob!=="N"&&(v.data.dob={},v.data.dob.month=this.$el.find("#monthUpdate option:selected").val(),v.data.dob.day=this.$el.find("#dayUpdate option:selected").val(),v.data.dob.year=this.$el.find("#yearUpdate option:selected").val()),n.get("authSettingsDisplay").postalCode!=="N"&&(v.data.postalCode=this.$el.find(".cp-postal-code").val()?this.$el.find(".cp-postal-code").val():""),n.get("authSettingsDisplay").mobilePhone!=="N"&&(v.data.mobilePhone=this.$el.find(".cp-mobile-phoneNumber").val()?this.$el.find(".cp-mobile-phoneNumber").val():""),n.get("authSettingsDisplay").puid!=="N"&&(v.data.puid=this.$el.find(".cp-puid-value").val()?this.$el.find(".cp-puid-value").val():""),d.inputRequest=v,e.root.common.networkingservice.postRequest(d,this.validateAuthInfoSuccessHandler,this.validateAuthInfoErrorHandler,e.localURLs.CHECK_CARD_ACTIVATION_STATUS,{},this)}},navigateToLandingPage:function(t){var n=new e.views.cpLoginView({el:"#main-container"});n.$el.hide(),setTimeout(function(){n.presentModalView(e.views.cpCardActivationLandingPageView,{},!1,n.modalDismissed)},300)},validateAuthInfoSuccessHandler:function(t){t.successResponse?t.successResponse.status!==""&&t.successResponse.status===e.constants.SUCCESS&&e.root.utils.navigateView(this,"cpCardActivationNewPinView",e,{type:e.constants.CARD_ACTIVATION_SUCCESS}):this.validateAuthInfoErrorHandler(t)},validateAuthInfoErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected"),this.$el.find(".cp-postal-code").val(""),this.$el.find(".cp-ssn-code").val(""),this.$el.find(".cp-mobile-phoneNumber").val(""),this.$el.find("#dayUpdate").val(""),this.$el.find("#monthUpdate").val(""),this.$el.find("#yearUpdate").val(""),this.$el.find(".cp-puid-value").val("")}})}}),define("cp.views.cpCardActivationNewPinView",[],function(){return function(e){e.views.cpCardActivationNewPinView=CT.View.extend({initialize:function(){this.retrieveUserPinStatus(),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-continue-button":"submitNewPin","click .cp-cancel-button":"performCancel","keyup #newPin,#confirmNewPin":"enableButton"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.login.activation");$(".cp-menu-title").html(t),this.$el.empty().append(e.templates.cpCardActivationNewPinView())},retrieveUserPinStatus:function(){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.retrieveUserPinStatusSuccessHandler,this.retrieveUserPinStatusErrorHandler,e.localURLs.CHECK_ACTIVATION_USER_PIN_STATUS,{},this);else{var t={},n={};n.action={},n.action.appName=e.constants.APP_NAME,n.action.criterion=e.constants.CHECK_ACTIVATION_USER_PIN_STATUS,n.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.data={},t.inputRequest=n,e.root.common.networkingservice.postRequest(t,this.retrieveUserPinStatusSuccessHandler,this.retrieveUserPinStatusErrorHandler,e.localURLs.CHECK_ACTIVATION_USER_PIN_STATUS,{},this)}},retrieveUserPinStatusSuccessHandler:function(t){if(t.successResponse)t.successResponse.userPinStatus!==""&&t.successResponse.userPinStatus!=="Y"?this.render():t.successResponse.userPinStatus!==""&&t.successResponse.userPinStatus!=="N"&&e.root.utils.navigateView(this,"cpCardActivationSuccessView",e,{type:e.constants.CARD_PIN_SETUP_SUCCESS}),e.root.utils.updateLanguageLabels(e,this);else if(t.errorResponse){var n=e.data.cpCardAuthenticationModel.get("authSettingsDisplay");if(n.noAddtionalAuth!==""&&n.noAddtionalAuth!=="Y")e.root.utils.navigateView(this,"cpCardAuthenticationView",e,{});else{var r=new e.views.cpLoginView({el:"#main-container"});r.$el.hide(),setTimeout(function(){r.presentModalView(e.views.cpCardActivationLandingPageView,{},!1,r.modalDismissed)},300)}this.retrieveUserPinStatusErrorHandler(t)}},retrieveUserPinStatusErrorHandler:function(t){if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},enableButton:function(e){this.$el.find("#newPin").val()!==""&&this.$el.find("#confirmNewPin").val()!==""?this.$el.find(".cp-continue-button").removeClass("uiDisabled"):this.$el.find(".cp-continue-button").addClass("uiDisabled")},submitNewPin:function(t){$(document.activeElement).blur(),t.preventDefault(),t.stopPropagation(),$(t.currentTarget).addClass("cp-button-selected");var n=$("#newPin").val(),r=$("#confirmNewPin").val(),i=e.root.utils.isEmptyString(n);if(!($.isNumeric(n)||n<4)){var s=e.data.cpLanguageMapping.getLabelForKey("cp.pinreset.pinMismatch");e.root.common.Alertservice.showAlert(s),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}var i=e.root.utils.isEmptyString(r);if(!($.isNumeric(r)||r<4)){var s=e.data.cpLanguageMapping.getLabelForKey("cp.pinreset.pinMismatch");e.root.common.Alertservice.showAlert(s),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val(""),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}if(n!=r){var s=e.data.cpLanguageMapping.getLabelForKey("cp.pinreset.pinMismatch");e.root.common.Alertservice.showAlert(s),this.$el.find('div[data-inputType="button"]').removeClass("cp-button-selected");return}$(".loaderOverlay").css("display","block");if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.onPinSubmitSuccessHandler,this.onPinSubmitErrorHandler,e.localURLs.SUBMITNEWPIN_JSON,{},this);else{var o={},u={};u.action={},u.action.appName=e.constants.APP_NAME,u.action.criterion=e.constants.SUBMIT_ACTIVATION_PIN,u.data={},u.data.pin=this.$el.find("#newPin").val(),u.action.language=e.data.cpLanguageMapping.get("currentLanguage"),o.inputRequest=u,e.root.common.networkingservice.postRequest(o,this.onPinSubmitSuccessHandler,this.onPinSubmitErrorHandler,e.localURLs.SUBMITNEWPIN_JSON,{},this)}},onPinSubmitSuccessHandler:function(t){t.successResponse?e.root.utils.navigateView(this,"cpCardActivationSuccessView",e,{type:e.constants.CARD_PIN_SETUP_SUCCESS}):t.errorResponse&&this.onPinSubmitErrorHandler(t)},onPinSubmitErrorHandler:function(t){$(".loaderOverlay").css("display","none"),this.$el.find(".cp-continue-button").removeClass("cp-button-selected");if(t.errorResponse.errorCode===e.constants.TAMPERED_RESPONSE_CODE){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu");var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAutoFadeAlert(n);return}if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n),this.$el.find("#newPin").val(""),this.$el.find("#confirmNewPin").val("")}},performCancel:function(t){var n=e.data.cpLanguageMapping.getLabelForKey("activate.pin.cancel"),r="";e.root.common.Alertservice.showDeleteWarning(this,n,r,"",function(){this.navigateToLandingPage()},null,"",!1)},navigateToLandingPage:function(t){var n=new e.views.cpLoginView({el:"#main-container"});n.$el.hide(),setTimeout(function(){n.presentModalView(e.views.cpCardActivationLandingPageView,{},!1,n.modalDismissed)},300)}})}}),define("cp.views.cpCardActivationSuccessView",[],function(){return function(e){e.views.cpCardActivationSuccessView=CT.View.extend({initialize:function(){this.render(),e.data.cpRegistrationConfiguration||(e.data.cpRegistrationConfiguration=new e.models.cpRegistrationConfiguration),this.listenTo(e.data.cpRegistrationConfiguration,"cp:registrationSettingsLoaded",this.onSettingsLoadSuccessHandler),e.root.utils.updateLanguageLabels(e,this)},events:{"click .cp-activation-register-button":"navigateToUserRegistration","click .cp-activation-login-button":"navigateToLoginHome"},render:function(){var t=e.data.cpLanguageMapping.getLabelForKey("cp.login.activation");$(".cp-menu-title").html(t),this.options.type!==""&&this.options.type===e.constants.CARD_ACTIVATED?this.$el.empty().append(e.templates.cpActivatedCardView()):this.options.context.type!==""&&this.options.context.type===e.constants.CARD_PIN_SETUP_SUCCESS&&this.$el.empty().append(e.templates.cpCardActivationSuccessView())},navigateToUserRegistration:function(t){if(cpEnv_Web.datasource==="MOCKJSON")e.root.common.networkingservice.getRequest(this.checkCardRegistrationStatusSuccessHandler,this.checkCardRegistrationStatusErrorHandler,e.localURLs.CHECK_CARD_ACTIVATION_STATUS,{},this);else{var n={},r={};r.action={},r.action.appName=e.constants.APP_NAME,r.action.criterion=e.constants.CHECK_CARD_REGISTRATION_STATUS,r.action.language=e.data.cpLanguageMapping.get("currentLanguage"),n.inputRequest=r,e.root.common.networkingservice.postRequest(n,this.checkCardRegistrationStatusSuccessHandler,this.checkCardRegistrationStatusErrorHandler,e.localURLs.CHECK_CARD_ACTIVATION_STATUS,{},this)}},checkCardRegistrationStatusSuccessHandler:function(t){if(t.successResponse){var n=t.successResponse.status;t.successResponse.status!==""&&t.successResponse.status===e.constants.SUCCESS&&(e.data.cpRegistrationConfiguration.set("type",e.constants.REGISTER),e.data.cpRegistrationConfiguration.set("cardActivationOrigin",e.constants.CARD_ACTIVATION_ORIGIN),e.data.cpRegistrationConfiguration.retrieveRegistrationFlagForContext(e.constants.REGISTER),e.data.cpRegistrationConfiguration.set("cardActivationOrigin",""))}else t.errorResponse&&this.checkCardRegistrationStatusErrorHandler(t)},checkCardRegistrationStatusErrorHandler:function(t){if(t.errorResponse){var n=t.errorResponse.errorMessage===undefined?"":t.errorResponse.errorMessage;e.root.common.Alertservice.showAlert(n)}},onSettingsLoadSuccessHandler:function(){e.root.utils.destroyView(this),e.root.eventBus.trigger("cp:loadView",e.constants.REGISTER_ACTIVATED_CARD,e.constants.REGISTER)},navigateToLoginHome:function(t){e.root.eventBus.trigger("loadMenuItem","cp-logout-Menu")}})}}),define("./client/cp/modules/cpMain",function(){});